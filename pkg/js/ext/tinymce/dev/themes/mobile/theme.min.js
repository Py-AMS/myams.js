!function(){"use strict";var n=function(){return(n=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function t(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]])}return e}function e(n,t,e){if(e||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return n.concat(r||Array.prototype.slice.call(t))}var r=function(n){return function(t){return function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t}(t)===n}},o=function(n){return function(t){return typeof t===n}},i=function(n){return function(t){return n===t}},u=r("string"),c=r("object"),a=r("array"),f=i(null),s=o("boolean"),l=i(void 0),d=function(n){return!function(n){return null==n}(n)},m=o("function"),g=o("number"),p=function(){},v=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(t.apply(null,e))}},h=function(n){return function(){return n}},b=function(n){return n},y=function(n,t){return n===t};function x(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.concat(e);return n.apply(null,o)}}var w,S,O=function(n){return function(t){return!n(t)}},k=function(n){return function(){throw new Error(n)}},T=function(n){return n()},C=h(!1),E=h(!0),D=function(){return M},M={fold:function(n,t){return n()},isSome:C,isNone:E,getOr:S=b,getOrThunk:w=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:h(null),getOrUndefined:h(void 0),or:S,orThunk:w,map:D,each:p,bind:D,exists:C,forall:E,filter:function(){return D()},toArray:function(){return[]},toString:h("none()")},_=function(n){var t=h(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},isSome:E,isNone:C,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return _(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:M},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},R={some:_,none:D,from:function(n){return null==n?M:_(n)}},F=function(n){var t,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,t=n.apply(null,r)),t}},I=Array.prototype.slice,V=Array.prototype.indexOf,B=Array.prototype.push,A=function(n,t){return function(n,t){return V.call(n,t)}(n,t)>-1},N=function(n,t){for(var e=0,r=n.length;e<r;e++){if(t(n[e],e))return!0}return!1},H=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o)}return r},P=function(n,t){for(var e=0,r=n.length;e<r;e++){t(n[e],e)}},z=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var i=n[r];t(i,r)&&e.push(i)}return e},j=function(n,t,e){return function(n,t){for(var e=n.length-1;e>=0;e--){t(n[e],e)}}(n,(function(n,r){e=t(e,n,r)})),e},L=function(n,t,e){return P(n,(function(n,r){e=t(e,n,r)})),e},$=function(n,t){return function(n,t,e){for(var r=0,o=n.length;r<o;r++){var i=n[r];if(t(i,r))return R.some(i);if(e(i,r))break}return R.none()}(n,t,C)},G=function(n,t){for(var e=0,r=n.length;e<r;e++){if(t(n[e],e))return R.some(e)}return R.none()},W=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!a(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);B.apply(t,n[e])}return t},U=function(n,t){return W(H(n,t))},q=function(n,t){for(var e=0,r=n.length;e<r;++e){if(!0!==t(n[e],e))return!1}return!0},X=function(n){var t=I.call(n,0);return t.reverse(),t},Y=function(n,t){return z(n,(function(n){return!A(t,n)}))},K=function(n){return[n]},J=function(n){return function(n,t){return t>=0&&t<n.length?R.some(n[t]):R.none()}(n,0)},Q=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return R.none()},Z=function(){return nn(0,0)},nn=function(n,t){return{major:n,minor:t}},tn={nu:nn,detect:function(n,t){var e=String(t).toLowerCase();return 0===n.length?Z():function(n,t){var e=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}}(n,t);if(!e)return{major:0,minor:0};var r=function(n){return Number(t.replace(e,"$"+n))};return nn(r(1),r(2))}(n,e)},unknown:Z},en=function(n,t){var e=String(t).toLowerCase();return $(n,(function(n){return n.search(e)}))},rn=function(n,t){return-1!==n.indexOf(t)},on=function(n){return function(t){return t.replace(n,"")}}(/^\s+|\s+$/g),un=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,cn=function(n){return function(t){return rn(t,n)}},an=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return rn(n,"edge/")&&rn(n,"chrome")&&rn(n,"safari")&&rn(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,un],search:function(n){return rn(n,"chrome")&&!rn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return rn(n,"msie")||rn(n,"trident")}},{name:"Opera",versionRegexes:[un,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:cn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:cn("firefox")},{name:"Safari",versionRegexes:[un,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(rn(n,"safari")||rn(n,"mobile/"))&&rn(n,"applewebkit")}}],fn=[{name:"Windows",search:cn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return rn(n,"iphone")||rn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:cn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:cn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:cn("linux"),versionRegexes:[]},{name:"Solaris",search:cn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:cn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:cn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],sn={browsers:h(an),oses:h(fn)},ln=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isEdge:r("Edge"),isChrome:r("Chrome"),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r("Firefox"),isSafari:r("Safari")}},dn={unknown:function(){return ln({current:void 0,version:tn.unknown()})},nu:ln,edge:h("Edge"),chrome:h("Chrome"),ie:h("IE"),opera:h("Opera"),firefox:h("Firefox"),safari:h("Safari")},mn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isWindows:r("Windows"),isiOS:r("iOS"),isAndroid:r("Android"),isOSX:r("OSX"),isLinux:r("Linux"),isSolaris:r("Solaris"),isFreeBSD:r("FreeBSD"),isChromeOS:r("ChromeOS")}},gn={unknown:function(){return mn({current:void 0,version:tn.unknown()})},nu:mn,windows:h("Windows"),ios:h("iOS"),android:h("Android"),linux:h("Linux"),osx:h("OSX"),solaris:h("Solaris"),freebsd:h("FreeBSD"),chromeos:h("ChromeOS")},pn=function(n,t,e){var r=sn.browsers(),o=sn.oses(),i=t.bind((function(n){return function(n,t){return Q(t.brands,(function(t){var e=t.brand.toLowerCase();return $(n,(function(n){var t;return e===(null===(t=n.brand)||void 0===t?void 0:t.toLowerCase())})).map((function(n){return{current:n.name,version:tn.nu(parseInt(t.version,10),0)}}))}))}(r,n)})).orThunk((function(){return function(n,t){return en(n,t).map((function(n){var e=tn.detect(n.versionRegexes,t);return{current:n.name,version:e}}))}(r,n)})).fold(dn.unknown,dn.nu),u=function(n,t){return en(n,t).map((function(n){var e=tn.detect(n.versionRegexes,t);return{current:n.name,version:e}}))}(o,n).fold(gn.unknown,gn.nu),c=function(n,t,e,r){var o=n.isiOS()&&!0===/ipad/i.test(e),i=n.isiOS()&&!o,u=n.isiOS()||n.isAndroid(),c=u||r("(pointer:coarse)"),a=o||!i&&u&&r("(min-device-width:768px)"),f=i||u&&!a,s=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(e),l=!f&&!a&&!s;return{isiPad:h(o),isiPhone:h(i),isTablet:h(a),isPhone:h(f),isTouch:h(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:h(s),isDesktop:h(l)}}(u,i,n,e);return{browser:i,os:u,deviceType:c}},vn=function(n){return window.matchMedia(n).matches},hn=F((function(){return pn(navigator.userAgent,R.from(navigator.userAgentData),vn)})),bn=function(){return hn()},yn=h,xn=yn("touchstart"),wn=yn("touchmove"),Sn=yn("touchend"),On=yn("mousedown"),kn=yn("mousemove"),Tn=yn("mouseup"),Cn=yn("mouseover"),En=yn("keydown"),Dn=yn("keyup"),Mn=yn("input"),_n=yn("change"),Rn=yn("click"),Fn=yn("transitionend"),In=yn("selectstart"),Vn=function(n){return h("alloy."+n)},Bn={tap:Vn("tap")},An=Vn("focus"),Nn=Vn("blur.post"),Hn=Vn("paste.post"),Pn=Vn("receive"),zn=Vn("execute"),jn=Vn("focus.item"),Ln=Bn.tap,$n=Vn("longpress"),Gn=Vn("system.init"),Wn=Vn("system.attached"),Un=Vn("system.detached"),qn=Vn("focusmanager.shifted"),Xn=Vn("highlight"),Yn=Vn("dehighlight"),Kn=function(n,t){nt(n,n.element,t,{})},Jn=function(n,t,e){nt(n,n.element,t,e)},Qn=function(n){Kn(n,zn())},Zn=function(n,t,e){nt(n,t,e,{})},nt=function(t,e,r,o){var i=n({target:e},o);t.getSystem().triggerEvent(r,e,i)},tt=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}},et={fromHtml:function(n,t){var e=(t||document).createElement("div");if(e.innerHTML=n,!e.hasChildNodes()||e.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return tt(e.childNodes[0])},fromTag:function(n,t){var e=(t||document).createElement(n);return tt(e)},fromText:function(n,t){var e=(t||document).createTextNode(n);return tt(e)},fromDom:tt,fromPoint:function(n,t,e){return R.from(n.dom.elementFromPoint(t,e)).map(tt)}},rt=function(n,t){var e=n.dom;if(1!==e.nodeType)return!1;var r=e;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},ot=function(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount},it=function(n,t){var e=void 0===t?document:t.dom;return ot(e)?[]:H(e.querySelectorAll(n),et.fromDom)},ut=function(n,t){var e=void 0===t?document:t.dom;return ot(e)?R.none():R.from(e.querySelector(n)).map(et.fromDom)},ct=function(n,t){return n.dom===t.dom};"undefined"!=typeof window?window:Function("return this;")();var at,ft=function(n){return n.dom.nodeName.toLowerCase()},st=function(n){return function(t){return function(n){return n.dom.nodeType}(t)===n}},lt=st(1),dt=st(3),mt=st(9),gt=st(11),pt=function(n){return et.fromDom(n.dom.ownerDocument)},vt=function(n){return mt(n)?n:pt(n)},ht=function(n){return R.from(n.dom.parentNode).map(et.fromDom)},bt=function(n){return H(n.dom.childNodes,et.fromDom)},yt=function(n,t){var e=n.dom.childNodes;return R.from(e[t]).map(et.fromDom)},xt=function(n,t){ht(n).each((function(e){e.dom.insertBefore(t.dom,n.dom)}))},wt=function(n,t){(function(n){return R.from(n.dom.nextSibling).map(et.fromDom)})(n).fold((function(){ht(n).each((function(n){Ot(n,t)}))}),(function(n){xt(n,t)}))},St=function(n,t){(function(n){return yt(n,0)})(n).fold((function(){Ot(n,t)}),(function(e){n.dom.insertBefore(t.dom,e.dom)}))},Ot=function(n,t){n.dom.appendChild(t.dom)},kt=function(n,t){P(t,(function(t){Ot(n,t)}))},Tt=function(n){n.dom.textContent="",P(bt(n),(function(n){Ct(n)}))},Ct=function(n){var t=n.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Et=function(n){return gt(n)&&d(n.dom.host)},Dt=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode),Mt=h(Dt),_t=Dt?function(n){return et.fromDom(n.dom.getRootNode())}:vt,Rt=function(n){return et.fromDom(n.dom.host)},Ft=function(n){return d(n.dom.shadowRoot)},It=function(n){var t=dt(n)?n.dom.parentNode:n.dom;if(null==t||null===t.ownerDocument)return!1;var e,r,o=t.ownerDocument;return function(n){var t=_t(n);return Et(t)?R.some(t):R.none()}(et.fromDom(t)).fold((function(){return o.body.contains(t)}),(e=It,r=Rt,function(n){return e(r(n))}))},Vt=function(){return Bt(et.fromDom(document))},Bt=function(n){var t=n.dom.body;if(null==t)throw new Error("Body is not available yet");return et.fromDom(t)},At=function(n){Kn(n,Un());var t=n.components();P(t,At)},Nt=function(n){var t=n.components();P(t,Nt),Kn(n,Wn())},Ht=function(n,t){Ot(n.element,t.element)},Pt=function(n,t){var e=n.components();!function(n){P(n.components(),(function(n){return Ct(n.element)})),Tt(n.element),n.syncComponents()}(n);var r=Y(e,t);P(r,(function(t){At(t),n.getSystem().removeFromWorld(t)})),P(t,(function(t){t.getSystem().isConnected()?Ht(n,t):(n.getSystem().addToWorld(t),Ht(n,t),It(n.element)&&Nt(t)),n.syncComponents()}))},zt=function(n,t,e){n.getSystem().addToWorld(t),e(n.element,t.element),It(n.element)&&Nt(t),n.syncComponents()},jt=function(n){var t=ht(n.element).bind((function(t){return n.getSystem().getByDom(t).toOptional()}));!function(n){At(n),Ct(n.element),n.getSystem().removeFromWorld(n)}(n),t.each((function(n){n.syncComponents()}))},Lt=function(n,t,e){e(n,t.element);var r=bt(t.element);P(r,(function(n){t.getByDom(n).each(Nt)}))},$t=Object.keys,Gt=Object.hasOwnProperty,Wt=function(n,t){for(var e=$t(n),r=0,o=e.length;r<o;r++){var i=e[r];t(n[i],i)}},Ut=function(n,t){return qt(n,(function(n,e){return{k:e,v:t(n,e)}}))},qt=function(n,t){var e={};return Wt(n,(function(n,r){var o=t(n,r);e[o.k]=o.v})),e},Xt=function(n,t){var e={};return function(n,t,e,r){Wt(n,(function(n,o){(t(n,o)?e:r)(n,o)}))}(n,t,function(n){return function(t,e){n[e]=t}}(e),p),e},Yt=function(n,t){var e=[];return Wt(n,(function(n,r){e.push(t(n,r))})),e},Kt=function(n,t){return Jt(n,t)?R.from(n[t]):R.none()},Jt=function(n,t){return Gt.call(n,t)},Qt=function(n,t){return Jt(n,t)&&void 0!==n[t]&&null!==n[t]},Zt=function(n,t,e){if(!(u(e)||s(e)||g(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")},ne=function(n,t,e){Zt(n.dom,t,e)},te=function(n,t){var e=n.dom;Wt(t,(function(n,t){Zt(e,t,n)}))},ee=function(n,t){var e=n.dom.getAttribute(t);return null===e?void 0:e},re=function(n,t){return R.from(ee(n,t))},oe=function(n,t){var e=n.dom;return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},ie=function(n,t){n.dom.removeAttribute(t)},ue=function(n,t){var e=ee(n,t);return void 0===e||""===e?[]:e.split(" ")},ce=function(n){return void 0!==n.dom.classList},ae=function(n,t){return function(n,t,e){var r=ue(n,t).concat([e]);return ne(n,t,r.join(" ")),!0}(n,"class",t)},fe=function(n,t){return function(n,t,e){var r=z(ue(n,t),(function(n){return n!==e}));return r.length>0?ne(n,t,r.join(" ")):ie(n,t),!1}(n,"class",t)},se=function(n,t){ce(n)?n.dom.classList.add(t):ae(n,t)},le=function(n){0===(ce(n)?n.dom.classList:function(n){return ue(n,"class")}(n)).length&&ie(n,"class")},de=function(n,t){ce(n)?n.dom.classList.remove(t):fe(n,t);le(n)},me=function(n,t){return ce(n)&&n.dom.classList.contains(t)},ge=function(n,t,e){de(n,e),se(n,t)},pe=Object.freeze({__proto__:null,toAlpha:function(n,t,e){ge(n.element,t.alpha,t.omega)},toOmega:function(n,t,e){ge(n.element,t.omega,t.alpha)},isAlpha:function(n,t,e){return me(n.element,t.alpha)},isOmega:function(n,t,e){return me(n.element,t.omega)},clear:function(n,t,e){de(n.element,t.alpha),de(n.element,t.omega)}}),ve=function(n){return{isValue:E,isError:C,getOr:h(n),getOrThunk:h(n),getOrDie:h(n),or:function(t){return ve(n)},orThunk:function(t){return ve(n)},fold:function(t,e){return e(n)},map:function(t){return ve(t(n))},mapError:function(t){return ve(n)},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOptional:function(){return R.some(n)}}},he=function(n){return{isValue:C,isError:E,getOr:b,getOrThunk:function(n){return n()},getOrDie:function(){return k(String(n))()},or:b,orThunk:function(n){return n()},fold:function(t,e){return t(n)},map:function(t){return he(n)},mapError:function(t){return he(t(n))},each:p,bind:function(t){return he(n)},exists:C,forall:E,toOptional:R.none}},be={value:ve,error:he,fromOption:function(n,t){return n.fold((function(){return he(t)}),ve)}};!function(n){n[n.Error=0]="Error",n[n.Value=1]="Value"}(at||(at={}));var ye,xe,we=function(n,t,e){return n.stype===at.Error?t(n.serror):e(n.svalue)},Se=function(n){return{stype:at.Value,svalue:n}},Oe=function(n){return{stype:at.Error,serror:n}},ke=function(n){return n.fold(Oe,Se)},Te=function(n){return we(n,be.error,be.value)},Ce=Se,Ee=function(n){var t=[],e=[];return P(n,(function(n){we(n,(function(n){return e.push(n)}),(function(n){return t.push(n)}))})),{values:t,errors:e}},De=Oe,Me=function(n,t){return n.stype===at.Value?t(n.svalue):n},_e=function(n,t){return n.stype===at.Error?t(n.serror):n},Re=function(n,t){return n.stype===at.Value?{stype:at.Value,svalue:t(n.svalue)}:n},Fe=function(n,t){return n.stype===at.Error?{stype:at.Error,serror:t(n.serror)}:n},Ie=we,Ve=function(n,t,e,r){return{tag:"field",key:n,newKey:t,presence:e,prop:r}},Be=function(n,t,e){switch(n.tag){case"field":return t(n.key,n.newKey,n.presence,n.prop);case"custom":return e(n.newKey,n.instantiator)}},Ae=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var u in i)Jt(i,u)&&(r[u]=n(r[u],i[u]))}return r}},Ne=Ae((function(n,t){return c(n)&&c(t)?Ne(n,t):t})),He=Ae((function(n,t){return t})),Pe=function(n){return{tag:"defaultedThunk",process:n}},ze=function(n){return Pe(h(n))},je=function(n){return{tag:"mergeWithThunk",process:n}},Le=function(n){return v(De,W)(n)},$e=function(n){var t=Ee(n);return t.errors.length>0?Le(t.errors):Ce(t.values)},Ge=function(n){return c(n)&&$t(n).length>100?" removed due to size":JSON.stringify(n,null,2)},We=function(n,t){return De([{path:n,getErrorInfo:t}])},Ue=function(n){return{extract:function(t,e){return _e(n(e),(function(n){return function(n,t){return We(n,h(t))}(t,n)}))},toString:h("val")}},qe=Ue(Ce),Xe=function(n,t,e,r){return Kt(t,e).fold((function(){return function(n,t,e){return We(n,(function(){return'Could not find valid *required* value for "'+t+'" in '+Ge(e)}))}(n,e,t)}),r)},Ye=function(n,t,e,r){return r(Kt(n,t).getOrThunk((function(){return e(n)})))},Ke=function(n,t,e,r,o){var i=function(n){return o.extract(t.concat([r]),n)},u=function(n){return n.fold((function(){return Ce(R.none())}),(function(n){var e=o.extract(t.concat([r]),n);return Re(e,R.some)}))};switch(n.tag){case"required":return Xe(t,e,r,i);case"defaultedThunk":return Ye(e,r,n.process,i);case"option":return function(n,t,e){return e(Kt(n,t))}(e,r,u);case"defaultedOptionThunk":return function(n,t,e,r){return r(Kt(n,t).map((function(t){return!0===t?e(n):t})))}(e,r,n.process,u);case"mergeWithThunk":return Ye(e,r,h({}),(function(t){var r=Ne(n.process(e),t);return i(r)}))}},Je=function(n){return $t(Xt(n,d))},Qe=function(n){var t=Ze(n),e=j(n,(function(n,t){return Be(t,(function(t){var e;return Ne(n,((e={})[t]=!0,e))}),h(n))}),{});return{extract:function(n,r){var o=s(r)?[]:Je(r),i=z(o,(function(n){return!Qt(e,n)}));return 0===i.length?t.extract(n,r):function(n,t){return We(n,(function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"}))}(n,i)},toString:t.toString}},Ze=function(n){return{extract:function(t,e){return function(n,t,e){for(var r={},o=[],i=0,u=e;i<u.length;i++){var c=u[i];Be(c,(function(e,i,u,c){var a=Ke(u,n,t,e,c);Ie(a,(function(n){o.push.apply(o,n)}),(function(n){r[i]=n}))}),(function(n,e){r[n]=e(t)}))}return o.length>0?De(o):Ce(r)}(t,e,n)},toString:function(){return"obj{\n"+H(n,(function(n){return Be(n,(function(n,t,e,r){return n+" -> "+r.toString()}),(function(n,t){return"state("+n+")"}))})).join("\n")+"}"}}},nr=function(n,t){var e=function(t,e){return function(n){return{extract:function(t,e){var r=H(e,(function(e,r){return n.extract(t.concat(["["+r+"]"]),e)}));return $e(r)},toString:function(){return"array("+n.toString()+")"}}}(Ue(n)).extract(t,e)};return{extract:function(n,r){var o=$t(r),i=e(n,o);return Me(i,(function(e){var o=H(e,(function(n){return Ve(n,n,{tag:"required",process:{}},t)}));return Ze(o).extract(n,r)}))},toString:function(){return"setOf("+t.toString()+")"}}},tr=h(qe),er=(ye=m,xe="function",Ue((function(n){var t=typeof n;return ye(n)?Ce(n):De("Expected type: "+xe+" but got: "+t)}))),rr=function(n,t,e,r){return Kt(e,r).fold((function(){return function(n,t,e){return We(n,(function(){return'The chosen schema: "'+e+'" did not exist in branches: '+Ge(t)}))}(n,e,r)}),(function(e){return e.extract(n.concat(["branch: "+r]),t)}))},or=function(n,t){return{extract:function(e,r){return Kt(r,n).fold((function(){return function(n,t){return We(n,(function(){return'Choice schema did not contain choice key: "'+t+'"'}))}(e,n)}),(function(n){return rr(e,r,t,n)}))},toString:function(){return"chooseOn("+n+"). Possible values: "+$t(t)}}},ir=function(n){return Ue((function(t){return n(t).fold(De,Ce)}))},ur=function(n,t){return nr((function(t){return ke(n(t))}),t)},cr=function(n,t,e){return Te(function(n,t,e){var r=t.extract([n],e);return Fe(r,(function(n){return{input:e,errors:n}}))}(n,t,e))},ar=function(n){return n.fold((function(n){throw new Error(sr(n))}),b)},fr=function(n,t,e){return ar(cr(n,t,e))},sr=function(n){return"Errors: \n"+(t=n.errors,e=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:h("... (only showing first ten failures)")}]):t,H(e,(function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()}))).join("\n")+"\n\nInput object: "+Ge(n.input);var t,e},lr=function(n,t){return or(n,Ut(t,Ze))},dr=Ve,mr=function(n,t){return{tag:"custom",newKey:n,instantiator:t}},gr=function(n){return dr(n,n,{tag:"required",process:{}},tr())},pr=function(n,t){return dr(n,n,{tag:"required",process:{}},t)},vr=function(n,t){return dr(n,n,{tag:"required",process:{}},Ze(t))},hr=function(n){return dr(n,n,{tag:"option",process:{}},tr())},br=function(n,t){return dr(n,n,{tag:"option",process:{}},t)},yr=function(n,t){return br(n,Ze(t))},xr=function(n,t){return br(n,Qe(t))},wr=function(n,t){return dr(n,n,ze(t),tr())},Sr=function(n,t,e){return dr(n,n,ze(t),e)},Or=[gr("alpha"),gr("omega")],kr=function(n){if(!a(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],e={};return P(n,(function(r,o){var i=$t(r);if(1!==i.length)throw new Error("one and only one name per case");var u=i[0],c=r[u];if(void 0!==e[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!a(c))throw new Error("case arguments must be an array");t.push(u),e[u]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e.length;if(i!==c.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+c.length+" ("+c+"), got "+i);var a=function(n){var r=$t(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!q(t,(function(n){return A(r,n)})))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[u].apply(null,e)};return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+t.length);var i=t[o];return i.apply(null,e)},match:a,log:function(n){console.log(n,{constructors:t,constructor:u,params:e})}}}})),e};kr([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Tr,Cr=function(n,t){return function(n,t){var e={};return Wt(n,(function(n,r){A(t,r)||(e[r]=n)})),e}(n,t)},Er=function(n,t){return function(n,t){var e;return(e={})[n]=t,e}(n,t)},Dr=function(n){return function(n){var t={};return P(n,(function(n){t[n.key]=n.value})),t}(n)},Mr=function(n,t){var e,r=function(n){var t=[],e=[];return P(n,(function(n){n.fold((function(n){t.push(n)}),(function(n){e.push(n)}))})),{errors:t,values:e}}(n);return r.errors.length>0?(e=r.errors,be.error(W(e))):function(n,t){return 0===n.length?be.value(t):be.value(Ne(t,He.apply(void 0,n)))}(r.values,t)},_r=function(n,t,e){return void 0===e&&(e=y),n.exists((function(n){return e(n,t)}))},Rr=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},Fr=function(n){return m(n)?n:C},Ir=function(n,t,e){var r=t(n),o=Fr(e);return r.orThunk((function(){return o(n)?R.none():function(n,t,e){for(var r=n.dom,o=Fr(e);r.parentNode;){r=r.parentNode;var i=et.fromDom(r),u=t(i);if(u.isSome())return u;if(o(i))break}return R.none()}(n,t,o)}))},Vr=function(n,t){return ct(n.element,t.event.target)},Br={can:E,abort:C,run:p},Ar=function(t){if(!Qt(t,"can")&&!Qt(t,"abort")&&!Qt(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return n(n({},Br),t)},Nr=function(n){return{can:function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return L(n,(function(n,r){return n&&t(r).apply(void 0,e)}),!0)}}(n,(function(n){return n.can})),abort:function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return L(n,(function(n,r){return n||t(r).apply(void 0,e)}),!1)}}(n,(function(n){return n.abort})),run:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];P(n,(function(n){n.run.apply(void 0,t)}))}}},Hr=function(n){return Dr(n)},Pr=function(n,t){return{key:n,value:Ar({abort:t})}},zr=function(n,t){return{key:n,value:Ar({run:t})}},jr=function(n,t,e){return{key:n,value:Ar({run:function(n,r){t.apply(void 0,[n,r].concat(e))}})}},Lr=function(n){return function(t){return{key:n,value:Ar({run:function(n,e){Vr(n,e)&&t(n,e)}})}}},$r=function(n,t,e){return function(n,t){return zr(n,(function(e,r){e.getSystem().getByUid(t).each((function(t){!function(n,t,e,r){n.getSystem().triggerEvent(e,t,r.event)}(t,t.element,n,r)}))}))}(n,t.partUids[e])},Gr=function(n){return zr(n,(function(n,t){t.cut()}))},Wr=function(n){return zr(n,(function(n,t){t.stop()}))},Ur=function(n,t){return Lr(n)(t)},qr=Lr(Wn()),Xr=Lr(Un()),Yr=Lr(Gn()),Kr=function(n){return function(t){return zr(n,t)}}(zn()),Jr=function(n){return H(n,(function(n){return function(n,t,e){return""===t||n.length>=t.length&&n.substr(e,e+t.length)===t}(t=n,e="/*",t.length-e.length)?n.substring(0,n.length-"/*".length):n;var t,e}))},Qr=function(n,t){var e=n.toString(),r=e.indexOf(")")+1,o=e.indexOf("("),i=e.substring(o+1,r-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:t,parameters:Jr(i)}},n},Zr=function(n){return{classes:l(n.classes)?[]:n.classes,attributes:l(n.attributes)?{}:n.attributes,styles:l(n.styles)?{}:n.styles}},no=function(n,t,e){return Yr((function(r,o){e(r,n,t)}))},to=function(n,t,e){return function(n,t,e){var r=e.toString(),o=r.indexOf(")")+1,i=r.indexOf("("),u=r.substring(i+1,o-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:t,parameters:Jr(u.slice(0,1).concat(u.slice(3)))}},n}((function(r){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var u=[r].concat(o);return r.config({name:h(n)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+n+". Using API: "+e)}),(function(n){var e=Array.prototype.slice.call(u,1);return t.apply(void 0,[r,n.config,n.state].concat(e))}))}),e,t)},eo=function(n){return{key:n,value:void 0}},ro=function(t,e,r,o,i,u,c){var a=function(n){return Qt(n,r)?n[r]():R.none()},f=Ut(i,(function(n,t){return to(r,n,t)})),s=Ut(u,(function(n,t){return Qr(n,t)})),l=n(n(n({},s),f),{revoke:x(eo,r),config:function(n){var e=fr(r+"-config",t,n);return{key:r,value:{config:e,me:l,configAsRaw:F((function(){return fr(r+"-config",t,n)})),initialConfig:n,state:c}}},schema:h(e),exhibit:function(n,t){return(e=a(n),r=Kt(o,"exhibit"),i=function(n,e){return e(t,n.config,n.state)},e.isSome()&&r.isSome()?R.some(i(e.getOrDie(),r.getOrDie())):R.none()).getOrThunk((function(){return Zr({})}));var e,r,i},name:h(r),handlers:function(n){return a(n).map((function(n){return Kt(o,"events").getOr((function(){return{}}))(n.config,n.state)})).getOr({})}});return l},oo={init:function(){return io({readState:h("No State required")})}},io=function(n){return n},uo=function(n){return Dr(n)},co=Qe([gr("fields"),gr("name"),wr("active",{}),wr("apis",{}),wr("state",oo),wr("extra",{})]),ao=function(n){var t=fr("Creating behaviour: "+n.name,co,n);return function(n,t,e,r,o,i){var u=Qe(n),c=yr(t,[xr("config",n)]);return ro(u,c,t,e,r,o,i)}(t.fields,t.name,t.active,t.apis,t.extra,t.state)},fo=Qe([gr("branchKey"),gr("branches"),gr("name"),wr("active",{}),wr("apis",{}),wr("state",oo),wr("extra",{})]),so=h(void 0),lo=ao({fields:Or,name:"swapping",apis:pe}),mo=function(n){var t=n;return{get:function(){return t},set:function(n){t=n}}},go=function(n){return n.dom.focus()},po=function(n){return n.dom.blur()},vo=function(n){return void 0===n&&(n=et.fromDom(document)),R.from(n.dom.activeElement).map(et.fromDom)},ho=function(n){return vo(_t(n)).filter((function(t){return n.dom.contains(t.dom)}))},bo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),yo=tinymce.util.Tools.resolve("tinymce.ThemeManager"),xo=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],wo=["undo","bold","italic","link","image","bullist","styleselect"],So=function(n){return n.dom.innerHTML},Oo=function(n,t){var e,r,o=pt(n).dom,i=et.fromDom(o.createDocumentFragment()),u=(e=t,(r=(o||document).createElement("div")).innerHTML=e,bt(et.fromDom(r)));kt(i,u),Tt(n),Ot(n,i)},ko=function(n){return function(n,t){return et.fromDom(n.dom.cloneNode(t))}(n,!1)},To=function(n){return Et(n)?"#shadow-root":function(n){var t=et.fromTag("div"),e=et.fromDom(n.dom.cloneNode(!0));return Ot(t,e),So(t)}(ko(n))},Co=function(n){return To(n)},Eo=Object.freeze({__proto__:null,events:function(n){return Hr([zr(Pn(),(function(t,e){var r=n.channels,o=$t(r),i=e,u=function(n,t){return t.universal?n:z(n,(function(n){return A(t.channels,n)}))}(o,i);P(u,(function(n){var e=r[n],o=e.schema,u=fr("channel["+n+"] data\nReceiver: "+Co(t.element),o,i.data);e.onReceive(t,u)}))}))])}});!function(n){n[n.STOP=0]="STOP",n[n.NORMAL=1]="NORMAL",n[n.LOGGING=2]="LOGGING"}(Tr||(Tr={}));var Do=mo({}),Mo=function(n,t,e){switch(Kt(Do.get(),n).orThunk((function(){var t=$t(Do.get());return Q(t,(function(t){return n.indexOf(t)>-1?R.some(Do.get()[t]):R.none()}))})).getOr(Tr.NORMAL)){case Tr.NORMAL:return e(Fo());case Tr.LOGGING:var r=function(n,t){var e=[],r=(new Date).getTime();return{logEventCut:function(n,t,r){e.push({outcome:"cut",target:t,purpose:r})},logEventStopped:function(n,t,r){e.push({outcome:"stopped",target:t,purpose:r})},logNoParent:function(n,t,r){e.push({outcome:"no-parent",target:t,purpose:r})},logEventNoHandlers:function(n,t){e.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(n,t,r){e.push({outcome:"response",purpose:r,target:t})},write:function(){var o=(new Date).getTime();A(["mousemove","mouseover","mouseout",Gn()],n)||console.log(n,{event:n,time:o-r,target:t.dom,sequence:H(e,(function(n){return A(["cut","stopped","response"],n.outcome)?"{"+n.purpose+"} "+n.outcome+" at ("+Co(n.target)+")":n.outcome}))})}}}(n,t),o=e(r);return r.write(),o;case Tr.STOP:return!0}},_o=["alloy/data/Fields","alloy/debugging/Debugging"],Ro=function(n,t,e){return Mo(n,t,e)},Fo=h({logEventCut:p,logEventStopped:p,logNoParent:p,logEventNoHandlers:p,logEventResponse:p,write:p}),Io=h([gr("menu"),gr("selectedMenu")]),Vo=h([gr("item"),gr("selectedItem")]);h(Ze(Vo().concat(Io())));var Bo,Ao=h(Ze(Vo())),No=vr("initSize",[gr("numColumns"),gr("numRows")]),Ho=function(n,t,e){return function(){var n=new Error;if(void 0!==n.stack){var t=n.stack.split("\n");return $(t,(function(n){return n.indexOf("alloy")>0&&!N(_o,(function(t){return n.indexOf(t)>-1}))})).getOr("unknown")}}(),dr(t,t,e,ir((function(n){return be.value((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(void 0,t)}))})))},Po=function(n){return Ho(0,n,ze(p))},zo=function(n){return Ho(0,n,ze(R.none))},jo=function(n){return Ho(0,n,{tag:"required",process:{}})},Lo=function(n){return Ho(0,n,{tag:"required",process:{}})},$o=function(n,t){return mr(n,h(t))},Go=function(n){return mr(n,b)},Wo=h(No),Uo=[pr("channels",ur(be.value,Qe([jo("onReceive"),wr("schema",tr())])))],qo=ao({fields:Uo,name:"receiving",active:Eo}),Xo=function(n,t,e){var r=t.aria;r.update(n,r,e.get())},Yo=function(n,t,e){t.toggleClass.each((function(t){e.get()?se(n.element,t):de(n.element,t)}))},Ko=function(n,t,e){Zo(n,t,e,!e.get())},Jo=function(n,t,e){e.set(!0),Yo(n,t,e),Xo(n,t,e)},Qo=function(n,t,e){e.set(!1),Yo(n,t,e),Xo(n,t,e)},Zo=function(n,t,e,r){(r?Jo:Qo)(n,t,e)},ni=function(n,t,e){Zo(n,t,e,t.selected)},ti=Object.freeze({__proto__:null,onLoad:ni,toggle:Ko,isOn:function(n,t,e){return e.get()},on:Jo,off:Qo,set:Zo}),ei=Object.freeze({__proto__:null,exhibit:function(){return Zr({})},events:function(n,t){var e,r,o,i=(e=n,r=t,o=Ko,Kr((function(n){o(n,e,r)}))),u=no(n,t,ni);return Hr(W([n.toggleOnExecute?[i]:[],[u]]))}}),ri=function(n,t,e){ne(n.element,"aria-expanded",e)},oi=[wr("selected",!1),hr("toggleClass"),wr("toggleOnExecute",!0),Sr("aria",{mode:"none"},lr("mode",{pressed:[wr("syncWithExpanded",!1),$o("update",(function(n,t,e){ne(n.element,"aria-pressed",e),t.syncWithExpanded&&ri(n,t,e)}))],checked:[$o("update",(function(n,t,e){ne(n.element,"aria-checked",e)}))],expanded:[$o("update",ri)],selected:[$o("update",(function(n,t,e){ne(n.element,"aria-selected",e)}))],none:[$o("update",p)]}))],ii=ao({fields:oi,name:"toggling",active:ei,apis:ti,state:(Bo=!1,{init:function(){var n=mo(Bo);return{get:function(){return n.get()},set:function(t){return n.set(t)},clear:function(){return n.set(Bo)},readState:function(){return n.get()}}}})}),ui=function(n,t){return qo.config({channels:Er("formatChanged",{onReceive:function(e,r){r.command===n&&t(e,r.state)}})})},ci=function(n){return qo.config({channels:Er("orientationChanged",{onReceive:n})})},ai=function(n,t){return{key:n,value:{onReceive:t}}},fi=function(n){return"tinymce-mobile-"+n},si=function(){var n=function(n,t){t.stop(),Qn(n)};return[zr(Rn(),n),zr(Ln(),n),Gr(xn()),Gr(On())]},li=function(n,t){t.ignore||(go(n.element),t.onFocus(n))},di=Object.freeze({__proto__:null,focus:li,blur:function(n,t){t.ignore||po(n.element)},isFocused:function(n){return function(n){var t=_t(n).dom;return n.dom===t.activeElement}(n.element)}}),mi=Object.freeze({__proto__:null,exhibit:function(n,t){var e=t.ignore?{}:{attributes:{tabindex:"-1"}};return Zr(e)},events:function(n){return Hr([zr(An(),(function(t,e){li(t,n),e.stop()}))].concat(n.stopMousedown?[zr(On(),(function(n,t){t.event.prevent()}))]:[]))}}),gi=[Po("onFocus"),wr("stopMousedown",!1),wr("ignore",!1)],pi=ao({fields:gi,name:"focusing",active:mi,apis:di}),vi=function(n){return void 0!==n.style&&m(n.style.getPropertyValue)},hi=function(n,t,e){if(!u(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e);vi(n)&&n.style.setProperty(t,e)},bi=function(n,t,e){var r=n.dom;hi(r,t,e)},yi=function(n,t){var e=n.dom;Wt(t,(function(n,t){hi(e,t,n)}))},xi=function(n,t){var e=n.dom,r=window.getComputedStyle(e).getPropertyValue(t);return""!==r||It(n)?r:wi(e,t)},wi=function(n,t){return vi(n)?n.style.getPropertyValue(t):""},Si=function(n,t){var e=n.dom,r=wi(e,t);return R.from(r).filter((function(n){return n.length>0}))},Oi=function(n,t){!function(n,t){vi(n)&&n.style.removeProperty(t)}(n.dom,t),_r(re(n,"style").map(on),"")&&ie(n,"style")},ki=function(n){return n.dom.offsetWidth},Ti=function(n,t){var e=function(e){var r=t(e);if(r<=0||null===r){var o=xi(e,n);return parseFloat(o)||0}return r},r=function(n,t){return L(t,(function(t,e){var r=xi(n,e),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0)};return{set:function(t,e){if(!g(e)&&!e.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+e);var r=t.dom;vi(r)&&(r.style[n]=e+"px")},get:e,getOuter:e,aggregate:r,max:function(n,t,e){var o=r(n,e);return t>o?t-o:0}}},Ci=Ti("height",(function(n){var t=n.dom;return It(n)?t.getBoundingClientRect().height:t.offsetHeight})),Ei=function(n){return Ci.get(n)},Di=function(n,t,e){return z(function(n,t){for(var e=m(t)?t:C,r=n.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=et.fromDom(i);if(o.push(u),!0===e(u))break;r=i}return o}(n,e),t)},Mi=function(n,t){return z(function(n){return ht(n).map(bt).map((function(t){return z(t,(function(t){return!ct(n,t)}))})).getOr([])}(n),t)},_i=function(n,t,e){return Di(n,(function(n){return rt(n,t)}),e)},Ri=function(n,t){return Mi(n,(function(n){return rt(n,t)}))},Fi=function(n,t){return it(t,n)};function Ii(n,t,e,r,o){return n(e,r)?R.some(e):m(o)&&o(e)?R.none():t(e,r,o)}var Vi,Bi=function(n,t,e){for(var r=n.dom,o=m(e)?e:C;r.parentNode;){r=r.parentNode;var i=et.fromDom(r);if(t(i))return R.some(i);if(o(i))break}return R.none()},Ai=function(n){return ut(n)},Ni=function(n,t,e){return Bi(n,(function(n){return rt(n,t)}),e)},Hi=function(n,t){return ut(t,n)},Pi=function(n,t,e){return Ii((function(n,t){return rt(n,t)}),Ni,n,t,e)},zi=[8],ji=[9],Li=[13],$i=[27],Gi=[32],Wi=[37],Ui=[38],qi=[39],Xi=[40],Yi=function(n,t,e){var r=X(n.slice(0,t)),o=X(n.slice(t+1));return $(r.concat(o),e)},Ki=function(n,t,e){var r=X(n.slice(0,t));return $(r,e)},Ji=function(n,t,e){var r=n.slice(0,t),o=n.slice(t+1);return $(o.concat(r),e)},Qi=function(n,t,e){var r=n.slice(t+1);return $(r,e)},Zi=function(n){return function(t){var e=t.raw;return A(n,e.which)}},nu=function(n){return function(t){return q(n,(function(n){return n(t)}))}},tu=function(n){return!0===n.raw.shiftKey},eu=function(n){return!0===n.raw.ctrlKey},ru=O(tu),ou=function(n,t){return{matches:n,classification:t}},iu=function(n,t,e,r){var o=n+t;return o>r?e:o<e?r:o},uu=function(n,t,e){return Math.min(Math.max(n,t),e)},cu=function(n,t,e,r){var o=Fi(n.element,"."+t.highlightClass);P(o,(function(e){N(r,(function(n){return n.element===e}))||(de(e,t.highlightClass),n.getSystem().getByDom(e).each((function(e){t.onDehighlight(n,e),Kn(e,Yn())})))}))},au=function(n,t,e,r){cu(n,t,0,[r]),fu(n,t,e,r)||(se(r.element,t.highlightClass),t.onHighlight(n,r),Kn(r,Xn()))},fu=function(n,t,e,r){return me(r.element,t.highlightClass)},su=function(n,t,e,r){var o=Fi(n.element,"."+t.itemClass);return R.from(o[r]).fold((function(){return be.error(new Error("No element found with index "+r))}),n.getSystem().getByDom)},lu=function(n,t,e){return Hi(n.element,"."+t.itemClass).bind((function(t){return n.getSystem().getByDom(t).toOptional()}))},du=function(n,t,e){var r=Fi(n.element,"."+t.itemClass);return(r.length>0?R.some(r[r.length-1]):R.none()).bind((function(t){return n.getSystem().getByDom(t).toOptional()}))},mu=function(n,t,e,r){var o=Fi(n.element,"."+t.itemClass);return G(o,(function(n){return me(n,t.highlightClass)})).bind((function(t){var e=iu(t,r,0,o.length-1);return n.getSystem().getByDom(o[e]).toOptional()}))},gu=function(n,t,e){var r=Fi(n.element,"."+t.itemClass);return Rr(H(r,(function(t){return n.getSystem().getByDom(t).toOptional()})))},pu=Object.freeze({__proto__:null,dehighlightAll:function(n,t,e){return cu(n,t,0,[])},dehighlight:function(n,t,e,r){fu(n,t,e,r)&&(de(r.element,t.highlightClass),t.onDehighlight(n,r),Kn(r,Yn()))},highlight:au,highlightFirst:function(n,t,e){lu(n,t).each((function(r){au(n,t,e,r)}))},highlightLast:function(n,t,e){du(n,t).each((function(r){au(n,t,e,r)}))},highlightAt:function(n,t,e,r){su(n,t,e,r).fold((function(n){throw n}),(function(r){au(n,t,e,r)}))},highlightBy:function(n,t,e,r){var o=gu(n,t);$(o,r).each((function(r){au(n,t,e,r)}))},isHighlighted:fu,getHighlighted:function(n,t,e){return Hi(n.element,"."+t.highlightClass).bind((function(t){return n.getSystem().getByDom(t).toOptional()}))},getFirst:lu,getLast:du,getPrevious:function(n,t,e){return mu(n,t,0,-1)},getNext:function(n,t,e){return mu(n,t,0,1)},getCandidates:gu}),vu=[gr("highlightClass"),gr("itemClass"),Po("onHighlight"),Po("onDehighlight")],hu=ao({fields:vu,name:"highlighting",apis:pu}),bu=function(n,t,e){t.exists((function(n){return e.exists((function(t){return ct(t,n)}))}))||Jn(n,qn(),{prevFocus:t,newFocus:e})},yu=function(){var n=function(n){return ho(n.element)};return{get:n,set:function(t,e){var r=n(t);t.getSystem().triggerFocus(e,t.element);var o=n(t);bu(t,r,o)}}},xu=function(){var n=function(n){return hu.getHighlighted(n).map((function(n){return n.element}))};return{get:n,set:function(t,e){var r=n(t);t.getSystem().getByDom(e).fold(p,(function(n){hu.highlight(t,n)}));var o=n(t);bu(t,r,o)}}};!function(n){n.OnFocusMode="onFocus",n.OnEnterOrSpaceMode="onEnterOrSpace",n.OnApiMode="onApi"}(Vi||(Vi={}));var wu=function(n,t,e,r,o){var i=function(n,t,e,r,o){var i,u,c=e(n,t,r,o);return(i=c,u=t.event,$(i,(function(n){return n.matches(u)})).map((function(n){return n.classification}))).bind((function(e){return e(n,t,r,o)}))},u={schema:function(){return n.concat([wr("focusManager",yu()),Sr("focusInside","onFocus",ir((function(n){return A(["onFocus","onEnterOrSpace","onApi"],n)?be.value(n):be.error("Invalid value for focusInside")}))),$o("handler",u),$o("state",t),$o("sendFocusIn",o)])},processKey:i,toEvents:function(n,t){var u=n.focusInside!==Vi.OnFocusMode?R.none():o(n).map((function(e){return zr(An(),(function(r,o){e(r,n,t),o.stop()}))})),c=[zr(En(),(function(r,u){i(r,u,e,n,t).fold((function(){!function(e,r){var i=Zi(Gi.concat(Li))(r.event);n.focusInside===Vi.OnEnterOrSpaceMode&&i&&Vr(e,r)&&o(n).each((function(o){o(e,n,t),r.stop()}))}(r,u)}),(function(n){u.stop()}))})),zr(Dn(),(function(e,o){i(e,o,r,n,t).each((function(n){o.stop()}))}))];return Hr(u.toArray().concat(c))}};return u},Su=function(n){var t=[hr("onEscape"),hr("onEnter"),wr("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),wr("firstTabstop",0),wr("useTabstopAt",E),hr("visibilitySelector")].concat([n]),e=function(n,t){var e=n.visibilitySelector.bind((function(n){return Pi(t,n)})).getOr(t);return Ei(e)>0},r=function(n,t,r){(function(n,t){var r=Fi(n.element,t.selector),o=z(r,(function(n){return e(t,n)}));return R.from(o[t.firstTabstop])})(n,t).each((function(e){t.focusManager.set(n,e)}))},o=function(n,t,r,o,i){return i(t,r,(function(n){return function(n,t){return e(n,t)&&n.useTabstopAt(t)}(o,n)})).fold((function(){return o.cyclic?R.some(!0):R.none()}),(function(t){return o.focusManager.set(n,t),R.some(!0)}))},i=function(n,t,e,r){var i=Fi(n.element,e.selector);return function(n,t){return t.focusManager.get(n).bind((function(n){return Pi(n,t.selector)}))}(n,e).bind((function(t){return G(i,x(ct,t)).bind((function(t){return o(n,i,t,e,r)}))}))},u=h([ou(nu([tu,Zi(ji)]),(function(n,t,e){var r=e.cyclic?Yi:Ki;return i(n,0,e,r)})),ou(Zi(ji),(function(n,t,e){var r=e.cyclic?Ji:Qi;return i(n,0,e,r)})),ou(Zi($i),(function(n,t,e){return e.onEscape.bind((function(e){return e(n,t)}))})),ou(nu([ru,Zi(Li)]),(function(n,t,e){return e.onEnter.bind((function(e){return e(n,t)}))}))]),c=h([]);return wu(t,oo.init,u,c,(function(){return R.some(r)}))},Ou=Su(mr("cyclic",C)),ku=Su(mr("cyclic",E)),Tu=function(n){return"input"===ft(n)&&"radio"!==ee(n,"type")||"textarea"===ft(n)},Cu=function(n,t,e){return Tu(e)&&Zi(Gi)(t.event)?R.none():function(n,t,e){return Zn(n,e,zn()),R.some(!0)}(n,0,e)},Eu=function(n,t){return R.some(!0)},Du=[wr("execute",Cu),wr("useSpace",!1),wr("useEnter",!0),wr("useControlEnter",!1),wr("useDown",!1)],Mu=function(n,t,e){return e.execute(n,t,n.element)},_u=wu(Du,oo.init,(function(n,t,e,r){var o=e.useSpace&&!Tu(n.element)?Gi:[],i=e.useEnter?Li:[],u=e.useDown?Xi:[],c=o.concat(i).concat(u);return[ou(Zi(c),Mu)].concat(e.useControlEnter?[ou(nu([eu,Zi(Li)]),Mu)]:[])}),(function(n,t,e,r){return e.useSpace&&!Tu(n.element)?[ou(Zi(Gi),Eu)]:[]}),(function(){return R.none()})),Ru=function(n){var t=mo(R.none()),e=function(){return t.get().each(n)};return{clear:function(){e(),t.set(R.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(n){e(),t.set(R.some(n))}}},Fu=function(){var t=Ru((function(n){return n.destroy()}));return n(n({},t),{run:function(n){return t.get().each(n)}})},Iu=function(){var t=Ru(p);return n(n({},t),{on:function(n){return t.get().each(n)}})},Vu=function(){var n=Iu();return io({readState:function(){return n.get().map((function(n){return{numRows:String(n.numRows),numColumns:String(n.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,e){n.set({numRows:t,numColumns:e})},getNumRows:function(){return n.get().map((function(n){return n.numRows}))},getNumColumns:function(){return n.get().map((function(n){return n.numColumns}))}})},Bu=Object.freeze({__proto__:null,flatgrid:Vu,init:function(n){return n.state(n)}}),Au=function(n,t){return function(e){return"rtl"===Nu(e)?t:n}},Nu=function(n){return"rtl"===xi(n,"direction")?"rtl":"ltr"},Hu=function(n){return function(t,e,r,o){var i=n(t.element);return Lu(i,t,e,r,o)}},Pu=function(n,t){var e=Au(n,t);return Hu(e)},zu=function(n,t){var e=Au(t,n);return Hu(e)},ju=function(n){return function(t,e,r,o){return Lu(n,t,e,r,o)}},Lu=function(n,t,e,r,o){return r.focusManager.get(t).bind((function(e){return n(t.element,e,r,o)})).map((function(n){return r.focusManager.set(t,n),!0}))},$u=ju,Gu=ju,Wu=ju,Uu=function(n){return!function(n){return n.offsetWidth<=0&&n.offsetHeight<=0}(n.dom)},qu=function(n,t,e){var r=Fi(n,e);return function(n,t){return G(n,t).map((function(t){return{index:t,candidates:n}}))}(z(r,Uu),(function(n){return ct(n,t)}))},Xu=function(n,t){return G(n,(function(n){return ct(t,n)}))},Yu=function(n,t,e,r){return r(Math.floor(t/e),t%e).bind((function(t){var r=t.row*e+t.column;return r>=0&&r<n.length?R.some(n[r]):R.none()}))},Ku=function(n,t,e,r,o){return Yu(n,t,r,(function(t,i){var u=t===e-1?n.length-t*r:r,c=iu(i,o,0,u-1);return R.some({row:t,column:c})}))},Ju=function(n,t,e,r,o){return Yu(n,t,r,(function(t,i){var u=iu(t,o,0,e-1),c=u===e-1?n.length-u*r:r,a=uu(i,0,c-1);return R.some({row:u,column:a})}))},Qu=[gr("selector"),wr("execute",Cu),zo("onEscape"),wr("captureTab",!1),Wo()],Zu=function(n,t,e){Hi(n.element,t.selector).each((function(e){t.focusManager.set(n,e)}))},nc=function(n){return function(t,e,r,o){return qu(t,e,r.selector).bind((function(t){return n(t.candidates,t.index,o.getNumRows().getOr(r.initSize.numRows),o.getNumColumns().getOr(r.initSize.numColumns))}))}},tc=function(n,t,e){return e.captureTab?R.some(!0):R.none()},ec=nc((function(n,t,e,r){return Ku(n,t,e,r,-1)})),rc=nc((function(n,t,e,r){return Ku(n,t,e,r,1)})),oc=nc((function(n,t,e,r){return Ju(n,t,e,r,-1)})),ic=nc((function(n,t,e,r){return Ju(n,t,e,r,1)})),uc=h([ou(Zi(Wi),Pu(ec,rc)),ou(Zi(qi),zu(ec,rc)),ou(Zi(Ui),$u(oc)),ou(Zi(Xi),Gu(ic)),ou(nu([tu,Zi(ji)]),tc),ou(nu([ru,Zi(ji)]),tc),ou(Zi($i),(function(n,t,e){return e.onEscape(n,t)})),ou(Zi(Gi.concat(Li)),(function(n,t,e,r){return function(n,t){return t.focusManager.get(n).bind((function(n){return Pi(n,t.selector)}))}(n,e).bind((function(r){return e.execute(n,t,r)}))}))]),cc=h([ou(Zi(Gi),Eu)]),ac=wu(Qu,Vu,uc,cc,(function(){return R.some(Zu)})),fc=function(n,t,e,r){var o=function(n,t,e){var i,u=iu(t,r,0,e.length-1);return u===n?R.none():(i=e[u],"button"===ft(i)&&"disabled"===ee(i,"disabled")?o(n,u,e):R.from(e[u]))};return qu(n,e,t).bind((function(n){var t=n.index,e=n.candidates;return o(t,t,e)}))},sc=[gr("selector"),wr("getInitial",R.none),wr("execute",Cu),zo("onEscape"),wr("executeOnMove",!1),wr("allowVertical",!0)],lc=function(n,t,e){return function(n,t){return t.focusManager.get(n).bind((function(n){return Pi(n,t.selector)}))}(n,e).bind((function(r){return e.execute(n,t,r)}))},dc=function(n,t,e){t.getInitial(n).orThunk((function(){return Hi(n.element,t.selector)})).each((function(e){t.focusManager.set(n,e)}))},mc=function(n,t,e){return fc(n,e.selector,t,-1)},gc=function(n,t,e){return fc(n,e.selector,t,1)},pc=function(n){return function(t,e,r,o){return n(t,e,r,o).bind((function(){return r.executeOnMove?lc(t,e,r):R.some(!0)}))}},vc=function(n,t,e){return e.onEscape(n,t)},hc=h([ou(Zi(Gi),Eu)]),bc=wu(sc,oo.init,(function(n,t,e,r){var o=Wi.concat(e.allowVertical?Ui:[]),i=qi.concat(e.allowVertical?Xi:[]);return[ou(Zi(o),pc(Pu(mc,gc))),ou(Zi(i),pc(zu(mc,gc))),ou(Zi(Li),lc),ou(Zi(Gi),lc),ou(Zi($i),vc)]}),hc,(function(){return R.some(dc)})),yc=function(n,t,e){return R.from(n[t]).bind((function(n){return R.from(n[e]).map((function(n){return{rowIndex:t,columnIndex:e,cell:n}}))}))},xc=function(n,t,e,r){var o=n[t].length,i=iu(e,r,0,o-1);return yc(n,t,i)},wc=function(n,t,e,r){var o=iu(e,r,0,n.length-1),i=n[o].length,u=uu(t,0,i-1);return yc(n,o,u)},Sc=function(n,t,e,r){var o=n[t].length,i=uu(e+r,0,o-1);return yc(n,t,i)},Oc=function(n,t,e,r){var o=uu(e+r,0,n.length-1),i=n[o].length,u=uu(t,0,i-1);return yc(n,o,u)},kc=[vr("selectors",[gr("row"),gr("cell")]),wr("cycles",!0),wr("previousSelector",R.none),wr("execute",Cu)],Tc=function(n,t,e){t.previousSelector(n).orThunk((function(){var e=t.selectors;return Hi(n.element,e.cell)})).each((function(e){t.focusManager.set(n,e)}))},Cc=function(n,t){return function(e,r,o){var i=o.cycles?n:t;return Pi(r,o.selectors.row).bind((function(n){var t=Fi(n,o.selectors.cell);return Xu(t,r).bind((function(t){var r=Fi(e,o.selectors.row);return Xu(r,n).bind((function(n){var e=function(n,t){return H(n,(function(n){return Fi(n,t.selectors.cell)}))}(r,o);return i(e,n,t).map((function(n){return n.cell}))}))}))}))}},Ec=Cc((function(n,t,e){return xc(n,t,e,-1)}),(function(n,t,e){return Sc(n,t,e,-1)})),Dc=Cc((function(n,t,e){return xc(n,t,e,1)}),(function(n,t,e){return Sc(n,t,e,1)})),Mc=Cc((function(n,t,e){return wc(n,e,t,-1)}),(function(n,t,e){return Oc(n,e,t,-1)})),_c=Cc((function(n,t,e){return wc(n,e,t,1)}),(function(n,t,e){return Oc(n,e,t,1)})),Rc=h([ou(Zi(Wi),Pu(Ec,Dc)),ou(Zi(qi),zu(Ec,Dc)),ou(Zi(Ui),$u(Mc)),ou(Zi(Xi),Gu(_c)),ou(Zi(Gi.concat(Li)),(function(n,t,e){return ho(n.element).bind((function(r){return e.execute(n,t,r)}))}))]),Fc=h([ou(Zi(Gi),Eu)]),Ic=wu(kc,oo.init,Rc,Fc,(function(){return R.some(Tc)})),Vc=[gr("selector"),wr("execute",Cu),wr("moveOnTab",!1)],Bc=function(n,t,e){return e.focusManager.get(n).bind((function(r){return e.execute(n,t,r)}))},Ac=function(n,t,e){Hi(n.element,t.selector).each((function(e){t.focusManager.set(n,e)}))},Nc=function(n,t,e){return fc(n,e.selector,t,-1)},Hc=function(n,t,e){return fc(n,e.selector,t,1)},Pc=h([ou(Zi(Ui),Wu(Nc)),ou(Zi(Xi),Wu(Hc)),ou(nu([tu,Zi(ji)]),(function(n,t,e,r){return e.moveOnTab?Wu(Nc)(n,t,e,r):R.none()})),ou(nu([ru,Zi(ji)]),(function(n,t,e,r){return e.moveOnTab?Wu(Hc)(n,t,e,r):R.none()})),ou(Zi(Li),Bc),ou(Zi(Gi),Bc)]),zc=h([ou(Zi(Gi),Eu)]),jc=wu(Vc,oo.init,Pc,zc,(function(){return R.some(Ac)})),Lc=[zo("onSpace"),zo("onEnter"),zo("onShiftEnter"),zo("onLeft"),zo("onRight"),zo("onTab"),zo("onShiftTab"),zo("onUp"),zo("onDown"),zo("onEscape"),wr("stopSpaceKeyup",!1),hr("focusIn")],$c=wu(Lc,oo.init,(function(n,t,e){return[ou(Zi(Gi),e.onSpace),ou(nu([ru,Zi(Li)]),e.onEnter),ou(nu([tu,Zi(Li)]),e.onShiftEnter),ou(nu([tu,Zi(ji)]),e.onShiftTab),ou(nu([ru,Zi(ji)]),e.onTab),ou(Zi(Ui),e.onUp),ou(Zi(Xi),e.onDown),ou(Zi(Wi),e.onLeft),ou(Zi(qi),e.onRight),ou(Zi(Gi),e.onSpace),ou(Zi($i),e.onEscape)]}),(function(n,t,e){return e.stopSpaceKeyup?[ou(Zi(Gi),Eu)]:[]}),(function(n){return n.focusIn})),Gc=Ou.schema(),Wc=ku.schema(),Uc=bc.schema(),qc=ac.schema(),Xc=Ic.schema(),Yc=_u.schema(),Kc=jc.schema(),Jc=$c.schema(),Qc=function(n){var t=fr("Creating behaviour: "+n.name,fo,n);return function(n,t,e,r,o,i){var u=n,c=yr(t,[br("config",n)]);return ro(u,c,t,e,r,o,i)}(lr(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)}({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Gc,cyclic:Wc,flow:Uc,flatgrid:qc,matrix:Xc,execution:Yc,menu:Kc,special:Jc}),name:"keying",active:{events:function(n,t){return n.handler.toEvents(n,t)}},apis:{focusIn:function(n,t,e){t.sendFocusIn(t).fold((function(){n.getSystem().triggerFocus(n.element,n.element)}),(function(r){r(n,t,e)}))},setGridSize:function(n,t,e,r,o){!function(n){return Qt(n,"setGridSize")}(e)?console.error("Layout does not support setGridSize"):e.setGridSize(r,o)}},state:Bu}),Zc=function(n,t){return function(n,t,e){return Sr(n,t,Ze(e))}(n,{},H(t,(function(t){return e=t.name(),r="Cannot configure "+t.name()+" for "+n,dr(e,e,{tag:"option",process:{}},Ue((function(n){return De("The field: "+e+" is forbidden. "+r)})));var e,r})).concat([mr("dump",b)]))},na=function(n){return n.dump},ta=function(t,e){return n(n({},uo(e)),t.dump)},ea=Zc,ra=ta,oa=kr([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ia=function(n){return Jt(n,"uiType")},ua=function(n,t,e,r){return ia(e)&&"placeholder"===e.uiType?function(n,t,e,r){return n.exists((function(n){return n!==e.owner}))?oa.single(!0,h(e)):Kt(r,e.name).fold((function(){throw new Error("Unknown placeholder component: "+e.name+"\nKnown: ["+$t(r)+"]\nNamespace: "+n.getOr("none")+"\nSpec: "+JSON.stringify(e,null,2))}),(function(n){return n.replace()}))}(n,0,e,r):oa.single(!1,h(e))},ca=function(t,e,r,o){return ua(t,0,r,o).fold((function(i,u){var c=ia(r)?u(e,r.config,r.validated):u(e),a=Kt(c,"components").getOr([]),f=U(a,(function(n){return ca(t,e,n,o)}));return[n(n({},c),{components:f})]}),(function(n,t){if(ia(r)){var o=t(e,r.config,r.validated);return r.validated.preprocess.getOr(b)(o)}return t(e)}))},aa=function(n,t,e,r){var o=Ut(r,(function(n,t){return r=n,o=!1,{name:h(e=t),required:function(){return r.fold((function(n,t){return n}),(function(n,t){return n}))},used:function(){return o},replace:function(){if(o)throw new Error("Trying to use the same placeholder more than once: "+e);return o=!0,r}};var e,r,o})),i=function(n,t,e,r){return U(e,(function(e){return ca(n,t,e,r)}))}(n,t,e,o);return Wt(o,(function(e){if(!1===e.used()&&e.required())throw new Error("Placeholder: "+e.name()+" was not found in components list\nNamespace: "+n.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))})),i},fa=oa.single,sa=oa.multiple,la=h("placeholder"),da=0,ma=function(n){var t=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++da+String(t)},ga=kr([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),pa=wr("factory",{sketch:b}),va=wr("schema",[]),ha=gr("name"),ba=dr("pname","pname",Pe((function(n){return"<alloy."+ma(n.name)+">"})),tr()),ya=mr("schema",(function(){return[hr("preprocess")]})),xa=wr("defaults",h({})),wa=wr("overrides",h({})),Sa=Ze([pa,va,ha,ba,xa,wa]),Oa=Ze([pa,va,ha,xa,wa]),ka=Ze([pa,va,ha,ba,xa,wa]),Ta=Ze([pa,ya,ha,gr("unit"),ba,xa,wa]),Ca=function(n){var t=function(n){return n.name};return n.fold(t,t,t,t)},Ea=function(n,t){return function(e){var r=fr("Converting part type",t,e);return n(r)}},Da=Ea(ga.required,Sa);Ea(ga.external,Oa);var Ma=Ea(ga.optional,ka),_a=Ea(ga.group,Ta),Ra=h("entirety"),Fa=function(n,t,e,r){return Ne(t.defaults(n,e,r),e,{uid:n.partUids[t.name]},t.overrides(n,e,r))},Ia=function(t,e){var r={};return P(e,(function(e){(function(n){return n.fold(R.some,R.none,R.some,R.some)})(e).each((function(e){var o=Va(t,e.pname);r[e.name]=function(r){var i=fr("Part: "+e.name+" in "+t,Ze(e.schema),r);return n(n({},o),{config:r,validated:i})}}))})),r},Va=function(n,t){return{uiType:la(),owner:n,name:t}},Ba=function(n,t,e){return function(n,t,e){var r={},o={};return P(e,(function(n){n.fold((function(n){r[n.pname]=fa(!0,(function(t,e,r){return n.factory.sketch(Fa(t,n,e,r))}))}),(function(n){var e=t.parts[n.name];o[n.name]=h(n.factory.sketch(Fa(t,n,e[Ra()]),e))}),(function(n){r[n.pname]=fa(!1,(function(t,e,r){return n.factory.sketch(Fa(t,n,e,r))}))}),(function(n){r[n.pname]=sa(!0,(function(t,e,r){var o=t[n.name];return H(o,(function(e){return n.factory.sketch(Ne(n.defaults(t,e,r),e,n.overrides(t,e)))}))}))}))})),{internals:h(r),externals:h(o)}}(0,t,e)},Aa=function(n,t,e){return aa(R.some(n),t,t.components,e)},Na=function(n,t,e){var r=t.partUids[e];return n.getSystem().getByUid(r).toOptional()},Ha=function(n,t,e){return Na(n,t,e).getOrDie("Could not find part: "+e)},Pa=function(n,t){var e=function(n){return H(n,Ca)}(t);return Dr(H(e,(function(t){return{key:t,value:n+"-"+t}})))},za=function(n){return dr("partUids","partUids",je((function(t){return Pa(t.uid,n)})),tr())},ja=ma("alloy-premade"),La=function(n){return Er(ja,n)},$a=function(n){return function(n,t){var e=t.toString(),r=e.indexOf(")")+1,o=e.indexOf("("),i=e.substring(o+1,r-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:Jr(i.slice(1))}},n}((function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return n.apply(void 0,e([t.getApis(),t],r,!1))}),n)},Ga=h("alloy-id-"),Wa=h("data-alloy-id"),Ua=Ga(),qa=Wa(),Xa=function(n,t){Object.defineProperty(n.dom,qa,{value:t,writable:!0})},Ya=function(n){var t=lt(n)?n.dom[qa]:null;return R.from(t)},Ka=function(n){return ma(n)},Ja=function(n,t,e,r,o){var i=function(n,t){return(n.length>0?[vr("parts",n)]:[]).concat([gr("uid"),wr("dom",{}),wr("components",[]),Go("originalSpec"),wr("debug.sketcher",{})]).concat(t)}(r,o);return fr(n+" [SpecSchema]",Qe(i.concat(t)),e)},Qa=function(n,t,e,r,o){var i=Za(o),u=function(n){return U(n,(function(n){return n.fold(R.none,R.some,R.none,R.none).map((function(n){return vr(n.name,n.schema.concat([Go(Ra())]))})).toArray()}))}(e),c=za(e),a=Ja(n,t,i,u,[c]),f=Ba(0,a,e);return r(a,Aa(n,a,f.internals()),i,f.externals())},Za=function(t){return function(n){return Jt(n,"uid")}(t)?t:n(n({},t),{uid:Ka("uid")})},nf=Qe([gr("name"),gr("factory"),gr("configFields"),wr("apis",{}),wr("extraApis",{})]),tf=Qe([gr("name"),gr("factory"),gr("configFields"),gr("partFields"),wr("apis",{}),wr("extraApis",{})]),ef=function(t){var e=fr("Sketcher for "+t.name,nf,t),r=Ut(e.apis,$a),o=Ut(e.extraApis,(function(n,t){return Qr(n,t)}));return n(n({name:e.name,configFields:e.configFields,sketch:function(n){return function(n,t,e,r){var o=Za(r);return e(Ja(n,t,o,[],[]),o)}(e.name,e.configFields,e.factory,n)}},r),o)},rf=function(t){var e=fr("Sketcher for "+t.name,tf,t),r=Ia(e.name,e.partFields),o=Ut(e.apis,$a),i=Ut(e.extraApis,(function(n,t){return Qr(n,t)}));return n(n({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:function(n){return Qa(e.name,e.configFields,e.partFields,e.factory,n)},parts:r},o),i)},of=ef({name:"Button",factory:function(t){var e,r=(e=t.action,Hr(W([e.map((function(n){return Kr((function(t,e){n(t),e.stop()}))})).toArray(),si()]))),o=t.dom.tag,i=function(n){return Kt(t.dom,"attributes").bind((function(t){return Kt(t,n)}))};return{uid:t.uid,dom:t.dom,components:t.components,events:r,behaviours:ra(t.buttonBehaviours,[pi.config({}),Qc.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"===o){var t=i("type").getOr("button"),e=i("role").map((function(n){return{role:n}})).getOr({});return n({type:t},e)}return{role:i("role").getOr("button")}}()},eventOrder:t.eventOrder}},configFields:[wr("uid",void 0),gr("dom"),wr("components",[]),ea("buttonBehaviours",[pi,Qc]),hr("action"),hr("role"),wr("eventOrder",{})]}),uf=Object.freeze({__proto__:null,events:function(){return Hr([Pr(In(),E)])},exhibit:function(){return Zr({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}}),cf=ao({fields:[],name:"unselecting",active:uf}),af=function(t){var e=et.fromHtml(t),r=bt(e),o=function(t){var e=void 0!==t.dom.attributes?t.dom.attributes:[];return L(e,(function(t,e){var r;return"class"===e.name?t:n(n({},t),((r={})[e.name]=e.value,r))}),{})}(e),i=function(n){return Array.prototype.slice.call(n.dom.classList,0)}(e),u=0===r.length?{}:{innerHtml:So(e)};return n({tag:ft(e),classes:i,attributes:o},u)},ff=function(n){var t,e=(t={prefix:"tinymce-mobile"},n.replace(/\$\{([^{}]*)\}/g,(function(n,e){var r=t[e];return function(n){var t=typeof n;return"string"===t||"number"===t}(r)?r.toString():n})));return af(e)},sf=function(n){return{dom:ff(n)}},lf=function(n){return uo([ii.config({toggleClass:fi("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),ui(n,(function(n,t){(t?ii.on:ii.off)(n)}))])},df=function(n,t,e,r){var o=lf(e);return gf(t,r,o,n)},mf=function(n,t){var e=t.ui.registry.getAll().icons;return R.from(e[n]).fold((function(){return ff('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item ${prefix}-icon-'+n+' ${prefix}-icon"></span>')}),(function(n){return ff('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item">'+n+"</span>")}))},gf=function(n,t,e,r){return of.sketch({dom:mf(n,r),action:t,buttonBehaviours:Ne(uo([cf.config({})]),e)})},pf=Ma({schema:[gr("dom")],name:"label"}),vf=function(n){return Ma({name:n+"-edge",overrides:function(t){return t.model.manager.edgeActions[n].fold((function(){return{}}),(function(n){return{events:Hr([jr(xn(),(function(t,e,r){return n(t,r)}),[t]),jr(On(),(function(t,e,r){return n(t,r)}),[t]),jr(kn(),(function(t,e,r){r.mouseIsDown.get()&&n(t,r)}),[t])])}}))}})},hf=vf("top-left"),bf=vf("top"),yf=vf("top-right"),xf=vf("right"),wf=vf("bottom-right"),Sf=vf("bottom"),Of=vf("bottom-left"),kf=[pf,vf("left"),xf,bf,Sf,hf,yf,Of,wf,Da({name:"thumb",defaults:h({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:Hr([$r(xn(),n,"spectrum"),$r(wn(),n,"spectrum"),$r(Sn(),n,"spectrum"),$r(On(),n,"spectrum"),$r(kn(),n,"spectrum"),$r(Tn(),n,"spectrum")])}}}),Da({schema:[mr("mouseIsDown",(function(){return mo(!1)}))],name:"spectrum",overrides:function(n){var t=n.model.manager,e=function(e,r){return t.getValueFromEvent(r).map((function(r){return t.setValueFrom(e,n,r)}))};return{behaviours:uo([Qc.config({mode:"special",onLeft:function(e){return t.onLeft(e,n)},onRight:function(e){return t.onRight(e,n)},onUp:function(e){return t.onUp(e,n)},onDown:function(e){return t.onDown(e,n)}}),pi.config({})]),events:Hr([zr(xn(),e),zr(wn(),e),zr(On(),e),zr(kn(),(function(t,r){n.mouseIsDown.get()&&e(t,r)}))])}}})],Tf=function(n,t,e){t.store.manager.onLoad(n,t,e)},Cf=function(n,t,e){t.store.manager.onUnload(n,t,e)},Ef=Object.freeze({__proto__:null,onLoad:Tf,onUnload:Cf,setValue:function(n,t,e,r){t.store.manager.setValue(n,t,e,r)},getValue:function(n,t,e){return t.store.manager.getValue(n,t,e)},getState:function(n,t,e){return e}}),Df=Object.freeze({__proto__:null,events:function(n,t){var e=n.resetOnDom?[qr((function(e,r){Tf(e,n,t)})),Xr((function(e,r){Cf(e,n,t)}))]:[no(n,t,Tf)];return Hr(e)}}),Mf=function(){var n=mo(null);return io({set:n.set,get:n.get,isNotSet:function(){return null===n.get()},clear:function(){n.set(null)},readState:function(){return{mode:"memory",value:n.get()}}})},_f=function(){var t=mo({}),e=mo({});return io({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},lookup:function(n){return Kt(t.get(),n).orThunk((function(){return Kt(e.get(),n)}))},update:function(r){var o=t.get(),i=e.get(),u={},c={};P(r,(function(n){u[n.value]=n,Kt(n,"meta").each((function(t){Kt(t,"text").each((function(t){c[t]=n}))}))})),t.set(n(n({},o),u)),e.set(n(n({},i),c))},clear:function(){t.set({}),e.set({})}})},Rf=Object.freeze({__proto__:null,memory:Mf,dataset:_f,manual:function(){return io({readState:p})},init:function(n){return n.store.manager.state(n)}}),Ff=function(n,t,e,r){var o=t.store;e.update([r]),o.setValue(n,r),t.onSetValue(n,r)},If=[hr("initialValue"),gr("getFallbackEntry"),gr("getDataKey"),gr("setValue"),$o("manager",{setValue:Ff,getValue:function(n,t,e){var r=t.store,o=r.getDataKey(n);return e.lookup(o).getOrThunk((function(){return r.getFallbackEntry(o)}))},onLoad:function(n,t,e){t.store.initialValue.each((function(r){Ff(n,t,e,r)}))},onUnload:function(n,t,e){e.clear()},state:_f})],Vf=[gr("getValue"),wr("setValue",p),hr("initialValue"),$o("manager",{setValue:function(n,t,e,r){t.store.setValue(n,r),t.onSetValue(n,r)},getValue:function(n,t,e){return t.store.getValue(n)},onLoad:function(n,t,e){t.store.initialValue.each((function(e){t.store.setValue(n,e)}))},onUnload:p,state:oo.init})],Bf=[hr("initialValue"),$o("manager",{setValue:function(n,t,e,r){e.set(r),t.onSetValue(n,r)},getValue:function(n,t,e){return e.get()},onLoad:function(n,t,e){t.store.initialValue.each((function(n){e.isNotSet()&&e.set(n)}))},onUnload:function(n,t,e){e.clear()},state:Mf})],Af=[Sr("store",{mode:"memory"},lr("mode",{memory:Bf,manual:Vf,dataset:If})),Po("onSetValue"),wr("resetOnDom",!1)],Nf=ao({fields:Af,name:"representing",active:Df,apis:Ef,extra:{setValueFrom:function(n,t){var e=Nf.getValue(t);Nf.setValue(n,e)}},state:Rf}),Hf=Ti("width",(function(n){return n.dom.offsetWidth})),Pf=function(n,t){return Hf.set(n,t)},zf=function(n){return Hf.get(n)},jf=function(n,t){return{left:n,top:t,translate:function(e,r){return jf(n+e,t+r)}}},Lf=jf,$f=h("slider.change.value"),Gf=function(n){var t=n.event.raw;if(function(n){return-1!==n.type.indexOf("touch")}(t)){var e=t;return void 0!==e.touches&&1===e.touches.length?R.some(e.touches[0]).map((function(n){return Lf(n.clientX,n.clientY)})):R.none()}var r=t;return void 0!==r.clientX?R.some(r).map((function(n){return Lf(n.clientX,n.clientY)})):R.none()},Wf=function(n){return n.model.minX},Uf=function(n){return n.model.minY},qf=function(n){return n.model.minX-1},Xf=function(n){return n.model.minY-1},Yf=function(n){return n.model.maxX},Kf=function(n){return n.model.maxY},Jf=function(n){return n.model.maxX+1},Qf=function(n){return n.model.maxY+1},Zf=function(n,t,e){return t(n)-e(n)},ns=function(n){return Zf(n,Yf,Wf)},ts=function(n){return Zf(n,Kf,Uf)},es=function(n){return ns(n)/2},rs=function(n){return ts(n)/2},os=function(n){return n.stepSize},is=function(n){return n.snapToGrid},us=function(n){return n.snapStart},cs=function(n){return n.rounded},as=function(n,t){return void 0!==n[t+"-edge"]},fs=function(n){return as(n,"left")},ss=function(n){return as(n,"right")},ls=function(n){return as(n,"top")},ds=function(n){return as(n,"bottom")},ms=function(n){return n.model.value.get()},gs=function(n){return{x:n}},ps=function(n){return{y:n}},vs=function(n,t){return{x:n,y:t}},hs=function(n,t){Jn(n,$f(),{value:t})},bs=function(n,t,e,r){return n<t?n:n>e?e:n===t?t-1:Math.max(t,n-r)},ys=function(n,t,e,r){return n>e?n:n<t?t:n===e?e+1:Math.min(e,n+r)},xs=function(n,t,e){return Math.max(t,Math.min(e,n))},ws=function(n){var t=n.min,e=n.max,r=n.range,o=n.value,i=n.step,u=n.snap,c=n.snapStart,a=n.rounded,f=n.hasMinEdge,s=n.hasMaxEdge,l=n.minBound,d=n.maxBound,m=n.screenRange,g=f?t-1:t,p=s?e+1:e;if(o<l)return g;if(o>d)return p;var v=function(n,t,e){return Math.min(e,Math.max(n,t))-t}(o,l,d),h=xs(v/m*r+t,g,p);return u&&h>=t&&h<=e?function(n,t,e,r,o){return o.fold((function(){var o=n-t,i=Math.round(o/r)*r;return xs(t+i,t-1,e+1)}),(function(t){var o=(n-t)%r,i=Math.round(o/r),u=Math.floor((n-t)/r),c=Math.floor((e-t)/r),a=t+Math.min(c,u+i)*r;return Math.max(t,a)}))}(h,t,e,i,c):a?Math.round(h):h},Ss=function(n){var t=n.min,e=n.max,r=n.range,o=n.value,i=n.hasMinEdge,u=n.hasMaxEdge,c=n.maxBound,a=n.maxOffset,f=n.centerMinEdge,s=n.centerMaxEdge;return o<t?i?0:f:o>e?u?c:s:(o-t)/r*a},Os=function(n){return n.element.dom.getBoundingClientRect()},ks=function(n,t){return n[t]},Ts=function(n){var t=Os(n);return ks(t,"left")},Cs=function(n){var t=Os(n);return ks(t,"right")},Es=function(n){var t=Os(n);return ks(t,"top")},Ds=function(n){var t=Os(n);return ks(t,"bottom")},Ms=function(n){var t=Os(n);return ks(t,"width")},_s=function(n){var t=Os(n);return ks(t,"height")},Rs=function(n,t,e){return(n+t)/2-e},Fs=function(n,t){var e=Os(n),r=Os(t),o=ks(e,"left"),i=ks(e,"right"),u=ks(r,"left");return Rs(o,i,u)},Is=function(n,t){var e=Os(n),r=Os(t),o=ks(e,"top"),i=ks(e,"bottom"),u=ks(r,"top");return Rs(o,i,u)},Vs=function(n,t){Jn(n,$f(),{value:t})},Bs=function(n){return{x:n}},As=function(n,t,e){var r={min:Wf(t),max:Yf(t),range:ns(t),value:e,step:os(t),snap:is(t),snapStart:us(t),rounded:cs(t),hasMinEdge:fs(t),hasMaxEdge:ss(t),minBound:Ts(n),maxBound:Cs(n),screenRange:Ms(n)};return ws(r)},Ns=function(n){return function(t,e){return function(n,t,e){var r=(n>0?ys:bs)(ms(e).x,Wf(e),Yf(e),os(e));return Vs(t,Bs(r)),R.some(r)}(n,t,e).map(E)}},Hs=function(n,t,e,r,o,i){var u=function(n,t,e,r,o){var i=Ms(n),u=r.bind((function(t){return R.some(Fs(t,n))})).getOr(0),c=o.bind((function(t){return R.some(Fs(t,n))})).getOr(i),a={min:Wf(t),max:Yf(t),range:ns(t),value:e,hasMinEdge:fs(t),hasMaxEdge:ss(t),minBound:Ts(n),minOffset:0,maxBound:Cs(n),maxOffset:i,centerMinEdge:u,centerMaxEdge:c};return Ss(a)}(t,i,e,r,o);return Ts(t)-Ts(n)+u},Ps=Ns(-1),zs=Ns(1),js=R.none,Ls=R.none,$s={"top-left":R.none(),top:R.none(),"top-right":R.none(),right:R.some((function(n,t){hs(n,gs(Jf(t)))})),"bottom-right":R.none(),bottom:R.none(),"bottom-left":R.none(),left:R.some((function(n,t){hs(n,gs(qf(t)))}))},Gs=Object.freeze({__proto__:null,setValueFrom:function(n,t,e){var r=As(n,t,e),o=Bs(r);return Vs(n,o),r},setToMin:function(n,t){var e=Wf(t);Vs(n,Bs(e))},setToMax:function(n,t){var e=Yf(t);Vs(n,Bs(e))},findValueOfOffset:As,getValueFromEvent:function(n){return Gf(n).map((function(n){return n.left}))},findPositionOfValue:Hs,setPositionFromValue:function(n,t,e,r){var o=ms(e),i=Hs(n,r.getSpectrum(n),o.x,r.getLeftEdge(n),r.getRightEdge(n),e),u=zf(t.element)/2;bi(t.element,"left",i-u+"px")},onLeft:Ps,onRight:zs,onUp:js,onDown:Ls,edgeActions:$s}),Ws=function(n,t){Jn(n,$f(),{value:t})},Us=function(n){return{y:n}},qs=function(n,t,e){var r={min:Uf(t),max:Kf(t),range:ts(t),value:e,step:os(t),snap:is(t),snapStart:us(t),rounded:cs(t),hasMinEdge:ls(t),hasMaxEdge:ds(t),minBound:Es(n),maxBound:Ds(n),screenRange:_s(n)};return ws(r)},Xs=function(n){return function(t,e){return function(n,t,e){var r=(n>0?ys:bs)(ms(e).y,Uf(e),Kf(e),os(e));return Ws(t,Us(r)),R.some(r)}(n,t,e).map(E)}},Ys=function(n,t,e,r,o,i){var u=function(n,t,e,r,o){var i=_s(n),u=r.bind((function(t){return R.some(Is(t,n))})).getOr(0),c=o.bind((function(t){return R.some(Is(t,n))})).getOr(i),a={min:Uf(t),max:Kf(t),range:ts(t),value:e,hasMinEdge:ls(t),hasMaxEdge:ds(t),minBound:Es(n),minOffset:0,maxBound:Ds(n),maxOffset:i,centerMinEdge:u,centerMaxEdge:c};return Ss(a)}(t,i,e,r,o);return Es(t)-Es(n)+u},Ks=R.none,Js=R.none,Qs=Xs(-1),Zs=Xs(1),nl={"top-left":R.none(),top:R.some((function(n,t){hs(n,ps(Xf(t)))})),"top-right":R.none(),right:R.none(),"bottom-right":R.none(),bottom:R.some((function(n,t){hs(n,ps(Qf(t)))})),"bottom-left":R.none(),left:R.none()},tl=Object.freeze({__proto__:null,setValueFrom:function(n,t,e){var r=qs(n,t,e),o=Us(r);return Ws(n,o),r},setToMin:function(n,t){var e=Uf(t);Ws(n,Us(e))},setToMax:function(n,t){var e=Kf(t);Ws(n,Us(e))},findValueOfOffset:qs,getValueFromEvent:function(n){return Gf(n).map((function(n){return n.top}))},findPositionOfValue:Ys,setPositionFromValue:function(n,t,e,r){var o=ms(e),i=Ys(n,r.getSpectrum(n),o.y,r.getTopEdge(n),r.getBottomEdge(n),e),u=Ei(t.element)/2;bi(t.element,"top",i-u+"px")},onLeft:Ks,onRight:Js,onUp:Qs,onDown:Zs,edgeActions:nl}),el=function(n,t){Jn(n,$f(),{value:t})},rl=function(n,t){return{x:n,y:t}},ol=function(n,t){return function(e,r){return function(n,t,e,r){var o=n>0?ys:bs,i=t?ms(r).x:o(ms(r).x,Wf(r),Yf(r),os(r)),u=t?o(ms(r).y,Uf(r),Kf(r),os(r)):ms(r).y;return el(e,rl(i,u)),R.some(i)}(n,t,e,r).map(E)}},il=ol(-1,!1),ul=ol(1,!1),cl=ol(-1,!0),al=ol(1,!0),fl={"top-left":R.some((function(n,t){hs(n,vs(qf(t),Xf(t)))})),top:R.some((function(n,t){hs(n,vs(es(t),Xf(t)))})),"top-right":R.some((function(n,t){hs(n,vs(Jf(t),Xf(t)))})),right:R.some((function(n,t){hs(n,vs(Jf(t),rs(t)))})),"bottom-right":R.some((function(n,t){hs(n,vs(Jf(t),Qf(t)))})),bottom:R.some((function(n,t){hs(n,vs(es(t),Qf(t)))})),"bottom-left":R.some((function(n,t){hs(n,vs(qf(t),Qf(t)))})),left:R.some((function(n,t){hs(n,vs(qf(t),rs(t)))}))},sl=Object.freeze({__proto__:null,setValueFrom:function(n,t,e){var r=As(n,t,e.left),o=qs(n,t,e.top),i=rl(r,o);return el(n,i),i},setToMin:function(n,t){var e=Wf(t),r=Uf(t);el(n,rl(e,r))},setToMax:function(n,t){var e=Yf(t),r=Kf(t);el(n,rl(e,r))},getValueFromEvent:function(n){return Gf(n)},setPositionFromValue:function(n,t,e,r){var o=ms(e),i=Hs(n,r.getSpectrum(n),o.x,r.getLeftEdge(n),r.getRightEdge(n),e),u=Ys(n,r.getSpectrum(n),o.y,r.getTopEdge(n),r.getBottomEdge(n),e),c=zf(t.element)/2,a=Ei(t.element)/2;bi(t.element,"left",i-c+"px"),bi(t.element,"top",u-a+"px")},onLeft:il,onRight:ul,onUp:cl,onDown:al,edgeActions:fl}),ll=[wr("stepSize",1),wr("onChange",p),wr("onChoose",p),wr("onInit",p),wr("onDragStart",p),wr("onDragEnd",p),wr("snapToGrid",!1),wr("rounded",!0),hr("snapStart"),pr("model",lr("mode",{x:[wr("minX",0),wr("maxX",100),mr("value",(function(n){return mo(n.mode.minX)})),gr("getInitialValue"),$o("manager",Gs)],y:[wr("minY",0),wr("maxY",100),mr("value",(function(n){return mo(n.mode.minY)})),gr("getInitialValue"),$o("manager",tl)],xy:[wr("minX",0),wr("maxX",100),wr("minY",0),wr("maxY",100),mr("value",(function(n){return mo({x:n.mode.minX,y:n.mode.minY})})),gr("getInitialValue"),$o("manager",sl)]})),Zc("sliderBehaviours",[Qc,Nf]),mr("mouseIsDown",(function(){return mo(!1)}))],dl=h("mouse.released"),ml=rf({name:"Slider",configFields:ll,partFields:kf,factory:function(n,t,e,r){var o,i=function(t){return Ha(t,n,"thumb")},u=function(t){return Ha(t,n,"spectrum")},c=function(t){return Na(t,n,"left-edge")},a=function(t){return Na(t,n,"right-edge")},f=function(t){return Na(t,n,"top-edge")},s=function(t){return Na(t,n,"bottom-edge")},l=n.model,d=l.manager,m=function(t,e){d.setPositionFromValue(t,e,n,{getLeftEdge:c,getRightEdge:a,getTopEdge:f,getBottomEdge:s,getSpectrum:u})},g=function(n,t){l.value.set(t);var e=i(n);m(n,e)},p=function(t){var e=n.mouseIsDown.get();n.mouseIsDown.set(!1),e&&Na(t,n,"thumb").each((function(e){var r=l.value.get();n.onChoose(t,e,r)}))},v=function(t,e){e.stop(),n.mouseIsDown.set(!0),n.onDragStart(t,i(t))},h=function(t,e){e.stop(),n.onDragEnd(t,i(t)),p(t)};return{uid:n.uid,dom:n.dom,components:t,behaviours:ta(n.sliderBehaviours,[Qc.config({mode:"special",focusIn:function(t){return Na(t,n,"spectrum").map(Qc.focusIn).map(E)}}),Nf.config({store:{mode:"manual",getValue:function(n){return l.value.get()}}}),qo.config({channels:(o={},o[dl()]={onReceive:p},o)})]),events:Hr([zr($f(),(function(t,e){!function(t,e){g(t,e);var r=i(t);n.onChange(t,r,e),R.some(!0)}(t,e.event.value)})),qr((function(t,e){var r=l.getInitialValue();l.value.set(r);var o=i(t);m(t,o);var c=u(t);n.onInit(t,o,c,l.value.get())})),zr(xn(),v),zr(Sn(),h),zr(On(),v),zr(Tn(),h)]),apis:{resetToMin:function(t){d.setToMin(t,n)},resetToMax:function(t){d.setToMax(t,n)},setValue:g,refresh:m},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(n,t,e){n.setValue(t,e)},resetToMin:function(n,t){n.resetToMin(t)},resetToMax:function(n,t){n.resetToMax(t)},refresh:function(n,t){n.refresh(t)}}}),gl=function(n,t,e,r){return gf(t,(function(){var r=e();n.setContextToolbar([{label:t+" group",items:r}])}),{},r)},pl=function(n){var t=function(n){return n<0?"black":n>360?"white":"hsl("+n+", 100%, 50%)"};return ml.sketch({dom:ff('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[ml.parts["left-edge"](sf('<div class="${prefix}-hue-slider-black"></div>')),ml.parts.spectrum({dom:ff('<div class="${prefix}-slider-gradient-container"></div>'),components:[sf('<div class="${prefix}-slider-gradient"></div>')],behaviours:uo([ii.config({toggleClass:fi("thumb-active")})])}),ml.parts["right-edge"](sf('<div class="${prefix}-hue-slider-white"></div>')),ml.parts.thumb({dom:ff('<div class="${prefix}-slider-thumb"></div>'),behaviours:uo([ii.config({toggleClass:fi("thumb-active")})])})],onChange:function(e,r,o){var i=t(o.x());bi(r.element,"background-color",i),n.onChange(e,r,i)},onDragStart:function(n,t){ii.on(t)},onDragEnd:function(n,t){ii.off(t)},onInit:function(n,e,r,o){var i=t(o.x());bi(e.element,"background-color",i)},stepSize:10,model:{mode:"x",minX:0,maxX:360,getInitialValue:function(){return{x:n.getInitialValue()}}},sliderBehaviours:uo([ci(ml.refresh)])})},vl=function(n,t){var e={onChange:function(n,e,r){t.undoManager.transact((function(){t.formatter.apply("forecolor",{value:r}),t.nodeChanged()}))},getInitialValue:h(-1)};return gl(n,"color-levels",(function(){return function(n){return[pl(n)]}(e)}),t)},hl=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],bl=function(n,t){return(lt(t)?R.some(t):ht(t).filter(lt)).map((function(t){return function(n,t,e){return Ii((function(n,t){return t(n)}),Bi,n,t,e)}(t,(function(n){return Si(n,"font-size").isSome()}),n).bind((function(n){return Si(n,"font-size")})).getOrThunk((function(){return xi(t,"font-size")}))})).getOr("")},yl=function(n){var t=n.selection.getStart(),e=et.fromDom(t),r=et.fromDom(n.getBody()),o=bl((function(n){return ct(r,n)}),e);return $(hl,(function(n){return o===n})).getOr("medium")},xl=function(n){return function(n){return G(hl,(function(t){return t===n}))}(yl(n)).getOr(2)},wl=function(n,t){(function(n){return R.from(hl[n])})(t).each((function(t){!function(n,t){yl(n)!==t&&n.execCommand("fontSize",!1,t)}(n,t)}))},Sl=h(hl),Ol=Qe([gr("getInitialValue"),gr("onChange"),gr("category"),gr("sizes")]),kl=function(n){var t=fr("SizeSlider",Ol,n);return ml.sketch({dom:{tag:"div",classes:[fi("slider-"+t.category+"-size-container"),fi("slider"),fi("slider-size-container")]},onChange:function(n,e,r){var o=r.x();(function(n){return n>=0&&n<t.sizes.length})(o)&&t.onChange(o)},onDragStart:function(n,t){ii.on(t)},onDragEnd:function(n,t){ii.off(t)},model:{mode:"x",minX:0,maxX:t.sizes.length-1,getInitialValue:function(){return{x:t.getInitialValue()}}},stepSize:1,snapToGrid:!0,sliderBehaviours:uo([ci(ml.refresh)]),components:[ml.parts.spectrum({dom:ff('<div class="${prefix}-slider-size-container"></div>'),components:[sf('<div class="${prefix}-slider-size-line"></div>')]}),ml.parts.thumb({dom:ff('<div class="${prefix}-slider-thumb"></div>'),behaviours:uo([ii.config({toggleClass:fi("thumb-active")})])})]})},Tl=Sl(),Cl=function(n){return kl({onChange:n.onChange,sizes:Tl,category:"font",getInitialValue:n.getInitialValue})},El=function(n){return[sf('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),Cl(n),sf('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')]},Dl=function(t){var e=function(n){return void 0!==n.uid}(t)&&Qt(t,"uid")?t.uid:Ka("memento");return{get:function(n){return n.getSystem().getByUid(e).getOrDie()},getOpt:function(n){return n.getSystem().getByUid(e).toOptional()},asSpec:function(){return n(n({},t),{uid:e})}}},Ml={},_l={exports:Ml};!function(n,t,e,r){!function(r,o){"object"==typeof t&&void 0!==e?e.exports=o():"function"==typeof n&&n.amd?n(o):(r="undefined"!=typeof globalThis?globalThis:r||self).EphoxContactWrapper=o()}(this,(function(){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t={exports:{}};!function(t){!function(n){var e=setTimeout;function r(){}function o(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(n,this)}function i(n,t){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn((function(){var e=1===n._state?t.onFulfilled:t.onRejected;if(null!==e){var r;try{r=e(n._value)}catch(n){return void c(t.promise,n)}u(t.promise,r)}else(1===n._state?u:c)(t.promise,n._value)}))):n._deferreds.push(t)}function u(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if(t instanceof o)return n._state=3,n._value=t,void a(n);if("function"==typeof e)return void s((r=e,i=t,function(){r.apply(i,arguments)}),n)}n._state=1,n._value=t,a(n)}catch(t){c(n,t)}var r,i}function c(n,t){n._state=2,n._value=t,a(n)}function a(n){2===n._state&&0===n._deferreds.length&&o._immediateFn((function(){n._handled||o._unhandledRejectionFn(n._value)}));for(var t=0,e=n._deferreds.length;t<e;t++)i(n,n._deferreds[t]);n._deferreds=null}function f(n,t,e){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.promise=e}function s(n,t){var e=!1;try{n((function(n){e||(e=!0,u(t,n))}),(function(n){e||(e=!0,c(t,n))}))}catch(n){if(e)return;e=!0,c(t,n)}}o.prototype.catch=function(n){return this.then(null,n)},o.prototype.then=function(n,t){var e=new this.constructor(r);return i(this,new f(n,t,e)),e},o.all=function(n){var t=Array.prototype.slice.call(n);return new o((function(n,e){if(0===t.length)return n([]);var r=t.length;function o(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(n){o(i,n)}),e)}t[i]=u,0==--r&&n(t)}catch(n){e(n)}}for(var i=0;i<t.length;i++)o(i,t[i])}))},o.resolve=function(n){return n&&"object"==typeof n&&n.constructor===o?n:new o((function(t){t(n)}))},o.reject=function(n){return new o((function(t,e){e(n)}))},o.race=function(n){return new o((function(t,e){for(var r=0,o=n.length;r<o;r++)n[r].then(t,e)}))},o._immediateFn="function"==typeof setImmediate?function(n){setImmediate(n)}:function(n){e(n,0)},o._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},o._setImmediateFn=function(n){o._immediateFn=n},o._setUnhandledRejectionFn=function(n){o._unhandledRejectionFn=n},t.exports?t.exports=o:n.Promise||(n.Promise=o)}(n)}(t);var e=t.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||e}}))}(void 0,Ml,_l);var Rl,Fl,Il,Vl=_l.exports.boltExport,Bl=function(n){return function(n){return new Vl((function(t){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n)}))}(n).then((function(n){return n.split(",")[1]}))},Al=function(n,t){(function(n){return Bl(n)})(t).then((function(e){n.undoManager.transact((function(){var r=n.editorUpload.blobCache,o=r.create(ma("mceu"),t,e);r.add(o);var i=n.dom.createHTML("img",{src:o.blobUri()});n.insertContent(i)}))}))},Nl=function(n){var t=Dl({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:Hr([Gr(Rn()),zr(_n(),(function(t,e){(function(n){var t=n.event.raw,e=t.target.files||t.dataTransfer.files;return R.from(e[0])})(e).each((function(t){Al(n,t)}))}))])});return of.sketch({dom:mf("image",n),components:[t.asSpec()],action:function(n){t.get(n).element.dom.click()}})},Hl=function(n){return n.dom.textContent},Pl=function(n){return n.length>0},zl=function(n){return null==n?"":n},jl=function(n){return Gl(n).fold((function(){return function(n){return{url:"",text:n.selection.getContent({format:"text"}),title:"",target:"",link:R.none()}}(n)}),(function(n){return function(n){var t=Hl(n),e=ee(n,"href"),r=ee(n,"title"),o=ee(n,"target");return{url:zl(e),text:t!==e?zl(t):"",title:zl(r),target:zl(o),link:R.some(n)}}(n)}))},Ll=function(n,t,e){return e.text.toOptional().filter(Pl).fold((function(){return function(n){return ee(n,"href")===Hl(n)}(n)?R.some(t):R.none()}),R.some)},$l=function(n,t){t.url.toOptional().filter(Pl).fold((function(){!function(n,t){t.link.bind(b).each((function(t){n.execCommand("unlink")}))}(n,t)}),(function(e){var r=function(n,t){var e={};return e.href=n,t.title.toOptional().filter(Pl).each((function(n){e.title=n})),t.target.toOptional().filter(Pl).each((function(n){e.target=n})),e}(e,t);t.link.bind(b).fold((function(){var o=t.text.toOptional().filter(Pl).getOr(e);n.insertContent(n.dom.createHTML("a",r,n.dom.encode(o)))}),(function(n){var o=Ll(n,e,t);te(n,r),o.each((function(t){!function(n,t){n.dom.textContent=t}(n,t)}))}))}))},Gl=function(n){var t=et.fromDom(n.selection.getStart());return Pi(t,"a")},Wl=bn(),Ul=function(n,t){var e=t.selection.getRng();n(),t.selection.setRng(e)},ql=function(n,t){return{key:n,value:{config:{},me:function(n,t){var e=Hr(t);return ao({fields:[gr("enabled")],name:n,active:{events:h(e)}})}(n,t),configAsRaw:h({}),initialConfig:{},state:oo}}},Xl=Object.freeze({__proto__:null,getCurrent:function(n,t,e){return t.find(n)}}),Yl=[gr("find")],Kl=ao({fields:Yl,name:"composing",apis:Xl}),Jl=ef({name:"Container",factory:function(e){var r=e.dom,o=r.attributes,i=t(r,["attributes"]);return{uid:e.uid,dom:n({tag:"div",attributes:n({role:"presentation"},o)},i),components:e.components,behaviours:na(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[wr("components",[]),Zc("containerBehaviours",[]),wr("events",{}),wr("domModification",{}),wr("eventOrder",{})]}),Ql=ef({name:"DataField",factory:function(n){return{uid:n.uid,dom:n.dom,behaviours:ra(n.dataBehaviours,[Nf.config({store:{mode:"memory",initialValue:n.getInitialValue()}}),Kl.config({find:R.some})]),events:Hr([qr((function(t,e){Nf.setValue(t,n.getInitialValue())}))])}},configFields:[gr("uid"),gr("dom"),gr("getInitialValue"),ea("dataBehaviours",[Nf,Kl])]}),Zl=function(n){return n.dom.value},nd=function(n,t){if(void 0===t)throw new Error("Value.set was undefined");n.dom.value=t},td=h([hr("data"),wr("inputAttributes",{}),wr("inputStyles",{}),wr("tag","input"),wr("inputClasses",[]),Po("onSetValue"),wr("styles",{}),wr("eventOrder",{}),Zc("inputBehaviours",[Nf,pi]),wr("selectOnFocus",!0)]),ed=function(t){return n(n({},function(n){return uo([pi.config({onFocus:n.selectOnFocus?function(n){var t=n.element,e=Zl(t);t.dom.setSelectionRange(0,e.length)}:p})])}(t)),ta(t.inputBehaviours,[Nf.config({store:n(n({mode:"manual"},t.data.map((function(n){return{initialValue:n}})).getOr({})),{getValue:function(n){return Zl(n.element)},setValue:function(n,t){Zl(n.element)!==t&&nd(n.element,t)}}),onSetValue:t.onSetValue})]))},rd=function(t){return{tag:t.tag,attributes:n({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},od=ef({name:"Input",configFields:td(),factory:function(n,t){return{uid:n.uid,dom:rd(n),components:[],behaviours:ed(n),eventOrder:n.eventOrder}}}),id=Object.freeze({__proto__:null,exhibit:function(n,t){return Zr({attributes:Dr([{key:t.tabAttr,value:"true"}])})}}),ud=[wr("tabAttr","data-alloy-tabstop")],cd=ao({fields:ud,name:"tabstopping",active:id}),ad=tinymce.util.Tools.resolve("tinymce.util.I18n"),fd=function(n,t){var e=Dl(od.sketch({inputAttributes:{placeholder:ad.translate(t)},onSetValue:function(n,t){Kn(n,Mn())},inputBehaviours:uo([Kl.config({find:R.some}),cd.config({}),Qc.config({mode:"execution"})]),selectOnFocus:!1})),r=Dl(of.sketch({dom:ff('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(n){var t=e.get(n);Nf.setValue(t,"")}}));return{name:n,spec:Jl.sketch({dom:ff('<div class="${prefix}-input-container"></div>'),components:[e.asSpec(),r.asSpec()],containerBehaviours:uo([ii.config({toggleClass:fi("input-container-empty")}),Kl.config({find:function(n){return R.some(e.get(n))}}),ql("input-clearing",[zr(Mn(),(function(n){var t=e.get(n);(Nf.getValue(t).length>0?ii.off:ii.on)(n)}))])])})}},sd=function(n){return{name:n,spec:Ql.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return R.none()}})}},ld=["input","button","textarea","select"],dd=function(n,t,e){(t.disabled()?bd:yd)(n,t)},md=function(n,t){return!0===t.useNative&&A(ld,ft(n.element))},gd=function(n){ne(n.element,"disabled","disabled")},pd=function(n){ie(n.element,"disabled")},vd=function(n){ne(n.element,"aria-disabled","true")},hd=function(n){ne(n.element,"aria-disabled","false")},bd=function(n,t,e){t.disableClass.each((function(t){se(n.element,t)})),(md(n,t)?gd:vd)(n),t.onDisabled(n)},yd=function(n,t,e){t.disableClass.each((function(t){de(n.element,t)})),(md(n,t)?pd:hd)(n),t.onEnabled(n)},xd=function(n,t){return md(n,t)?function(n){return oe(n.element,"disabled")}(n):function(n){return"true"===ee(n.element,"aria-disabled")}(n)},wd=Object.freeze({__proto__:null,enable:yd,disable:bd,isDisabled:xd,onLoad:dd,set:function(n,t,e,r){(r?bd:yd)(n,t)}}),Sd=Object.freeze({__proto__:null,exhibit:function(n,t){return Zr({classes:t.disabled()?t.disableClass.toArray():[]})},events:function(n,t){return Hr([Pr(zn(),(function(t,e){return xd(t,n)})),no(n,t,dd)])}}),Od=[(Rl="disabled",Fl=C,Sr(Rl,Fl,er)),wr("useNative",!0),hr("disableClass"),Po("onDisabled"),Po("onEnabled")],kd=ao({fields:Od,name:"disabling",active:Sd,apis:wd}),Td=[Zc("formBehaviours",[Nf])],Cd=function(n){return"<alloy.field."+n+">"},Ed=function(n,t){return{uid:n.uid,dom:n.dom,components:t,behaviours:ta(n.formBehaviours,[Nf.config({store:{mode:"manual",getValue:function(t){var e=function(n,t){var e=n.getSystem();return Ut(t.partUids,(function(n,t){return h(e.getByUid(n))}))}(t,n);return Ut(e,(function(n,t){return n().bind((function(n){var e,r,o=Kl.getCurrent(n);return e=o,r=new Error("Cannot find a current component to extract the value from for form part '"+t+"': "+Co(n.element)),e.fold((function(){return be.error(r)}),be.value)})).map(Nf.getValue)}))},setValue:function(t,e){Wt(e,(function(e,r){Na(t,n,r).each((function(n){Kl.getCurrent(n).each((function(n){Nf.setValue(n,e)}))}))}))}}})]),apis:{getField:function(t,e){return Na(t,n,e).bind(Kl.getCurrent)}}}},Dd=($a((function(n,t,e){return n.getField(t,e)})),function(n){var t=function(){var n=[];return{field:function(t,e){return n.push(t),function(n,t,e){return{uiType:la(),owner:n,name:t,config:e,validated:{}}}("form",Cd(t),e)},record:h(n)}}(),e=n(t),r=t.record(),o=H(r,(function(n){return Da({name:n,pname:Cd(n)})}));return Qa("form",Td,o,Ed,e)}),Md=function(n){var t=Ze([gr("fields"),wr("maxFieldIndex",n.fields.length-1),gr("onExecute"),gr("getInitialValue"),mr("state",(function(){return{dialogSwipeState:Iu(),currentScreen:mo(0)}}))]),e=fr("SerialisedDialog",t,n),r=function(n,t,e){return of.sketch({dom:ff('<span class="${prefix}-icon-'+t+' ${prefix}-icon"></span>'),action:function(t){Jn(t,"navigateEvent",{direction:n})},buttonBehaviours:uo([kd.config({disableClass:fi("toolbar-navigation-disabled"),disabled:function(){return!e}})])})},o=function(n,t){var r=Fi(n.element,"."+fi("serialised-dialog-screen"));Hi(n.element,"."+fi("serialised-dialog-chain")).each((function(n){e.state.currentScreen.get()+t>=0&&e.state.currentScreen.get()+t<r.length&&(Si(n,"left").each((function(e){var o=parseInt(e,10),i=zf(r[0]);bi(n,"left",o-t*i+"px")})),e.state.currentScreen.set(e.state.currentScreen.get()+t))}))},i=function(n){var t=Fi(n.element,"input");R.from(t[e.state.currentScreen.get()]).each((function(t){n.getSystem().getByDom(t).each((function(t){var e,r;e=n,r=t.element,e.getSystem().triggerFocus(r,e.element)}))}));var r=c.get(n);hu.highlightAt(r,e.state.currentScreen.get())},u=Dl(Dd((function(n){return{dom:ff('<div class="${prefix}-serialised-dialog"></div>'),components:[Jl.sketch({dom:ff('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:H(e.fields,(function(t,o){return o<=e.maxFieldIndex?Jl.sketch({dom:ff('<div class="${prefix}-serialised-dialog-screen"></div>'),components:[r(-1,"previous",o>0),n.field(t.name,t.spec),r(1,"next",o<e.maxFieldIndex)]}):n.field(t.name,t.spec)}))})],formBehaviours:uo([ci((function(n,t){!function(n,t){Hi(n.element,"."+fi("serialised-dialog-chain")).each((function(n){bi(n,"left",-e.state.currentScreen.get()*t.width+"px")}))}(n,t)})),Qc.config({mode:"special",focusIn:function(n,t){i(n)},onTab:function(n,t){return o(n,1),R.some(!0)},onShiftTab:function(n,t){return o(n,-1),R.some(!0)}}),ql("form-events",[qr((function(n,t){e.state.currentScreen.set(0),e.state.dialogSwipeState.clear();var r=c.get(n);hu.highlightFirst(r),e.getInitialValue(n).each((function(t){Nf.setValue(n,t)}))})),Kr(e.onExecute),zr(Fn(),(function(n,t){"left"===t.event.raw.propertyName&&i(n)})),zr("navigateEvent",(function(n,t){var e=t.event.direction;o(n,e)}))])])}}))),c=Dl({dom:ff('<div class="${prefix}-dot-container"></div>'),behaviours:uo([hu.config({highlightClass:fi("dot-active"),itemClass:fi("dot-item")})]),components:U(e.fields,(function(n,t){return t<=e.maxFieldIndex?[sf('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]}))});return{dom:ff('<div class="${prefix}-serializer-wrapper"></div>'),components:[u.asSpec(),c.asSpec()],behaviours:uo([Qc.config({mode:"special",focusIn:function(n){var t=u.get(n);Qc.focusIn(t)}}),ql("serializer-wrapper-events",[zr(xn(),(function(n,t){var r=t.event;e.state.dialogSwipeState.set(function(n){return{xValue:n,points:[]}}(r.raw.touches[0].clientX))})),zr(wn(),(function(n,t){var r=t.event;e.state.dialogSwipeState.on((function(n){t.event.prevent(),e.state.dialogSwipeState.set(function(n,t){if(t===n.xValue)return n;var e=t-n.xValue>0?1:-1,r={direction:e,xValue:t};return{xValue:t,points:(0===n.points.length?[]:n.points[n.points.length-1].direction===e?n.points.slice(0,n.points.length-1):n.points).concat([r])}}(n,r.raw.touches[0].clientX))}))})),zr(Sn(),(function(n,t){e.state.dialogSwipeState.on((function(t){var e=u.get(n),r=-1*function(n){if(0===n.points.length)return 0;var t=n.points[0].direction,e=n.points[n.points.length-1].direction;return-1===t&&-1===e?-1:1===t&&1===e?1:0}(t);o(e,r)}))}))])])}},_d=F((function(n,t){return[{label:"the link group",items:[Md({fields:[fd("url","Type or paste URL"),fd("text","Link text"),fd("title","Link title"),fd("target","Link target"),sd("link")],maxFieldIndex:["url","text","title","target"].length-1,getInitialValue:function(){return R.some(jl(t))},onExecute:function(e,r){var o=Nf.getValue(e);$l(t,o),n.restoreToolbar(),t.focus()}})]}]})),Rd=function(n,t){return df(t,"link","link",(function(){var e=_d(n,t);n.setContextToolbar(e),function(n,t){(Wl.os.isAndroid()?Ul:T)(t,n)}(t,(function(){n.focusToolbar()})),Gl(t).each((function(n){t.selection.select(n.dom)}))}))},Fd=Hr([function(n,t){return{key:n,value:Ar({can:t})}}(An(),(function(n,t){var e=t.event,r=e.originator,o=e.target;return!function(n,t,e){return ct(t,n.element)&&!ct(t,e)}(n,r,o)||(console.warn(An()+" did not get interpreted by the desired target. \nOriginator: "+Co(r)+"\nTarget: "+Co(o)+"\nCheck the "+An()+" event handlers"),!1)}))]),Id=Object.freeze({__proto__:null,events:Fd}),Vd=b,Bd=function(n){var t=function(t){return"The component must be in a context to execute: "+t+(n?"\n"+Co(n().element)+" is not in context.":"")},e=function(n){return function(){throw new Error(t(n))}},r=function(n){return function(){console.warn(t(n))}};return{debugInfo:h("fake"),triggerEvent:r("triggerEvent"),triggerFocus:r("triggerFocus"),triggerEscape:r("triggerEscape"),broadcast:r("broadcast"),broadcastOn:r("broadcastOn"),broadcastEvent:r("broadcastEvent"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),isConnected:C}},Ad=Bd(),Nd=function(n,t){var e={};return Wt(n,(function(n,r){Wt(n,(function(n,o){var i=Kt(e,o).getOr([]);e[o]=i.concat([t(r,n)])}))})),e},Hd=function(n,t,e,r){try{var o=(i=e,u=function(e,o){var i=e[t],u=o[t],c=r.indexOf(i),a=r.indexOf(u);if(-1===c)throw new Error("The ordering for "+n+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===a)throw new Error("The ordering for "+n+" does not have an entry for "+u+".\nOrder specified: "+JSON.stringify(r,null,2));return c<a?-1:a<c?1:0},(c=I.call(i,0)).sort(u),c);return be.value(o)}catch(n){return be.error([n])}var i,u,c},Pd=function(n){return n.cHandler},zd=function(n,t){return{name:n,handler:t}},jd=function(t,e,r){var o=n(n({},r),function(n,t){var e={};return P(n,(function(n){e[n.name()]=n.handlers(t)})),e}(e,t));return Nd(o,zd)},Ld=function(n){var t=function(n){return m(n)?{can:E,abort:C,run:n}:n}(n);return function(n,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=[n,e].concat(r);t.abort.apply(void 0,i)?e.stop():t.can.apply(void 0,i)&&t.run.apply(void 0,i)}},$d=function(n,t,e){var r=t[e];return r?Hd("Event: "+e,"name",n,r).map((function(n){var t=H(n,(function(n){return n.handler}));return Nr(t)})):function(n,t){return be.error(["The event ("+n+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(H(t,(function(n){return n.name})),null,2)])}(e,n)},Gd=function(n,t){var e=Yt(n,(function(n,e){return(1===n.length?be.value(n[0].handler):$d(n,t,e)).map((function(r){var o=Ld(r),i=n.length>1?z(t[e],(function(t){return N(n,(function(n){return n.name===t}))})).join(" > "):n[0].name;return Er(e,function(n,t){return{handler:n,purpose:t}}(o,i))}))}));return Mr(e,{})},Wd="alloy.base.behaviour",Ud=Ze([dr("dom","dom",{tag:"required",process:{}},Ze([gr("tag"),wr("styles",{}),wr("classes",[]),wr("attributes",{}),hr("value"),hr("innerHtml")])),gr("components"),gr("uid"),wr("events",{}),wr("apis",{}),dr("eventOrder","eventOrder",function(n){return je(h(n))}((Il={},Il[zn()]=["disabling",Wd,"toggling","typeaheadevents"],Il[An()]=[Wd,"focusing","keying"],Il[Gn()]=[Wd,"disabling","toggling","representing"],Il[Mn()]=[Wd,"representing","streaming","invalidating"],Il[Un()]=[Wd,"representing","item-events","tooltipping"],Il[On()]=["focusing",Wd,"item-type-events"],Il[xn()]=["focusing",Wd,"item-type-events"],Il[Cn()]=["item-type-events","tooltipping"],Il[Pn()]=["receiving","reflecting","tooltipping"],Il)),tr()),hr("domModification")]),qd=function(n){return n.events},Xd=function(n,t){P(t,(function(t){se(n,t)}))},Yd=function(n,t){P(t,(function(t){de(n,t)}))},Kd=function(n,t){return function(n,t){var e=H(t,(function(n){return yr(n.name(),[gr("config"),wr("state",oo)])})),r=cr("component.behaviours",Ze(e),n.behaviours).fold((function(t){throw new Error(sr(t)+"\nComplete spec:\n"+JSON.stringify(n,null,2))}),b);return{list:t,data:Ut(r,(function(n){var t=n.map((function(n){return{config:n.config,state:n.state.init(n.config)}}));return h(t)}))}}(n,t)},Jd=function(n){var t=function(n){var t=Kt(n,"behaviours").getOr({});return U($t(t),(function(n){var e=t[n];return d(e)?[e.me]:[]}))}(n);return Kd(n,t)},Qd=function(t,e,r){var o,i,u,c=n(n({},(o=t).dom),{uid:o.uid,domChildren:H(o.components,(function(n){return n.element}))}),a=function(n){return n.domModification.fold((function(){return Zr({})}),Zr)}(t),f={"alloy.base.modification":a},s=e.length>0?function(t,e,r,o){var i=n({},e);P(r,(function(n){i[n.name()]=n.exhibit(t,o)}));var u=Nd(i,(function(n,t){return{name:n,modification:t}})),c=function(t){return j(t,(function(t,e){return n(n({},e.modification),t)}),{})},a=j(u.classes,(function(n,t){return t.modification.concat(n)}),[]),f=c(u.attributes),s=c(u.styles);return Zr({classes:a,attributes:f,styles:s})}(r,f,e,c):a;return u=s,n(n({},i=c),{attributes:n(n({},i.attributes),u.attributes),styles:n(n({},i.styles),u.styles),classes:i.classes.concat(u.classes)})},Zd=function(n,t,e){var r={"alloy.base.behaviour":qd(n)};return function(n,t,e,r){var o=jd(n,e,r);return Gd(o,t)}(e,n.eventOrder,t,r).getOrDie()},nm=function(n){var t=function(){return s},e=mo(Ad),r=ar(function(n){return cr("custom.definition",Ud,n)}(n)),o=Jd(n),i=function(n){return n.list}(o),u=function(n){return n.data}(o),c=function(n){var t=et.fromTag(n.tag);te(t,n.attributes),Xd(t,n.classes),yi(t,n.styles),n.innerHtml.each((function(n){return Oo(t,n)}));var e=n.domChildren;return kt(t,e),n.value.each((function(n){nd(t,n)})),n.uid,Xa(t,n.uid),t}(Qd(r,i,u)),a=Zd(r,i,u),f=mo(r.components),s={uid:n.uid,getSystem:e.get,config:function(t){var e=u;return(m(e[t.name()])?e[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(n,null,2))})()},hasConfigured:function(n){return m(u[n.name()])},spec:n,readState:function(n){return u[n]().map((function(n){return n.state.readState()})).getOr("not enabled")},getApis:function(){return r.apis},connect:function(n){e.set(n)},disconnect:function(){e.set(Bd(t))},element:c,syncComponents:function(){var n=bt(c),t=U(n,(function(n){return e.get().getByDom(n).fold((function(){return[]}),K)}));f.set(t)},components:f.get,events:a};return s},tm=function(e){var r=Vd(e),o=r.events,i=t(r,["events"]),u=function(n){var t=Kt(n,"components").getOr([]);return H(t,im)}(i),c=n(n({},i),{events:n(n({},Id),o),components:u});return be.value(nm(c))},em=function(n){var t=et.fromText(n);return rm({element:t})},rm=function(n){var t=fr("external.component",Qe([gr("element"),hr("uid")]),n),e=mo(Bd()),r=t.uid.getOrThunk((function(){return Ka("external")}));Xa(t.element,r);var o={uid:r,getSystem:e.get,config:R.none,hasConfigured:C,connect:function(n){e.set(n)},disconnect:function(){e.set(Bd((function(){return o})))},getApis:function(){return{}},element:t.element,spec:n,readState:h("No state"),syncComponents:p,components:h([]),events:{}};return La(o)},om=Ka,im=function(t){return function(n){return Kt(n,ja)}(t).getOrThunk((function(){var e=function(n){return Jt(n,"uid")}(t)?t:n({uid:om("")},t);return tm(e).getOrDie()}))},um=La,cm=function(n){(ho(n.element).isNone()||pi.isFocused(n))&&(pi.isFocused(n)||pi.focus(n),Jn(n,"alloy.item-hover",{item:n}))},am=function(n){Jn(n,"alloy.item-focus",{item:n})},fm=h("alloy.item-hover"),sm=h("alloy.item-focus"),lm=[gr("data"),gr("components"),gr("dom"),wr("hasSubmenu",!1),hr("toggling"),ea("itemBehaviours",[ii,pi,Qc,Nf]),wr("ignoreFocus",!1),wr("domModification",{}),$o("builder",(function(t){return{dom:t.dom,domModification:n(n({},t.domModification),{attributes:n(n(n({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:ra(t.itemBehaviours,[t.toggling.fold(ii.revoke,(function(t){return ii.config(n({aria:{mode:"checked"}},t))})),pi.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(n){am(n)}}),Qc.config({mode:"execution"}),Nf.config({store:{mode:"memory",initialValue:t.data}}),ql("item-type-events",e(e([],si(),!0),[zr(Cn(),cm),zr(jn(),pi.focus)],!1))]),components:t.components,eventOrder:t.eventOrder}})),wr("eventOrder",{})],dm=[gr("dom"),gr("components"),$o("builder",(function(n){return{dom:n.dom,components:n.components,events:Hr([Wr(jn())])}}))],mm=h("item-widget"),gm=h([Da({name:"widget",overrides:function(n){return{behaviours:uo([Nf.config({store:{mode:"manual",getValue:function(t){return n.data},setValue:p}})])}}})]),pm=[gr("uid"),gr("data"),gr("components"),gr("dom"),wr("autofocus",!1),wr("ignoreFocus",!1),ea("widgetBehaviours",[Nf,pi,Qc]),wr("domModification",{}),za(gm()),$o("builder",(function(n){var t=Ba(mm(),n,gm()),e=Aa(mm(),n,t.internals()),r=function(t){return Na(t,n,"widget").map((function(n){return Qc.focusIn(n),n}))},o=function(t,e){return Tu(e.event.target)?R.none():n.autofocus?(e.setSource(t.element),R.none()):R.none()};return{dom:n.dom,components:e,domModification:n.domModification,events:Hr([Kr((function(n,t){r(n).each((function(n){t.stop()}))})),zr(Cn(),cm),zr(jn(),(function(t,e){n.autofocus?r(t):pi.focus(t)}))]),behaviours:ra(n.widgetBehaviours,[Nf.config({store:{mode:"memory",initialValue:n.data}}),pi.config({ignore:n.ignoreFocus,onFocus:function(n){am(n)}}),Qc.config({mode:"special",focusIn:n.autofocus?function(n){r(n)}:so(),onLeft:o,onRight:o,onEscape:function(t,e){return pi.isFocused(t)||n.autofocus?n.autofocus?(e.setSource(t.element),R.none()):R.none():(pi.focus(t),R.some(!0))}})])}}))],vm=lr("type",{widget:pm,item:lm,separator:dm}),hm=h([_a({factory:{sketch:function(n){var t=fr("menu.spec item",vm,n);return t.builder(t)}},name:"items",unit:"item",defaults:function(t,e){return Jt(e,"uid")?e:n(n({},e),{uid:Ka("item")})},overrides:function(n,t){return{type:t.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}}}})]),bm=h([gr("value"),gr("items"),gr("dom"),gr("components"),wr("eventOrder",{}),Zc("menuBehaviours",[hu,Nf,Kl,Qc]),Sr("movement",{mode:"menu",moveOnTab:!0},lr("mode",{grid:[Wo(),$o("config",(function(n,t){return{mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:n.focusManager}}))],matrix:[$o("config",(function(n,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+n.markers.item},focusManager:n.focusManager}})),gr("rowSelector")],menu:[wr("moveOnTab",!0),$o("config",(function(n,t){return{mode:"menu",selector:"."+n.markers.item,moveOnTab:t.moveOnTab,focusManager:n.focusManager}}))]})),pr("markers",Ao()),wr("fakeFocus",!1),wr("focusManager",yu()),Po("onHighlight")]),ym=h("alloy.menu-focus"),xm=rf({name:"Menu",configFields:bm(),partFields:hm(),factory:function(n,t,e,r){return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:ta(n.menuBehaviours,[hu.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight}),Nf.config({store:{mode:"memory",initialValue:n.value}}),Kl.config({find:R.some}),Qc.config(n.movement.config(n,n.movement))]),events:Hr([zr(sm(),(function(n,t){var e=t.event;n.getSystem().getByDom(e.target).each((function(e){hu.highlight(n,e),t.stop(),Jn(n,ym(),{menu:n,item:e})}))})),zr(fm(),(function(n,t){var e=t.event.item;hu.highlight(n,e)}))]),components:t,eventOrder:n.eventOrder,domModification:{attributes:{role:"menu"}}}}}),wm=function(n,t){var e=_t(t),r=vo(e).bind((function(n){var e,r,o=function(t){return ct(n,t)};return o(t)?R.some(t):(e=o,(r=function(n){for(var t=0;t<n.childNodes.length;t++){var o=et.fromDom(n.childNodes[t]);if(e(o))return R.some(o);var i=r(n.childNodes[t]);if(i.isSome())return i}return R.none()})(t.dom))})),o=n(t);return r.each((function(n){vo(e).filter((function(t){return ct(t,n)})).fold((function(){go(n)}),p)})),o},Sm=function(n,t,e,r){var o=n.getSystem().build(r);zt(n,o,e)},Om=function(n,t,e,r){var o=km(n);$(o,(function(n){return ct(r.element,n.element)})).each(jt)},km=function(n,t){return n.components()},Tm=function(n,t,e,r,o){var i=km(n);return R.from(i[r]).map((function(t){return Om(n,0,0,t),o.each((function(t){Sm(n,0,(function(n,t){!function(n,t,e){yt(n,e).fold((function(){Ot(n,t)}),(function(n){xt(n,t)}))}(n,t,r)}),t)})),t}))},Cm=ao({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(n,t,e,r){Sm(n,0,Ot,r)},prepend:function(n,t,e,r){Sm(n,0,St,r)},remove:Om,replaceAt:Tm,replaceBy:function(n,t,e,r,o){var i=km(n);return G(i,r).bind((function(t){return Tm(n,0,0,t,o)}))},set:function(n,t,e,r){wm((function(){var t=H(r,n.getSystem().build);Pt(n,t)}),n.element)},contents:km})}),Em=function(n,t,e,r){return Kt(e,r).bind((function(r){return Kt(n,r).bind((function(r){var o=Em(n,t,e,r);return R.some([r].concat(o))}))})).getOr([])},Dm=function(n,t){var e={};Wt(n,(function(n,t){P(n,(function(n){e[n]=t}))}));var r=t,o=qt(t,(function(n,t){return{k:n,v:t}})),i=Ut(o,(function(n,t){return[t].concat(Em(e,r,o,t))}));return Ut(e,(function(n){return Kt(i,n).getOr([n])}))},Mm=function(n){return"prepared"===n.type?R.some(n.menu):R.none()},_m={init:function(){var t=mo({}),e=mo({}),r=mo({}),o=Iu(),i=mo({}),u=function(n){return function(n,t){for(var e=$t(n),r=0,o=e.length;r<o;r++){var i=e[r],u=n[i];if(t(u,i,n))return R.some(u)}return R.none()}(t.get(),(function(t,e){return t===n}))},c=function(n){return a(n).bind(Mm)},a=function(n){return Kt(e.get(),n)},f=function(n){return Kt(t.get(),n)};return{setMenuBuilt:function(t,r){var o;e.set(n(n({},e.get()),((o={})[t]={type:"prepared",menu:r},o)))},setContents:function(n,u,c,a){o.set(n),t.set(c),e.set(u),i.set(a);var f=Dm(a,c);r.set(f)},expand:function(n){return Kt(t.get(),n).map((function(t){var e=Kt(r.get(),n).getOr([]);return[t].concat(e)}))},refresh:function(n){return Kt(r.get(),n)},collapse:function(n){return Kt(r.get(),n).bind((function(n){return n.length>1?R.some(n.slice(1)):R.none()}))},lookupMenu:a,lookupItem:f,otherMenus:function(n){var t=i.get();return Y($t(t),n)},getPrimary:function(){return o.get().bind(c)},getMenus:function(){return e.get()},clear:function(){t.set({}),e.set({}),r.set({}),o.clear()},isClear:function(){return o.get().isNone()},getTriggeringPath:function(n,t){var e=z(f(n).toArray(),(function(n){return c(n).isSome()}));return Kt(r.get(),n).bind((function(n){var r=X(e.concat(n));return function(n){for(var t=[],e=0;e<n.length;e++){var r=n[e];if(!r.isSome())return R.none();t.push(r.getOrDie())}return R.some(t)}(U(r,(function(n,e){return function(n,t,e){return c(n).bind((function(r){return u(n).bind((function(n){return t(n).map((function(n){return{triggeredMenu:r,triggeringItem:n,triggeringPath:e}}))}))}))}(n,t,r.slice(0,e+1)).fold((function(){return _r(o.get(),n)?[]:[R.none()]}),(function(n){return[R.some(n)]}))})))}))}}},extractPreparedMenu:Mm},Rm=h("collapse-item"),Fm=ef({name:"TieredMenu",configFields:[Lo("onExecute"),Lo("onEscape"),jo("onOpenMenu"),jo("onOpenSubmenu"),Po("onRepositionMenu"),Po("onCollapseMenu"),wr("highlightImmediately",!0),vr("data",[gr("primary"),gr("menus"),gr("expansions")]),wr("fakeFocus",!1),Po("onHighlight"),Po("onHover"),vr("markers",[gr("backgroundMenu")].concat(Io()).concat(Vo())),gr("dom"),wr("navigateOnHover",!0),wr("stayInDom",!1),Zc("tmenuBehaviours",[Qc,hu,Kl,Cm]),wr("eventOrder",{})],apis:{collapseMenu:function(n,t){n.collapseMenu(t)},highlightPrimary:function(n,t){n.highlightPrimary(t)},repositionMenus:function(n,t){n.repositionMenus(t)}},factory:function(t,e){var r,o=Iu(),i=_m.init(),u=function(e){var r=function(e,r,o){return Ut(o,(function(o,i){var u=function(){return xm.sketch(n(n({},o),{value:i,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:t.fakeFocus?xu():yu()}))};return i===r?{type:"prepared",menu:e.getSystem().build(u())}:{type:"notbuilt",nbMenu:u}}))}(e,t.data.primary,t.data.menus),o=a();return i.setContents(t.data.primary,r,t.data.expansions,o),i.getPrimary()},c=function(n){return Nf.getValue(n).value},a=function(n){return Ut(t.data.menus,(function(n,t){return U(n.items,(function(n){return"separator"===n.type?[]:[n.data.value]}))}))},f=function(n,t){hu.highlight(n,t),hu.getHighlighted(t).orThunk((function(){return hu.getFirst(t)})).each((function(t){Zn(n,t.element,jn())}))},s=function(n,t){return Rr(H(t,(function(t){return n.lookupMenu(t).bind((function(n){return"prepared"===n.type?R.some(n.menu):R.none()}))})))},l=function(n,e,r){var o=s(e,e.otherMenus(r));P(o,(function(e){Yd(e.element,[t.markers.backgroundMenu]),t.stayInDom||Cm.remove(n,e)}))},d=function(n,e){var r=function(n){return o.get().getOrThunk((function(){var e={},r=Fi(n.element,"."+t.markers.item),i=z(r,(function(n){return"true"===ee(n,"aria-haspopup")}));return P(i,(function(t){n.getSystem().getByDom(t).each((function(n){var t=c(n);e[t]=n}))})),o.set(e),e}))}(n);Wt(r,(function(n,t){var r=A(e,t);ne(n.element,"aria-expanded",r)}))},m=function(n,e,r){return R.from(r[0]).bind((function(o){return e.lookupMenu(o).bind((function(o){if("notbuilt"===o.type)return R.none();var i=o.menu,u=s(e,r.slice(1));return P(u,(function(n){se(n.element,t.markers.backgroundMenu)})),It(i.element)||Cm.append(n,um(i)),Yd(i.element,[t.markers.backgroundMenu]),f(n,i),l(n,e,r),R.some(i)}))}))};!function(n){n[n.HighlightSubmenu=0]="HighlightSubmenu",n[n.HighlightParent=1]="HighlightParent"}(r||(r={}));var g=function(n,e,o){if(void 0===o&&(o=r.HighlightSubmenu),e.hasConfigured(kd)&&kd.isDisabled(e))return R.some(e);var u=c(e);return i.expand(u).bind((function(u){return d(n,u),R.from(u[0]).bind((function(c){return i.lookupMenu(c).bind((function(a){var f=function(n,t,e){if("notbuilt"===e.type){var r=n.getSystem().build(e.nbMenu());return i.setMenuBuilt(t,r),r}return e.menu}(n,c,a);return It(f.element)||Cm.append(n,um(f)),t.onOpenSubmenu(n,e,f,X(u)),o===r.HighlightSubmenu?(hu.highlightFirst(f),m(n,i,u)):(hu.dehighlightAll(f),R.some(e))}))}))}))},v=function(n,e){var r=c(e);return i.collapse(r).bind((function(r){return d(n,r),m(n,i,r).map((function(r){return t.onCollapseMenu(n,e,r),r}))}))},h=function(n){return function(e,r){return Pi(r.getSource(),"."+t.markers.item).bind((function(t){return e.getSystem().getByDom(t).toOptional().bind((function(t){return n(e,t).map(E)}))}))}},y=Hr([zr(ym(),(function(n,t){var e=t.event.item;i.lookupItem(c(e)).each((function(){var e=t.event.menu;hu.highlight(n,e);var r=c(t.event.item);i.refresh(r).each((function(t){return l(n,i,t)}))}))})),Kr((function(n,e){var o=e.event.target;n.getSystem().getByDom(o).each((function(e){0===c(e).indexOf("collapse-item")&&v(n,e),g(n,e,r.HighlightSubmenu).fold((function(){t.onExecute(n,e)}),p)}))})),qr((function(n,e){u(n).each((function(e){Cm.append(n,um(e)),t.onOpenMenu(n,e),t.highlightImmediately&&f(n,e)}))}))].concat(t.navigateOnHover?[zr(fm(),(function(n,e){var o=e.event.item;!function(n,t){var e=c(t);i.refresh(e).bind((function(t){return d(n,t),m(n,i,t)}))}(n,o),g(n,o,r.HighlightParent),t.onHover(n,o)}))]:[])),x=function(n){return hu.getHighlighted(n).bind(hu.getHighlighted)},w={collapseMenu:function(n){x(n).each((function(t){v(n,t)}))},highlightPrimary:function(n){i.getPrimary().each((function(t){f(n,t)}))},repositionMenus:function(n){i.getPrimary().bind((function(t){return x(n).bind((function(n){var t,e=c(n),r=(t=i.getMenus(),Yt(t,b)),o=Rr(H(r,_m.extractPreparedMenu));return i.getTriggeringPath(e,(function(n){return function(n,t,e){return Q(t,(function(n){if(!n.getSystem().isConnected())return R.none();var t=hu.getCandidates(n);return $(t,(function(n){return c(n)===e}))}))}(0,o,n)}))})).map((function(n){return{primary:t,triggeringPath:n}}))})).fold((function(){(function(n){return R.from(n.components()[0]).filter((function(n){return"menu"===ee(n.element,"role")}))})(n).each((function(e){t.onRepositionMenu(n,e,[])}))}),(function(e){var r=e.primary,o=e.triggeringPath;t.onRepositionMenu(n,r,o)}))}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ta(t.tmenuBehaviours,[Qc.config({mode:"special",onRight:h((function(n,t){return Tu(t.element)?R.none():g(n,t,r.HighlightSubmenu)})),onLeft:h((function(n,t){return Tu(t.element)?R.none():v(n,t)})),onEscape:h((function(n,e){return v(n,e).orThunk((function(){return t.onEscape(n,e).map((function(){return n}))}))})),focusIn:function(n,t){i.getPrimary().each((function(t){Zn(n,t.element,jn())}))}}),hu.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Kl.config({find:function(n){return hu.getHighlighted(n)}}),Cm.config({})]),eventOrder:t.eventOrder,apis:w,events:y}},extraApis:{tieredData:function(n,t,e){return{primary:n,menus:t,expansions:e}},singleData:function(n,t){return{primary:n,menus:Er(n,t),expansions:{}}},collapseItem:function(n){return{value:ma(Rm()),meta:{text:n}}}}}),Im=function(n,t,e,r){return Kt(t.routes,r.start).bind((function(n){return Kt(n,r.destination)}))},Vm=function(n,t,e,r){return Im(0,t,0,r).bind((function(n){return n.transition.map((function(t){return{transition:t,route:n}}))}))},Bm=function(n,t,e){(function(n,t,e){return Am(n,t).bind((function(r){return Vm(n,t,e,r)}))})(n,t,e).each((function(e){var r=e.transition;de(n.element,r.transitionClass),ie(n.element,t.destinationAttr)}))},Am=function(n,t,e){var r=n.element;return re(r,t.destinationAttr).map((function(e){return{start:ee(n.element,t.stateAttr),destination:e}}))},Nm=function(n,t,e,r){Bm(n,t,e),oe(n.element,t.stateAttr)&&ee(n.element,t.stateAttr)!==r&&t.onFinish(n,r),ne(n.element,t.stateAttr,r)},Hm=Object.freeze({__proto__:null,findRoute:Im,disableTransition:Bm,getCurrentRoute:Am,jumpTo:Nm,progressTo:function(n,t,e,r){!function(n,t,e,r){oe(n.element,t.destinationAttr)&&(re(n.element,t.destinationAttr).each((function(e){ne(n.element,t.stateAttr,e)})),ie(n.element,t.destinationAttr))}(n,t);var o=function(n,t,e,r){return{start:ee(n.element,t.stateAttr),destination:r}}(n,t,0,r);Vm(n,t,e,o).fold((function(){Nm(n,t,e,r)}),(function(o){Bm(n,t,e);var i=o.transition;se(n.element,i.transitionClass),ne(n.element,t.destinationAttr,r)}))},getState:function(n,t,e){return re(n.element,t.stateAttr)}}),Pm=Object.freeze({__proto__:null,events:function(n,t){return Hr([zr(Fn(),(function(e,r){var o=r.event.raw;Am(e,n).each((function(r){Im(0,n,0,r).each((function(i){i.transition.each((function(i){o.propertyName===i.property&&(Nm(e,n,t,r.destination),n.onTransition(e,r))}))}))}))})),qr((function(e,r){Nm(e,n,t,n.initialState)}))])}}),zm=[wr("destinationAttr","data-transitioning-destination"),wr("stateAttr","data-transitioning-state"),gr("initialState"),Po("onTransition"),Po("onFinish"),pr("routes",ur(be.value,ur(be.value,Qe([xr("transition",[gr("property"),gr("transitionClass")])]))))],jm=ao({fields:zm,name:"transitioning",active:Pm,apis:Hm,extra:{createRoutes:function(n){var t={};return Wt(n,(function(n,e){var r=e.split("<->");t[r[0]]=Er(r[1],n),t[r[1]]=Er(r[0],n)})),t},createBistate:function(n,t,e){return Dr([{key:n,value:Er(t,e)},{key:t,value:Er(n,e)}])},createTristate:function(n,t,e,r){return Dr([{key:n,value:Dr([{key:t,value:r},{key:e,value:r}])},{key:t,value:Dr([{key:n,value:r},{key:e,value:r}])},{key:e,value:Dr([{key:n,value:r},{key:t,value:r}])}])}}}),Lm=fi("scrollable"),$m=function(n){se(n,Lm)},Gm=function(n){de(n,Lm)},Wm=Lm,Um=function(n){return Kt(n,"format").getOr(n.title)},qm=function(n,t,e,r,o){return{data:{value:n,text:t},type:"item",dom:{tag:"div",classes:o?[fi("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:fi("format-matches"),selected:e},itemBehaviours:uo(o?[]:[ui(n,(function(n,t){(t?ii.on:ii.off)(n)}))]),components:[{dom:{tag:"div",attributes:{style:r},innerHtml:t}}]}},Xm=function(n,t,e,r){return{value:n,dom:{tag:"div"},components:[of.sketch({dom:{tag:"div",classes:[fi("styles-collapser")]},components:r?[{dom:{tag:"span",classes:[fi("styles-collapse-icon")]}},em(n)]:[em(n)],action:function(n){if(r){var t=e().get(n);Fm.collapseMenu(t)}}}),{dom:{tag:"div",classes:[fi("styles-menu-items-container")]},components:[xm.parts.items({})],behaviours:uo([ql("adhoc-scrollable-menu",[qr((function(n,t){bi(n.element,"overflow-y","auto"),bi(n.element,"-webkit-overflow-scrolling","touch"),$m(n.element)})),Xr((function(n){Oi(n.element,"overflow-y"),Oi(n.element,"-webkit-overflow-scrolling"),Gm(n.element)}))])])}],items:t,menuBehaviours:uo([jm.config({initialState:"after",routes:jm.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},Ym=function(n){var t,e,r,o,i,u=(t=n.formats,e=function(){return c},r=Xm("Styles",[].concat(H(t.items,(function(n){return qm(Um(n),n.title,n.isSelected(),n.getPreview(),Qt(t.expansions,Um(n)))}))),e,!1),o=Ut(t.menus,(function(n,r){var o=H(n,(function(n){return qm(Um(n),n.title,void 0!==n.isSelected&&n.isSelected(),void 0!==n.getPreview?n.getPreview():"",Qt(t.expansions,Um(n)))}));return Xm(r,o,e,!0)})),i=Ne(o,Er("styles",r)),{tmenu:Fm.tieredData("styles",i,t.expansions)}),c=Dl(Fm.sketch({dom:{tag:"div",classes:[fi("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(t,e){var r=Nf.getValue(e);return n.handle(e,r.value),R.none()},onEscape:function(){return R.none()},onOpenMenu:function(n,t){var e=zf(n.element);Pf(t.element,e),jm.jumpTo(t,"current")},onOpenSubmenu:function(n,t,e){var r=zf(n.element),o=Ni(t.element,'[role="menu"]').getOrDie("hacky"),i=n.getSystem().getByDom(o).getOrDie();Pf(e.element,r),jm.progressTo(i,"before"),jm.jumpTo(e,"after"),jm.progressTo(e,"current")},onCollapseMenu:function(n,t,e){var r=Ni(t.element,'[role="menu"]').getOrDie("hacky"),o=n.getSystem().getByDom(r).getOrDie();jm.progressTo(o,"after"),jm.progressTo(e,"current")},navigateOnHover:!1,highlightImmediately:!0,data:u.tmenu,markers:{backgroundMenu:fi("styles-background-menu"),menu:fi("styles-menu"),selectedMenu:fi("styles-selected-menu"),item:fi("styles-item"),selectedItem:fi("styles-selected-item")}}));return c.asSpec()},Km=function(n){return Qt(n,"items")?function(n){var t=Ne(Cr(n,["items"]),{menu:!0}),e=Jm(n.items);return{item:t,menus:Ne(e.menus,Er(n.title,e.items)),expansions:Ne(e.expansions,Er(n.title,n.title))}}(n):{item:n,menus:{},expansions:{}}},Jm=function(n){return j(n,(function(n,t){var e=Km(t);return{menus:Ne(n.menus,e.menus),items:[e.item].concat(n.items),expansions:Ne(n.expansions,e.expansions)}}),{menus:{},expansions:{},items:[]})},Qm=function(n){var t=function(t){return function(){return n.formatter.match(t)}},e=function(t){return function(){return n.formatter.getCssText(t)}},r=function(o){return H(o,(function(o){if(Qt(o,"items")){var i=r(o.items);return Ne(function(n){return Ne(n,{isSelected:C,getPreview:h("")})}(o),{items:i})}return Qt(o,"format")?function(n){return Ne(n,{isSelected:t(n.format),getPreview:e(n.format)})}(o):function(r){var o=ma(r.title),i=Ne(r,{format:o,isSelected:t(o),getPreview:e(o)});return n.formatter.register(o,i),i}(o)}))};return r(function(n){return n.getParam("style_formats",xo,"array")}(n))},Zm=function(n,t,e){var r=function(n,t){var e=function(t){return U(t,(function(t){return void 0!==t.items?e(t.items).length>0?[t]:[]:!Qt(t,"format")||n.formatter.canApply(t.format)?[t]:[]}))},r=e(t);return Jm(r)}(n,t);return Ym({formats:r,handle:function(t,r){n.undoManager.transact((function(){ii.isOn(t)?n.formatter.remove(r):n.formatter.apply(r)})),e()}})},ng=function(n){var t=n.replace(/\|/g," ").trim();return t.length>0?t.split(/\s+/):[]},tg=function(n){return U(n,(function(n){return a(n)?tg(n):ng(n)}))},eg=function(n){var t=function(n){return n.getParam("toolbar",wo,"array")}(n);return a(t)?tg(t):ng(t)},rg=function(n,t){var e=function(n){return function(){return function(n,t){return gf(t,(function(){n.execCommand(t)}),{},n)}(t,n)}},r=function(n){return function(){return function(n,t){var e=lf(t);return gf(t,(function(){n.execCommand(t)}),e,n)}(t,n)}},o=function(n,e,r){return function(){return df(t,n,e,r)}},i=e("undo"),u=e("redo"),c=r("bold"),a=r("italic"),f=r("underline"),s=e("removeformat"),l=o("unlink","link",(function(){t.execCommand("unlink",null,!1)})),d=o("unordered-list","ul",(function(){t.execCommand("InsertUnorderedList",null,!1)})),m=o("ordered-list","ol",(function(){t.execCommand("InsertOrderedList",null,!1)})),g=Qm(t),p=function(){return Zm(t,g,(function(){t.fire("scrollIntoView")}))},v=function(n,e){return{isSupported:function(){var e=t.ui.registry.getAll().buttons;return n.forall((function(n){return Qt(e,n)}))},sketch:e}};return{undo:v(R.none(),i),redo:v(R.none(),u),bold:v(R.none(),c),italic:v(R.none(),a),underline:v(R.none(),f),removeformat:v(R.none(),s),link:v(R.none(),(function(){return Rd(n,t)})),unlink:v(R.none(),l),image:v(R.none(),(function(){return Nl(t)})),bullist:v(R.some("bullist"),d),numlist:v(R.some("numlist"),m),fontsizeselect:v(R.none(),(function(){return function(n,t){var e={onChange:function(n){wl(t,n)},getInitialValue:function(){return xl(t)}};return gl(n,"font-size",(function(){return El(e)}),t)}(n,t)})),forecolor:v(R.none(),(function(){return vl(n,t)})),styleselect:v(R.none(),(function(){return gf("style-formats",(function(e){t.fire("toReading"),n.dropup.appear(p,ii.on,e)}),uo([ii.config({toggleClass:fi("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),qo.config({channels:Dr([ai("orientationChanged",ii.off),ai("dropupDismissed",ii.off)])})]),t)}))}},og=function(n){var t=et.fromDom(function(n){if(Mt()&&d(n.target)){var t=et.fromDom(n.target);if(lt(t)&&Ft(t)&&n.composed&&n.composedPath){var e=n.composedPath();if(e)return J(e)}}return R.from(n.target)}(n).getOr(n.target)),e=function(){return n.stopPropagation()},r=function(){return n.preventDefault()},o=v(r,e);return function(n,t,e,r,o,i,u){return{target:n,x:t,y:e,stop:r,prevent:o,kill:i,raw:u}}(t,n.clientX,n.clientY,e,r,o,n)},ig=function(n,t,e,r,o){var i=function(n,t){return function(e){n(e)&&t(og(e))}}(e,r);return n.dom.addEventListener(t,i,o),{unbind:x(ug,n,t,i,o)}},ug=function(n,t,e,r){n.dom.removeEventListener(t,e,r)},cg=E,ag=function(n,t,e){return function(n,t,e,r){return ig(n,t,e,r,!1)}(n,t,cg,e)},fg=function(n,t,e){return function(n,t,e,r){return ig(n,t,e,r,!0)}(n,t,cg,e)},sg=tinymce.util.Tools.resolve("tinymce.util.Delay"),lg=function(n){var t=n.matchMedia("(orientation: portrait)").matches;return{isPortrait:h(t)}},dg=function(n){var t=bn().os.isiOS(),e=lg(n).isPortrait();return t&&!e?n.screen.height:n.screen.width},mg=function(n,t){var e=et.fromDom(n),r=null,o=ag(e,"orientationchange",(function(){sg.clearInterval(r);var e=lg(n);t.onChange(e),i((function(){t.onReady(e)}))})),i=function(t){sg.clearInterval(r);var e=n.innerHeight,o=0;r=sg.setInterval((function(){e!==n.innerHeight?(sg.clearInterval(r),t(R.some(n.innerHeight))):o>20&&(sg.clearInterval(r),t(R.none())),o++}),50)};return{onAdjustment:i,destroy:function(){o.unbind()}}},gg=function(n,t,e){var r,o=n.document.createRange();return r=o,t.fold((function(n){r.setStartBefore(n.dom)}),(function(n,t){r.setStart(n.dom,t)}),(function(n){r.setStartAfter(n.dom)})),function(n,t){t.fold((function(t){n.setEndBefore(t.dom)}),(function(t,e){n.setEnd(t.dom,e)}),(function(t){n.setEndAfter(t.dom)}))}(o,e),o},pg=function(n,t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom,e),i.setEnd(r.dom,o),i},vg=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},hg=kr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),bg=function(n,t,e){return t(et.fromDom(e.startContainer),e.startOffset,et.fromDom(e.endContainer),e.endOffset)},yg=function(n,t){return function(n,t){var e=t.ltr();return e.collapsed?t.rtl().filter((function(n){return!1===n.collapsed})).map((function(n){return hg.rtl(et.fromDom(n.endContainer),n.endOffset,et.fromDom(n.startContainer),n.startOffset)})).getOrThunk((function(){return bg(0,hg.ltr,e)})):bg(0,hg.ltr,e)}(0,function(n,t){return t.match({domRange:function(n){return{ltr:h(n),rtl:R.none}},relative:function(t,e){return{ltr:F((function(){return gg(n,t,e)})),rtl:F((function(){return R.some(gg(n,e,t))}))}},exact:function(t,e,r,o){return{ltr:F((function(){return pg(n,t,e,r,o)})),rtl:F((function(){return R.some(pg(n,r,o,t,e))}))}}})}(n,t))};hg.ltr,hg.rtl;var xg=function(n,t,e,r){return{start:n,soffset:t,finish:e,foffset:r}},wg=function(n,t){var e=function(t){return n(t)?R.from(t.dom.nodeValue):R.none()};return{get:function(r){if(!n(r))throw new Error("Can only get "+t+" value of a "+t+" node");return e(r).getOr("")},getOption:e,set:function(e,r){if(!n(e))throw new Error("Can only set raw "+t+" value of a "+t+" node");e.dom.nodeValue=r}}}(dt,"text"),Sg=function(n){return"img"===ft(n)?1:function(n){return wg.getOption(n)}(n).fold((function(){return bt(n).length}),(function(n){return n.length}))},Og=kr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),kg={before:Og.before,on:Og.on,after:Og.after,cata:function(n,t,e,r){return n.fold(t,e,r)},getStart:function(n){return n.fold(b,b,b)}},Tg=kr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Cg={domRange:Tg.domRange,relative:Tg.relative,exact:Tg.exact,exactFromRange:function(n){return Tg.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){return function(n){return et.fromDom(vt(n).dom.defaultView)}(function(n){return n.match({domRange:function(n){return et.fromDom(n.startContainer)},relative:function(n,t){return kg.getStart(n)},exact:function(n,t,e,r){return n}})}(n))},range:xg},Eg=function(n,t){var e=ft(n);return"input"===e?kg.after(n):A(["br","img"],e)?0===t?kg.before(n):kg.after(n):kg.on(n,t)},Dg=function(n,t,e,r){var o=function(n,t,e,r){var o=pt(n).dom.createRange();return o.setStart(n.dom,t),o.setEnd(e.dom,r),o}(n,t,e,r),i=ct(n,e)&&t===r;return o.collapsed&&!i},Mg=function(n){return R.from(n.getSelection())},_g=function(n,t,e,r,o){!function(n,t){Mg(n).each((function(n){n.removeAllRanges(),n.addRange(t)}))}(n,pg(n,t,e,r,o))},Rg=function(n,t,e,r,o){!function(n,t){yg(n,t).match({ltr:function(t,e,r,o){_g(n,t,e,r,o)},rtl:function(t,e,r,o){Mg(n).each((function(i){if(i.setBaseAndExtent)i.setBaseAndExtent(t.dom,e,r.dom,o);else if(i.extend)try{!function(n,t,e,r,o,i){t.collapse(e.dom,r),t.extend(o.dom,i)}(0,i,t,e,r,o)}catch(i){_g(n,r,o,t,e)}else _g(n,r,o,t,e)}))}})}(n,function(n,t,e,r){var o=Eg(n,t),i=Eg(e,r);return Cg.relative(o,i)}(t,e,r,o))},Fg=function(n){if(n.rangeCount>0){var t=n.getRangeAt(0),e=n.getRangeAt(n.rangeCount-1);return R.some(xg(et.fromDom(t.startContainer),t.startOffset,et.fromDom(e.endContainer),e.endOffset))}return R.none()},Ig=function(n){if(null===n.anchorNode||null===n.focusNode)return Fg(n);var t=et.fromDom(n.anchorNode),e=et.fromDom(n.focusNode);return Dg(t,n.anchorOffset,e,n.focusOffset)?R.some(xg(t,n.anchorOffset,e,n.focusOffset)):Fg(n)},Vg=function(n){return Mg(n).filter((function(n){return n.rangeCount>0})).bind(Ig)},Bg=function(n,t){return function(n){var t=n.getClientRects(),e=t.length>0?t[0]:n.getBoundingClientRect();return e.width>0||e.height>0?R.some(e).map(vg):R.none()}(function(n,t){return yg(n,t).match({ltr:function(t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom,e),i.setEnd(r.dom,o),i},rtl:function(t,e,r,o){var i=n.document.createRange();return i.setStart(r.dom,o),i.setEnd(t.dom,e),i}})}(n,t))},Ag=function(n){return R.from(n.dom.contentWindow)},Ng=function(n){return Ag(n).bind(Vg)},Hg=function(n){return n.getFrame()},Pg=function(n,t,e,r){return n[e].getOrThunk((function(){return function(n){return ag(t,r,n)}}))},zg=function(n){var t=Hg(n);return function(n){return R.some(et.fromDom(n.dom.contentWindow.document.body))}(t).bind((function(e){return function(n){return R.some(et.fromDom(n.dom.contentWindow.document))}(t).bind((function(r){return Ag(t).map((function(o){var i=et.fromDom(r.dom.documentElement),u=n.getCursorBox.getOrThunk((function(){return function(){return function(n){return Vg(n).map((function(n){return Cg.exact(n.start,n.soffset,n.finish,n.foffset)}))}(o).bind((function(n){return Bg(o,n).orThunk((function(){return function(n){return Vg(n).filter((function(n){return ct(n.start,n.finish)&&n.soffset===n.foffset})).bind((function(n){var t=n.start.dom.getBoundingClientRect();return t.width>0||t.height>0?R.some(t):R.none()}))}(o)}))}))}})),c=n.setSelection.getOrThunk((function(){return function(n,t,e,r){Rg(o,n,t,e,r)}})),a=n.clearSelection.getOrThunk((function(){return function(){!function(n){Mg(n).each((function(n){return n.removeAllRanges()}))}(o)}}));return{body:e,doc:r,win:o,html:i,getSelection:x(Ng,t),setSelection:c,clearSelection:a,frame:t,onKeyup:Pg(n,r,"onKeyup","keyup"),onNodeChanged:Pg(n,r,"onNodeChanged","SelectionChange"),onDomChanged:n.onDomChanged,onScrollToCursor:n.onScrollToCursor,onScrollToElement:n.onScrollToElement,onToReading:n.onToReading,onToEditing:n.onToEditing,onToolbarScrollStart:n.onToolbarScrollStart,onTouchContent:n.onTouchContent,onTapContent:n.onTapContent,onTouchToolstrip:n.onTouchToolstrip,getCursorBox:u}}))}))}))},jg=function(n,t){return function(e){return e[n].getOrThunk((function(){var n=Hg(e);return function(){return t(n)}}))()}}("getWin",Ag),Lg=function(){var n=Ai("head").getOrDie(),t=Ai('meta[name="viewport"]').getOrThunk((function(){var t=et.fromTag("meta");return ne(t,"name","viewport"),Ot(n,t),t})),e=ee(t,"content");return{maximize:function(){ne(t,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){null!=e&&e.length>0?ne(t,"content",e):ne(t,"content","user-scalable=yes")}}},$g="data-ephox-mobile-fullscreen-style",Gg="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Wg=bn().os.isAndroid(),Ug=function(n,t){var e=function(n){return function(t){var e=ee(t,"style"),r=void 0===e?"no-styles":e.trim();r!==n&&(ne(t,$g,r),ne(t,"style",n))}},r=_i(n,"*"),o=U(r,(function(n){return Ri(n,"*")})),i=function(n){var t=xi(n,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"}(t);P(o,e("display:none!important;")),P(r,e("position:absolute!important;"+Gg+i)),e((!0===Wg?"":"position:absolute!important;")+Gg+i)(n)},qg=function(){var n=it("["+$g+"]");P(n,(function(n){var t=ee(n,$g);"no-styles"!==t?ne(n,"style",t):ie(n,"style"),ie(n,$g)}))},Xg=function(n){var t=n.raw;return void 0===t.touches||1!==t.touches.length?R.none():R.some(t.touches[0])},Yg=function(n){var t,e,r,o=Iu(),i=mo(!1),u=(t=function(t){n.triggerEvent($n(),t),i.set(!0)},e=400,r=null,{cancel:function(){null!==r&&(clearTimeout(r),r=null)},schedule:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];r=setTimeout((function(){t.apply(null,n),r=null}),e)}}),c=Dr([{key:xn(),value:function(n){return Xg(n).each((function(t){u.cancel();var e={x:t.clientX,y:t.clientY,target:n.target};u.schedule(n),i.set(!1),o.set(e)})),R.none()}},{key:wn(),value:function(n){return u.cancel(),Xg(n).each((function(n){o.on((function(t){(function(n,t){var e=Math.abs(n.clientX-t.x),r=Math.abs(n.clientY-t.y);return e>5||r>5})(n,t)&&o.clear()}))})),R.none()}},{key:Sn(),value:function(t){u.cancel();return o.get().filter((function(n){return ct(n.target,t.target)})).map((function(e){return i.get()?(t.prevent(),!1):n.triggerEvent(Ln(),t)}))}}]);return{fireIfReady:function(n,t){return Kt(c,t).bind((function(t){return t(n)}))}}},Kg=function(n){var t=Yg({triggerEvent:function(t,e){n.onTapContent(e)}});return{fireTouchstart:function(n){t.fireIfReady(n,"touchstart")},onTouchend:function(){return ag(n.body,"touchend",(function(n){t.fireIfReady(n,"touchend")}))},onTouchmove:function(){return ag(n.body,"touchmove",(function(n){t.fireIfReady(n,"touchmove")}))}}},Jg=bn().os.version.major>=6,Qg=function(n,t,e){var r=Kg(n),o=pt(t),i=function(n){return!ct(n.start,n.finish)||n.soffset!==n.foffset},u=function(){var r=n.doc.dom.hasFocus()&&n.getSelection().exists(i);e.getByDom(t).each(!0===(r||vo(o).filter((function(n){return"input"===ft(n)})).exists((function(n){return n.dom.selectionStart!==n.dom.selectionEnd})))?ii.on:ii.off)},c=[ag(n.body,"touchstart",(function(t){n.onTouchContent(),r.fireTouchstart(t)})),r.onTouchmove(),r.onTouchend(),ag(t,"touchstart",(function(t){n.onTouchToolstrip()})),n.onToReading((function(){po(n.body)})),n.onToEditing(p),n.onScrollToCursor((function(t){t.preventDefault(),n.getCursorBox().each((function(t){var e=n.win,r=t.top>e.innerHeight||t.bottom>e.innerHeight?t.bottom-e.innerHeight+50:0;0!==r&&e.scrollTo(e.pageXOffset,e.pageYOffset+r)}))}))].concat(!0===Jg?[]:[ag(et.fromDom(n.win),"blur",(function(){e.getByDom(t).each(ii.off)})),ag(o,"select",u),ag(n.doc,"selectionchange",u)]);return{destroy:function(){P(c,(function(n){n.unbind()}))}}},Zg=function(n,t){var e=parseInt(ee(n,t),10);return isNaN(e)?0:e},np=function(t){return n(n({},t),{width:2})},tp=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},ep=function(n){var t=n.getSelection();return void 0!==t&&t.rangeCount>0?function(n){if(n.collapsed){var t=et.fromDom(n.startContainer);return ht(t).bind((function(e){var r=Cg.exact(t,n.startOffset,e,Sg(e));return Bg(n.startContainer.ownerDocument.defaultView,r).map(np).map(K)})).getOr([])}return H(n.getClientRects(),tp)}(t.getRangeAt(0)):[]},rp=function(n){n.focus();var t=et.fromDom(n.document.body);(vo().exists((function(n){return A(["input","textarea"],ft(n))}))?function(n){sg.setTimeout((function(){n()}),0)}:T)((function(){vo().each(po),go(t)}))},op="data-"+fi("last-outer-height"),ip=function(n,t){ne(n,op,t)},up=function(n){return{top:n.top,bottom:n.top+n.height}},cp=function(n,t){var e=function(n){return Zg(n,op)}(t),r=n.innerHeight;return e>r?R.some(e-r):R.none()},ap=function(n,t){var e=et.fromDom(t.document.body),r=ag(et.fromDom(n),"resize",(function(){cp(n,e).each((function(n){(function(n){var t=ep(n);return t.length>0?R.some(t[0]).map(up):R.none()})(t).each((function(e){var r=function(n,t,e){return t.top>n.innerHeight||t.bottom>n.innerHeight?Math.min(e,t.bottom-n.innerHeight+50):0}(t,e,n);0!==r&&t.scrollTo(t.pageXOffset,t.pageYOffset+r)}))})),ip(e,n.innerHeight)}));ip(e,n.innerHeight);return{toEditing:function(){rp(t)},destroy:function(){r.unbind()}}},fp=function(n,t){var e=null,r=function(){f(e)||(clearTimeout(e),e=null)};return{cancel:r,throttle:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];r(),e=setTimeout((function(){e=null,n.apply(null,o)}),t)}}},sp=function(n,t){var e,r,o,i=Dl(Jl.sketch({dom:ff('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:uo([ii.config({toggleClass:fi("mask-tap-icon-selected"),toggleOnExecute:!1})])})),u=(e=n,r=200,o=null,{cancel:function(){f(o)||(clearTimeout(o),o=null)},throttle:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];f(o)&&(o=setTimeout((function(){o=null,e.apply(null,n)}),r))}});return Jl.sketch({dom:ff('<div class="${prefix}-disabled-mask"></div>'),components:[Jl.sketch({dom:ff('<div class="${prefix}-content-container"></div>'),components:[of.sketch({dom:ff('<div class="${prefix}-content-tap-section"></div>'),components:[i.asSpec()],action:function(n){u.throttle()},buttonBehaviours:uo([ii.config({toggleClass:fi("mask-tap-icon-selected")})])})]})]})},lp=h({unbind:p}),dp=Ze([vr("editor",[gr("getFrame"),hr("getBody"),hr("getDoc"),hr("getWin"),hr("getSelection"),hr("setSelection"),hr("clearSelection"),hr("cursorSaver"),hr("onKeyup"),hr("onNodeChanged"),hr("getCursorBox"),gr("onDomChanged"),wr("onTouchContent",p),wr("onTapContent",p),wr("onTouchToolstrip",p),wr("onScrollToCursor",lp),wr("onScrollToElement",lp),wr("onToEditing",lp),wr("onToReading",lp),wr("onToolbarScrollStart",b)]),gr("socket"),gr("toolstrip"),gr("dropup"),gr("toolbar"),gr("container"),gr("alloy"),mr("win",(function(n){return pt(n.socket).dom.defaultView})),mr("body",(function(n){return et.fromDom(n.socket.dom.ownerDocument.body)})),wr("translate",b),wr("setReadOnly",p),wr("readOnlyOnInit",E)]),mp=function(n){var t=fr("Getting AndroidWebapp schema",dp,n);bi(t.toolstrip,"width","100%");var e=im(sp((function(){t.setReadOnly(t.readOnlyOnInit()),o.enter()}),t.translate));t.alloy.add(e);var r={show:function(){t.alloy.add(e)},hide:function(){t.alloy.remove(e)}};Ot(t.container,e.element);var o=function(n,t){var e=Lg(),r=Fu(),o=Fu();return{enter:function(){t.hide(),se(n.container,fi("fullscreen-maximized")),se(n.container,fi("android-maximized")),e.maximize(),se(n.body,fi("android-scroll-reload")),r.set(ap(n.win,jg(n.editor).getOrDie("no"))),zg(n.editor).each((function(t){Ug(n.container,t.body),o.set(Qg(t,n.toolstrip,n.alloy))}))},exit:function(){e.restore(),t.show(),de(n.container,fi("fullscreen-maximized")),de(n.container,fi("android-maximized")),qg(),de(n.body,fi("android-scroll-reload")),o.clear(),r.clear()}}}(t,r);return{setReadOnly:t.setReadOnly,refreshStructure:p,enter:o.enter,exit:o.exit,destroy:p}},gp=h([gr("dom"),wr("shell",!0),Zc("toolbarBehaviours",[Cm])]),pp=h([Ma({name:"groups",overrides:function(){return{behaviours:uo([Cm.config({})])}}})]),vp=rf({name:"Toolbar",configFields:gp(),partFields:pp(),factory:function(n,t,e,r){var o=function(t){return n.shell?R.some(t):Na(t,n,"groups")},i=n.shell?{behaviours:[Cm.config({})],components:[]}:{behaviours:[],components:t};return{uid:n.uid,dom:n.dom,components:i.components,behaviours:ta(n.toolbarBehaviours,i.behaviours),apis:{setGroups:function(n,t){o(n).fold((function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(n){Cm.set(n,t)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(n,t,e){n.setGroups(t,e)}}}),hp=h([gr("items"),function(n){return vr("markers",H(n,gr))}(["itemSelector"]),Zc("tgroupBehaviours",[Qc])]),bp=h([_a({name:"items",unit:"item"})]),yp=rf({name:"ToolbarGroup",configFields:hp(),partFields:bp(),factory:function(n,t,e,r){return{uid:n.uid,dom:n.dom,components:t,behaviours:ta(n.tgroupBehaviours,[Qc.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),xp="data-"+fi("horizontal-scroll"),wp=function(n){return"true"===ee(n,xp)?function(n){return n.dom.scrollLeft>0||function(n){n.dom.scrollLeft=1;var t=0!==n.dom.scrollLeft;return n.dom.scrollLeft=0,t}(n)}(n):function(n){return n.dom.scrollTop>0||function(n){n.dom.scrollTop=1;var t=0!==n.dom.scrollTop;return n.dom.scrollTop=0,t}(n)}(n)},Sp=function(){var n=function(n){var t=!0===n.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:ff('<div aria-label="'+n.label+'" class="${prefix}-toolbar-group '+t+'"></div>'),tgroupBehaviours:uo([ql("adhoc-scrollable-toolbar",!0===n.scrollable?[Yr((function(n,t){var e;bi(n.element,"overflow-x","auto"),e=n.element,ne(e,xp,"true"),$m(n.element)}))]:[])]),components:[Jl.sketch({components:[yp.parts.items({})]})],markers:{itemSelector:"."+fi("toolbar-group-item")},items:n.items}},t=im(vp.sketch({dom:ff('<div class="${prefix}-toolbar"></div>'),components:[vp.parts.groups({})],toolbarBehaviours:uo([ii.config({toggleClass:fi("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),Qc.config({mode:"cyclic"})]),shell:!0})),e=im(Jl.sketch({dom:{classes:[fi("toolstrip")]},components:[um(t)],containerBehaviours:uo([ii.config({toggleClass:fi("android-selection-context-toolbar"),toggleOnExecute:!1})])})),r=function(){vp.setGroups(t,o.get()),ii.off(t)},o=mo([]);return{wrapper:e,toolbar:t,createGroups:function(t){return H(t,v(yp.sketch,n))},setGroups:function(n){o.set(n),r()},setContextToolbar:function(n){ii.on(t),vp.setGroups(t,n)},restoreToolbar:function(){ii.isOn(t)&&r()},refresh:function(){},focus:function(){Qc.focusIn(t)}}},Op=function(n){return im(of.sketch({dom:ff('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){n.run((function(n){n.setReadOnly(!1)}))}}))},kp=function(){return im(Jl.sketch({dom:ff('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:uo([Cm.config({})])}))},Tp=function(n,t){Cm.append(n,um(t))},Cp=function(n,t){Cm.remove(n,t)},Ep=function(n,t,e,r){(!0===e?lo.toAlpha:lo.toOmega)(r),(e?Tp:Cp)(n,t)},Dp=function(n,t){return t.getAnimationRoot.fold((function(){return n.element}),(function(t){return t(n)}))},Mp=function(n){return n.dimension.property},_p=function(n,t){return n.dimension.getDimension(t)},Rp=function(n,t){var e=Dp(n,t);Yd(e,[t.shrinkingClass,t.growingClass])},Fp=function(n,t){de(n.element,t.openClass),se(n.element,t.closedClass),bi(n.element,Mp(t),"0px"),ki(n.element)},Ip=function(n,t){de(n.element,t.closedClass),se(n.element,t.openClass),Oi(n.element,Mp(t))},Vp=function(n,t,e,r){e.setCollapsed(),bi(n.element,Mp(t),_p(t,n.element)),ki(n.element),Rp(n,t),Fp(n,t),t.onStartShrink(n),t.onShrunk(n)},Bp=function(n,t,e,r){var o=r.getOrThunk((function(){return _p(t,n.element)}));e.setCollapsed(),bi(n.element,Mp(t),o),ki(n.element);var i=Dp(n,t);de(i,t.growingClass),se(i,t.shrinkingClass),Fp(n,t),t.onStartShrink(n)},Ap=function(n,t,e){var r=_p(t,n.element);("0px"===r?Vp:Bp)(n,t,e,R.some(r))},Np=function(n,t,e){var r=Dp(n,t),o=me(r,t.shrinkingClass),i=_p(t,n.element);Ip(n,t);var u=_p(t,n.element);(o?function(){bi(n.element,Mp(t),i),ki(n.element)}:function(){Fp(n,t)})(),de(r,t.shrinkingClass),se(r,t.growingClass),Ip(n,t),bi(n.element,Mp(t),u),e.setExpanded(),t.onStartGrow(n)},Hp=function(n,t,e){var r=Dp(n,t);return!0===me(r,t.growingClass)},Pp=function(n,t,e){var r=Dp(n,t);return!0===me(r,t.shrinkingClass)},zp=Object.freeze({__proto__:null,refresh:function(n,t,e){if(e.isExpanded()){Oi(n.element,Mp(t));var r=_p(t,n.element);bi(n.element,Mp(t),r)}},grow:function(n,t,e){e.isExpanded()||Np(n,t,e)},shrink:function(n,t,e){e.isExpanded()&&Ap(n,t,e)},immediateShrink:function(n,t,e){e.isExpanded()&&Vp(n,t,e)},hasGrown:function(n,t,e){return e.isExpanded()},hasShrunk:function(n,t,e){return e.isCollapsed()},isGrowing:Hp,isShrinking:Pp,isTransitioning:function(n,t,e){return Hp(n,t)||Pp(n,t)},toggleGrow:function(n,t,e){(e.isExpanded()?Ap:Np)(n,t,e)},disableTransitions:Rp}),jp=Object.freeze({__proto__:null,exhibit:function(n,t,e){var r=t.expanded;return Zr(r?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:Er(t.dimension.property,"0px")})},events:function(n,t){return Hr([Ur(Fn(),(function(e,r){r.event.raw.propertyName===n.dimension.property&&(Rp(e,n),t.isExpanded()&&Oi(e.element,n.dimension.property),(t.isExpanded()?n.onGrown:n.onShrunk)(e))}))])}}),Lp=[gr("closedClass"),gr("openClass"),gr("shrinkingClass"),gr("growingClass"),hr("getAnimationRoot"),Po("onShrunk"),Po("onStartShrink"),Po("onGrown"),Po("onStartGrow"),wr("expanded",!1),pr("dimension",lr("property",{width:[$o("property","width"),$o("getDimension",(function(n){return zf(n)+"px"}))],height:[$o("property","height"),$o("getDimension",(function(n){return Ei(n)+"px"}))]}))],$p=ao({fields:Lp,name:"sliding",active:jp,apis:zp,state:Object.freeze({__proto__:null,init:function(n){var t=mo(n.expanded);return io({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:x(t.set,!1),setExpanded:x(t.set,!0),readState:function(){return"expanded: "+t.get()}})}})}),Gp=function(n,t){var e=im(Jl.sketch({dom:{tag:"div",classes:[fi("dropup")]},components:[],containerBehaviours:uo([Cm.config({}),$p.config({closedClass:fi("dropup-closed"),openClass:fi("dropup-open"),shrinkingClass:fi("dropup-shrinking"),growingClass:fi("dropup-growing"),dimension:{property:"height"},onShrunk:function(e){n(),t(),Cm.set(e,[])},onGrown:function(e){n(),t()}}),ci((function(n,t){r(p)}))])})),r=function(n){window.requestAnimationFrame((function(){n(),$p.shrink(e)}))};return{appear:function(n,t,r){!0===$p.hasShrunk(e)&&!1===$p.isTransitioning(e)&&window.requestAnimationFrame((function(){t(r),Cm.set(e,[n()]),$p.grow(e)}))},disappear:r,component:e,element:e.element}},Wp=function(n){var t,e;return n.raw.which===zi[0]&&!A(["input","textarea"],ft(n.target))&&(t=n.target,!Pi(t,'[contenteditable="true"]',e).isSome())},Up=function(){return bn().browser.isFirefox()},qp=function(t,e){var r=n({stopBackspace:!0},e),o=Yg(r),i=H(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(n){return ag(t,n,(function(t){o.fireIfReady(t,n).each((function(n){n&&t.kill()})),r.triggerEvent(n,t)&&t.kill()}))})),u=Iu(),c=ag(t,"paste",(function(n){o.fireIfReady(n,"paste").each((function(t){t&&n.kill()})),r.triggerEvent("paste",n)&&n.kill(),u.set(setTimeout((function(){r.triggerEvent(Hn(),n)}),0))})),a=ag(t,"keydown",(function(n){r.triggerEvent("keydown",n)?n.kill():r.stopBackspace&&Wp(n)&&n.prevent()})),f=function(n,t){return Up()?fg(n,"focus",t):ag(n,"focusin",t)}(t,(function(n){r.triggerEvent("focusin",n)&&n.kill()})),s=Iu(),l=function(n,t){return Up()?fg(n,"blur",t):ag(n,"focusout",t)}(t,(function(n){r.triggerEvent("focusout",n)&&n.kill(),s.set(setTimeout((function(){r.triggerEvent(Nn(),n)}),0))}));return{unbind:function(){P(i,(function(n){n.unbind()})),a.unbind(),f.unbind(),l.unbind(),c.unbind(),u.on(clearTimeout),s.on(clearTimeout)}}},Xp=function(n,t){var e=Kt(n,"target").getOr(t);return mo(e)},Yp=kr([{stopped:[]},{resume:["element"]},{complete:[]}]),Kp=function(n,t,e,r,o,i){var u=n(t,r),c=function(n,t){var e=mo(!1),r=mo(!1);return{stop:function(){e.set(!0)},cut:function(){r.set(!0)},isStopped:e.get,isCut:r.get,event:n,setSource:t.set,getSource:t.get}}(e,o);return u.fold((function(){return i.logEventNoHandlers(t,r),Yp.complete()}),(function(n){var e=n.descHandler;return Pd(e)(c),c.isStopped()?(i.logEventStopped(t,n.element,e.purpose),Yp.stopped()):c.isCut()?(i.logEventCut(t,n.element,e.purpose),Yp.complete()):ht(n.element).fold((function(){return i.logNoParent(t,n.element,e.purpose),Yp.complete()}),(function(r){return i.logEventResponse(t,n.element,e.purpose),Yp.resume(r)}))}))},Jp=function(n,t,e,r,o,i){return Kp(n,t,e,r,o,i).fold(E,(function(r){return Jp(n,t,e,r,o,i)}),C)},Qp=function(n,t,e){var r=function(n){var t=mo(!1);return{stop:function(){t.set(!0)},cut:p,isStopped:t.get,isCut:C,event:n,setSource:k("Cannot set source of a broadcasted event"),getSource:k("Cannot get source of a broadcasted event")}}(t);return P(n,(function(n){var t=n.descHandler;Pd(t)(r)})),r.isStopped()},Zp=function(n,t,e,r,o){var i=Xp(e,r);return Jp(n,t,e,r,i,o)},nv=function(){var n={};return{registerId:function(t,e,r){Wt(r,(function(r,o){var i=void 0!==n[o]?n[o]:{};i[e]=function(n,t){return e=x.apply(void 0,[n.handler].concat(t)),r=n.purpose,{cHandler:e,purpose:r};var e,r}(r,t),n[o]=i}))},unregisterId:function(t){Wt(n,(function(n,e){Jt(n,t)&&delete n[t]}))},filterByType:function(t){return Kt(n,t).map((function(n){return Yt(n,(function(n,t){return function(n,t){return{id:n,descHandler:t}}(t,n)}))})).getOr([])},find:function(t,e,r){return Kt(n,e).bind((function(n){return Ir(r,(function(t){return function(n,t){return Ya(t).bind((function(t){return Kt(n,t)})).map((function(n){return function(n,t){return{element:n,descHandler:t}}(t,n)}))}(n,t)}),t)}))}}},tv=function(){var n=nv(),t={},e=function(n){var t=n.element;return Ya(t).getOrThunk((function(){return function(n,t){var e=ma(Ua+n);return Xa(t,e),e}("uid-",n.element)}))},r=function(e){Ya(e.element).each((function(e){delete t[e],n.unregisterId(e)}))};return{find:function(t,e,r){return n.find(t,e,r)},filter:function(t){return n.filterByType(t)},register:function(o){var i=e(o);Qt(t,i)&&function(n,e){var o=t[e];if(o!==n)throw new Error('The tagId "'+e+'" is already used by: '+Co(o.element)+"\nCannot use it for: "+Co(n.element)+"\nThe conflicting element is"+(It(o.element)?" ":" not ")+"already in the DOM");r(n)}(o,i);var u=[o];n.registerId(u,i,o.events),t[i]=o},unregister:r,getById:function(n){return Kt(t,n)}}},ev=function(n){var t=function(t){return ht(n.element).fold(E,(function(n){return ct(t,n)}))},e=tv(),r=function(n,r){return e.find(t,n,r)},o=qp(n.element,{triggerEvent:function(n,t){return Ro(n,t.target,(function(e){return function(n,t,e,r){return Zp(n,t,e,e.target,r)}(r,n,t,e)}))}}),i={debugInfo:h("real"),triggerEvent:function(n,t,e){Ro(n,t,(function(o){return Zp(r,n,e,t,o)}))},triggerFocus:function(n,t){Ya(n).fold((function(){go(n)}),(function(e){Ro(An(),n,(function(e){return function(n,t,e,r,o){var i=Xp(e,r);Kp(n,t,e,r,i,o)}(r,An(),{originator:t,kill:p,prevent:p,target:n},n,e),!1}))}))},triggerEscape:function(n,t){i.triggerEvent("keydown",n.element,t.event)},getByUid:function(n){return g(n)},getByDom:function(n){return v(n)},build:im,addToGui:function(n){a(n)},removeFromGui:function(n){f(n)},addToWorld:function(n){u(n)},removeFromWorld:function(n){c(n)},broadcast:function(n){l(n)},broadcastOn:function(n,t){d(n,t)},broadcastEvent:function(n,t){m(n,t)},isConnected:E},u=function(n){n.connect(i),dt(n.element)||(e.register(n),P(n.components(),u),i.triggerEvent(Gn(),n.element,{target:n.element}))},c=function(n){dt(n.element)||(P(n.components(),c),e.unregister(n)),n.disconnect()},a=function(t){!function(n,t){zt(n,t,Ot)}(n,t)},f=function(n){jt(n)},s=function(n){var t=e.filter(Pn());P(t,(function(t){var e=t.descHandler;Pd(e)(n)}))},l=function(n){s({universal:!0,data:n})},d=function(n,t){s({universal:!1,channels:n,data:t})},m=function(n,t){var r=e.filter(n);return Qp(r,t)},g=function(n){return e.getById(n).fold((function(){return be.error(new Error('Could not find component with uid: "'+n+'" in system.'))}),be.value)},v=function(n){var t=Ya(n).getOr("not found");return g(t)};return u(n),{root:n,element:n.element,destroy:function(){o.unbind(),Ct(n.element)},add:a,remove:f,getByUid:g,getByDom:v,addToWorld:u,removeFromWorld:c,broadcast:l,broadcastOn:d,broadcastEvent:m}},rv=fi("readonly-mode"),ov=fi("edit-mode");function iv(n){var t=im(Jl.sketch({dom:{classes:[fi("outer-container")].concat(n.classes)},containerBehaviours:uo([lo.config({alpha:rv,omega:ov})])}));return ev(t)}var uv=function(n,t){var e=et.fromTag("input");yi(e,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),Ot(n,e),go(e),t(e),Ct(e)},cv=function(n){var t=n.getSelection();if(t.rangeCount>0){var e=t.getRangeAt(0),r=n.document.createRange();r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset),t.removeAllRanges(),t.addRange(r)}},av=function(n,t){vo().each((function(n){ct(n,t)||po(n)})),n.focus(),go(et.fromDom(n.document.body)),cv(n)},fv=function(n,t,e,r){var o=function(){av(t,r)},i=ag(e,"keydown",(function(n){A(["input","textarea"],ft(n.target))||o()}));return{toReading:function(){uv(n,po)},toEditing:o,onToolbarTouch:p,destroy:function(){i.unbind()}}},sv=function(n,t,e,r,o){var i=function(){t.run((function(n){n.refreshSelection()}))},u=function(n,e){var o=n-r.dom.scrollTop;t.run((function(n){n.scrollIntoView(o,o+e)}))},c=function(){t.run((function(n){n.clearSelection()}))},a=function(){n.getCursorBox().each((function(n){u(n.top,n.height)})),t.run((function(n){n.syncHeight()}))},f=Kg(n),s=fp(a,300),l=[n.onKeyup((function(){c(),s.throttle()})),n.onNodeChanged(i),n.onDomChanged(s.throttle),n.onDomChanged(i),n.onScrollToCursor((function(n){n.preventDefault(),s.throttle()})),n.onScrollToElement((function(n){n.element,u(t,r)})),n.onToEditing((function(){t.run((function(n){n.toEditing()}))})),n.onToReading((function(){t.run((function(n){n.toReading()}))})),ag(n.doc,"touchend",(function(t){ct(n.html,t.target)||ct(n.body,t.target)})),ag(e,"transitionend",(function(n){var r;"height"===n.raw.propertyName&&(r=Ei(e),t.run((function(n){n.setViewportOffset(r)})),i(),a())})),fg(e,"touchstart",(function(e){var r;t.run((function(n){n.highlightSelection()})),r=e,t.run((function(n){n.onToolbarTouch(r)})),n.onTouchToolstrip()})),ag(n.body,"touchstart",(function(t){c(),n.onTouchContent(),f.fireTouchstart(t)})),f.onTouchmove(),f.onTouchend(),ag(n.body,"click",(function(n){n.kill()})),ag(e,"touchmove",(function(){n.onToolbarScrollStart()}))];return{destroy:function(){P(l,(function(n){n.unbind()}))}}};var lv,dv=function(n){var t=R.none(),e=[],r=function(n){o()?u(n):e.push(n)},o=function(){return t.isSome()},i=function(n){P(n,u)},u=function(n){t.each((function(t){setTimeout((function(){n(t)}),0)}))};return n((function(n){o()||(t=R.some(n),i(e),e=[])})),{get:r,map:function(n){return dv((function(t){r((function(e){t(n(e))}))}))},isReady:o}},mv={nu:dv,pure:function(n){return dv((function(t){t(n)}))}},gv=function(n){setTimeout((function(){throw n}),0)},pv=function(n){var t=function(t){n().then(t,gv)};return{map:function(t){return pv((function(){return n().then(t)}))},bind:function(t){return pv((function(){return n().then((function(n){return t(n).toPromise()}))}))},anonBind:function(t){return pv((function(){return n().then((function(){return t.toPromise()}))}))},toLazy:function(){return mv.nu(t)},toCached:function(){var t=null;return pv((function(){return null===t&&(t=n()),t}))},toPromise:n,get:t}},vv=function(n){return pv((function(){return new Vl(n)}))},hv=function(n){return pv((function(){return Vl.resolve(n)}))},bv=function(n,t){return Q([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],(function(e){return function(n,t){return n?R.some(t):R.none()}(n<=e.width&&t<=e.height,e.keyboard)})).getOr({portrait:t/5,landscape:n/4})},yv=function(n){var t=lg(n).isPortrait(),e=function(n){return bv(n.screen.width,n.screen.height)}(n),r=t?e.portrait:e.landscape;return(t?n.screen.height:n.screen.width)-n.innerHeight>r?0:r},xv=function(n,t){var e=pt(n).dom.defaultView;return Ei(n)+Ei(t)-yv(e)},wv=function(n,t,e){var r=xv(t,e),o=Ei(t)+Ei(e)-r;bi(n,"padding-bottom",o+"px")},Sv=kr([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),Ov="data-"+fi("position-y-fixed"),kv="data-"+fi("y-property"),Tv="data-"+fi("scrolling"),Cv="data-"+fi("last-window-height"),Ev=function(n){return Zg(n,Ov)},Dv=function(n,t){var e=function(n){return ee(n,kv)}(n);return Sv.fixed(n,e,t)},Mv=function(n,t){return Sv.scroller(n,t)},_v=function(n){var t=Ev(n);return("true"===ee(n,Tv)?Mv:Dv)(n,t)},Rv=function(n,t,e){var r=pt(n).dom.defaultView.innerHeight;return ne(n,Cv,r+"px"),r-t-e},Fv=function(n,t,e,r){var o=pt(n).dom.defaultView,i=function(n){var t=ee(n,"style");yi(n,{position:"absolute",top:"0px"}),ne(n,Ov,"0px"),ne(n,kv,"top");return{restore:function(){ne(n,"style",t||""),ie(n,Ov),ie(n,kv)}}}(e),u=Ei(e),c=Ei(r),a=function(n,t,e){var r=ee(e,"style");$m(e),yi(e,{position:"absolute",height:t+"px",width:"100%",top:n+"px"}),ne(e,Ov,n+"px"),ne(e,Tv,"true"),ne(e,kv,"top");return{restore:function(){Gm(e),ne(e,"style",r||""),ie(e,Ov),ie(e,Tv),ie(e,kv)}}}(u,Rv(n,u,c),n),f=function(n){var t=ee(n,"style");yi(n,{position:"absolute",bottom:"0px"}),ne(n,Ov,"0px"),ne(n,kv,"bottom");return{restore:function(){ne(n,"style",t||""),ie(n,Ov),ie(n,kv)}}}(r),s=!0,l=function(){return o.innerHeight>function(n){return Zg(n,Cv)}(n)},d=function(){if(s){var o=Ei(e),i=Ei(r),u=Rv(n,o,i);ne(n,Ov,o+"px"),bi(n,"height",u+"px"),wv(t,n,r)}};return wv(t,n,r),{setViewportOffset:function(t){ne(n,Ov,t+"px"),d()},isExpanding:l,isShrinking:O(l),refresh:d,restore:function(){s=!1,i.restore(),a.restore(),f.restore()}}},Iv=(lv=null,{animate:function(n,t,e,r,o,i){var u=!1,c=function(n){u=!0,o(n)};sg.clearInterval(lv);var a=function(n){sg.clearInterval(lv),c(n)};lv=sg.setInterval((function(){var o=n();(function(n,t,e){return Math.abs(n-t)<=e?R.none():n<t?R.some(n+e):R.some(n-e)})(o,t,e).fold((function(){sg.clearInterval(lv),c(t)}),(function(e){if(r(e,a),!u){var i=n();(i!==e||Math.abs(i-t)>Math.abs(o-t))&&(sg.clearInterval(lv),c(t))}}))}),i)}}),Vv="data-"+fi("last-scroll-top"),Bv=function(n){var t=Si(n,"top").getOr("0");return parseInt(t,10)},Av=function(n){return parseInt(n.dom.scrollTop,10)},Nv=function(n,t){return vv((function(e){var r=x(Av,n);ne(n,Vv,r());var o=Math.abs(t-r()),i=Math.ceil(o/10);Iv.animate(r,t,i,(function(t,e){Zg(n,Vv)!==n.dom.scrollTop?e(n.dom.scrollTop):(n.dom.scrollTop=t,ne(n,Vv,t))}),(function(){n.dom.scrollTop=t,ne(n,Vv,t),e(t)}),10)}))},Hv=function(n,t){var e=t+Ev(n)+"px";bi(n,"top",e)};var Pv=function(n,t){return t((function(t){var e=[],r=0;0===n.length?t([]):P(n,(function(o,i){o.get(function(o){return function(i){e[o]=i,++r>=n.length&&t(e)}}(i))}))}))},zv=function(n,t,e){var r=t+e,o=Si(n,"top").getOr(e),i=r-parseInt(o,10);return function(n,t,e){return vv((function(r){var o=x(Av,n);Iv.animate(o,t,15,(function(t){n.dom.scrollTop=t,bi(n,"top",Bv(n)+15+"px")}),(function(){n.dom.scrollTop=t,bi(n,"top",e+"px"),r(t)}),10)}))}(n,n.dom.scrollTop+i,r)},jv=function(n,t){return n.fold((function(n,e,r){return function(n,t,e,r){return bi(n,t,e+r+"px"),hv(r)}(n,e,t,r)}),(function(n,e){return zv(n,t,e)}))},Lv=function(n,t){var e=function(n){var t=Fi(n,"["+Ov+"]");return H(t,_v)}(n),r=H(e,(function(n){return jv(n,t)}));return Pv(r,vv)},$v=function(n,t,e,r,o,i){var u,c,a=(u=function(e){return function(n,t,e){var r=pt(n).dom.defaultView;return vv((function(o){Hv(n,e),Hv(t,e),r.scrollTo(0,e),o(e)}))}(n,t,e)},c=mo(mv.pure({})),{start:function(n){var t=mv.nu((function(t){return u(n).get(t)}));c.set(t)},idle:function(n){c.get().get((function(){n()}))}}),f=fp((function(){a.idle((function(){Lv(e,r.pageYOffset).get((function(){var n;(n=ep(i),R.from(n[0]).bind((function(n){var e=n.top-t.dom.scrollTop;return e>r.innerHeight+5||e<-5?R.some({top:e,bottom:e+n.height}):R.none()}))).each((function(n){t.dom.scrollTop=t.dom.scrollTop+n.top})),a.start(0),o.refresh()}))}))}),1e3),s=ag(et.fromDom(r),"scroll",(function(){r.pageYOffset<0||f.throttle()}));return Lv(e,r.pageYOffset).get(b),{unbind:s.unbind}},Gv=function(n){var t=n.cWin,e=n.ceBody,r=n.socket,o=n.toolstrip,i=n.contentElement,u=n.keyboardType,c=n.outerWindow,a=n.dropup,f=n.outerBody,s=Fv(r,e,o,a),l=u(f,t,Vt(),i),d=mg(c,{onChange:p,onReady:s.refresh});d.onAdjustment((function(){s.refresh()}));var m=ag(et.fromDom(c),"resize",(function(){s.isExpanding()&&s.refresh()})),g=$v(o,r,f,c,s,t),v=function(n,t){var e=n.document,r=et.fromTag("div");se(r,fi("unfocused-selections")),Ot(et.fromDom(e.documentElement),r);var o=ag(r,"touchstart",(function(e){e.prevent(),av(n,t),u()})),i=function(n){var t=et.fromTag("span");return Xd(t,[fi("layer-editor"),fi("unfocused-selection")]),yi(t,{left:n.left+"px",top:n.top+"px",width:n.width+"px",height:n.height+"px"}),t},u=function(){Tt(r)};return{update:function(){u();var t=ep(n),e=H(t,i);kt(r,e)},isActive:function(){return bt(r).length>0},destroy:function(){o.unbind(),Ct(r)},clear:u}}(t,i),h=function(){v.clear()};return{toEditing:function(){l.toEditing(),h()},toReading:function(){l.toReading()},onToolbarTouch:function(n){l.onToolbarTouch()},refreshSelection:function(){v.isActive()&&v.update()},clearSelection:h,highlightSelection:function(){v.update()},scrollIntoView:function(n,e){!function(n,t,e,r,o){var i=xv(t,e),u=x(cv,n);r>i||o>i?Nv(t,t.dom.scrollTop-i+o).get(u):r<0&&Nv(t,t.dom.scrollTop+r).get(u)}(t,r,a,n,e)},updateToolbarPadding:p,setViewportOffset:function(n){s.setViewportOffset(n),function(n,t){return vv((function(e){var r=x(Bv,n),o=function(t){bi(n,"top",t+"px")},i=Math.abs(t-r()),u=Math.ceil(i/10);Iv.animate(r,t,u,o,(function(){o(t),e(t)}),10)}))}(r,n).get(b)},syncHeight:function(){bi(i,"height",i.dom.contentWindow.document.body.scrollHeight+"px")},refreshStructure:s.refresh,destroy:function(){s.restore(),d.destroy(),g.unbind(),m.unbind(),l.destroy(),v.destroy(),uv(Vt(),po)}}},Wv=function(n){var t=fr("Getting IosWebapp schema",dp,n);bi(t.toolstrip,"width","100%"),bi(t.container,"position","relative");var e=im(sp((function(){t.setReadOnly(t.readOnlyOnInit()),o.enter()}),t.translate));t.alloy.add(e);var r={show:function(){t.alloy.add(e)},hide:function(){t.alloy.remove(e)}},o=function(n,t){var e=Lg(),r=Iu(),o=Iu(),i=Fu(),u=Fu();return{enter:function(){t.hide();var c=et.fromDom(document);zg(n.editor).each((function(t){var a,f;r.set({socketHeight:Si(n.socket,"height"),iframeHeight:Si(t.frame,"height"),outerScroll:document.body.scrollTop}),o.set({exclusives:(a=c,f="."+Wm,ag(a,"touchmove",(function(n){Pi(n.target,f).filter(wp).fold((function(){n.prevent()}),p)})))}),se(n.container,fi("fullscreen-maximized")),Ug(n.container,t.body),e.maximize(),bi(n.socket,"overflow","scroll"),bi(n.socket,"-webkit-overflow-scrolling","touch"),go(t.body),i.set(Gv({cWin:t.win,ceBody:t.body,socket:n.socket,toolstrip:n.toolstrip,dropup:n.dropup.element,contentElement:t.frame,outerBody:n.body,outerWindow:n.win,keyboardType:fv})),i.run((function(n){n.syncHeight()})),u.set(sv(t,i,n.toolstrip,n.socket,n.dropup))}))},refreshStructure:function(){i.run((function(n){n.refreshStructure()}))},exit:function(){e.restore(),u.clear(),i.clear(),t.show(),r.on((function(t){t.socketHeight.each((function(t){bi(n.socket,"height",t)})),t.iframeHeight.each((function(t){bi(n.editor.getFrame(),"height",t)})),document.body.scrollTop=t.scrollTop})),r.clear(),o.on((function(n){n.exclusives.unbind()})),o.clear(),de(n.container,fi("fullscreen-maximized")),qg(),Gm(n.toolbar),Oi(n.socket,"overflow"),Oi(n.socket,"-webkit-overflow-scrolling"),po(n.editor.getFrame()),zg(n.editor).each((function(n){n.clearSelection()}))}}}(t,r);return{setReadOnly:t.setReadOnly,refreshStructure:o.refreshStructure,enter:o.enter,exit:o.exit,destroy:p}};var Uv=tinymce.util.Tools.resolve("tinymce.EditorManager"),qv=function(n,t,e){n.system.broadcastOn(["formatChanged"],{command:t,state:e})},Xv=function(n){return function(){var t=function(){n._skinLoaded=!0,n.fire("SkinLoaded")};n.initialized?t():n.on("init",t)}},Yv=function(n){return{getNotificationManagerImpl:function(){return{open:h({progressBar:{value:p},close:p,text:p,getEl:h(null),moveTo:p,moveRel:p,settings:{}}),close:p,reposition:p,getArgs:h({})}},renderUI:function(){var t=n.getElement(),e=function(n){var t=R.from(function(n){return n.getParam("skin_url")}(n)).getOrThunk((function(){return Uv.baseURL+"/skins/ui/oxide"}));return{content:t+"/content.mobile.min.css",ui:t+"/skin.mobile.min.css"}}(n);if(!1===function(n){return!1===n.getParam("skin")}(n)){var r=bo.DOM.styleSheetLoader;n.contentCSS.push(e.content),r.load(e.ui,Xv(n)),n.on("remove",(function(){return r.unload(e.ui)}))}else Xv(n)();var o=function(){n.fire("ScrollIntoView")},i=bn().os.isAndroid()?function(n){var t=iv({classes:[fi("android-container")]}),e=Sp(),r=Fu(),o=Op(r),i=kp(),u=Gp(p,n);return t.add(e.wrapper),t.add(i),t.add(u.component),{system:t,element:t.element,init:function(n){r.set(mp(n))},exit:function(){r.run((function(n){n.exit(),Cm.remove(i,o)}))},setToolbarGroups:function(n){var t=e.createGroups(n);e.setGroups(t)},setContextToolbar:function(n){var t=e.createGroups(n);e.setContextToolbar(t)},focusToolbar:function(){e.focus()},restoreToolbar:function(){e.restoreToolbar()},updateMode:function(n){Ep(i,o,n,t.root)},socket:i,dropup:u}}(o):function(n){var t=iv({classes:[fi("ios-container")]}),e=Sp(),r=Fu(),o=Op(r),i=kp(),u=Gp((function(){r.run((function(n){n.refreshStructure()}))}),n);return t.add(e.wrapper),t.add(i),t.add(u.component),{system:t,element:t.element,init:function(n){r.set(Wv(n))},exit:function(){r.run((function(n){Cm.remove(i,o),n.exit()}))},setToolbarGroups:function(n){var t=e.createGroups(n);e.setGroups(t)},setContextToolbar:function(n){var t=e.createGroups(n);e.setContextToolbar(t)},focusToolbar:function(){e.focus()},restoreToolbar:function(){e.restoreToolbar()},updateMode:function(n){Ep(i,o,n,t.root)},socket:i,dropup:u}}(o);!function(n,t){Lt(n,t,wt)}(et.fromDom(t),i.system);var u=t.ownerDocument.defaultView,c=mg(u,{onChange:function(){i.system.broadcastOn(["orientationChanged"],{width:dg(u)})},onReady:p}),a=function(t,e,r,o){!1===o&&n.selection.collapse();var u=f(t,e,r);i.setToolbarGroups(!0===o?u.readOnly:u.main),n.setMode(!0===o?"readonly":"design"),n.fire(!0===o?"toReading":"toEditing"),i.updateMode(o)},f=function(n,t,e){var r=n.get();return{readOnly:r.backToMask.concat(t.get()),main:r.backToMask.concat(e.get())}},s=function(t,e){return n.on(t,e),{unbind:function(){n.off(t)}}};return n.on("init",(function(){i.init({editor:{getFrame:function(){return et.fromDom(n.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:p}},onToReading:function(n){return s("toReading",n)},onToEditing:function(n){return s("toEditing",n)},onScrollToCursor:function(t){n.on("ScrollIntoView",(function(n){t(n)}));return{unbind:function(){n.off("ScrollIntoView"),c.destroy()}}},onTouchToolstrip:function(){t()},onTouchContent:function(){var e,r=et.fromDom(n.editorContainer.querySelector("."+fi("toolbar")));(e=r,ho(e).bind((function(n){return i.system.getByDom(n).toOptional()}))).each(Qn),i.restoreToolbar(),t()},onTapContent:function(t){var e=t.target;if("img"===ft(e))n.selection.select(e.dom),t.kill();else if("a"===ft(e)){i.system.getByDom(et.fromDom(n.editorContainer)).each((function(n){lo.isAlpha(n)&&function(n){var t=document.createElement("a");t.target="_blank",t.href=n.href,t.rel="noreferrer noopener";var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.body.appendChild(t),t.dispatchEvent(e),document.body.removeChild(t)}(e.dom)}))}}},container:et.fromDom(n.editorContainer),socket:et.fromDom(n.contentAreaContainer),toolstrip:et.fromDom(n.editorContainer.querySelector("."+fi("toolstrip"))),toolbar:et.fromDom(n.editorContainer.querySelector("."+fi("toolbar"))),dropup:i.dropup,alloy:i.system,translate:p,setReadOnly:function(n){a(m,d,l,n)},readOnlyOnInit:function(){return!1}});var t=function(){i.dropup.disappear((function(){i.system.broadcastOn(["dropupDismissed"],{})}))},e={label:"The first group",scrollable:!1,items:[gf("back",(function(){n.selection.collapse(),i.exit()}),{},n)]},r={label:"Back to read only",scrollable:!1,items:[gf("readonly-back",(function(){a(m,d,l,!0)}),{},n)]},o=rg(i,n),u=function(n,t){var e=eg(n),r={};return U(e,(function(n){var e=!Qt(r,n)&&Qt(t,n)&&t[n].isSupported()?[t[n].sketch()]:[];return r[n]=!0,e}))}(n,o),f={label:"The extra group",scrollable:!1,items:[]},l=mo([{label:"the action group",scrollable:!0,items:u},f]),d=mo([{label:"The read only mode group",scrollable:!0,items:[]},f]),m=mo({backToMask:[e],backToReadOnly:[r]});!function(n,t){var e=$t(t.formatter.get());P(e,(function(e){t.formatter.formatChanged(e,(function(t){qv(n,e,t)}))})),P(["ul","ol"],(function(e){t.selection.selectorChanged(e,(function(t,r){qv(n,e,t)}))}))}(i,n)})),n.on("remove",(function(){i.exit()})),n.on("detach",(function(){var n,t;n=i.system,t=bt(n.element),P(t,(function(t){n.getByDom(t).each(At)})),Ct(n.element),i.system.destroy()})),{iframeContainer:i.socket.element.dom,editorContainer:i.element.dom}}}};yo.add("mobile",Yv)}();
