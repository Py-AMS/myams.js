{"version":3,"file":"myams-core-dev.js","mappings":"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","sources":["webpack://myams_js/./src/js/ext-base.js","webpack://myams_js/./src/js/ext-registry.js","webpack://myams_js/./src/js/ext-require.js","webpack://myams_js/external var \"jquery\"","webpack://myams_js/webpack/bootstrap","webpack://myams_js/webpack/runtime/define property getters","webpack://myams_js/webpack/runtime/hasOwnProperty shorthand","webpack://myams_js/webpack/runtime/make namespace object","webpack://myams_js/./src/js/myams-core.js"],"sourcesContent":["/* global $, FontAwesome */\n/**\n * MyAMS base features\n */\n\nif (!window.jQuery) {\n\twindow.$ = window.jQuery = require('jquery');\n}\n\n\nimport { registry } from \"./ext-registry\";\n\n\n/**\n * Init JQuery extensions\n */\nexport function init($) {\n\n\t/**\n\t * String prototype extensions\n\t */\n\t$.extend(String.prototype, {\n\n\t\t/**\n\t\t * Replace dashed names with camelCase variation\n\t\t */\n\t\tcamelCase: function() {\n\t\t\tif (!this) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\treturn this.replace(/-(.)/g, (dash, rest) => {\n\t\t\t\treturn rest.toUpperCase();\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Replace camelCase string with dashed name\n\t\t */\n\t\tdeCase: function() {\n\t\t\tif (!this) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\treturn this.replace(/[A-Z]/g, (cap) => {\n\t\t\t\treturn `-${cap.toLowerCase()}`;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Convert first letter only to lowercase\n\t\t */\n\t\tinitLowerCase: function() {\n\t\t\tif (!this) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\treturn this.charAt(0).toLowerCase() + this.slice(1);\n\t\t},\n\n\t\t/**\n\t\t * Convert URL params to object\n\t\t */\n\t\tunserialize: function () {\n\t\t\tif (!this) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tconst\n\t\t\t\tstr = decodeURIComponent(this),\n\t\t\t\tchunks = str.split('&'),\n\t\t\t\tobj = {};\n\t\t\tfor (const chunk of chunks) {\n\t\t\t\tconst [key, val] = chunk.split('=', 2);\n\t\t\t\tobj[key] = val;\n\t\t\t}\n\t\t\treturn obj;\n\t\t}\n\t});\n\n\n\t/**\n\t * Array class prototype extension\n\t */\n\t$.extend(Array.prototype, {\n\n\t\t/**\n\t\t * Extend an array with another one\n\t\t */\n\t\textendWith: function(source) {\n\t\t\tfor (const element of source) {\n\t\t\t\tthis.push(element);\n\t\t\t}\n\t\t}\n\t});\n\n\n\t/**\n\t * Global JQuery object extensions\n\t */\n\t$.extend($, {\n\n\t\t/**\n\t\t * Extend source object with given extensions, but only for properties matching\n\t\t * given prefix.\n\t\t *\n\t\t * @param source: source object, which will be updated in-place\n\t\t * @param prefix: property names prefix selector\n\t\t * @param getter: optional getter used to extract final value\n\t\t * @param extensions: list of extensions object\n\t\t * @returns {*}: modified source object\n\t\t */\n\t\textendPrefix: function(source, prefix, getter, ...extensions) {\n\t\t\tfor (const extension of extensions) {\n\t\t\t\tfor (const [key, value] of Object.entries(extension)) {\n\t\t\t\t\tif (key.startsWith(prefix)) {\n\t\t\t\t\t\tsource[key.substring(prefix.length).initLowerCase()] =\n\t\t\t\t\t\t\tgetter === null ? value : getter(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn source;\n\t\t},\n\n\t\t/**\n\t\t * Extend source with given extensions, but only for existing attributes\n\t\t *\n\t\t * @param source: source object, which will be updated in-place\n\t\t * @param getter: optional getter used to extract final value\n\t\t * @param extensions: list of extensions object\n\t\t * @returns {*}: modified source object\n\t\t */\n\t\textendOnly: function(source, getter, ...extensions) {\n\t\t\tfor (const extension of extensions) {\n\t\t\t\tfor (const [key, value] of Object.entries(extension)) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\t\t\t\tsource[key] = getter === null ? value : getter(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn source;\n\t\t}\n\t});\n\n\n\t/**\n\t * New JQuery functions\n\t */\n\t$.fn.extend({\n\n\t\t/**\n\t\t * Check if current object is empty or not\n\t\t */\n\t\texists: function() {\n\t\t\treturn $(this).length > 0;\n\t\t},\n\n\t\t/**\n\t\t * Get object if it supports given CSS class,\n\t\t * otherwise look for parents\n\t\t */\n\t\tobjectOrParentWithClass: function(klass) {\n\t\t\tif (this.hasClass(klass)) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\treturn this.parents(`.${klass}`);\n\t\t},\n\n\t\t/**\n\t\t * Build an array of attributes of the given selection\n\t\t */\n\t\tlistattr: function(attr) {\n\t\t\tconst result = [];\n\t\t\tthis.each((index, element) => {\n\t\t\t\tresult.push($(element).attr(attr));\n\t\t\t});\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * CSS style function - get or set object style attribute\n\t\t * Code from Aram Kocharyan on stackoverflow.com\n\t\t */\n\t\tstyle: function(styleName, value, priority) {\n\t\t\tlet result = this;\n\t\t\tthis.each((idx, node) => {\n\t\t\t\t// Ensure we have a DOM node\n\t\t\t\tif (typeof node === 'undefined') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// CSSStyleDeclaration\n\t\t\t\tconst style = node.style;\n\t\t\t\t// Getter/Setter\n\t\t\t\tif (typeof styleName !== 'undefined') {\n\t\t\t\t\tif (typeof value !== 'undefined') {\n\t\t\t\t\t\t// Set style property\n\t\t\t\t\t\tpriority = typeof (priority) !== 'undefined' ? priority : '';\n\t\t\t\t\t\tstyle.setProperty(styleName, value, priority);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Get style property\n\t\t\t\t\t\tresult = style.getPropertyValue(styleName);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Get CSSStyleDeclaration\n\t\t\t\t\tresult = style;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * Remove CSS classes starting with a given prefix\n\t\t */\n\t\tremoveClassPrefix: function(prefix) {\n\t\t\tthis.each(function(i, it) {\n\t\t\t\tconst classes = it.className.split(/\\s+/).map((item) => {\n\t\t\t\t\treturn item.startsWith(prefix) ? \"\" : item;\n\t\t\t\t});\n\t\t\t\tit.className = $.trim(classes.join(\" \"));\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t});\n\n\n\t/**\n\t * JQuery 'hasvalue' function expression\n\t * Filter inputs containing value:\n\t *\n\t *     $('span:hasvalue(\"value\")')\n\t */\n\t$.expr[\":\"].hasvalue = function (obj, index, meta /*, stack*/) {\n\t\treturn $(obj).val() !== \"\";\n\t};\n\n\n\t/**\n\t * JQuery 'econtains' function expression\n\t * Case insensitive contains expression:\n\t *\n\t *     $('span:econtains(\"text\")')\n\t */\n\t$.expr[\":\"].econtains = function (obj, index, meta /*, stack*/) {\n\t\treturn (obj.textContent || obj.innerText || $(obj).text() || \"\").toLowerCase() === meta[3].toLowerCase();\n\t};\n\n\n\t/**\n\t * JQuery 'withtext' expression\n\t * Case sensitive exact search expression.\n\t * For example:\n\t *\n\t *    $('span:withtext(\"text\")')\n\t */\n\t$.expr[\":\"].withtext = function (obj, index, meta /*, stack*/) {\n\t\treturn (obj.textContent || obj.innerText || $(obj).text() || \"\") === meta[3];\n\t};\n\n\n\t/**\n\t * JQuery filter on parents class\n\t * This filter is often combined with \":not()\" to select DOM objects which don't have\n\t * parents of a given class.\n\t * For example:\n\t *\n\t *   $('.hint:not(:parents(.nohints))', element);\n\t *\n\t * will select all elements with \".hint\" class which don't have a parent with '.nohints' class.\n\t */\n\t$.expr[':'].parents = function (obj, index, meta /*, stack*/) {\n\t\treturn $(obj).parents(meta[3]).length > 0;\n\t};\n\n\n\t$(document).ready(() => {\n\t\tconst html = $('html');\n\t\thtml.removeClass('no-js')\n\t\t\t.addClass('js');\n\t\tMyAMS.core.executeFunctionByName(html.data('ams-init-page') ||\n\t\t\tMyAMS.config.initPage);\n\t});\n}\n\n\n/**\n * Get list of modules names required by given element\n *\n * @param element: parent element\n * @returns {*[]}\n */\nexport function getModules(element) {\n\tlet modules = [];\n\tconst mods = element.data('ams-modules');\n\tif (typeof mods === 'string') {\n\t\tmodules = modules.concat(mods.trim().split(/[\\s,;]+/));\n\t} else if (mods) {\n\t\tfor (const [name, props] of Object.entries(mods)) {\n\t\t\tconst entry = {};\n\t\t\tentry[name] = props;\n\t\t\tmodules.push(entry);\n\t\t}\n\t}\n\t$('[data-ams-modules]', element).each((idx, elt) => {\n\t\tconst mods = $(elt).data('ams-modules');\n\t\tif (typeof mods === 'string') {\n\t\t\tmodules = modules.concat(mods.trim().split(/[\\s,;]+/));\n\t\t} else if (mods) {\n\t\t\tfor (const [name, props] of Object.entries(mods)) {\n\t\t\t\tconst entry = {};\n\t\t\t\tentry[name] = props;\n\t\t\t\tmodules.push(entry);\n\t\t\t}\n\t\t}\n\t});\n\treturn [...new Set(modules)];\n}\n\n\n/**\n * Main page initialization\n */\nexport function initPage() {\n\treturn MyAMS.require('i18n').then(() => {\n\t\tMyAMS.dom = getDOM();\n\t\tMyAMS.theme = getTheme();\n\t\texecuteFunctionByName(MyAMS.config.initData, window, MyAMS.dom.root);\n\t\tconst modules = getModules(MyAMS.dom.root);\n\t\tMyAMS.require(...modules).then(() => {\n\t\t\tfor (const moduleName of MyAMS.config.modules) {\n\t\t\t\texecuteFunctionByName(`MyAMS.${moduleName}.init`);\n\t\t\t}\n\t\t\texecuteFunctionByName(MyAMS.dom.page.data('ams-init-content') ||\n\t\t\t\tMyAMS.config.initContent);\n\t\t});\n\t});\n}\n\n\n/**\n * Data attributes initializer\n *\n * This function converts a single \"data-ams-data\" attribute into a set of several \"data-*\"\n * attributes.\n * This can be used into HTML templates engines which don't allow creating dynamic attributes\n * easily.\n *\n * @param element: parent element\n */\nexport function initData(element) {\n\t$('[data-ams-data]', element).each((idx, elt) => {\n\t\tconst\n\t\t\t$elt = $(elt),\n\t\t\tdata = $elt.data('ams-data');\n\t\tif (data) {\n\t\t\tfor (const name in data) {\n\t\t\t\tif (!Object.prototype.hasOwnProperty.call(data, name)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet elementData = data[name];\n\t\t\t\tif (typeof elementData !== 'string') {\n\t\t\t\t\telementData = JSON.stringify(elementData);\n\t\t\t\t}\n\t\t\t\t$elt.attr(`data-${name}`, elementData);\n\t\t\t}\n\t\t}\n\t\t$elt.removeAttr('data-ams-data');\n\t});\n}\n\n\n/**\n * Main content initialization; this function will initialize all plug-ins, callbacks and\n * events listeners in the selected element\n *\n * @param element: source element to initialize\n */\nexport function initContent(element=null) {\n\n\tif (element === null) {\n\t\telement = $('body');\n\t}\n\telement = $(element);\n\n\tfunction initElementModules() {\n\t\tfor (const moduleName of MyAMS.config.modules) {\n\t\t\texecuteFunctionByName(`MyAMS.${moduleName}.initElement`, document, element);\n\t\t}\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\texecuteFunctionByName(MyAMS.config.initData, window, element);\n\t\tconst modules = getModules(element);\n\t\treturn MyAMS.require(...modules).then(() => {\n\t\t\telement.trigger('before-init.ams.content');\n\t\t\tif (MyAMS.config.useRegistry && !element.data('ams-disable-registry')) {\n\t\t\t\tMyAMS.registry.initElement(element).then(() => {\n\t\t\t\t\tinitElementModules();\n\t\t\t\t}).then(() => {\n\t\t\t\t\tMyAMS.registry.run(element);\n\t\t\t\t\telement.trigger('after-init.ams.content');\n\t\t\t\t}).then(resolve);\n\t\t\t} else {\n\t\t\t\tinitElementModules();\n\t\t\t\tresolve();\n\t\t\t}\n\t\t}, () => {\n\t\t\treject(\"Missing MyAMS modules!\");\n\t\t});\n\t});\n}\n\n\n/**\n * Container clearing function.\n *\n * This function is called before replacing an element contents with new DOM elements;\n * an 'ams.container.before-cleaning' event is triggered, with arguments which are the\n * container and a \"veto\" object containing a single boolean \"veto\" property; if any\n * handler attached to this event set the \"veto\" property to *true*,\n *\n * The function returns a Promise which is resolved with the opposite value of the \"veto\"\n * property.\n *\n * @param element: the parent element which may be cleaned\n * @returns {Promise<boolean>}\n */\nexport function clearContent(element) {\n\tif (typeof element === 'string') {\n\t\telement = $(element);\n\t}\n\treturn new Promise((resolve, reject) => {\n\t\tconst veto = { veto: false };\n\t\t$(document).trigger('clear.ams.content', [veto, element]);\n\t\tif (!veto.veto) {\n\t\t\tMyAMS.require('events').then(() => {\n\t\t\t\t$(MyAMS.events.getHandlers(element, 'clear.ams.content')).each((idx, elt) => {\n\t\t\t\t\t$(elt).trigger('clear.ams.content', [veto]);\n\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (!veto.veto) {\n\t\t\t\t\t$(MyAMS.events.getHandlers(element, 'cleared.ams.content')).each((idx, elt) => {\n\t\t\t\t\t\t$(elt).trigger('cleared.ams.content');\n\t\t\t\t\t});\n\t\t\t\t\t$(document).trigger('cleared.ams.content', [element]);\n\t\t\t\t}\n\t\t\t\tresolve(!veto.veto);\n\t\t\t}, () => {\n\t\t\t\treject(\"Missing MyAMS.events module!\");\n\t\t\t});\n\t\t} else {\n\t\t\tresolve(!veto.veto);\n\t\t}\n\t});\n}\n\n\n/**\n * Get an object given by name\n *\n * @param objectName: dotted name of the object\n * @param context: source context, or window if undefined\n * @returns {Object|undefined}\n */\nexport function getObject(objectName, context) {\n\tif (!objectName) {\n\t\treturn undefined;\n\t}\n\tif (typeof objectName !== 'string') {\n\t\treturn objectName;\n\t}\n\tconst namespaces = objectName.split('.');\n\tcontext = (context === undefined || context === null) ? window : context;\n\tfor (const name of namespaces) {\n\t\ttry {\n\t\t\tcontext = context[name];\n\t\t} catch (exc) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\treturn context;\n}\n\n\n/**\n * Get function object from name\n *\n * @param functionName: dotted name of the function\n * @param context: source context; window if undefined\n * @returns {function|undefined}\n */\nexport function getFunctionByName(functionName, context) {\n\tif ((functionName === null) || (typeof functionName === 'undefined')) {\n\t\treturn undefined;\n\t} else if (typeof functionName === 'function') {\n\t\treturn functionName;\n\t} else if (typeof functionName !== 'string') {\n\t\treturn undefined;\n\t}\n\tconst\n\t\tnamespaces = functionName.split(\".\"),\n\t\tfunc = namespaces.pop();\n\tcontext = (context === undefined || context === null) ? window : context;\n\tfor (const name of namespaces) {\n\t\ttry {\n\t\t\tcontext = context[name];\n\t\t} catch (e) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\ttry {\n\t\treturn context[func];\n\t} catch (e) {\n\t\treturn undefined;\n\t}\n}\n\n\n/**\n * Execute a function, given by it's name\n *\n * @param functionName: dotted name of the function\n * @param context: parent context, or window if undefined\n * @param args...: optional function arguments\n * @returns {*}: result of the called function\n */\nexport function executeFunctionByName(functionName, context /*, args */) {\n\tconst func = getFunctionByName(functionName, window);\n\tif (typeof func === 'function') {\n\t\tconst args = Array.prototype.slice.call(arguments, 2);\n\t\treturn func.apply(context, args);\n\t}\n}\n\n\n/**\n * Get target URL matching given source\n *\n * Given URL can include variable names (with their namespace), given between braces,\n * as in {MyAMS.env.baseURL}\n */\nexport function getSource(url) {\n\treturn url.replace(/{[^{}]*}/g, (match) => {\n\t\treturn getObject(match.substr(1, match.length - 2));\n\t});\n}\n\n\n/**\n * Dynamic script loader function\n *\n * @param url: script URL\n * @param options: a set of options to be added to AJAX call\n */\nexport function getScript(url, options={}) {\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst defaults = {\n\t\t\tdataType: 'script',\n\t\t\turl: getSource(url),\n\t\t\tcache: MyAMS.env.devmode,\n\t\t\tasync: true\n\t\t};\n\t\tconst settings = $.extend({}, defaults, options);\n\t\t$.ajax(settings).then(() => {\n\t\t\tresolve(url);\n\t\t}, (xhr, status, error) => {\n\t\t\treject(error);\n\t\t})\n\t});\n}\n\n\n/**\n * Get CSS matching given URL\n *\n * @param url: CSS source URL\n * @param name: name of the given CSS\n */\nexport function getCSS(url, name) {\n\n\treturn new Promise((resolve /*, reject */) => {\n\t\tconst head = $('HEAD');\n\t\tlet style = $(`style[data-ams-id=\"${name}\"]`, head);\n\t\tif (style.length === 0) {\n\t\t\tstyle = $('<style>').attr('data-ams-id', name)\n\t\t\t\t\t\t\t\t.text(`@import \"${getSource(url)}\";`)\n\t\t\t\t\t\t\t\t.appendTo(head);\n\t\t\tconst styleInterval = setInterval(() => {\n\t\t\t\ttry {\n\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\tconst _check = style[0].sheet.cssRules;  // Is only populated when file is loaded\n\t\t\t\t\tclearInterval(styleInterval);\n\t\t\t\t\tresolve(true);\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// CSS is not loaded yet, just wait...\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t} else {\n\t\t\tresolve(false);\n\t\t}\n\t});\n}\n\n\n/**\n * Extract parameter value from given query string\n *\n * @param src: source URL\n * @param varName: variable name\n * @returns {boolean|*}\n */\nexport function getQueryVar(src, varName) {\n\t// Check src\n\tif ((typeof src !== 'string') || (src.indexOf('?') < 0)) {\n\t\treturn undefined;\n\t}\n\tif (!src.endsWith('&')) {\n\t\tsrc += '&';\n\t}\n\t// Dynamic replacement RegExp\n\tconst regex = new RegExp(`.*?[&\\\\?]${varName}=(.*?)&.*`);\n\t// Apply RegExp to the query string\n\tconst val = src.replace(regex, \"$1\");\n\t// If the string is the same, we didn't find a match - return null\n\treturn val === src ? null : val;\n}\n\n\n/**\n * Generate a random ID\n */\nexport function generateId() {\n\n\tfunction s4() {\n\t\treturn Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n\t}\n\n\treturn s4() + s4() + s4() + s4();\n}\n\n\n/**\n * Generate a random unique UUID\n */\nexport function generateUUID() {\n\tlet d = new Date().getTime();\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\tconst r = (d + Math.random() * 16) % 16 | 0;\n\t\td = Math.floor(d / 16);\n\t\treturn (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n\t});\n}\n\n\n/**\n * Switch a FontAwesome icon.\n * Use FontAwesome API to get image as SVG, if FontAwesome is loaded from Javascript and is using\n * SVG auto-replace, otherwise just switch CSS class.\n *\n * @param element: source element\n * @param fromClass: initial CSS class (without \"fa-\" prefix)\n * @param toClass: new CSS class (without \"fa-\" prefix)\n * @param prefix: icon prefix (defaults to \"fa\")\n */\nexport function switchIcon(element, fromClass, toClass, prefix='fa') {\n\tif (typeof element === 'string') {\n\t\telement = $(element);\n\t}\n\tif (MyAMS.config.useSVGIcons) {\n\t\tconst iconDef = FontAwesome.findIconDefinition({\n\t\t\ticonName: toClass,\n\t\t\tprefix: prefix\n\t\t});\n\t\tif (iconDef) {\n\t\t\telement.html(FontAwesome.icon(iconDef).html);\n\t\t}\n\t} else {\n\t\telement.removeClass(`fa-${fromClass}`)\n\t\t\t.addClass(`fa-${toClass}`);\n\t}\n}\n\n\n/**\n * MyAMS base environment\n *\n * @type {{\n *     bundle: boolean,\n *     devmode: boolean,\n *     devext: string,\n *     extext: string,\n *     theme: string,\n *     baseURL: string\n * }}\n */\nfunction getEnv($) {\n\tconst\n\t\tscript = $(\n\t\t\t'script[src*=\"/myams.js\"], script[src*=\"/myams-dev.js\"], ' +\n\t\t\t'script[src*=\"/emerald.js\"], script[src*=\"/emerald-dev.js\"], ' +\n\t\t\t'script[src*=\"/darkmode.js\"], script[src*=\"/darkmode-dev.js\"], ' +\n\t\t\t'script[src*=\"/myams-core.js\"], script[src*=\"/myams-core-dev.js\"], ' +\n\t\t\t'script[src*=\"/myams-mini.js\"], script[src*=\"/myams-mini-dev.js\"]'),\n\t\tsrc = script.attr('src'),\n\t\tdevmode = src ? src.indexOf('-dev.js') >= 0 : true,  // testing mode\n\t\tbundle = src ? (src.indexOf('-core') < 0 && src.indexOf('-mini') < 0) : true;\n\treturn {\n\t\tbundle: bundle,\n\t\tdevmode: devmode,\n\t\tdevext: devmode ? '-dev' : '',\n\t\textext: devmode ? '' : '.min',\n\t\tbaseURL: src ? src.substring(0, src.lastIndexOf('/') + 1) : '/'\n\t};\n}\n\n\n/**\n * MyAMS theme getter\n */\nfunction getTheme() {\n\tlet theme;\n\tif (MyAMS.env.bundle) {\n\t\ttheme = MyAMS.theme;\n\t} else {\n\t\tconst css = $(\n\t\t\t'link[href*=\"/myams.css\"], link[href*=\"/emerald.css\"], link[href*=\"/darkmode.css\"]'\n\t\t);\n\t\ttheme = css.length > 0 ? /.*\\/([a-z]+).css/.exec(css.attr('href'))[1] : 'unknown';\n\t}\n\treturn theme;\n}\n\n\n/**\n * Get base DOM elements\n */\nfunction getDOM() {\n\treturn {\n\t\tpage: $('html'),\n\t\troot: $('body'),\n\t\tnav: $('nav'),\n\t\tmain: $('#main'),\n\t\tleftPanel: $('#left-panel'),\n\t\tshortcuts: $('#shortcuts')\n\t}\n}\n\n\n/**\n * MyAMS default configuration\n *\n * @type {Object}:\n *      modules: array of loaded extension modules\n *      ajaxNav: true if AJAX navigation is enabled\n *      enableFastclick: true is \"smart-click\" extension is to be activated on mobile devices\n *      menuSpeed: menu speed, in miliseconds\n *      initPage: dotted name of MyAMS global init function\n *      initContent: dotted name of MyAMS content init function\n *      alertContainerCLass: class of MyAMS alerts container\n *      safeMethods: HTTP methods which can be used without CSRF cookie verification\n *      csrfCookieName: CSRF cookie name\n *      csrfHeaderName: CSRF header name\n *      enableTooltips: global tooltips enable flag\n *      enableHtmlTooltips: allow HTML code in tooltips\n *      warnOnFormChange: flag to specify if form changes should be warned\n *      formChangeCallback: global form change callback\n *      isMobile: boolean, true if device is detected as mobile\n *      device: string: 'mobile' or 'desktop'\n */\nconst\n\tisMobile = /iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(\n\t\t\t\t\tnavigator.userAgent.toLowerCase()),\n\tconfig = {\n\t\tmodules: [],\n\t\tajaxNav: true,\n\t\tenableFastclick: true,\n\t\tuseSVGIcons:\n\t\t\t(window.FontAwesome !== undefined) && (FontAwesome.config.autoReplaceSvg === 'nest'),\n\t\tmenuSpeed: 235,\n\t\tinitPage: 'MyAMS.core.initPage',\n\t\tinitData: 'MyAMS.core.initData',\n\t\tinitContent: 'MyAMS.core.initContent',\n\t\tclearContent: 'MyAMS.core.clearContent',\n\t\tuseRegistry: true,\n\t\talertsContainerClass: 'toast-wrapper',\n\t\tsafeMethods: ['GET', 'HEAD', 'OPTIONS', 'TRACE'],\n\t\tcsrfCookieName: 'csrf_token',\n\t\tcsrfHeaderName: 'X-CSRF-Token',\n\t\tenableTooltips: true,\n\t\tenableHtmlTooltips: true,\n\t\twarnOnFormChange: true,\n\t\tformChangeCallback: null,\n\t\tisMobile: isMobile,\n\t\tdevice: isMobile ? 'mobile' : 'desktop'\n\t},\n\tcore = {\n\t\tgetObject: getObject,\n\t\tgetFunctionByName: getFunctionByName,\n\t\texecuteFunctionByName: executeFunctionByName,\n\t\tgetSource: getSource,\n\t\tgetScript: getScript,\n\t\tgetCSS: getCSS,\n\t\tgetQueryVar: getQueryVar,\n\t\tgenerateId: generateId,\n\t\tgenerateUUID: generateUUID,\n\t\tswitchIcon: switchIcon,\n\t\tinitPage: initPage,\n\t\tinitData: initData,\n\t\tinitContent: initContent,\n\t\tclearContent: clearContent\n\t};\n\n\nconst MyAMS = {\n\t$: $,\n\tenv: getEnv($),\n\tconfig: config,\n\tcore: core,\n\tregistry: registry\n};\nwindow.MyAMS = MyAMS;\n\nexport default MyAMS;\n","/* global $, MyAMS */\n/**\n * MyAMS dynamic plug-ins loading management\n */\n\n\n/**\n * Plug-ins loading order\n *  - initialize registry\n *  - initialize DOM data attributes\n *  - register all plug-ins from given DOM element\n *  - load all plug-ins from given DOM element\n *  - get list of disabled plug-ins into given DOM element\n *  - call callbacks for all enabled plug-ins\n *  - call callbacks for enabled \"async\" plug-ins\n */\n\n/**\n * Base plug-in class\n */\nclass Plugin {\n\n\tconstructor(name, props={}, loaded=false) {\n\t\t// plug-in name\n\t\tthis.name = name;\n\t\t// plug-in source URL\n\t\tthis.src = props.src;\n\t\t// plug-in associated CSS\n\t\tthis.css = props.css;\n\t\t// plug-in callbacks\n\t\tthis.callbacks = [];\n\t\tif (props.callback) {\n\t\t\tthis.callbacks.push({\n\t\t\t\tcallback: props.callback,\n\t\t\t\tcontext: props.context || 'body'\n\t\t\t});\n\t\t}\n\t\t// async plug-ins are loaded simultaneously; sync ones are loaded and called after...\n\t\tthis.async = props.async === undefined ? true : props.async;\n\t\t// loaded flag\n\t\tthis.loaded = loaded;\n\t}\n\n\t/**\n\t * Load plug-in from remote script\n\t *\n\t * @returns {Promise<void>|*}\n\t */\n\tload() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (!this.loaded) {\n\t\t\t\tconst deferred = [];\n\t\t\t\tif (this.src) {\n\t\t\t\t\tdeferred.push(MyAMS.core.getScript(this.src));\n\t\t\t\t}\n\t\t\t\tif (this.css) {\n\t\t\t\t\tdeferred.push(MyAMS.core.getCSS(this.css, `${this.name}_css`));\n\t\t\t\t}\n\t\t\t\t$.when.apply($, deferred).then(() => {\n\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\tresolve();\n\t\t\t\t}, reject);\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Run plug-in\n\t *\n\t * @param element: plug-in execution context\n\t */\n\trun(element) {\n\t\tconst results = [];\n\t\tfor (const callback of this.callbacks) {\n\t\t\tif (typeof callback.callback === 'string') {\n\t\t\t\tconsole.debug(`Resolving callback ${callback.callback}`);\n\t\t\t\tcallback.callback = MyAMS.core.getFunctionByName(callback.callback) || callback.callback;\n\t\t\t}\n\t\t\tresults.push(callback.callback(element, callback.context));\n\t\t}\n\t\treturn Promise.all(results);\n\t}\n}\n\n\n/**\n * Plug-ins registry class\n */\nclass PluginsRegistry {\n\n\tconstructor() {\n\t\tthis.plugins = new Map();\n\t}\n\n\t/**\n\t * Register new plug-in\n\t *\n\t * @param props: plugin function caller, or object containing plug-in properties\n\t * @param name: plug-in unique name\n\t */\n\tregister(props, name) {\n\t\t// check arguments\n\t\tif (!name && Object.prototype.hasOwnProperty.call(props,'name')) {\n\t\t\tname = props.name;\n\t\t}\n\t\t// check for already registered plug-in\n\t\tconst plugins = this.plugins;\n\t\tif (plugins.has(name)) {\n\t\t\tif (window.console) {\n\t\t\t\tconsole.debug && console.debug(`Plug-in ${name} is already registered!`);\n\t\t\t}\n\t\t\tconst plugin = plugins.get(name);\n\t\t\tlet addContext = true;\n\t\t\tfor (const callback of plugin.callbacks) {\n\t\t\t\tif ((callback.callback === props.callback) && (callback.context === props.context)) {\n\t\t\t\t\taddContext = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (addContext) {\n\t\t\t\tplugin.callbacks.push({\n\t\t\t\t\tcallback: props.callback,\n\t\t\t\t\tcontext: props.context || 'body'\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn plugin;\n\t\t}\n\t\t// register new plug-in\n\t\tif (typeof props === 'string') {  // callable name\n\t\t\tprops = MyAMS.core.getFunctionByName(props);\n\t\t}\n\t\tif (typeof props === 'function') {  // callable object\n\t\t\tplugins.set(name, new Plugin(name, {\n\t\t\t\tcallback: props\n\t\t\t}, true));\n\t\t} else if (typeof props === 'object') {  // plug-in properties object\n\t\t\tplugins.set(name, new Plugin(name, props, !(props.src || props.css)));\n\t\t}\n\t\t// check callback\n\t\treturn plugins.get(name);\n\t}\n\n\t/**\n\t * Load plug-ins declared into DOM element\n\t *\n\t * @param element\n\t */\n\tload(element) {\n\t\t// scan element for new plug-ins\n\t\tconst\n\t\t\tasyncPlugins = [],\n\t\t\tsyncPlugins = [];\n\t\t$('[data-ams-plugins]', element).each((idx, elt) => {\n\t\t\tconst\n\t\t\t\tsource = $(elt),\n\t\t\t\tnames = source.data('ams-plugins');\n\t\t\tlet plugin,\n\t\t\t\tprops;\n\t\t\tif (typeof names === 'string') {\n\t\t\t\tfor (const name of names.split(/[\\s,;]+/)) {\n\t\t\t\t\tconst lowerName = name.toLowerCase();\n\t\t\t\t\tprops = {\n\t\t\t\t\t\tsrc: source.data(`ams-plugin-${lowerName}-src`),\n\t\t\t\t\t\tcss: source.data(`ams-plugin-${lowerName}-css`),\n\t\t\t\t\t\tcallback: source.data(`ams-plugin-${lowerName}-callback`),\n\t\t\t\t\t\tcontext: source,\n\t\t\t\t\t\tasync: source.data(`ams-plugin-${lowerName}-async`)\n\t\t\t\t\t};\n\t\t\t\t\tplugin = this.register(props, name);\n\t\t\t\t\tif (!plugin.loaded) {\n\t\t\t\t\t\tif (props.async === false) {\n\t\t\t\t\t\t\tsyncPlugins.push(plugin.load());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tasyncPlugins.push(plugin.load());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {  // JSON plug-in declaration\n\t\t\t\tfor (props of $.isArray(names) ? names : [names]) {\n\t\t\t\t\t$.extend(props, {\n\t\t\t\t\t\tcontext: source\n\t\t\t\t\t});\n\t\t\t\t\tplugin = this.register(props);\n\t\t\t\t\tif (!plugin.loaded) {\n\t\t\t\t\t\tif (plugin.async === false) {\n\t\t\t\t\t\t\tsyncPlugins.push(plugin.load());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tasyncPlugins.push(plugin.load());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// load plug-ins\n\t\tlet result = $.when.apply($, asyncPlugins);\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tfor (const plugin of syncPlugins) {\n\t\t\tresult = result.done(() => {});\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * Run registered plug-ins on given element\n\t *\n\t * @param element: source element\n\t * @param names: array list of plug-ins to activate, or all registered plug-ins if null\n\t */\n\trun(element, names=null) {\n\n\t\t// check for disabled plug-ins\n\t\tconst disabled = new Set();\n\t\t$('[data-ams-plugins-disabled]', element).each((idx, elt) => {\n\t\t\tconst names = $(elt).data('ams-plugins-disabled').split(/[\\s,;]+/);\n\t\t\tfor (const name of names) {\n\t\t\t\tdisabled.add(name);\n\t\t\t}\n\t\t});\n\n\t\tconst plugins = this.plugins;\n\t\tif (names) {  // only run given plug-ins, EVEN DISABLED ONES\n\t\t\tfor (const name of names) {\n\t\t\t\tif (plugins.has(name)) {\n\t\t\t\t\tplugins.get(name).run(element);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {  // run all plug-ins, except disabled ones\n\t\t\tfor (const [name, plugin] of plugins.entries()) {\n\t\t\t\tif (disabled.has(name)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tplugin.run(element);\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst plugins = new PluginsRegistry();\n\n\nexport const registry = {\n\n\t/**\n\t * Plug-ins registry\n\t */\n\tplugins: plugins,\n\n\t/**\n\t * Initialize plug-ins registry from DOM\n\t *\n\t * @param element: source element to initialize from\n\t */\n\tinitElement: function(element='#content') {\n\t\t// populate data attributes\n\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initData, window, element);\n\t\t// load plug-ins from given DOM element\n\t\treturn plugins.load(element);\n\t},\n\n\t/**\n\t * Register a new plug-in through Javascript instead of HTML data attributes\n\t *\n\t * @param plugin: callable object, or object containing plug-in properties\n\t * @param name: plug-in name, used if @plugin is a function\n\t * @param callback: callback function which can be called after plug-in registration\n\t */\n\tregister: function(plugin, name, callback) {\n\t\treturn plugins.register(plugin, name, callback);\n\t},\n\n\t/**\n\t * Run registered plug-ins on given element\n\t *\n\t * @param element: DOM element\n\t * @param names: names of plug-in to run on given element; all if null\n\t */\n\trun: function(element, names=null) {\n\t\treturn plugins.run(element, names);\n\t}\n};\n","/* global MyAMS */\n/**\n * MyAMS dynamic module loader\n */\n\nconst $ = MyAMS.$;\n\n\nfunction getModule(module, name) {\n\tlet moduleSrc,\n\t\tmoduleCss;\n\tif (typeof module === 'object') {\n\t\tmoduleSrc = module.src;\n\t\tmoduleCss = module.css;\n\t} else {\n\t\tif (module.startsWith('http://') || module.startsWith('https://')) {\n\t\t\tmoduleSrc = module;\n\t\t} else if (module.endsWith('.js')) {  // custom module with relative path\n\t\t\tmoduleSrc = module;\n\t\t} else {  // standard MyAMS module\n\t\t\tmoduleSrc = `${MyAMS.env.baseURL}mod-${module}${MyAMS.env.devext}.js`;\n\t\t}\n\t}\n\tconst deferred = [\n\t\tMyAMS.core.getScript(moduleSrc, {async: true}, console.error)\n\t];\n\tif (moduleCss) {\n\t\tdeferred.push(MyAMS.core.getCSS(moduleCss, `${name}_css`));\n\t}\n\treturn deferred;\n}\n\n\n/**\n * Dynamic loading of MyAMS modules\n *\n * @param modules: single module name, or array of modules names\n * @returns Promise\n */\nexport default function myams_require(...modules) {\n\n\treturn new Promise((resolve, reject) => {\n\n\t\tconst\n\t\t\tnames = [],\n\t\t\tdeferred = [],\n\t\t\tloaded = MyAMS.config.modules;\n\n\t\tfor (const module of modules) {\n\t\t\tif (typeof module === 'string') {\n\t\t\t\tif (loaded.indexOf(module) < 0) {\n\t\t\t\t\tnames.push(module);\n\t\t\t\t\tdeferred.extendWith(getModule(module));\n\t\t\t\t}\n\t\t\t} else if ($.isArray(module)) {  // strings array\n\t\t\t\tfor (const name of module) {\n\t\t\t\t\tif (loaded.indexOf(name) < 0) {\n\t\t\t\t\t\tnames.push(name);\n\t\t\t\t\t\tdeferred.extendWith(getModule(name));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {  // object\n\t\t\t\tfor (const [name, props] of Object.entries(module)) {\n\t\t\t\t\tif (loaded.indexOf(name) < 0) {\n\t\t\t\t\t\tnames.push(name);\n\t\t\t\t\t\tdeferred.extendWith(getModule(props, name));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t$.when.apply($, deferred)\n\t\t\t.then(() => {\n\t\t\t\tfor (const moduleName of names) {\n\t\t\t\t\tif (loaded.indexOf(moduleName) < 0) {\n\t\t\t\t\t\tloaded.push(moduleName);\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(`MyAMS.${moduleName}.init`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t}, () => {\n\t\t\t\treject(`Can't load requested modules (${names})!`);\n\t\t\t});\n\t});\n}\n","module.exports = jquery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * MyAMS core features\n *\n * This script is used to build MyAMS mini-core-package.\n *\n * This package only includes MyAMS core features, but not CSS or external modules\n * which can be loaded using MyAMS.require function.\n */\n\nimport MyAMS, { init } from \"./ext-base\";\nimport myams_require from \"./ext-require\";\n\n\nMyAMS.$.extend(MyAMS, {\n\trequire: myams_require\n});\n\nconst html = MyAMS.$('html');\nif (html.data('ams-init') !== false) {\n\tinit(MyAMS.$);\n}\n\n\n/** Version: 1.13.1  */\n"],"names":["window","jQuery","$","require","registry","init","extend","String","prototype","camelCase","replace","dash","rest","toUpperCase","deCase","cap","toLowerCase","initLowerCase","charAt","slice","unserialize","str","decodeURIComponent","chunks","split","obj","chunk","key","val","Array","extendWith","source","element","push","extendPrefix","prefix","getter","extensions","extension","value","Object","entries","startsWith","substring","length","extendOnly","hasOwnProperty","call","fn","exists","objectOrParentWithClass","klass","hasClass","parents","listattr","attr","result","each","index","style","styleName","priority","idx","node","setProperty","getPropertyValue","removeClassPrefix","i","it","classes","className","map","item","trim","join","expr","hasvalue","meta","econtains","textContent","innerText","text","withtext","document","ready","html","removeClass","addClass","MyAMS","core","executeFunctionByName","data","config","initPage","getModules","modules","mods","concat","name","props","entry","elt","Set","then","dom","getDOM","theme","getTheme","initData","root","moduleName","page","initContent","$elt","elementData","JSON","stringify","removeAttr","initElementModules","Promise","resolve","reject","trigger","useRegistry","initElement","run","clearContent","veto","events","getHandlers","getObject","objectName","context","undefined","namespaces","exc","getFunctionByName","functionName","func","pop","e","args","arguments","apply","getSource","url","match","substr","getScript","options","defaults","dataType","cache","env","devmode","async","settings","ajax","xhr","status","error","getCSS","head","appendTo","styleInterval","setInterval","_check","sheet","cssRules","clearInterval","getQueryVar","src","varName","indexOf","endsWith","regex","RegExp","generateId","s4","Math","floor","random","toString","generateUUID","d","Date","getTime","c","r","switchIcon","fromClass","toClass","useSVGIcons","iconDef","FontAwesome","findIconDefinition","iconName","icon","getEnv","script","bundle","devext","extext","baseURL","lastIndexOf","css","exec","nav","main","leftPanel","shortcuts","isMobile","test","navigator","userAgent","ajaxNav","enableFastclick","autoReplaceSvg","menuSpeed","alertsContainerClass","safeMethods","csrfCookieName","csrfHeaderName","enableTooltips","enableHtmlTooltips","warnOnFormChange","formChangeCallback","device","Plugin","constructor","loaded","callbacks","callback","load","deferred","when","results","console","debug","all","PluginsRegistry","plugins","Map","register","has","plugin","get","addContext","set","asyncPlugins","syncPlugins","names","lowerName","isArray","done","disabled","add","getModule","module","moduleSrc","moduleCss","myams_require"],"sourceRoot":""}