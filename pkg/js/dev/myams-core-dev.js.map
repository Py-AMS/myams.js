{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/ext-base.js","webpack:///./src/js/ext-registry.js","webpack:///./src/js/ext-require.js","webpack:///./src/js/myams-core.js","webpack:///external \"jquery\""],"names":["window","jQuery","$","require","init","extend","String","prototype","camelCase","replace","dash","rest","toUpperCase","deCase","cap","toLowerCase","initLowerCase","charAt","slice","unserialize","str","decodeURIComponent","chunks","split","obj","chunk","key","val","extendPrefix","source","prefix","getter","extensions","extension","Object","entries","value","startsWith","substring","length","extendOnly","hasOwnProperty","call","fn","exists","objectOrParentWithClass","klass","hasClass","parents","listattr","attr","result","each","index","element","push","style","styleName","priority","idx","node","setProperty","getPropertyValue","removeClassPrefix","i","it","classes","className","map","item","trim","join","expr","hasvalue","meta","econtains","textContent","innerText","text","withtext","document","ready","html","removeClass","addClass","MyAMS","core","executeFunctionByName","data","config","initPage","getModules","modules","mods","concat","name","path","entry","elt","Set","then","dom","getDOM","root","moduleName","page","initContent","initElementModules","Promise","resolve","reject","trigger","useRegistry","registry","initElement","run","clearContent","veto","events","getHandlers","getObject","objectName","context","undefined","namespaces","exc","getFunctionByName","functionName","func","pop","e","args","Array","arguments","apply","getSource","url","match","substr","getScript","options","defaults","dataType","cache","env","devmode","async","settings","ajax","xhr","status","error","getCSS","head","appendTo","styleInterval","setInterval","_check","sheet","cssRules","clearInterval","getQueryVar","src","varName","indexOf","endsWith","regex","RegExp","generateId","s4","Math","floor","random","toString","generateUUID","d","Date","getTime","c","r","switchIcon","fromClass","toClass","useSVGIcons","iconDef","FontAwesome","findIconDefinition","iconName","icon","getEnv","script","bundle","devext","extext","baseURL","lastIndexOf","nav","main","leftPanel","shortcuts","isMobile","test","navigator","userAgent","ajaxNav","enableFastclick","autoReplaceSvg","menuSpeed","alertsContainerClass","safeMethods","csrfCookieName","csrfHeaderName","enableTooltips","enableHtmlTooltips","warnOnFormChange","formChangeCallback","device","Plugin","props","loaded","css","callbacks","callback","deferred","when","results","console","debug","all","PluginsRegistry","plugins","Map","has","plugin","get","addContext","set","asyncPlugins","syncPlugins","names","lowerName","register","load","isArray","done","disabled","add","initData","$elt","elementData","JSON","stringify","removeAttr","getModule","module","moduleSrc","myams_require"],"mappings":"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","file":"myams-core-dev.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/myams-core.js\");\n","/* global $, FontAwesome */\n/**\n * MyAMS base features\n */\n\nif (!window.jQuery) {\n\twindow.$ = window.jQuery = require('jquery');\n}\n\n\nimport { registry } from \"./ext-registry\";\n\n\n/**\n * Init JQuery extensions\n */\nexport function init($) {\n\n\t/**\n\t * String prototype extensions\n\t */\n\t$.extend(String.prototype, {\n\n\t\t/**\n\t\t * Replace dashed names with camelCase variation\n\t\t */\n\t\tcamelCase: function() {\n\t\t\tif (!this) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\treturn this.replace(/-(.)/g, (dash, rest) => {\n\t\t\t\treturn rest.toUpperCase();\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Replace camelCase string with dashed name\n\t\t */\n\t\tdeCase: function() {\n\t\t\tif (!this) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\treturn this.replace(/[A-Z]/g, (cap) => {\n\t\t\t\treturn `-${cap.toLowerCase()}`;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Convert first letter only to lowercase\n\t\t */\n\t\tinitLowerCase: function() {\n\t\t\tif (!this) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\treturn this.charAt(0).toLowerCase() + this.slice(1);\n\t\t},\n\n\t\t/**\n\t\t * Convert URL params to object\n\t\t */\n\t\tunserialize: function () {\n\t\t\tif (!this) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tconst\n\t\t\t\tstr = decodeURIComponent(this),\n\t\t\t\tchunks = str.split('&'),\n\t\t\t\tobj = {};\n\t\t\tfor (const chunk of chunks) {\n\t\t\t\tconst [key, val] = chunk.split('=', 2);\n\t\t\t\tobj[key] = val;\n\t\t\t}\n\t\t\treturn obj;\n\t\t}\n\t});\n\n\n\t/**\n\t * Global JQuery object extensions\n\t */\n\t$.extend($, {\n\n\t\t/**\n\t\t * Extend source object with given extensions, but only for properties matching\n\t\t * given prefix.\n\t\t *\n\t\t * @param source: source object, which will be updated in-place\n\t\t * @param prefix: property names prefix selector\n\t\t * @param getter: optional getter used to extract final value\n\t\t * @param extensions: list of extensions object\n\t\t * @returns {*}: modified source object\n\t\t */\n\t\textendPrefix: function(source, prefix, getter, ...extensions) {\n\t\t\tfor (const extension of extensions) {\n\t\t\t\tfor (const [key, value] of Object.entries(extension)) {\n\t\t\t\t\tif (key.startsWith(prefix)) {\n\t\t\t\t\t\tsource[key.substring(prefix.length).initLowerCase()] =\n\t\t\t\t\t\t\tgetter === null ? value : getter(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn source;\n\t\t},\n\n\t\t/**\n\t\t * Extend source with given extensions, but only for existing attributes\n\t\t *\n\t\t * @param source: source object, which will be updated in-place\n\t\t * @param getter: optional getter used to extract final value\n\t\t * @param extensions: list of extensions object\n\t\t * @returns {*}: modified source object\n\t\t */\n\t\textendOnly: function(source, getter, ...extensions) {\n\t\t\tfor (const extension of extensions) {\n\t\t\t\tfor (const [key, value] of Object.entries(extension)) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\t\t\t\tsource[key] = getter === null ? value : getter(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn source;\n\t\t}\n\t});\n\n\n\t/**\n\t * New JQuery functions\n\t */\n\t$.fn.extend({\n\n\t\t/**\n\t\t * Check if current object is empty or not\n\t\t */\n\t\texists: function() {\n\t\t\treturn $(this).length > 0;\n\t\t},\n\n\t\t/**\n\t\t * Get object if it supports given CSS class,\n\t\t * otherwise look for parents\n\t\t */\n\t\tobjectOrParentWithClass: function(klass) {\n\t\t\tif (this.hasClass(klass)) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\treturn this.parents(`.${klass}`);\n\t\t},\n\n\t\t/**\n\t\t * Build an array of attributes of the given selection\n\t\t */\n\t\tlistattr: function(attr) {\n\t\t\tconst result = [];\n\t\t\tthis.each((index, element) => {\n\t\t\t\tresult.push($(element).attr(attr));\n\t\t\t});\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * CSS style function - get or set object style attribute\n\t\t * Code from Aram Kocharyan on stackoverflow.com\n\t\t */\n\t\tstyle: function(styleName, value, priority) {\n\t\t\tlet result = this;\n\t\t\tthis.each((idx, node) => {\n\t\t\t\t// Ensure we have a DOM node\n\t\t\t\tif (typeof node === 'undefined') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// CSSStyleDeclaration\n\t\t\t\tconst style = node.style;\n\t\t\t\t// Getter/Setter\n\t\t\t\tif (typeof styleName !== 'undefined') {\n\t\t\t\t\tif (typeof value !== 'undefined') {\n\t\t\t\t\t\t// Set style property\n\t\t\t\t\t\tpriority = typeof (priority) !== 'undefined' ? priority : '';\n\t\t\t\t\t\tstyle.setProperty(styleName, value, priority);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Get style property\n\t\t\t\t\t\tresult = style.getPropertyValue(styleName);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Get CSSStyleDeclaration\n\t\t\t\t\tresult = style;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * Remove CSS classes starting with a given prefix\n\t\t */\n\t\tremoveClassPrefix: function(prefix) {\n\t\t\tthis.each(function(i, it) {\n\t\t\t\tconst classes = it.className.split(/\\s+/).map((item) => {\n\t\t\t\t\treturn item.startsWith(prefix) ? \"\" : item;\n\t\t\t\t});\n\t\t\t\tit.className = $.trim(classes.join(\" \"));\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t});\n\n\n\t/**\n\t * JQuery 'hasvalue' function expression\n\t * Filter inputs containing value:\n\t *\n\t *     $('span:hasvalue(\"value\")')\n\t */\n\t$.expr[\":\"].hasvalue = function (obj, index, meta /*, stack*/) {\n\t\treturn $(obj).val() !== \"\";\n\t};\n\n\n\t/**\n\t * JQuery 'econtains' function expression\n\t * Case insensitive contains expression:\n\t *\n\t *     $('span:econtains(\"text\")')\n\t */\n\t$.expr[\":\"].econtains = function (obj, index, meta /*, stack*/) {\n\t\treturn (obj.textContent || obj.innerText || $(obj).text() || \"\").toLowerCase() === meta[3].toLowerCase();\n\t};\n\n\n\t/**\n\t * JQuery 'withtext' expression\n\t * Case sensitive exact search expression.\n\t * For example:\n\t *\n\t *    $('span:withtext(\"text\")')\n\t */\n\t$.expr[\":\"].withtext = function (obj, index, meta /*, stack*/) {\n\t\treturn (obj.textContent || obj.innerText || $(obj).text() || \"\") === meta[3];\n\t};\n\n\n\t/**\n\t * JQuery filter on parents class\n\t * This filter is often combined with \":not()\" to select DOM objects which don't have\n\t * parents of a given class.\n\t * For example:\n\t *\n\t *   $('.hint:not(:parents(.nohints))', element);\n\t *\n\t * will select all elements with \".hint\" class which don't have a parent with '.nohints' class.\n\t */\n\t$.expr[':'].parents = function (obj, index, meta /*, stack*/) {\n\t\treturn $(obj).parents(meta[3]).length > 0;\n\t};\n\n\n\t$(document).ready(() => {\n\t\tconst html = $('html');\n\t\thtml.removeClass('no-js')\n\t\t\t.addClass('js');\n\t\tMyAMS.core.executeFunctionByName(html.data('ams-init-page') ||\n\t\t\tMyAMS.config.initPage);\n\t});\n}\n\n\n/**\n * Get list of modules names required by given element\n *\n * @param element: parent element\n * @returns {*[]}\n */\nexport function getModules(element) {\n\tlet modules = [];\n\tconst mods = element.data('ams-modules');\n\tif (typeof mods === 'string') {\n\t\tmodules = modules.concat(mods.trim().split(/[\\s,;]+/));\n\t} else if (mods) {\n\t\tfor (const [name, path] of Object.entries(mods)) {\n\t\t\tconst entry = {};\n\t\t\tentry[name] = path;\n\t\t\tmodules.push(entry);\n\t\t}\n\t}\n\t$('[data-ams-modules]', element).each((idx, elt) => {\n\t\tconst mods = $(elt).data('ams-modules');\n\t\tif (typeof mods === 'string') {\n\t\t\tmodules = modules.concat(mods.trim().split(/[\\s,;]+/));\n\t\t} else if (mods) {\n\t\t\tfor (const [name, path] of Object.entries(mods)) {\n\t\t\t\tconst entry = {};\n\t\t\t\tentry[name] = path;\n\t\t\t\tmodules.push(entry);\n\t\t\t}\n\t\t}\n\t});\n\treturn [...new Set(modules)];\n}\n\n\n/**\n * Main page initialization\n */\nexport function initPage() {\n\treturn MyAMS.require('i18n').then(() => {\n\t\tMyAMS.dom = getDOM();\n\t\tconst modules = getModules(MyAMS.dom.root);\n\t\tMyAMS.require(...modules).then(() => {\n\t\t\tfor (const moduleName of MyAMS.config.modules) {\n\t\t\t\texecuteFunctionByName(`MyAMS.${moduleName}.init`);\n\t\t\t}\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.dom.page.data('ams-init-content') ||\n\t\t\t\tMyAMS.config.initContent);\n\t\t});\n\t});\n}\n\n\n/**\n * Main content initialization; this function will initialize all plug-ins, callbacks and\n * events listeners in the selected element\n *\n * @param element: source element to initialize\n */\nexport function initContent(element=null) {\n\n\tif (element === null) {\n\t\telement = $('body');\n\t}\n\telement = $(element);\n\n\tfunction initElementModules() {\n\t\tfor (const moduleName of MyAMS.config.modules) {\n\t\t\texecuteFunctionByName(`MyAMS.${moduleName}.initElement`, document, element);\n\t\t}\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst modules = getModules(element);\n\t\treturn MyAMS.require(...modules).then(() => {\n\t\t\telement.trigger('before-init.ams.content');\n\t\t\tif (MyAMS.config.useRegistry && !element.data('ams-disable-registry')) {\n\t\t\t\tMyAMS.registry.initElement(element).then(() => {\n\t\t\t\t\tinitElementModules();\n\t\t\t\t}).then(() => {\n\t\t\t\t\tMyAMS.registry.run(element);\n\t\t\t\t\telement.trigger('after-init.ams.content');\n\t\t\t\t}).then(resolve);\n\t\t\t} else {\n\t\t\t\tinitElementModules();\n\t\t\t\tresolve();\n\t\t\t}\n\t\t}, () => {\n\t\t\treject(\"Missing MyAMS modules!\");\n\t\t});\n\t});\n}\n\n\n/**\n * Container clearing function.\n *\n * This function is called before replacing an element contents with new DOM elements;\n * an 'ams.container.before-cleaning' event is triggered, with arguments which are the\n * container and a \"veto\" object containing a single boolean \"veto\" property; if any\n * handler attached to this event set the \"veto\" property to *true*,\n *\n * The function returns a Promise which is resolved with the opposite value of the \"veto\"\n * property.\n *\n * @param element: the parent element which may be cleaned\n * @returns {Promise<boolean>}\n */\nexport function clearContent(element) {\n\tif (typeof element === 'string') {\n\t\telement = $(element);\n\t}\n\treturn new Promise((resolve, reject) => {\n\t\tconst veto = { veto: false };\n\t\t$(document).trigger('clear.ams.content', [veto, element]);\n\t\tif (!veto.veto) {\n\t\t\tMyAMS.require('events').then(() => {\n\t\t\t\t$(MyAMS.events.getHandlers(element, 'clear.ams.content')).each((idx, elt) => {\n\t\t\t\t\t$(elt).trigger('clear.ams.content', [veto]);\n\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (!veto.veto) {\n\t\t\t\t\t$(MyAMS.events.getHandlers(element, 'cleared.ams.content')).each((idx, elt) => {\n\t\t\t\t\t\t$(elt).trigger('cleared.ams.content');\n\t\t\t\t\t});\n\t\t\t\t\t$(document).trigger('cleared.ams.content', [element]);\n\t\t\t\t}\n\t\t\t\tresolve(!veto.veto);\n\t\t\t}, () => {\n\t\t\t\treject(\"Missing MyAMS.events module!\");\n\t\t\t});\n\t\t} else {\n\t\t\tresolve(!veto.veto);\n\t\t}\n\t});\n}\n\n\n/**\n * Get an object given by name\n *\n * @param objectName: dotted name of the object\n * @param context: source context, or window if undefined\n * @returns {Object|undefined}\n */\nexport function getObject(objectName, context) {\n\tif (!objectName) {\n\t\treturn undefined;\n\t}\n\tif (typeof objectName !== 'string') {\n\t\treturn objectName;\n\t}\n\tconst namespaces = objectName.split('.');\n\tcontext = (context === undefined || context === null) ? window : context;\n\tfor (const name of namespaces) {\n\t\ttry {\n\t\t\tcontext = context[name];\n\t\t} catch (exc) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\treturn context;\n}\n\n\n/**\n * Get function object from name\n *\n * @param functionName: dotted name of the function\n * @param context: source context; window if undefined\n * @returns {function|undefined}\n */\nexport function getFunctionByName(functionName, context) {\n\tif ((functionName === null) || (typeof functionName === 'undefined')) {\n\t\treturn undefined;\n\t} else if (typeof functionName === 'function') {\n\t\treturn functionName;\n\t} else if (typeof functionName !== 'string') {\n\t\treturn undefined;\n\t}\n\tconst\n\t\tnamespaces = functionName.split(\".\"),\n\t\tfunc = namespaces.pop();\n\tcontext = (context === undefined || context === null) ? window : context;\n\tfor (const name of namespaces) {\n\t\ttry {\n\t\t\tcontext = context[name];\n\t\t} catch (e) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\ttry {\n\t\treturn context[func];\n\t} catch (e) {\n\t\treturn undefined;\n\t}\n}\n\n\n/**\n * Execute a function, given by it's name\n *\n * @param functionName: dotted name of the function\n * @param context: parent context, or window if undefined\n * @param args...: optional function arguments\n * @returns {*}: result of the called function\n */\nexport function executeFunctionByName(functionName, context /*, args */) {\n\tconst func = getFunctionByName(functionName, window);\n\tif (typeof func === 'function') {\n\t\tconst args = Array.prototype.slice.call(arguments, 2);\n\t\treturn func.apply(context, args);\n\t}\n}\n\n\n/**\n * Get target URL matching given source\n *\n * Given URL can include variable names (with their namespace), given between braces,\n * as in {MyAMS.env.baseURL}\n */\nexport function getSource(url) {\n\treturn url.replace(/{[^{}]*}/g, (match) => {\n\t\treturn getObject(match.substr(1, match.length - 2));\n\t});\n}\n\n\n/**\n * Dynamic script loader function\n *\n * @param url: script URL\n * @param options: a set of options to be added to AJAX call\n */\nexport function getScript(url, options={}) {\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst defaults = {\n\t\t\tdataType: 'script',\n\t\t\turl: getSource(url),\n\t\t\tcache: MyAMS.env.devmode,\n\t\t\tasync: true\n\t\t};\n\t\tconst settings = $.extend({}, defaults, options);\n\t\t$.ajax(settings).then(() => {\n\t\t\tresolve(url);\n\t\t}, (xhr, status, error) => {\n\t\t\treject(error);\n\t\t})\n\t});\n}\n\n\n/**\n * Get CSS matching given URL\n *\n * @param url: CSS source URL\n * @param name: name of the given CSS\n */\nexport function getCSS(url, name) {\n\n\treturn new Promise((resolve /*, reject */) => {\n\t\tconst head = $('HEAD');\n\t\tlet style = $(`style[data-ams-id=\"${name}\"]`, head);\n\t\tif (style.length === 0) {\n\t\t\tstyle = $('<style>').attr('data-ams-id', name)\n\t\t\t\t\t\t\t\t.text(`@import \"${getSource(url)}\";`)\n\t\t\t\t\t\t\t\t.appendTo(head);\n\t\t\tconst styleInterval = setInterval(() => {\n\t\t\t\ttry {\n\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\tconst _check = style[0].sheet.cssRules;  // Is only populated when file is loaded\n\t\t\t\t\tclearInterval(styleInterval);\n\t\t\t\t\tresolve(true);\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// CSS is not loaded yet, just wait...\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t} else {\n\t\t\tresolve(false);\n\t\t}\n\t});\n}\n\n\n/**\n * Extract parameter value from given query string\n *\n * @param src: source URL\n * @param varName: variable name\n * @returns {boolean|*}\n */\nexport function getQueryVar(src, varName) {\n\t// Check src\n\tif ((typeof src !== 'string') || (src.indexOf('?') < 0)) {\n\t\treturn undefined;\n\t}\n\tif (!src.endsWith('&')) {\n\t\tsrc += '&';\n\t}\n\t// Dynamic replacement RegExp\n\tconst regex = new RegExp(`.*?[&\\\\?]${varName}=(.*?)&.*`);\n\t// Apply RegExp to the query string\n\tconst val = src.replace(regex, \"$1\");\n\t// If the string is the same, we didn't find a match - return null\n\treturn val === src ? null : val;\n}\n\n\n/**\n * Generate a random ID\n */\nexport function generateId() {\n\n\tfunction s4() {\n\t\treturn Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n\t}\n\n\treturn s4() + s4() + s4() + s4();\n}\n\n\n/**\n * Generate a random unique UUID\n */\nexport function generateUUID() {\n\tlet d = new Date().getTime();\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\tconst r = (d + Math.random() * 16) % 16 | 0;\n\t\td = Math.floor(d / 16);\n\t\treturn (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n\t});\n}\n\n\n/**\n * Switch a FontAwesome icon.\n * Use FontAwesome API to get image as SVG, if FontAwesome is loaded from Javascript and is using\n * SVG auto-replace, otherwise just switch CSS class.\n *\n * @param element: source element\n * @param fromClass: initial CSS class (without \"fa-\" prefix)\n * @param toClass: new CSS class (without \"fa-\" prefix)\n */\nexport function switchIcon(element, fromClass, toClass) {\n\tif (typeof element === 'string') {\n\t\telement = $(element);\n\t}\n\tif (MyAMS.config.useSVGIcons) {\n\t\tconst iconDef = FontAwesome.findIconDefinition({iconName: toClass});\n\t\telement.html(FontAwesome.icon(iconDef).html);\n\t} else {\n\t\telement.removeClass(`fa-${fromClass}`)\n\t\t\t.addClass(`fa-${toClass}`);\n\t}\n}\n\n\n/**\n * MyAMS base functions\n *\n * @type {{devmode: boolean, baseURL: string, devext: string}}\n */\nfunction getEnv($) {\n\tconst\n\t\tscript = $(\n\t\t\t'script[src*=\"/myams.js\"], script[src*=\"/myams-dev.js\"], ' +\n\t\t\t'script[src*=\"/myams-core.js\"], script[src*=\"/myams-core-dev.js\"], ' +\n\t\t\t'script[src*=\"/myams-mini.js\"], script[src*=\"/myams-mini-dev.js\"]'),\n\t\tsrc = script.attr('src'),\n\t\tdevmode = src ? src.indexOf('-dev.js') >= 0 : true;  // testing mode\n\treturn {\n\t\tbundle: src ? src.indexOf('-core') < 0 : true,  // testing mode\n\t\tdevmode: devmode,\n\t\tdevext: devmode ? '-dev' : '',\n\t\textext: devmode ? '' : '.min',\n\t\tbaseURL: src ? src.substring(0, src.lastIndexOf('/') + 1) : '/'\n\t};\n}\n\n\n/**\n * Get base DOM elements\n */\nfunction getDOM() {\n\treturn {\n\t\tpage: $('html'),\n\t\troot: $('body'),\n\t\tnav: $('nav'),\n\t\tmain: $('#main'),\n\t\tleftPanel: $('#left-panel'),\n\t\tshortcuts: $('#shortcuts')\n\t}\n}\n\n\n/**\n * MyAMS default configuration\n *\n * @type {Object}:\n *      modules: array of loaded extension modules\n * \t\tajaxNav: true if AJAX navigation is enabled\n * \t    enableFastclick: true is \"smart-click\" extension is to be activated on mobile devices\n * \t\tmenuSpeed: menu speed, in miliseconds\n * \t    initPage: dotted name of MyAMS global init function\n * \t    initContent: dotted name of MyAMS content init function\n * \t    alertContainerCLass: class of MyAMS alerts container\n * \t\tsafeMethods: HTTP methods which can be used without CSRF cookie verification\n * \t\tcsrfCookieName: CSRF cookie name\n * \t\tcsrfHeaderName: CSRF header name\n *      enableTooltips: global tooltips enable flag\n *      enableHtmlTooltips: allow HTML code in tooltips\n * \t\twarnOnFormChange: flag to specify if form changes should be warned\n * \t\tformChangeCallback: global form change callback\n * \t\tisMobile: boolean, true if device is detected as mobile\n * \t    device: string: 'mobile' or 'desktop'\n */\nconst\n\tisMobile = /iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(\n\t\t\t\t\tnavigator.userAgent.toLowerCase()),\n\tconfig = {\n\t\tmodules: [],\n\t\tajaxNav: true,\n\t\tenableFastclick: true,\n\t\tuseSVGIcons:\n\t\t\t(window.FontAwesome !== undefined) && (FontAwesome.config.autoReplaceSvg === 'nest'),\n\t\tmenuSpeed: 235,\n\t\tinitPage: 'MyAMS.core.initPage',\n\t\tinitContent: 'MyAMS.core.initContent',\n\t\tclearContent: 'MyAMS.core.clearContent',\n\t\tuseRegistry: true,\n\t\talertsContainerClass: 'toast-wrapper',\n\t\tsafeMethods: ['GET', 'HEAD', 'OPTIONS', 'TRACE'],\n\t\tcsrfCookieName: 'csrf_token',\n\t\tcsrfHeaderName: 'X-CSRF-Token',\n\t\tenableTooltips: true,\n\t\tenableHtmlTooltips: true,\n\t\twarnOnFormChange: true,\n\t\tformChangeCallback: null,\n\t\tisMobile: isMobile,\n\t\tdevice: isMobile ? 'mobile' : 'desktop'\n\t},\n\tcore = {\n\t\tgetObject: getObject,\n\t\tgetFunctionByName: getFunctionByName,\n\t\texecuteFunctionByName: executeFunctionByName,\n\t\tgetSource: getSource,\n\t\tgetScript: getScript,\n\t\tgetCSS: getCSS,\n\t\tgetQueryVar: getQueryVar,\n\t\tgenerateId: generateId,\n\t\tgenerateUUID: generateUUID,\n\t\tswitchIcon: switchIcon,\n\t\tinitPage: initPage,\n\t\tinitContent: initContent,\n\t\tclearContent: clearContent\n\t};\n\n\nconst MyAMS = {\n\t$: $,\n\tenv: getEnv($),\n\tconfig: config,\n\tcore: core,\n\tregistry: registry\n};\nwindow.MyAMS = MyAMS;\n\nexport default MyAMS;\n","/* global $, MyAMS */\n/**\n * MyAMS dynamic plug-ins loading management\n */\n\n\n/**\n * Plug-ins loading order\n *  - initialize registry\n *  - initialize DOM data attributes\n *  - register all plug-ins from given DOM element\n *  - load all plug-ins from given DOM element\n *  - get list of disabled plug-ins into given DOM element\n *  - call callbacks for all enabled plug-ins\n *  - call callbacks for enabled \"async\" plug-ins\n */\n\n/**\n * Base plug-in class\n */\nclass Plugin {\n\n\tconstructor(name, props={}, loaded=false) {\n\t\t// plug-in name\n\t\tthis.name = name;\n\t\t// plug-in source URL\n\t\tthis.src = props.src;\n\t\t// plug-in associated CSS\n\t\tthis.css = props.css;\n\t\t// plug-in callbacks\n\t\tthis.callbacks = [];\n\t\tif (props.callback) {\n\t\t\tthis.callbacks.push({\n\t\t\t\tcallback: props.callback,\n\t\t\t\tcontext: props.context || 'body'\n\t\t\t});\n\t\t}\n\t\t// async plug-ins are loaded simultaneously; sync ones are loaded and called after...\n\t\tthis.async = props.async === undefined ? true : props.async;\n\t\t// loaded flag\n\t\tthis.loaded = loaded;\n\t}\n\n\t/**\n\t * Load plug-in from remote script\n\t *\n\t * @returns {Promise<void>|*}\n\t */\n\tload() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (!this.loaded) {\n\t\t\t\tlet deferred = [];\n\t\t\t\tif (this.src) {\n\t\t\t\t\tdeferred.push(MyAMS.core.getScript(this.src));\n\t\t\t\t}\n\t\t\t\tif (this.css) {\n\t\t\t\t\tdeferred.push(MyAMS.core.getCSS(this.css, `${this.name}_css`));\n\t\t\t\t}\n\t\t\t\t$.when.apply($, deferred).then(() => {\n\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\tresolve();\n\t\t\t\t}, reject);\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Run plug-in\n\t *\n\t * @param element: plug-in execution context\n\t */\n\trun(element) {\n\t\tconst results = [];\n\t\tfor (const callback of this.callbacks) {\n\t\t\tif (typeof callback.callback === 'string') {\n\t\t\t\tconsole.debug(`Resolving callback ${callback.callback}`);\n\t\t\t\tcallback.callback = MyAMS.core.getFunctionByName(callback.callback) || callback.callback;\n\t\t\t}\n\t\t\tresults.push(callback.callback(element, callback.context));\n\t\t}\n\t\treturn Promise.all(results);\n\t}\n}\n\n\n/**\n * Plug-ins registry class\n */\nclass PluginsRegistry {\n\n\tconstructor() {\n\t\tthis.plugins = new Map();\n\t}\n\n\t/**\n\t * Register new plug-in\n\t *\n\t * @param props: plugin function caller, or object containing plug-in properties\n\t * @param name: plug-in unique name\n\t */\n\tregister(props, name) {\n\t\t// check arguments\n\t\tif (!name && Object.prototype.hasOwnProperty.call(props,'name')) {\n\t\t\tname = props.name;\n\t\t}\n\t\t// check for already registered plug-in\n\t\tconst plugins = this.plugins;\n\t\tif (plugins.has(name)) {\n\t\t\tif (window.console) {\n\t\t\t\tconsole.debug && console.debug(`Plug-in ${name} is already registered!`);\n\t\t\t}\n\t\t\tconst plugin = plugins.get(name);\n\t\t\tlet addContext = true;\n\t\t\tfor (const callback of plugin.callbacks) {\n\t\t\t\tif ((callback.callback === props.callback) && (callback.context === props.context)) {\n\t\t\t\t\taddContext = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (addContext) {\n\t\t\t\tplugin.callbacks.push({\n\t\t\t\t\tcallback: props.callback,\n\t\t\t\t\tcontext: props.context || 'body'\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn plugin;\n\t\t}\n\t\t// register new plug-in\n\t\tif (typeof props === 'string') {  // callable name\n\t\t\tprops = MyAMS.core.getFunctionByName(props);\n\t\t}\n\t\tif (typeof props === 'function') {  // callable object\n\t\t\tplugins.set(name, new Plugin(name, {\n\t\t\t\tcallback: props\n\t\t\t}, true));\n\t\t} else if (typeof props === 'object') {  // plug-in properties object\n\t\t\tplugins.set(name, new Plugin(name, props, !(props.src || props.css)));\n\t\t}\n\t\t// check callback\n\t\treturn plugins.get(name);\n\t}\n\n\t/**\n\t * Load plug-ins declared into DOM element\n\t *\n\t * @param element\n\t */\n\tload(element) {\n\t\t// scan element for new plug-ins\n\t\tconst\n\t\t\tasyncPlugins = [],\n\t\t\tsyncPlugins = [];\n\t\t$('[data-ams-plugins]', element).each((idx, elt) => {\n\t\t\tconst\n\t\t\t\tsource = $(elt),\n\t\t\t\tnames = source.data('ams-plugins');\n\t\t\tlet plugin,\n\t\t\t\tprops;\n\t\t\tif (typeof names === 'string') {\n\t\t\t\tfor (const name of names.split(/[\\s,;]+/)) {\n\t\t\t\t\tconst lowerName = name.toLowerCase();\n\t\t\t\t\tprops = {\n\t\t\t\t\t\tsrc: source.data(`ams-plugin-${lowerName}-src`),\n\t\t\t\t\t\tcss: source.data(`ams-plugin-${lowerName}-css`),\n\t\t\t\t\t\tcallback: source.data(`ams-plugin-${lowerName}-callback`),\n\t\t\t\t\t\tcontext: source,\n\t\t\t\t\t\tasync: source.data(`ams-plugin-${lowerName}-async`)\n\t\t\t\t\t};\n\t\t\t\t\tplugin = this.register(props, name);\n\t\t\t\t\tif (!plugin.loaded) {\n\t\t\t\t\t\tif (props.async === false) {\n\t\t\t\t\t\t\tsyncPlugins.push(plugin.load());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tasyncPlugins.push(plugin.load());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {  // JSON plug-in declaration\n\t\t\t\tfor (props of $.isArray(names) ? names : [names]) {\n\t\t\t\t\t$.extend(props, {\n\t\t\t\t\t\tcontext: source\n\t\t\t\t\t});\n\t\t\t\t\tplugin = this.register(props);\n\t\t\t\t\tif (!plugin.loaded) {\n\t\t\t\t\t\tif (plugin.async === false) {\n\t\t\t\t\t\t\tsyncPlugins.push(plugin.load());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tasyncPlugins.push(plugin.load());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// load plug-ins\n\t\tlet result = $.when.apply($, asyncPlugins);\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tfor (const plugin of syncPlugins) {\n\t\t\tresult = result.done(() => {});\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * Run registered plug-ins on given element\n\t *\n\t * @param element: source element\n\t * @param names: array list of plug-ins to activate, or all registered plug-ins if null\n\t */\n\trun(element, names=null) {\n\n\t\t// check for disabled plug-ins\n\t\tconst disabled = new Set();\n\t\t$('[data-ams-plugins-disabled]', element).each((idx, elt) => {\n\t\t\tconst names = $(elt).data('ams-plugins-disabled').split(/[\\s,;]+/);\n\t\t\tfor (const name of names) {\n\t\t\t\tdisabled.add(name);\n\t\t\t}\n\t\t});\n\n\t\tconst plugins = this.plugins;\n\t\tif (names) {  // only run given plug-ins, EVEN DISABLED ONES\n\t\t\tfor (const name of names) {\n\t\t\t\tif (plugins.has(name)) {\n\t\t\t\t\tplugins.get(name).run(element);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {  // run all plug-ins, except disabled ones\n\t\t\tfor (const [name, plugin] of plugins.entries()) {\n\t\t\t\tif (disabled.has(name)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tplugin.run(element);\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst plugins = new PluginsRegistry();\n\n\nexport const registry = {\n\n\t/**\n\t * Plug-ins registry\n\t */\n\tplugins: plugins,\n\n\t/**\n\t * Initialize plug-ins registry from DOM\n\t *\n\t * @param element: source element to initialize from\n\t */\n\tinitElement: function(element='#content') {\n\t\t// populate data attributes\n\t\tMyAMS.registry.initData(element);\n\t\t// load plug-ins from given DOM element\n\t\treturn plugins.load(element);\n\t},\n\n\t/**\n\t * Register a new plug-in through Javascript instead of HTML data attributes\n\t *\n\t * @param plugin: callable object, or object containing plug-in properties\n\t * @param name: plug-in name, used if @plugin is a function\n\t * @param callback: callback function which can be called after plug-in registration\n\t */\n\tregister: function(plugin, name, callback) {\n\t\treturn plugins.register(plugin, name, callback);\n\t},\n\n\t/**\n\t * Data attributes initializer\n\t *\n\t * This function converts a single \"data-ams-data\" attribute into a set of several \"data-*\"\n\t * attributes.\n\t * This can be used into HTML templates engines which don't allow to create dynamic attributes\n\t * easilly.\n\t *\n\t * @param element: parent element\n\t */\n\tinitData: function(element) {\n\t\t$('[data-ams-data]', element).each((idx, elt) => {\n\t\t\tconst\n\t\t\t\t$elt = $(elt),\n\t\t\t\tdata = $elt.data('ams-data');\n\t\t\tif (data) {\n\t\t\t\tfor (const name in data) {\n\t\t\t\t\tif (!Object.prototype.hasOwnProperty.call(data, name)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tlet elementData = data[name];\n\t\t\t\t\tif (typeof elementData !== 'string') {\n\t\t\t\t\t\telementData = JSON.stringify(elementData);\n\t\t\t\t\t}\n\t\t\t\t\t$elt.attr(`data-${name}`, elementData);\n\t\t\t\t}\n\t\t\t}\n\t\t\t$elt.removeAttr('data-ams-data');\n\t\t});\n\t},\n\n\t/**\n\t * Run registered plug-ins on given element\n\t *\n\t * @param element: DOM element\n\t * @param names: names of plug-in to run on given element; all if null\n\t */\n\trun: function(element, names=null) {\n\t\treturn plugins.run(element, names);\n\t}\n};\n","/* global MyAMS */\n/**\n * MyAMS dynamic module loader\n */\n\nconst $ = MyAMS.$;\n\n\nfunction getModule(module) {\n\tlet moduleSrc;\n\tif (module.startsWith('http://') || module.startsWith('https://')) {\n\t\tmoduleSrc = module;\n\t} else if (module.endsWith('.js')) {  // custom module with relative path\n\t\tmoduleSrc = module;\n\t} else {  // standard MyAMS module\n\t\tmoduleSrc = `${MyAMS.env.baseURL}mod-${module}${MyAMS.env.devext}.js`;\n\t}\n\treturn MyAMS.core.getScript(moduleSrc, {async: true}, console.error);\n}\n\n\n/**\n * Dynamic loading of MyAMS modules\n *\n * @param modules: single module name, or array of modules names\n * @returns Promise\n */\nexport default function myams_require(...modules) {\n\n\treturn new Promise((resolve, reject) => {\n\n\t\tconst\n\t\t\tnames = [],\n\t\t\tdeferred = [],\n\t\t\tloaded = MyAMS.config.modules;\n\n\t\tfor (const module of modules) {\n\t\t\tif (typeof module === 'string') {\n\t\t\t\tif (loaded.indexOf(module) < 0) {\n\t\t\t\t\tnames.push(module);\n\t\t\t\t\tdeferred.push(getModule(module));\n\t\t\t\t}\n\t\t\t} else if ($.isArray(module)) {  // strings array\n\t\t\t\tfor (const name of module) {\n\t\t\t\t\tif (loaded.indexOf(name) < 0) {\n\t\t\t\t\t\tnames.push(name);\n\t\t\t\t\t\tdeferred.push(getModule(name));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {  // object\n\t\t\t\tfor (const [name, src] of Object.entries(module)) {\n\t\t\t\t\tif (loaded.indexOf(name) < 0) {\n\t\t\t\t\t\tnames.push(name);\n\t\t\t\t\t\tdeferred.push(getModule(src));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t$.when.apply($, deferred)\n\t\t\t.then(() => {\n\t\t\t\tfor (const moduleName of names) {\n\t\t\t\t\tif (loaded.indexOf(moduleName) < 0) {\n\t\t\t\t\t\tloaded.push(moduleName);\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(`MyAMS.${moduleName}.init`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t}, () => {\n\t\t\t\treject(`Can't load requested modules (${names})!`);\n\t\t\t});\n\t});\n}\n","/**\n * MyAMS core features\n *\n * This script is used to build MyAMS mini-core-package.\n *\n * This package only includes MyAMS core features, but not CSS or external modules\n * which can be loaded using MyAMS.require function.\n */\n\nimport MyAMS, { init } from \"./ext-base\";\nimport myams_require from \"./ext-require\";\n\n\nMyAMS.$.extend(MyAMS, {\n\trequire: myams_require\n});\n\nconst html = MyAMS.$('html');\nif (html.data('ams-init') !== false) {\n\tinit(MyAMS.$);\n}\n\n\n/** Version: 1.9.0  */\n","module.exports = jquery;"],"sourceRoot":""}