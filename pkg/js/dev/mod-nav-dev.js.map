{"version":3,"sources":["mod-nav.js"],"names":["$","MyAMS","MenuHeader","props","text","header","MenuDivider","Menu","items","menu","item","label","link","attr","href","Object","entries","attrs","key","val","icon","addClass","appendTo","badge","status","value","append","render","children","NavigationMenu","menus","parent","settings","nav","undefined","getMenus","init","find","each","idx","elt","menuItem","length","firstLink","closedSign","click","activeParent","parents","activeItem","slideDown","speed","html","openedSign","on","evt","currentTarget","hasClass","removeClass","replace","parentUL","accordion","visibleMenus","visibleIndex","visibleElt","close","parentIndex","parentElt","visibleItem","slideUp","slideElt","delay","firstUL","is","_initialized","_hammer","_openPage","startsWith","location","hash","window","fn","extend","navigationMenu","options","data","defaults","amsMenuAccordion","config","useSVGIcons","downIcon","FontAwesome","findIconDefinition","iconName","upIcon","amsMenuConfig","require","then","ajax","get","result","menuFactory","core","getObject","amsMenuFactory","skin","checkURL","ajaxNav","document","preventDefault","handlers","stopPropagation","url","target","params","indexOf","split","unserialize","hrefGetter","getFunctionByName","ctrlKey","open","linkTarget","form","confirmChangedForm","loadURL","stats","logEvent","exists","tagName","amsUrl","amsTabLoaded","amsTabLoadOnce","remove","isMobile","dom","root","enableFastclick","check","noClickDelay","env","baseURL","extext","Hammer","Manager","add","Pan","direction","DIRECTION_HORIZONTAL","threshold","switchMenu","restoreState","initElement","element","menuSpeed","setActiveMenu","show","scroll","scrollTop","position","top","height","drawBreadcrumbs","crumb","not","template","i18n","HOME","trim","clone","end","minifyMenu","toggleClass","switchIcon","localStorage","setItem","state","getItem","bundle","modules","push","console","debug"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;AAIA,MAAMA,CAAC,GAAGC,KAAK,CAACD,CAAhB;AAGA;;;;MAGME,U;;;AAEL,wBAAYC,KAAZ,EAAmB;AAAA;;AAClB,WAAKA,KAAL,GAAaA,KAAb;AACA;;;;+BAEQ;AACR,eAAOH,CAAC,CAAC,0BAAD,CAAD,CACLI,IADK,CACA,KAAKD,KAAL,CAAWE,MAAX,IAAqB,EADrB,CAAP;AAEA;;;;;;MAGIC,W;;;;;;;;;+BAEI;AACR,eAAON,CAAC,CAAC,2BAAD,CAAR;AACA;;;;;;MAGIO,I;;;AAEL,kBAAYC,KAAZ,EAAmB;AAAA;;AAClB,WAAKA,KAAL,GAAaA,KAAb;AACA;;;;+BAEQ;AACR,YAAMC,IAAI,GAAGT,CAAC,CAAC,aAAD,CAAd;AADQ;AAAA;AAAA;;AAAA;AAER,+BAAmB,KAAKQ,KAAxB,8HAA+B;AAAA,gBAApBE,IAAoB;;AAC9B,gBAAIA,IAAI,CAACC,KAAT,EAAgB;AACf,kBACCR,KAAK,GAAGH,CAAC,CAAC,WAAD,CADV;AAAA,kBAECY,IAAI,GAAGZ,CAAC,CAAC,SAAD,CAAD,CACLa,IADK,CACA,MADA,EACQH,IAAI,CAACI,IAAL,IAAa,GADrB,EAELD,IAFK,CAEA,OAFA,EAESH,IAAI,CAACC,KAFd,CAFR;;AAKA,iDAAyBI,MAAM,CAACC,OAAP,CAAeN,IAAI,CAACO,KAAL,IAAc,EAA7B,CAAzB,qCAA2D;AAAA;AAAA,oBAA/CC,GAA+C;AAAA,oBAA1CC,GAA0C;;AAC1DP,gBAAAA,IAAI,CAACC,IAAL,CAAUK,GAAV,EAAeC,GAAf;AACA;;AACD,kBAAIT,IAAI,CAACU,IAAT,EAAe;AACdpB,gBAAAA,CAAC,CAAC,kCAAD,CAAD,CACEqB,QADF,CACWX,IAAI,CAACU,IADhB,EAEEE,QAFF,CAEWV,IAFX;AAGA;;AACDZ,cAAAA,CAAC,CAAC,wCAAD,CAAD,CACEI,IADF,CACOM,IAAI,CAACC,KADZ,EAEEW,QAFF,CAEWV,IAFX;;AAGA,kBAAIF,IAAI,CAACa,KAAT,EAAgB;AACfvB,gBAAAA,CAAC,CAAC,mDAAD,CAAD,CACEqB,QADF,cACiBX,IAAI,CAACa,KAAL,CAAWC,MAD5B,GAEEpB,IAFF,CAEOM,IAAI,CAACa,KAAL,CAAWE,KAFlB,EAGEH,QAHF,CAGWV,IAHX;AAIA;;AACDA,cAAAA,IAAI,CAACU,QAAL,CAAcnB,KAAd;;AACA,kBAAIO,IAAI,CAACF,KAAT,EAAgB;AACfR,gBAAAA,CAAC,CAAC,WAAD,CAAD,CACE0B,MADF,CACS,IAAInB,IAAJ,CAASG,IAAI,CAACF,KAAd,EAAqBmB,MAArB,EADT,EAEEL,QAFF,CAEWnB,KAFX;AAGA;;AACDA,cAAAA,KAAK,CAACmB,QAAN,CAAeb,IAAf;AACA,aA9BD,MA8BO;AACN,kBAAIH,WAAJ,GAAkBqB,MAAlB,GAA2BL,QAA3B,CAAoCb,IAApC;AACA;AACD;AApCO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAqCR,eAAOA,IAAI,CAACmB,QAAL,EAAP;AACA;;;;;;MAGWC,c;;;AAEZ,4BAAYC,KAAZ,EAAmBC,MAAnB,EAA2BC,QAA3B,EAAqC;AAAA;;AACpC,WAAKF,KAAL,GAAaA,KAAb;AACA,WAAKC,MAAL,GAAcA,MAAd;AACA,WAAKC,QAAL,GAAgBA,QAAhB;AACA;;;;iCAEU;AACV,YAAMC,GAAG,GAAGjC,CAAC,CAAC,WAAD,CAAb;AADU;AAAA;AAAA;;AAAA;AAEV,gCAAoB,KAAK8B,KAAzB,mIAAgC;AAAA,gBAArB3B,KAAqB;;AAC/B,gBAAIA,KAAK,CAACE,MAAN,KAAiB6B,SAArB,EAAgC;AAC/BD,cAAAA,GAAG,CAACP,MAAJ,CAAW,IAAIxB,UAAJ,CAAeC,KAAf,EAAsBwB,MAAtB,EAAX;AACA;;AACDM,YAAAA,GAAG,CAACP,MAAJ,CAAW,IAAInB,IAAJ,CAASJ,KAAK,CAACK,KAAf,EAAsBmB,MAAtB,EAAX;AACA;AAPS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQV,eAAOM,GAAP;AACA;;;+BAEQ;AACR,YAAMH,KAAK,GAAG,KAAKK,QAAL,EAAd;AACA,aAAKC,IAAL,CAAUN,KAAV;AACA,aAAKC,MAAL,CAAYL,MAAZ,CAAmBI,KAAnB;AACA;;;2BAEIA,K,EAAO;AACX,YAAME,QAAQ,GAAG,KAAKA,QAAtB,CADW,CAEX;;AACAF,QAAAA,KAAK,CAACO,IAAN,CAAW,IAAX,EAAiBC,IAAjB,CAAsB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnC,cAAMC,QAAQ,GAAGzC,CAAC,CAACwC,GAAD,CAAlB;;AACA,cAAIC,QAAQ,CAACJ,IAAT,CAAc,IAAd,EAAoBK,MAApB,GAA6B,CAAjC,EAAoC;AACnC,gBAAMC,SAAS,GAAGF,QAAQ,CAACJ,IAAT,CAAc,SAAd,CAAlB,CADmC,CAEnC;;AACAM,YAAAA,SAAS,CAACjB,MAAV,sCAA6CM,QAAQ,CAACY,UAAtD,WAHmC,CAInC;;AACA,gBAAID,SAAS,CAAC9B,IAAV,CAAe,MAAf,MAA2B,GAA/B,EAAoC;AACnC8B,cAAAA,SAAS,CAACE,KAAV,CAAgB,YAAM;AACrB,uBAAO,KAAP;AACA,eAFD;AAGA;AACD;AACD,SAbD,EAHW,CAiBX;;AACAf,QAAAA,KAAK,CAACO,IAAN,CAAW,WAAX,EAAwBC,IAAxB,CAA6B,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1C,cACCM,YAAY,GAAG9C,CAAC,CAACwC,GAAD,CAAD,CAAOO,OAAP,CAAe,IAAf,CADhB;AAAA,cAECC,UAAU,GAAGF,YAAY,CAACf,MAAb,CAAoB,IAApB,CAFd;AAGAe,UAAAA,YAAY,CAACG,SAAb,CAAuBjB,QAAQ,CAACkB,KAAhC;AACAF,UAAAA,UAAU,CAACX,IAAX,CAAgB,SAAhB,EAA2Bc,IAA3B,CAAgCnB,QAAQ,CAACoB,UAAzC;AACAJ,UAAAA,UAAU,CAAC3B,QAAX,CAAoB,MAApB;AACA,SAPD,EAlBW,CA0BX;;AACAS,QAAAA,KAAK,CAACO,IAAN,CAAW,MAAX,EAAmBgB,EAAnB,CAAsB,OAAtB,EAA+B,UAACC,GAAD,EAAS;AACvC,cAAM1C,IAAI,GAAGZ,CAAC,CAACsD,GAAG,CAACC,aAAL,CAAd;;AACA,cAAI3C,IAAI,CAAC4C,QAAL,CAAc,QAAd,CAAJ,EAA6B;AAC5B;AACA;;AACD5C,UAAAA,IAAI,CAACmC,OAAL,CAAa,IAAb,EAAmBU,WAAnB,CAA+B,QAA/B;AACA,cACC3C,IAAI,GAAGF,IAAI,CAACC,IAAL,CAAU,MAAV,EAAkB6C,OAAlB,CAA0B,IAA1B,EAAgC,EAAhC,CADR;AAAA,cAECC,QAAQ,GAAG/C,IAAI,CAACmB,MAAL,GAAcM,IAAd,CAAmB,IAAnB,CAFZ;;AAGA,cAAIL,QAAQ,CAAC4B,SAAb,EAAwB;AACvB,gBACCb,OAAO,GAAGnC,IAAI,CAACmB,MAAL,GAAcgB,OAAd,CAAsB,IAAtB,CADX;AAAA,gBAECc,YAAY,GAAG/B,KAAK,CAACO,IAAN,CAAW,YAAX,CAFhB;AAGAwB,YAAAA,YAAY,CAACvB,IAAb,CAAkB,UAACwB,YAAD,EAAeC,UAAf,EAA8B;AAC/C,kBAAIC,KAAK,GAAG,IAAZ;AACAjB,cAAAA,OAAO,CAACT,IAAR,CAAa,UAAC2B,WAAD,EAAcC,SAAd,EAA4B;AACxC,oBAAIA,SAAS,KAAKH,UAAlB,EAA8B;AAC7BC,kBAAAA,KAAK,GAAG,KAAR;AACA,yBAAO,KAAP;AACA;AACD,eALD;;AAMA,kBAAIA,KAAK,IAAKL,QAAQ,KAAKI,UAA3B,EAAwC;AACvC,oBAAMI,WAAW,GAAGnE,CAAC,CAAC+D,UAAD,CAArB;;AACA,oBAAIjD,IAAI,IAAI,CAACqD,WAAW,CAACX,QAAZ,CAAqB,QAArB,CAAb,EAA6C;AAC5CW,kBAAAA,WAAW,CAACC,OAAZ,CAAoBpC,QAAQ,CAACkB,KAA7B,EAAoC,UAACmB,QAAD,EAAc;AACjDF,oBAAAA,WAAW,CAACpC,MAAZ,CAAmB,IAAnB,EACE0B,WADF,CACc,MADd,EAEEpB,IAFF,CAEO,SAFP,EAGEiC,KAHF,CAGQtC,QAAQ,CAACkB,KAHjB,EAIEC,IAJF,CAIOnB,QAAQ,CAACY,UAJhB;AAKA,mBAND;AAOA;AACD;AACD,aApBD;AAqBA;;AACD,cAAM2B,OAAO,GAAG3D,IAAI,CAACmB,MAAL,GAAcM,IAAd,CAAmB,UAAnB,CAAhB;;AACA,cAAI,CAACvB,IAAD,IAASyD,OAAO,CAACC,EAAR,CAAW,UAAX,CAAT,IAAmC,CAACD,OAAO,CAACf,QAAR,CAAiB,QAAjB,CAAxC,EAAoE;AACnEe,YAAAA,OAAO,CAACH,OAAR,CAAgBpC,QAAQ,CAACkB,KAAzB,EAAgC,YAAM;AACrCtC,cAAAA,IAAI,CAACmB,MAAL,CAAY,IAAZ,EACE0B,WADF,CACc,MADd,EAEEpB,IAFF,CAEO,SAFP,EAGEiC,KAHF,CAGQtC,QAAQ,CAACkB,KAHjB,EAIEC,IAJF,CAIOnB,QAAQ,CAACY,UAJhB;AAKA,aAND;AAOA,WARD,MAQO;AACN2B,YAAAA,OAAO,CAACtB,SAAR,CAAkBjB,QAAQ,CAACkB,KAA3B,EAAkC,YAAM;AACvCtC,cAAAA,IAAI,CAACmB,MAAL,CAAY,IAAZ,EACEV,QADF,CACW,MADX,EAEEgB,IAFF,CAEO,SAFP,EAGEiC,KAHF,CAGQtC,QAAQ,CAACkB,KAHjB,EAIEC,IAJF,CAIOnB,QAAQ,CAACoB,UAJhB;AAKA,aAND;AAOA;AACD,SArDD;AAsDA;;;;;;;AAIF,MAAIqB,YAAY,GAAG,KAAnB;AAAA,MACCC,OAAO,GAAG,IADX;AAIA;;;;AAIA,WAASC,SAAT,CAAmB7D,IAAnB,EAAyB;AACxB,QAAIA,IAAI,CAAC8D,UAAL,CAAgB,GAAhB,CAAJ,EAA0B;AACzB,UAAI9D,IAAI,KAAK+D,QAAQ,CAACC,IAAtB,EAA4B;AAC3BC,QAAAA,MAAM,CAACF,QAAP,CAAgBC,IAAhB,GAAuBhE,IAAvB;AACA;AACD,KAJD,MAIO;AACNiE,MAAAA,MAAM,CAACF,QAAP,GAAkB/D,IAAlB;AACA;AACD;;AAEM,MAAMmB,GAAG,GAAG;AAElB;;;AAGAG,IAAAA,IAAI,EAAE,gBAAM;AAEX,UAAIqC,YAAJ,EAAkB;AACjB;AACA;;AACDA,MAAAA,YAAY,GAAG,IAAf;AAEAzE,MAAAA,CAAC,CAACgF,EAAF,CAAKC,MAAL,CAAY;AAEXC,QAAAA,cAAc,EAAE,wBAASC,OAAT,EAAkB;AAAA;;AACjC,cAAI,KAAKzC,MAAL,KAAgB,CAApB,EAAuB;AACtB;AACA;;AACD,cAAM0C,IAAI,GAAG,KAAKA,IAAL,EAAb;AACA,cAAMC,QAAQ,GAAG;AAChBzB,YAAAA,SAAS,EAAEwB,IAAI,CAACE,gBAAL,KAA0B,KADrB;AAEhBpC,YAAAA,KAAK,EAAE;AAFS,WAAjB;;AAIA,cAAIjD,KAAK,CAACsF,MAAN,CAAaC,WAAjB,EAA8B;AAC7B,gBACCC,QAAQ,GAAGC,WAAW,CAACC,kBAAZ,CAA+B;AAACC,cAAAA,QAAQ,EAAE;AAAX,aAA/B,CADZ;AAAA,gBAECC,MAAM,GAAGH,WAAW,CAACC,kBAAZ,CAA+B;AAACC,cAAAA,QAAQ,EAAE;AAAX,aAA/B,CAFV;AAGA5F,YAAAA,CAAC,CAACiF,MAAF,CAASI,QAAT,EAAmB;AAClBzC,cAAAA,UAAU,8BAAuB8C,WAAW,CAACtE,IAAZ,CAAiBqE,QAAjB,EAA2BtC,IAAlD,UADQ;AAElBC,cAAAA,UAAU,8BAAuBsC,WAAW,CAACtE,IAAZ,CAAiByE,MAAjB,EAAyB1C,IAAhD;AAFQ,aAAnB;AAIA,WARD,MAQO;AACNnD,YAAAA,CAAC,CAACiF,MAAF,CAASI,QAAT,EAAmB;AAClBzC,cAAAA,UAAU,EAAE,oCADM;AAElBQ,cAAAA,UAAU,EAAE;AAFM,aAAnB;AAIA;;AACD,cAAMpB,QAAQ,GAAGhC,CAAC,CAACiF,MAAF,CAAS,EAAT,EAAaI,QAAb,EAAuBF,OAAvB,CAAjB;;AACA,cAAIC,IAAI,CAACU,aAAT,EAAwB;AACvB7F,YAAAA,KAAK,CAAC8F,OAAN,CAAc,MAAd,EAAsBC,IAAtB,CAA2B,YAAM;AAChC/F,cAAAA,KAAK,CAACgG,IAAN,CAAWC,GAAX,CAAed,IAAI,CAACU,aAApB,EAAmCE,IAAnC,CAAwC,UAAAG,MAAM,EAAI;AACjD,oBAAMC,WAAW,GAAGnG,KAAK,CAACoG,IAAN,CAAWC,SAAX,CAAqBlB,IAAI,CAACmB,cAA1B,KAA6C1E,cAAjE;AACA,oBAAIuE,WAAJ,CAAgBD,MAAhB,EAAwBnG,CAAC,CAAC,KAAD,CAAzB,EAAiCgC,QAAjC,EAA2CL,MAA3C;;AACA1B,gBAAAA,KAAK,CAAC8F,OAAN,CAAc,MAAd,EAAsBC,IAAtB,CAA2B,YAAM;AAChC/F,kBAAAA,KAAK,CAACuG,IAAN,CAAWC,QAAX;AACA,iBAFD;AAGA,eAND;AAOA,aARD;AASA,WAVD,MAUO;AAAG;AACT,gBAAM3E,KAAK,GAAG9B,CAAC,CAAC,IAAD,EAAO,IAAP,CAAf;AACA,gBAAI6B,cAAJ,CAAmB,IAAnB,EAAyB7B,CAAC,CAAC,IAAD,CAA1B,EAAkCgC,QAAlC,EAA4CI,IAA5C,CAAiDN,KAAjD;AACA;AACD;AAxCU,OAAZ;;AA2CA,UAAI7B,KAAK,CAACsF,MAAN,CAAamB,OAAjB,EAA0B;AAEzB;AACA1G,QAAAA,CAAC,CAAC2G,QAAD,CAAD,CAAYtD,EAAZ,CAAe,OAAf,EAAwB,aAAxB,EAAuC,UAACC,GAAD,EAAS;AAC/CA,UAAAA,GAAG,CAACsD,cAAJ;AACA,SAFD,EAHyB,CAOzB;;AACA5G,QAAAA,CAAC,CAAC2G,QAAD,CAAD,CAAYtD,EAAZ,CAAe,OAAf,EAAwB,sCAChB,mCADR,EAC6C,UAACC,GAAD,EAAS;AACrD,cAAM1C,IAAI,GAAGZ,CAAC,CAACsD,GAAG,CAACC,aAAL,CAAd;AAAA,cACGsD,QAAQ,GAAGjG,IAAI,CAACwE,IAAL,CAAU,uBAAV,CADd;;AAEA,cAAKyB,QAAQ,KAAK,IAAd,IAAwBA,QAAQ,KAAK,OAArC,IAAkDA,QAAQ,KAAK,KAAnE,EAA2E;AAC1E;AACA;;AACD,cAAI/F,IAAI,GAAGF,IAAI,CAACC,IAAL,CAAU,MAAV,KAAqBD,IAAI,CAACwE,IAAL,CAAU,SAAV,CAAhC;;AACA,cAAI,CAACtE,IAAD,IACHA,IAAI,CAAC8D,UAAL,CAAgB,aAAhB,CADG,IAEHhE,IAAI,CAACC,IAAL,CAAU,QAAV,CAFG,IAGFD,IAAI,CAACwE,IAAL,CAAU,kBAAV,MAAkC,IAHpC,EAG2C;AAC1C;AACA;;AACD9B,UAAAA,GAAG,CAACsD,cAAJ;AACAtD,UAAAA,GAAG,CAACwD,eAAJ;AAEA,cAAIC,GAAJ,EACCC,MADD,EAECC,MAFD;;AAGA,cAAInG,IAAI,CAACoG,OAAL,CAAa,GAAb,KAAqB,CAAzB,EAA4B;AAC3BH,YAAAA,GAAG,GAAGjG,IAAI,CAACqG,KAAL,CAAW,GAAX,CAAN;AACAH,YAAAA,MAAM,GAAGD,GAAG,CAAC,CAAD,CAAZ;AACAE,YAAAA,MAAM,GAAGF,GAAG,CAAC,CAAD,CAAH,CAAOK,WAAP,EAAT;AACA,WAJD,MAIO;AACNJ,YAAAA,MAAM,GAAGlG,IAAT;AACAmG,YAAAA,MAAM,GAAG/E,SAAT;AACA;;AACD,cAAMmF,UAAU,GAAGpH,KAAK,CAACoG,IAAN,CAAWiB,iBAAX,CAA6BN,MAA7B,CAAnB;;AACA,cAAI,OAAOK,UAAP,KAAsB,UAA1B,EAAsC;AACrCvG,YAAAA,IAAI,GAAGuG,UAAU,CAACzG,IAAD,EAAOqG,MAAP,CAAjB;AACA;;AACD,cAAI,OAAOnG,IAAP,KAAgB,UAApB,EAAgC;AAC/BA,YAAAA,IAAI,CAACF,IAAD,EAAOqG,MAAP,CAAJ;AACA,WAFD,MAEO;AACN;AACA;AACAnG,YAAAA,IAAI,GAAGA,IAAI,CAAC4C,OAAL,CAAa,KAAb,EAAoB,GAApB,CAAP;;AACA,gBAAIJ,GAAG,CAACiE,OAAR,EAAiB;AAChBxC,cAAAA,MAAM,CAACyC,IAAP,IAAezC,MAAM,CAACyC,IAAP,CAAY1G,IAAZ,CAAf;AACA,aAFD,MAEO;AACN,kBAAM2G,UAAU,GAAG7G,IAAI,CAACwE,IAAL,CAAU,YAAV,KAA2BxE,IAAI,CAACC,IAAL,CAAU,QAAV,CAA9C;;AACA,kBAAI4G,UAAJ,EAAgB;AACf,oBAAIA,UAAU,KAAK,QAAnB,EAA6B;AAC5B1C,kBAAAA,MAAM,CAACyC,IAAP,IAAezC,MAAM,CAACyC,IAAP,CAAY1G,IAAZ,CAAf;AACA,iBAFD,MAEO;AACN,sBAAIb,KAAK,CAACyH,IAAV,EAAgB;AACfzH,oBAAAA,KAAK,CAACyH,IAAN,CAAWC,kBAAX,GAAgC3B,IAAhC,CAAqC,UAACG,MAAD,EAAY;AAChD,0BAAIA,MAAM,KAAK,SAAf,EAA0B;AACzB;AACA;;AACDlG,sBAAAA,KAAK,CAACuG,IAAN,IAAcvG,KAAK,CAACuG,IAAN,CAAWoB,OAAX,CAAmB9G,IAAnB,EAAyB2G,UAAzB,EACb7G,IAAI,CAACwE,IAAL,CAAU,kBAAV,CADa,EAEbxE,IAAI,CAACwE,IAAL,CAAU,mBAAV,CAFa,CAAd;AAGA,qBAPD;AAQA,mBATD,MASO;AACNnF,oBAAAA,KAAK,CAACuG,IAAN,IAAcvG,KAAK,CAACuG,IAAN,CAAWoB,OAAX,CAAmB9G,IAAnB,EAAyB2G,UAAzB,EACb7G,IAAI,CAACwE,IAAL,CAAU,kBAAV,CADa,EAEbxE,IAAI,CAACwE,IAAL,CAAU,mBAAV,CAFa,CAAd;AAGA;AACD;AACD,eAnBD,MAmBO;AACN,oBAAInF,KAAK,CAACyH,IAAV,EAAgB;AACfzH,kBAAAA,KAAK,CAACyH,IAAN,CAAWC,kBAAX,GAAgC3B,IAAhC,CAAqC,UAACG,MAAD,EAAY;AAChD,wBAAIA,MAAM,KAAK,SAAf,EAA0B;AACzB;AACA;;AACDxB,oBAAAA,SAAS,CAAC7D,IAAD,CAAT;AACA,mBALD;AAMA,iBAPD,MAOO;AACN6D,kBAAAA,SAAS,CAAC7D,IAAD,CAAT;AACA;AACD;AACD;AACD;AACD,SA3ED,EARyB,CAqFzB;;AACAd,QAAAA,CAAC,CAAC2G,QAAD,CAAD,CAAYtD,EAAZ,CAAe,OAAf,EAAwB,oBAAxB,EAA8C,UAACC,GAAD,EAAS;AACtDA,UAAAA,GAAG,CAACsD,cAAJ;AACA,cAAMI,MAAM,GAAGhH,CAAC,CAACsD,GAAG,CAACC,aAAL,CAAhB;AACAwB,UAAAA,MAAM,CAACyC,IAAP,IAAezC,MAAM,CAACyC,IAAP,CAAYR,MAAM,CAACnG,IAAP,CAAY,MAAZ,CAAZ,CAAf;AACAZ,UAAAA,KAAK,CAAC4H,KAAN,IAAe5H,KAAK,CAAC4H,KAAN,CAAYC,QAAZ,CACdd,MAAM,CAAC5B,IAAP,CAAY,oBAAZ,KAAqC,YADvB,EAEd4B,MAAM,CAAC5B,IAAP,CAAY,kBAAZ,KAAmC,UAFrB,EAGd4B,MAAM,CAAC5B,IAAP,CAAY,iBAAZ,KAAkC4B,MAAM,CAACnG,IAAP,CAAY,MAAZ,CAHpB,CAAf;AAIA,SARD,EAtFyB,CAgGzB;;AACAb,QAAAA,CAAC,CAAC2G,QAAD,CAAD,CAAYtD,EAAZ,CAAe,OAAf,EAAwB,kBAAxB,EAA4C,UAACC,GAAD,EAAS;AACpDA,UAAAA,GAAG,CAACsD,cAAJ;AACA3G,UAAAA,KAAK,CAACyH,IAAN,IAAczH,KAAK,CAACyH,IAAN,CAAWC,kBAAX,GAAgC3B,IAAhC,CAAqC,UAACG,MAAD,EAAY;AAC9D,gBAAIA,MAAM,KAAK,SAAf,EAA0B;AACzB;AACA;;AACDpB,YAAAA,MAAM,CAACF,QAAP,GAAkB7E,CAAC,CAACsD,GAAG,CAACC,aAAL,CAAD,CAAqB1C,IAArB,CAA0B,MAA1B,CAAlB;AACA,WALa,CAAd;AAMA,SARD,EAjGyB,CA2GzB;;AACAb,QAAAA,CAAC,CAAC2G,QAAD,CAAD,CAAYtD,EAAZ,CAAe,OAAf,EAAwB,8BAAxB,EAAwD,UAACC,GAAD,EAAS;AAChE,cAAItD,CAAC,CAACsD,GAAG,CAACC,aAAL,CAAD,CAAqBxB,MAArB,CAA4B,IAA5B,EAAkCyB,QAAlC,CAA2C,UAA3C,CAAJ,EAA4D;AAC3DF,YAAAA,GAAG,CAACwD,eAAJ;AACAxD,YAAAA,GAAG,CAACsD,cAAJ;AACA,mBAAO,KAAP;AACA;AACD,SAND,EA5GyB,CAoHzB;;AACA5G,QAAAA,CAAC,CAAC2G,QAAD,CAAD,CAAYtD,EAAZ,CAAe,aAAf,EAA8B,UAACC,GAAD,EAAS;AACtC,cAAI1C,IAAI,GAAGZ,CAAC,CAACsD,GAAG,CAAC0D,MAAL,CAAZ;;AACA,cAAIpG,IAAI,CAACmH,MAAL,MAAkBnH,IAAI,CAACsF,GAAL,CAAS,CAAT,EAAY8B,OAAZ,KAAwB,GAA9C,EAAoD;AACnDpH,YAAAA,IAAI,GAAGZ,CAAC,CAAC,SAAD,EAAYY,IAAZ,CAAR;AACA;;AACD,cAAMwE,IAAI,GAAGxE,IAAI,CAACwE,IAAL,EAAb;;AACA,cAAIA,IAAI,IAAIA,IAAI,CAAC6C,MAAjB,EAAyB;AACxB,gBAAI7C,IAAI,CAAC8C,YAAT,EAAuB;AACtB;AACA;;AACDtH,YAAAA,IAAI,CAACc,MAAL,CAAY,wCAAZ;;AACAzB,YAAAA,KAAK,CAAC8F,OAAN,CAAc,MAAd,EAAsBC,IAAtB,CAA2B,YAAM;AAChC/F,cAAAA,KAAK,CAACuG,IAAN,CAAWoB,OAAX,CAAmBxC,IAAI,CAAC6C,MAAxB,EAAgCrH,IAAI,CAACC,IAAL,CAAU,MAAV,CAAhC,EAAmDmF,IAAnD,CAAwD,YAAM;AAC7D,oBAAIZ,IAAI,CAAC+C,cAAT,EAAyB;AACxB/C,kBAAAA,IAAI,CAAC8C,YAAL,GAAoB,IAApB;AACA;;AACDlI,gBAAAA,CAAC,CAAC,GAAD,EAAMY,IAAN,CAAD,CAAawH,MAAb;AACA,eALD,EAKG,YAAM;AACRpI,gBAAAA,CAAC,CAAC,GAAD,EAAMY,IAAN,CAAD,CAAawH,MAAb;AACA,eAPD;AAQA,aATD;AAUA;AACD,SAtBD;;AAwBA,YAAI,CAACnI,KAAK,CAACsF,MAAN,CAAa8C,QAAlB,EAA4B;AAC3BpI,UAAAA,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAelH,QAAf,CAAwB,kBAAxB;AACA,SAFD,MAEO;AACNpB,UAAAA,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAelH,QAAf,CAAwB,iBAAxB;;AACApB,UAAAA,KAAK,CAAC8F,OAAN,CAAc,MAAd,EAAsBC,IAAtB,CAA2B,YAAM;AAChC,gBAAI/F,KAAK,CAACsF,MAAN,CAAaiD,eAAjB,EAAkC;AACjCvI,cAAAA,KAAK,CAACgG,IAAN,CAAWwC,KAAX,CAAiBzI,CAAC,CAACgF,EAAF,CAAK0D,YAAtB,YACIzI,KAAK,CAAC0I,GAAN,CAAUC,OADd,iCAC4C3I,KAAK,CAAC0I,GAAN,CAAUE,MADtD,UACmE7C,IADnE,CACwE,YAAM;AAC7EhG,gBAAAA,CAAC,CAAC,GAAD,EAAMC,KAAK,CAACqI,GAAN,CAAUrG,GAAhB,CAAD,CAAsByG,YAAtB;AACA1I,gBAAAA,CAAC,CAAC,GAAD,EAAM,YAAN,CAAD,CAAqB0I,YAArB;AACA,eAJD;AAKA;;AACD,gBAAIzI,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAeR,MAAf,EAAJ,EAA6B;AAC5B9H,cAAAA,KAAK,CAACgG,IAAN,CAAWwC,KAAX,CAAiB1D,MAAM,CAAC+D,MAAxB,YACI7I,KAAK,CAAC0I,GAAN,CAAUC,OADd,0BACqC3I,KAAK,CAAC0I,GAAN,CAAUE,MAD/C,UAC4D7C,IAD5D,CACiE,YAAM;AACtEtB,gBAAAA,OAAO,GAAG,IAAIoE,MAAM,CAACC,OAAX,CAAmB9I,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAerC,GAAf,CAAmB,CAAnB,CAAnB,CAAV;;AACAxB,gBAAAA,OAAO,CAACsE,GAAR,CAAY,IAAIF,MAAM,CAACG,GAAX,CAAe;AAC1BC,kBAAAA,SAAS,EAAEJ,MAAM,CAACK,oBADQ;AAE1BC,kBAAAA,SAAS,EAAE;AAFe,iBAAf,CAAZ;;AAIA1E,gBAAAA,OAAO,CAACrB,EAAR,CAAW,UAAX,EAAuB,UAACC,GAAD,EAAS;AAC/B,sBAAI,CAACrD,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAe/E,QAAf,CAAwB,aAAxB,CAAL,EAA6C;AAC5CvD,oBAAAA,KAAK,CAACgC,GAAN,CAAUoH,UAAV;AACA;AACD,iBAJD;;AAKA3E,gBAAAA,OAAO,CAACrB,EAAR,CAAW,SAAX,EAAsB,UAACC,GAAD,EAAS;AAC9B,sBAAIrD,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAe/E,QAAf,CAAwB,aAAxB,CAAJ,EAA4C;AAC3CvD,oBAAAA,KAAK,CAACgC,GAAN,CAAUoH,UAAV;AACA;AACD,iBAJD;AAKA,eAjBD;AAkBA;AACD,WA5BD;AA6BA;AACD;;AAEDpH,MAAAA,GAAG,CAACqH,YAAJ;AACA,KAzOiB;AA2OlBC,IAAAA,WAAW,EAAE,qBAACC,OAAD,EAAa;AAEzBxJ,MAAAA,CAAC,CAAC,KAAD,EAAQwJ,OAAR,CAAD,CAAkBtE,cAAlB,CAAiC;AAChChC,QAAAA,KAAK,EAAEjD,KAAK,CAACsF,MAAN,CAAakE;AADY,OAAjC;AAGA,KAhPiB;;AAkPlB;;;;;AAKAC,IAAAA,aAAa,EAAE,uBAACjJ,IAAD,EAAU;AACxB,UAAMwB,GAAG,GAAGhC,KAAK,CAACqI,GAAN,CAAUrG,GAAtB;AACAjC,MAAAA,CAAC,CAAC,SAAD,EAAYiC,GAAZ,CAAD,CAAkBwB,WAAlB,CAA8B,QAA9B;AACAhD,MAAAA,IAAI,CAACY,QAAL,CAAc,MAAd,EACEA,QADF,CACW,QADX;AAEAZ,MAAAA,IAAI,CAACsC,OAAL,CAAa,IAAb,EAAmB1B,QAAnB,CAA4B,aAA5B,EACEO,QADF,CACW,IADX,EACiBP,QADjB,CAC0B,QAD1B,EAEEsI,IAFF;AAGAlJ,MAAAA,IAAI,CAACsC,OAAL,CAAa,UAAb,EAAyBU,WAAzB,CAAqC,MAArC;AACAhD,MAAAA,IAAI,CAACsC,OAAL,CAAa,IAAb,EAAmB1B,QAAnB,CAA4BZ,IAAI,CAACI,IAAL,CAAU,MAAV,EAAkB6C,OAAlB,CAA0B,IAA1B,EAAgC,EAAhC,IAAsC,QAAtC,GAAiD,EAA7E,EACEiG,IADF;;AAEA,UAAIlJ,IAAI,CAACsH,MAAL,EAAJ,EAAmB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,YACC6B,MAAM,GAAG3H,GAAG,CAAC4H,SAAJ,EADV;AAAA,YAECC,QAAQ,GAAG9J,CAAC,CAACS,IAAD,CAAD,CAAQsC,OAAR,CAAgB,SAAhB,EAA2B+G,QAA3B,EAFZ;;AAGA,YAAIA,QAAQ,CAACC,GAAT,GAAeH,MAAnB,EAA2B;AAC1B3H,UAAAA,GAAG,CAAC4H,SAAJ,CAAcC,QAAQ,CAACC,GAAvB;AACA,SAFD,MAEO,IAAID,QAAQ,CAACC,GAAT,GAAe9H,GAAG,CAAC+H,MAAJ,KAAeJ,MAAlC,EAA0C;AAChD3H,UAAAA,GAAG,CAAC4H,SAAJ,CAAcC,QAAQ,CAACC,GAAvB;AACA;AACD;AACD,KAlRiB;;AAoRlB;;;;;AAKAE,IAAAA,eAAe,EAAE,2BAAM;AACtB,UAAMC,KAAK,GAAGlK,CAAC,CAAC,eAAD,EAAkB,SAAlB,CAAf;AACAA,MAAAA,CAAC,CAAC,IAAD,EAAOkK,KAAP,CAAD,CAAeC,GAAf,CAAmB,aAAnB,EAAkC/B,MAAlC;;AACA,UAAI,CAACpI,CAAC,CAAC,IAAD,EAAOkK,KAAP,CAAD,CAAenC,MAAf,EAAL,EAA8B;AAC7B,YAAMqC,QAAQ,iFACapK,CAAC,CAAC,oBAAD,EAAuBC,KAAK,CAACqI,GAAN,CAAUrG,GAAjC,CAAD,CAAuCpB,IAAvC,CAA4C,MAA5C,CADb,8BAETZ,KAAK,CAACoK,IAAN,CAAWC,IAFF,oCAAd;AAKAJ,QAAAA,KAAK,CAACxI,MAAN,CAAa1B,CAAC,CAACoK,QAAD,CAAd;AACA;;AACDpK,MAAAA,CAAC,CAAC,cAAD,EAAiBC,KAAK,CAACqI,GAAN,CAAUrG,GAA3B,CAAD,CAAiCK,IAAjC,CAAsC,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnD,YAAM/B,IAAI,GAAGT,CAAC,CAACwC,GAAD,CAAd;AAAA,YACGpC,IAAI,GAAGJ,CAAC,CAACuK,IAAF,CAAO9J,IAAI,CAAC+J,KAAL,GACR5I,QADQ,CACC,QADD,EAEVwG,MAFU,GAGVqC,GAHU,GAIVrK,IAJU,EAAP,CADV;AAAA,YAMGU,IAAI,GAAGL,IAAI,CAACI,IAAL,CAAU,MAAV,CANV;AAAA,YAOGH,IAAI,GAAGV,CAAC,CAAC,mCAAD,CAAD,CAAuC0B,MAAvC,CAA8CZ,IAAI,CAAC4C,OAAL,CAAa,IAAb,EAAmB,EAAnB,IAChD1D,CAAC,CAAC,SAAD,CAAD,CAAamD,IAAb,CAAkB/C,IAAlB,EAAwBS,IAAxB,CAA6B,MAA7B,EAAqCC,IAArC,CADgD,GACHV,IAD3C,CAPV;AASA8J,QAAAA,KAAK,CAACxI,MAAN,CAAahB,IAAb;AACA,OAXD;AAYA,KAhTiB;;AAkTlB;;;;;AAKAgK,IAAAA,UAAU,EAAE,oBAACpH,GAAD,EAAS;AACpBA,MAAAA,GAAG,IAAIA,GAAG,CAACsD,cAAJ,EAAP;AACA3G,MAAAA,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAeoC,WAAf,CAA2B,UAA3B;;AACA,UAAI1K,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAe/E,QAAf,CAAwB,UAAxB,CAAJ,EAAyC;AACxCvD,QAAAA,KAAK,CAACoG,IAAN,CAAWuE,UAAX,CAAsB5K,CAAC,CAAC,GAAD,EAAMsD,GAAG,CAACC,aAAV,CAAvB,EACC,mBADD,EACsB,oBADtB;AAEA,OAHD,MAGO;AACNtD,QAAAA,KAAK,CAACoG,IAAN,CAAWuE,UAAX,CAAsB5K,CAAC,CAAC,GAAD,EAAMsD,GAAG,CAACC,aAAV,CAAvB,EACC,oBADD,EACuB,mBADvB;AAEA;;AACD,UAAIwB,MAAM,CAAC8F,YAAX,EAAyB;AACxB,YAAI5K,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAe/E,QAAf,CAAwB,UAAxB,CAAJ,EAAyC;AACxCqH,UAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqC,UAArC;AACA,SAFD,MAEO;AACND,UAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqC,EAArC;AACA;AACD;AACD,KAxUiB;;AA0UlB;;;;;AAKAzB,IAAAA,UAAU,EAAE,oBAAC/F,GAAD,EAAS;AACpBA,MAAAA,GAAG,IAAIA,GAAG,CAACsD,cAAJ,EAAP;AACA3G,MAAAA,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAeoC,WAAf,CAA2B,aAA3B;;AACA,UAAI5F,MAAM,CAAC8F,YAAX,EAAyB;AACxB,YAAI5K,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAe/E,QAAf,CAAwB,aAAxB,CAAJ,EAA4C;AAC3CqH,UAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqC,aAArC;AACA,SAFD,MAEO;AACND,UAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqC,EAArC;AACA;AACD;AACD,KAzViB;;AA2VlB;;;;;AAKAxB,IAAAA,YAAY,EAAE,wBAAM;AACnB;AACA,UAAIvE,MAAM,CAAC8F,YAAX,EAAyB;AACxB,YAAME,KAAK,GAAGF,YAAY,CAACG,OAAb,CAAqB,cAArB,CAAd;;AACA,YAAID,KAAK,KAAK,UAAd,EAA0B;AACzB9K,UAAAA,KAAK,CAACgC,GAAN,CAAUyI,UAAV,CAAqB;AACpBnH,YAAAA,aAAa,EAAEvD,CAAC,CAAC,WAAD,CADI;AAEpB4G,YAAAA,cAAc,EAAE,0BAAM,CAAE;AAFJ,WAArB;AAIA,SALD,MAKO;AACN3G,UAAAA,KAAK,CAACqI,GAAN,CAAUC,IAAV,CAAelH,QAAf,CAAwB0J,KAAxB;AACA;AACD;AACD;AA7WiB,GAAZ;AAiXP;;;;;;AAGA,MAAI9K,KAAK,CAAC0I,GAAN,CAAUsC,MAAd,EAAsB;AACrBhL,IAAAA,KAAK,CAACsF,MAAN,CAAa2F,OAAb,CAAqBC,IAArB,CAA0B,KAA1B;AACA,GAFD,MAEO;AACNlL,IAAAA,KAAK,CAACgC,GAAN,GAAYA,GAAZ;AACAmJ,IAAAA,OAAO,CAACC,KAAR,CAAc,6BAAd;AACA","sourcesContent":["/**\n * MyAMS navigation module\n */\n\nconst $ = MyAMS.$;\n\n\n/**\n * Dynamic navigation menu class\n */\nclass MenuHeader {\n\n\tconstructor(props) {\n\t\tthis.props = props;\n\t}\n\n\trender() {\n\t\treturn $('<li class=\"header\"></li>')\n\t\t\t.text(this.props.header || '');\n\t}\n}\n\nclass MenuDivider {\n\n\trender() {\n\t\treturn $('<li class=\"divider\"></li>');\n\t}\n}\n\nclass Menu {\n\n\tconstructor(items) {\n\t\tthis.items = items;\n\t}\n\n\trender() {\n\t\tconst menu = $('<div></div>');\n\t\tfor (const item of this.items) {\n\t\t\tif (item.label) {\n\t\t\t\tconst\n\t\t\t\t\tprops = $('<li></li>'),\n\t\t\t\t\tlink = $('<a></a>')\n\t\t\t\t\t\t.attr('href', item.href || '#')\n\t\t\t\t\t\t.attr('title', item.label);\n\t\t\t\tfor (const [key, val] of Object.entries(item.attrs || {})) {\n\t\t\t\t\tlink.attr(key, val);\n\t\t\t\t}\n\t\t\t\tif (item.icon) {\n\t\t\t\t\t$('<i class=\"fa-lg fa-fw mr-1\"></i>')\n\t\t\t\t\t\t.addClass(item.icon)\n\t\t\t\t\t\t.appendTo(link);\n\t\t\t\t}\n\t\t\t\t$('<span class=\"menu-item-parent\"></span>')\n\t\t\t\t\t.text(item.label)\n\t\t\t\t\t.appendTo(link);\n\t\t\t\tif (item.badge) {\n\t\t\t\t\t$('<span class=\"badge ml-1 mr-3 float-right\"></span>')\n\t\t\t\t\t\t.addClass(`bg-${item.badge.status}`)\n\t\t\t\t\t\t.text(item.badge.value)\n\t\t\t\t\t\t.appendTo(link);\n\t\t\t\t}\n\t\t\t\tlink.appendTo(props);\n\t\t\t\tif (item.items) {\n\t\t\t\t\t$('<ul></ul>')\n\t\t\t\t\t\t.append(new Menu(item.items).render())\n\t\t\t\t\t\t.appendTo(props);\n\t\t\t\t}\n\t\t\t\tprops.appendTo(menu);\n\t\t\t} else {\n\t\t\t\tnew MenuDivider().render().appendTo(menu);\n\t\t\t}\n\t\t}\n\t\treturn menu.children();\n\t}\n}\n\nexport class NavigationMenu {\n\n\tconstructor(menus, parent, settings) {\n\t\tthis.menus = menus;\n\t\tthis.parent = parent;\n\t\tthis.settings = settings;\n\t}\n\n\tgetMenus() {\n\t\tconst nav = $('<ul></ul>');\n\t\tfor (const props of this.menus) {\n\t\t\tif (props.header !== undefined) {\n\t\t\t\tnav.append(new MenuHeader(props).render());\n\t\t\t}\n\t\t\tnav.append(new Menu(props.items).render());\n\t\t}\n\t\treturn nav;\n\t}\n\n\trender() {\n\t\tconst menus = this.getMenus();\n\t\tthis.init(menus);\n\t\tthis.parent.append(menus);\n\t}\n\n\tinit(menus) {\n\t\tconst settings = this.settings;\n\t\t// add mark to menus with childrens\n\t\tmenus.find('li').each((idx, elt) => {\n\t\t\tconst menuItem = $(elt);\n\t\t\tif (menuItem.find('ul').length > 0) {\n\t\t\t\tconst firstLink = menuItem.find('a:first');\n\t\t\t\t// add multi-level sign next to link\n\t\t\t\tfirstLink.append(`<b class=\"collapse-sign\">${settings.closedSign}</b>`);\n\t\t\t\t// avoid jumping to top of page when href is a #\n\t\t\t\tif (firstLink.attr('href') === '#') {\n\t\t\t\t\tfirstLink.click(() => {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// open active level\n\t\tmenus.find('li.active').each((idx, elt) => {\n\t\t\tconst\n\t\t\t\tactiveParent = $(elt).parents('ul'),\n\t\t\t\tactiveItem = activeParent.parent('li');\n\t\t\tactiveParent.slideDown(settings.speed);\n\t\t\tactiveItem.find('b:first').html(settings.openedSign);\n\t\t\tactiveItem.addClass('open');\n\t\t});\n\t\t// handle click event\n\t\tmenus.find(\"li a\").on('click', (evt) => {\n\t\t\tconst link = $(evt.currentTarget);\n\t\t\tif (link.hasClass('active')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlink.parents('li').removeClass('active');\n\t\t\tconst\n\t\t\t\thref = link.attr('href').replace(/^#/, ''),\n\t\t\t\tparentUL = link.parent().find(\"ul\");\n\t\t\tif (settings.accordion) {\n\t\t\t\tconst\n\t\t\t\t\tparents = link.parent().parents(\"ul\"),\n\t\t\t\t\tvisibleMenus = menus.find(\"ul:visible\");\n\t\t\t\tvisibleMenus.each((visibleIndex, visibleElt) => {\n\t\t\t\t\tlet close = true;\n\t\t\t\t\tparents.each((parentIndex, parentElt) => {\n\t\t\t\t\t\tif (parentElt === visibleElt) {\n\t\t\t\t\t\t\tclose = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (close && (parentUL !== visibleElt)) {\n\t\t\t\t\t\tconst visibleItem = $(visibleElt);\n\t\t\t\t\t\tif (href || !visibleItem.hasClass('active')) {\n\t\t\t\t\t\t\tvisibleItem.slideUp(settings.speed, (slideElt) => {\n\t\t\t\t\t\t\t\tvisibleItem.parent(\"li\")\n\t\t\t\t\t\t\t\t\t.removeClass('open')\n\t\t\t\t\t\t\t\t\t.find(\"b:first\")\n\t\t\t\t\t\t\t\t\t.delay(settings.speed)\n\t\t\t\t\t\t\t\t\t.html(settings.closedSign);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst firstUL = link.parent().find(\"ul:first\");\n\t\t\tif (!href && firstUL.is(\":visible\") && !firstUL.hasClass(\"active\")) {\n\t\t\t\tfirstUL.slideUp(settings.speed, () => {\n\t\t\t\t\tlink.parent(\"li\")\n\t\t\t\t\t\t.removeClass(\"open\")\n\t\t\t\t\t\t.find(\"b:first\")\n\t\t\t\t\t\t.delay(settings.speed)\n\t\t\t\t\t\t.html(settings.closedSign);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfirstUL.slideDown(settings.speed, () => {\n\t\t\t\t\tlink.parent(\"li\")\n\t\t\t\t\t\t.addClass(\"open\")\n\t\t\t\t\t\t.find(\"b:first\")\n\t\t\t\t\t\t.delay(settings.speed)\n\t\t\t\t\t\t.html(settings.openedSign);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n}\n\n\nlet _initialized = false,\n\t_hammer = null;\n\n\n/**\n * Main navigation module\n */\n\nfunction _openPage(href) {\n\tif (href.startsWith('#')) {\n\t\tif (href !== location.hash) {\n\t\t\twindow.location.hash = href;\n\t\t}\n\t} else {\n\t\twindow.location = href;\n\t}\n}\n\nexport const nav = {\n\n\t/**\n\t * initialize navigation throught data attributes\n\t */\n\tinit: () => {\n\n\t\tif (_initialized) {\n\t\t\treturn;\n\t\t}\n\t\t_initialized = true;\n\n\t\t$.fn.extend({\n\n\t\t\tnavigationMenu: function(options) {\n\t\t\t\tif (this.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst data = this.data();\n\t\t\t\tconst defaults = {\n\t\t\t\t\taccordion: data.amsMenuAccordion !== false,\n\t\t\t\t\tspeed: 200\n\t\t\t\t}\n\t\t\t\tif (MyAMS.config.useSVGIcons) {\n\t\t\t\t\tconst\n\t\t\t\t\t\tdownIcon = FontAwesome.findIconDefinition({iconName: 'angle-down'}),\n\t\t\t\t\t\tupIcon = FontAwesome.findIconDefinition({iconName: 'angle-up'});\n\t\t\t\t\t$.extend(defaults, {\n\t\t\t\t\t\tclosedSign: `<em data-fa-i2svg>${FontAwesome.icon(downIcon).html}</em>`,\n\t\t\t\t\t\topenedSign: `<em data-fa-i2svg>${FontAwesome.icon(upIcon).html}</em>`\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t$.extend(defaults, {\n\t\t\t\t\t\tclosedSign: '<em class=\"fa fa-angle-down\"></em>',\n\t\t\t\t\t\topenedSign: '<em class=\"fa fa-angle-up\"></em>'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst settings = $.extend({}, defaults, options);\n\t\t\t\tif (data.amsMenuConfig) {\n\t\t\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\t\t\tMyAMS.ajax.get(data.amsMenuConfig).then(result => {\n\t\t\t\t\t\t\tconst menuFactory = MyAMS.core.getObject(data.amsMenuFactory) || NavigationMenu;\n\t\t\t\t\t\t\tnew menuFactory(result, $(this), settings).render();\n\t\t\t\t\t\t\tMyAMS.require('skin').then(() => {\n\t\t\t\t\t\t\t\tMyAMS.skin.checkURL();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t} else {  // static menus\n\t\t\t\t\tconst menus = $('ul', this);\n\t\t\t\t\tnew NavigationMenu(null, $(this), settings).init(menus);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (MyAMS.config.ajaxNav) {\n\n\t\t\t// Disable clicks on # hrefs\n\t\t\t$(document).on('click', 'a[href=\"#\"]', (evt) => {\n\t\t\t\tevt.preventDefault();\n\t\t\t});\n\n\t\t\t// Activate clicks\n\t\t\t$(document).on('click', 'a[href!=\"#\"]:not([data-toggle]), ' +\n\t\t\t\t\t\t\t\t   '[data-ams-url]:not([data-toggle])', (evt) => {\n\t\t\t\tconst link = $(evt.currentTarget),\n\t\t\t\t\t  handlers = link.data('ams-disabled-handlers');\n\t\t\t\tif ((handlers === true) || (handlers === 'click') || (handlers === 'all')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet href = link.attr('href') || link.data('ams-url');\n\t\t\t\tif (!href ||\n\t\t\t\t\thref.startsWith('javascript:') ||\n\t\t\t\t\tlink.attr('target') ||\n\t\t\t\t\t(link.data('ams-context-menu') === true)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tevt.preventDefault();\n\t\t\t\tevt.stopPropagation();\n\n\t\t\t\tlet url,\n\t\t\t\t\ttarget,\n\t\t\t\t\tparams;\n\t\t\t\tif (href.indexOf('?') >= 0) {\n\t\t\t\t\turl = href.split('?');\n\t\t\t\t\ttarget = url[0];\n\t\t\t\t\tparams = url[1].unserialize();\n\t\t\t\t} else {\n\t\t\t\t\ttarget = href;\n\t\t\t\t\tparams = undefined;\n\t\t\t\t}\n\t\t\t\tconst hrefGetter = MyAMS.core.getFunctionByName(target);\n\t\t\t\tif (typeof hrefGetter === 'function') {\n\t\t\t\t\thref = hrefGetter(link, params);\n\t\t\t\t}\n\t\t\t\tif (typeof href === 'function') {\n\t\t\t\t\thref(link, params);\n\t\t\t\t} else {\n\t\t\t\t\t// Standard AJAX or browser URL call\n\t\t\t\t\t// Convert %23 characters to #\n\t\t\t\t\thref = href.replace(/%23/, '#');\n\t\t\t\t\tif (evt.ctrlKey) {\n\t\t\t\t\t\twindow.open && window.open(href);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst linkTarget = link.data('ams-target') || link.attr('target');\n\t\t\t\t\t\tif (linkTarget) {\n\t\t\t\t\t\t\tif (linkTarget === '_blank') {\n\t\t\t\t\t\t\t\twindow.open && window.open(href);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (MyAMS.form) {\n\t\t\t\t\t\t\t\t\tMyAMS.form.confirmChangedForm().then((result) => {\n\t\t\t\t\t\t\t\t\t\tif (result !== 'success') {\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tMyAMS.skin && MyAMS.skin.loadURL(href, linkTarget,\n\t\t\t\t\t\t\t\t\t\t\tlink.data('ams-link-options'),\n\t\t\t\t\t\t\t\t\t\t\tlink.data('ams-link-callback'));\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tMyAMS.skin && MyAMS.skin.loadURL(href, linkTarget,\n\t\t\t\t\t\t\t\t\t\tlink.data('ams-link-options'),\n\t\t\t\t\t\t\t\t\t\tlink.data('ams-link-callback'));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (MyAMS.form) {\n\t\t\t\t\t\t\t\tMyAMS.form.confirmChangedForm().then((result) => {\n\t\t\t\t\t\t\t\t\tif (result !== 'success') {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t_openPage(href);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_openPage(href);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Blank target clicks\n\t\t\t$(document).on('click', 'a[target=\"_blank\"]', (evt) => {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tconst target = $(evt.currentTarget);\n\t\t\t\twindow.open && window.open(target.attr('href'));\n\t\t\t\tMyAMS.stats && MyAMS.stats.logEvent(\n\t\t\t\t\ttarget.data('ams-stats-category') || 'Navigation',\n\t\t\t\t\ttarget.data('ams-stats-action') || 'External',\n\t\t\t\t\ttarget.data('ams-stats-label') || target.attr('href'));\n\t\t\t});\n\n\t\t\t// Top target clicks\n\t\t\t$(document).on('click', 'a[target=\"_top\"]', (evt) => {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tMyAMS.form && MyAMS.form.confirmChangedForm().then((result) => {\n\t\t\t\t\tif (result !== 'success') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\twindow.location = $(evt.currentTarget).attr('href');\n\t\t\t\t})\n\t\t\t});\n\n\t\t\t// Disable clicks on disabled tabs\n\t\t\t$(document).on(\"click\", '.nav-tabs a[data-toggle=tab]', (evt) => {\n\t\t\t\tif ($(evt.currentTarget).parent('li').hasClass(\"disabled\")) {\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Enable tabs dynamic loading\n\t\t\t$(document).on('show.bs.tab', (evt) => {\n\t\t\t\tlet link = $(evt.target);\n\t\t\t\tif (link.exists() && (link.get(0).tagName !== 'A')) {\n\t\t\t\t\tlink = $('a[href]', link);\n\t\t\t\t}\n\t\t\t\tconst data = link.data();\n\t\t\t\tif (data && data.amsUrl) {\n\t\t\t\t\tif (data.amsTabLoaded) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlink.append('<i class=\"fa fa-spin fa-cog ml-1\"></i>');\n\t\t\t\t\tMyAMS.require('skin').then(() => {\n\t\t\t\t\t\tMyAMS.skin.loadURL(data.amsUrl, link.attr('href')).then(() => {\n\t\t\t\t\t\t\tif (data.amsTabLoadOnce) {\n\t\t\t\t\t\t\t\tdata.amsTabLoaded = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$('i', link).remove();\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t$('i', link).remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!MyAMS.config.isMobile) {\n\t\t\t\tMyAMS.dom.root.addClass('desktop-detected');\n\t\t\t} else {\n\t\t\t\tMyAMS.dom.root.addClass('mobile-detected');\n\t\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\t\tif (MyAMS.config.enableFastclick) {\n\t\t\t\t\t\tMyAMS.ajax.check($.fn.noClickDelay,\n\t\t\t\t\t\t\t`${MyAMS.env.baseURL}../ext/js-smartclick${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t\t\t$('a', MyAMS.dom.nav).noClickDelay();\n\t\t\t\t\t\t\t$('a', '#hide-menu').noClickDelay();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (MyAMS.dom.root.exists()) {\n\t\t\t\t\t\tMyAMS.ajax.check(window.Hammer,\n\t\t\t\t\t\t\t`${MyAMS.env.baseURL}../ext/hammer${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t\t\t_hammer = new Hammer.Manager(MyAMS.dom.root.get(0));\n\t\t\t\t\t\t\t_hammer.add(new Hammer.Pan({\n\t\t\t\t\t\t\t\tdirection: Hammer.DIRECTION_HORIZONTAL,\n\t\t\t\t\t\t\t\tthreshold: 200\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t_hammer.on('panright', (evt) => {\n\t\t\t\t\t\t\t\tif (!MyAMS.dom.root.hasClass('hidden-menu')) {\n\t\t\t\t\t\t\t\t\tMyAMS.nav.switchMenu();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_hammer.on('panleft', (evt) => {\n\t\t\t\t\t\t\t\tif (MyAMS.dom.root.hasClass('hidden-menu')) {\n\t\t\t\t\t\t\t\t\tMyAMS.nav.switchMenu();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tnav.restoreState();\n\t},\n\n\tinitElement: (element) => {\n\n\t\t$('nav', element).navigationMenu({\n\t\t\tspeed: MyAMS.config.menuSpeed\n\t\t});\n\t},\n\n\t/**\n\t * Display current active menu\n\t *\n \t * @param menu: current active menu\n\t */\n\tsetActiveMenu: (menu) => {\n\t\tconst nav = MyAMS.dom.nav;\n\t\t$('.active', nav).removeClass('active');\n\t\tmenu.addClass('open')\n\t\t\t.addClass('active');\n\t\tmenu.parents('li').addClass('open active')\n\t\t\t.children('ul').addClass('active')\n\t\t\t.show();\n\t\tmenu.parents('li:first').removeClass('open');\n\t\tmenu.parents('ul').addClass(menu.attr('href').replace(/^#/, '') ? 'active' : '')\n\t\t\t.show();\n\t\tif (menu.exists()) {\n\t\t\t// MyAMS.require('ajax').then(() => {\n\t\t\t// \tMyAMS.ajax.check($.fn.scrollTo,\n\t\t\t// \t\t`${MyAMS.env.baseURL}../ext/jquery-scrollto${MyAMS.env.extext}.js`).then(() => {\n\t\t\t// \t\tnav.scrollTo(menu);\n\t\t\t// \t});\n\t\t\t// })\n\t\t\tconst\n\t\t\t\tscroll = nav.scrollTop(),\n\t\t\t\tposition = $(menu).parents('li:last').position();\n\t\t\tif (position.top < scroll) {\n\t\t\t\tnav.scrollTop(position.top);\n\t\t\t} else if (position.top > nav.height() + scroll) {\n\t\t\t\tnav.scrollTop(position.top);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Internal breadcrumbs drawing function\n\t *\n\t * @private\n\t */\n\tdrawBreadcrumbs: () => {\n\t\tconst crumb = $('ol.breadcrumb', '#ribbon');\n\t\t$('li', crumb).not('.persistent').remove();\n\t\tif (!$('li', crumb).exists()) {\n\t\t\tconst template = `<li class=\"breadcrumb-item\">\n\t\t\t\t\t<a class=\"p-r-1\" href=\"${$('a[href!=\"#\"]:first', MyAMS.dom.nav).attr('href')}\">\n\t\t\t\t\t\t${MyAMS.i18n.HOME}\n\t\t\t\t\t</a>\n\t\t\t\t</li>`;\n\t\t\tcrumb.append($(template));\n\t\t}\n\t\t$('li.active >a', MyAMS.dom.nav).each((idx, elt) => {\n\t\t\tconst menu = $(elt),\n\t\t\t\t  text = $.trim(menu.clone()\n\t\t\t\t\t  \t\t\t\t.children('.badge')\n\t\t\t\t\t\t\t\t\t.remove()\n\t\t\t\t\t\t\t\t\t.end()\n\t\t\t\t\t\t\t\t\t.text()),\n\t\t\t\t  href = menu.attr('href'),\n\t\t\t\t  item = $('<li class=\"breadcrumb-item\"></li>').append(href.replace(/^#/, '') ?\n\t\t\t\t  \t\t   $('<a></a>').html(text).attr('href', href) : text);\n\t\t\tcrumb.append(item);\n\t\t});\n\t},\n\n\t/**\n\t * Click handler for navigation menu \"minify\" button\n\t *\n\t * @param evt: original click event\n\t */\n\tminifyMenu: (evt) => {\n\t\tevt && evt.preventDefault();\n\t\tMyAMS.dom.root.toggleClass('minified');\n\t\tif (MyAMS.dom.root.hasClass('minified')) {\n\t\t\tMyAMS.core.switchIcon($('i', evt.currentTarget),\n\t\t\t\t'arrow-circle-left', 'arrow-circle-right');\n\t\t} else {\n\t\t\tMyAMS.core.switchIcon($('i', evt.currentTarget),\n\t\t\t\t'arrow-circle-right', 'arrow-circle-left');\n\t\t}\n\t\tif (window.localStorage) {\n\t\t\tif (MyAMS.dom.root.hasClass('minified')) {\n\t\t\t\tlocalStorage.setItem('window-state', 'minified');\n\t\t\t} else {\n\t\t\t\tlocalStorage.setItem('window-state', '');\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Click handler for menu hide button\n\t *\n\t * @param evt: original click event\n\t */\n\tswitchMenu: (evt) => {\n\t\tevt && evt.preventDefault();\n\t\tMyAMS.dom.root.toggleClass('hidden-menu');\n\t\tif (window.localStorage) {\n\t\t\tif (MyAMS.dom.root.hasClass('hidden-menu')) {\n\t\t\t\tlocalStorage.setItem('window-state', 'hidden-menu');\n\t\t\t} else {\n\t\t\t\tlocalStorage.setItem('window-state', '');\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Restore window state on application startup\n\t *\n\t * Previous window state is stored in local storage.\n\t */\n\trestoreState: () => {\n\t\t// restore window state\n\t\tif (window.localStorage) {\n\t\t\tconst state = localStorage.getItem('window-state');\n\t\t\tif (state === 'minified') {\n\t\t\t\tMyAMS.nav.minifyMenu({\n\t\t\t\t\tcurrentTarget: $('#minifyme'),\n\t\t\t\t\tpreventDefault: () => {}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tMyAMS.dom.root.addClass(state);\n\t\t\t}\n\t\t}\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (MyAMS.env.bundle) {\n\tMyAMS.config.modules.push('nav');\n} else {\n\tMyAMS.nav = nav;\n\tconsole.debug(\"MyAMS: nav module loaded...\");\n}\n"],"file":"mod-nav-dev.js"}