{"version":3,"sources":["mod-skin.js"],"names":["$","MyAMS","_initialized","skin","init","config","enableTooltips","dom","root","tooltip","selector","html","enableHtmlTooltips","mousedown","evt","currentTarget","checkURL","window","on","initElement","element","Promise","resolve","reject","nav","hash","location","url","replace","tag","tagPosition","indexOf","substring","menu","container","exists","loadURL","then","prefix","data","fullPrefix","document","title","attr","anchor","require","ajax","check","fn","scrollTo","env","baseURL","extext","offset","setActiveMenu","drawBreadcrumbs","activeUrl","first","href","target","options","startsWith","substr","core","clearContent","status","defaults","type","dataType","cache","beforeSend","i18n","LOADING","preLoadCallback","executeFunctionByName","preLoadCallbackOptions","text","animate","scrollTop","settings","extend","veto","trigger","result","xhr","isArray","response","getResponse","contentType","remove","handleJSON","parents","removeClass","css","opacity","delay","initContent","form","setFocus","stats","logPageview","error","ERROR","responseText","bundle","modules","push","console","debug"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;AAIA,MAAMA,CAAC,GAAGC,KAAK,CAACD,CAAhB;AAGA,MAAIE,YAAY,GAAG,KAAnB;AAGO,MAAMC,IAAI,GAAG;AAEnB;;;AAGAC,IAAAA,IAAI,EAAE,gBAAM;AAEX,UAAIF,YAAJ,EAAkB;AACjB;AACA;;AACDA,MAAAA,YAAY,GAAG,IAAf,CALW,CAOX;;AACA,UAAID,KAAK,CAACI,MAAN,CAAaC,cAAjB,EAAiC;AAChCL,QAAAA,KAAK,CAACM,GAAN,CAAUC,IAAV,CAAeC,OAAf,CAAuB;AACtBC,UAAAA,QAAQ,EAAE,OADY;AAEtBC,UAAAA,IAAI,EAAEV,KAAK,CAACI,MAAN,CAAaO;AAFG,SAAvB;AAIA;;AACDZ,MAAAA,CAAC,CAAC,OAAD,CAAD,CAAWa,SAAX,CAAqB,UAACC,GAAD,EAAS;AAC7Bd,QAAAA,CAAC,CAACc,GAAG,CAACC,aAAL,CAAD,CAAqBN,OAArB,CAA6B,MAA7B;AACA,OAFD,EAdW,CAkBX;;AACAN,MAAAA,IAAI,CAACa,QAAL;AACAhB,MAAAA,CAAC,CAACiB,MAAD,CAAD,CAAUC,EAAV,CAAa,YAAb,EAA2Bf,IAAI,CAACa,QAAhC;AACA,KA1BkB;;AA4BnB;;;;;AAKAG,IAAAA,WAAW,EAAE,qBAACC,OAAD,EAAa;AACzB,UAAI,CAACnB,KAAK,CAACI,MAAN,CAAaC,cAAlB,EAAkC;AACjCN,QAAAA,CAAC,CAAC,OAAD,EAAUoB,OAAV,CAAD,CAAoBX,OAApB,CAA4B;AAC3BE,UAAAA,IAAI,EAAEV,KAAK,CAACI,MAAN,CAAaO;AADQ,SAA5B;AAGA;AACD,KAvCkB;;AAyCnB;;;;;;;AAOAI,IAAAA,QAAQ,EAAE,oBAAM;AACf,aAAO,IAAIK,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,YAAMC,GAAG,GAAGvB,KAAK,CAACM,GAAN,CAAUiB,GAAtB;AACA,YAAIC,IAAI,GAAGC,QAAQ,CAACD,IAApB;AAAA,YACCE,GAAG,GAAGF,IAAI,CAACG,OAAL,CAAa,IAAb,EAAmB,EAAnB,CADP;AAAA,YAECC,GAAG,GAAG,IAFP;AAGA,YAAMC,WAAW,GAAGH,GAAG,CAACI,OAAJ,CAAY,GAAZ,CAApB;;AACA,YAAID,WAAW,GAAG,CAAlB,EAAqB;AACpBL,UAAAA,IAAI,GAAGA,IAAI,CAACO,SAAL,CAAe,CAAf,EAAkBF,WAAW,GAAG,CAAhC,CAAP;AACAD,UAAAA,GAAG,GAAGF,GAAG,CAACK,SAAJ,CAAcF,WAAW,GAAG,CAA5B,CAAN;AACAH,UAAAA,GAAG,GAAGA,GAAG,CAACK,SAAJ,CAAc,CAAd,EAAiBF,WAAjB,CAAN;AACA;;AACD,YAAIG,IAAJ;;AACA,YAAIN,GAAJ,EAAS;AACR;AACA,cAAIO,SAAS,GAAGlC,CAAC,CAAC,UAAD,CAAjB;;AACA,cAAI,CAACkC,SAAS,CAACC,MAAV,EAAL,EAAyB;AACxBD,YAAAA,SAAS,GAAGjC,KAAK,CAACM,GAAN,CAAUC,IAAtB;AACA;;AACDyB,UAAAA,IAAI,GAAGjC,CAAC,oBAAYyB,IAAZ,UAAsBD,GAAtB,CAAR,CANQ,CAOR;;AACAvB,UAAAA,KAAK,CAACE,IAAN,CAAWiC,OAAX,CAAmBT,GAAnB,EAAwBO,SAAxB,EAAmCG,IAAnC,CAAwC,YAAM;AAC7C,gBACCC,MAAM,GAAGtC,CAAC,CAAC,iBAAD,CAAD,CAAqBuC,IAArB,CAA0B,kBAA1B,CADV;AAAA,gBAECC,UAAU,GAAGF,MAAM,aAAMA,MAAN,WAAoB,EAFxC;AAGAG,YAAAA,QAAQ,CAACC,KAAT,aAAoBF,UAApB,SAAiCxC,CAAC,CAAC,6BAAD,EAAgCkC,SAAhC,CAAD,CAA4CK,IAA5C,CAAiD,gBAAjD,KAChCN,IAAI,CAACU,IAAL,CAAU,OAAV,CADgC,IACVF,QAAQ,CAACC,KADhC;;AAEA,gBAAIb,GAAJ,EAAS;AACR,kBAAMe,MAAM,GAAG5C,CAAC,YAAK6B,GAAL,EAAhB;;AACA,kBAAIe,MAAM,CAACT,MAAP,EAAJ,EAAqB;AACpBlC,gBAAAA,KAAK,CAAC4C,OAAN,CAAc,MAAd,EAAsBR,IAAtB,CAA2B,YAAM;AAChCpC,kBAAAA,KAAK,CAAC6C,IAAN,CAAWC,KAAX,CAAiB/C,CAAC,CAACgD,EAAF,CAAKC,QAAtB,YACIhD,KAAK,CAACiD,GAAN,CAAUC,OADd,mCAC8ClD,KAAK,CAACiD,GAAN,CAAUE,MADxD,UACqEf,IADrE,CAC0E,YAAM;AAC/ErC,oBAAAA,CAAC,CAAC,OAAD,CAAD,CAAWiD,QAAX,CAAoBL,MAApB,EAA4B;AAACS,sBAAAA,MAAM,EAAE,CAAC;AAAV,qBAA5B;AACA,mBAHD;AAIA,iBALD;AAMA;AACD,aAhB4C,CAiB7C;;;AACA,gBAAIpB,IAAI,CAACE,MAAL,EAAJ,EAAmB;AAClBlC,cAAAA,KAAK,CAAC4C,OAAN,CAAc,KAAd,EAAqBR,IAArB,CAA0B,YAAM;AAC/BpC,gBAAAA,KAAK,CAACuB,GAAN,CAAU8B,aAAV,CAAwBrB,IAAxB;AACAhC,gBAAAA,KAAK,CAACuB,GAAN,CAAU+B,eAAV;AACA,eAHD,EAGGlB,IAHH,CAGQf,OAHR;AAIA,aALD,MAKO;AACNA,cAAAA,OAAO;AACP;AACD,WA1BD,EA0BGC,MA1BH;AA2BA,SAnCD,MAmCO;AACN;AACA;AACA,cAAMiC,SAAS,GAAGxD,CAAC,CAAC,wBAAD,CAAD,CAA4BuC,IAA5B,CAAiC,iBAAjC,CAAlB;;AACA,cAAIiB,SAAJ,EAAe;AACdvB,YAAAA,IAAI,GAAGjC,CAAC,oBAAYwD,SAAZ,UAA2BhC,GAA3B,CAAR;AACA,WAFD,MAEO;AACNS,YAAAA,IAAI,GAAGjC,CAAC,CAAC,uBAAD,EAA0BwB,GAA1B,CAAD,CAAgCiC,KAAhC,EAAP;AACA;;AACD,cAAIxB,IAAI,CAACE,MAAL,EAAJ,EAAmB;AAClBlC,YAAAA,KAAK,CAAC4C,OAAN,CAAc,KAAd,EAAqBR,IAArB,CAA0B,YAAM;AAC/BpC,cAAAA,KAAK,CAACuB,GAAN,CAAU8B,aAAV,CAAwBrB,IAAxB;;AACA,kBAAIuB,SAAJ,EAAe;AACdvD,gBAAAA,KAAK,CAACuB,GAAN,CAAU+B,eAAV;AACA,eAFD,MAEO;AACN;AACA;AACAtC,gBAAAA,MAAM,CAACS,QAAP,CAAgBE,OAAhB,CAAwBX,MAAM,CAACS,QAAP,CAAgBgC,IAAhB,GAAuBzB,IAAI,CAACU,IAAL,CAAU,MAAV,CAA/C;AACA;AACD,aATD,EASGN,IATH,CASQf,OATR,EASiBC,MATjB;AAUA,WAXD,MAWO;AACND,YAAAA,OAAO;AACP;AACD;AACD,OAvEM,CAAP;AAwEA,KAzHkB;;AA2HnB;;;;;;;;;;;AAWAc,IAAAA,OAAO,EAAE,iBAACT,GAAD,EAAMgC,MAAN,EAA6B;AAAA,UAAfC,OAAe,uEAAP,EAAO;AACrC,aAAO,IAAIvC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,YAAII,GAAG,CAACkC,UAAJ,CAAe,GAAf,CAAJ,EAAyB;AACxBlC,UAAAA,GAAG,GAAGA,GAAG,CAACmC,MAAJ,CAAW,CAAX,CAAN;AACA;;AACDH,QAAAA,MAAM,GAAG3D,CAAC,CAAC2D,MAAD,CAAV;AACA1D,QAAAA,KAAK,CAAC8D,IAAN,CAAWC,YAAX,CAAwBL,MAAxB,EAAgCtB,IAAhC,CAAqC,UAAC4B,MAAD,EAAY;AAChD,cAAI,CAACA,MAAL,EAAa;AAAG;AACf;AACA;;AACD,cAAMC,QAAQ,GAAG;AAChBC,YAAAA,IAAI,EAAE,KADU;AAEhBxC,YAAAA,GAAG,EAAEA,GAFW;AAGhByC,YAAAA,QAAQ,EAAE,MAHM;AAIhBC,YAAAA,KAAK,EAAE,KAJS;AAKhBC,YAAAA,UAAU,EAAE,sBAAM;AACjBX,cAAAA,MAAM,CAAChD,IAAP,qEAAqEV,KAAK,CAACsE,IAAN,CAAWC,OAAhF;;AACA,kBAAIZ,OAAO,IAAIA,OAAO,CAACa,eAAvB,EAAwC;AACvCxE,gBAAAA,KAAK,CAAC8D,IAAN,CAAWW,qBAAX,CAAiCd,OAAO,CAACa,eAAzC,EAA0D,KAA1D,EAAgEb,OAAO,CAACe,sBAAxE;AACA;;AACD,kBAAIhB,MAAM,CAAChB,IAAP,CAAY,IAAZ,MAAsB,SAA1B,EAAqC;AACpC1C,gBAAAA,KAAK,CAAC4C,OAAN,CAAc,KAAd,EAAqBR,IAArB,CAA0B,YAAM;AAC/B,sBACCC,MAAM,GAAGtC,CAAC,CAAC,iBAAD,CAAD,CAAqBuC,IAArB,CAA0B,kBAA1B,CADV;AAAA,sBAECC,UAAU,GAAGF,MAAM,aAAMA,MAAN,WAAoB,EAFxC;AAGAG,kBAAAA,QAAQ,CAACC,KAAT,aAAoBF,UAApB,SAAiCxC,CAAC,CAAC,2BAAD,CAAD,CAA+B4E,IAA/B,EAAjC;AACA3E,kBAAAA,KAAK,CAACM,GAAN,CAAUC,IAAV,CAAeqE,OAAf,CAAuB;AAACC,oBAAAA,SAAS,EAAE;AAAZ,mBAAvB,EAAuC,MAAvC;AACA,iBAND;AAOA;AACD;AAnBe,WAAjB;AAqBA,cACCC,QAAQ,GAAG/E,CAAC,CAACgF,MAAF,CAAS,EAAT,EAAad,QAAb,EAAuBN,OAAvB,CADZ;AAAA,cAECqB,IAAI,GAAG;AAAEA,YAAAA,IAAI,EAAE;AAAR,WAFR;AAGAtB,UAAAA,MAAM,CAACuB,OAAP,CAAe,yBAAf,EAA0C,CAACH,QAAD,EAAWE,IAAX,CAA1C;;AACA,cAAIA,IAAI,CAACA,IAAT,EAAe;AACd;AACA;;AACDjF,UAAAA,CAAC,CAAC8C,IAAF,CAAOiC,QAAP,EAAiB1C,IAAjB,CAAsB,UAAC8C,MAAD,EAASlB,MAAT,EAAiBmB,GAAjB,EAAyB;AAC9C,gBAAIpF,CAAC,CAACqF,OAAF,CAAUF,MAAV,CAAJ,EAAuB;AAAA,4BACEA,MADF;;AAAA;;AACrBA,cAAAA,MADqB;AACblB,cAAAA,MADa;AACLmB,cAAAA,GADK;AAEtB;;AACDnF,YAAAA,KAAK,CAAC4C,OAAN,CAAc,MAAd,EAAsBR,IAAtB,CAA2B,YAAM;AAChC,kBAAMiD,QAAQ,GAAGrF,KAAK,CAAC6C,IAAN,CAAWyC,WAAX,CAAuBH,GAAvB,CAAjB;;AACA,kBAAIE,QAAJ,EAAc;AACb,oBACClB,QAAQ,GAAGkB,QAAQ,CAACE,WADrB;AAAA,oBAECL,QAAM,GAAGG,QAAQ,CAAC/C,IAFnB;AAGAvC,gBAAAA,CAAC,CAAC,UAAD,EAAa2D,MAAb,CAAD,CAAsB8B,MAAtB;;AACA,wBAAQrB,QAAR;AACC,uBAAK,MAAL;AACCnE,oBAAAA,KAAK,CAAC6C,IAAN,CAAW4C,UAAX,CAAsBP,QAAtB,EAA8BxB,MAA9B;AACArC,oBAAAA,OAAO,CAAC6D,QAAD,EAASlB,MAAT,EAAiBmB,GAAjB,CAAP;AACA;;AACD,uBAAK,QAAL;AACA,uBAAK,KAAL;AACC9D,oBAAAA,OAAO,CAAC6D,QAAD,EAASlB,MAAT,EAAiBmB,GAAjB,CAAP;AACA;;AACD,uBAAK,MAAL;AACA,uBAAK,MAAL;AACA;AACCzB,oBAAAA,MAAM,CAACgC,OAAP,CAAe,SAAf,EAA0BC,WAA1B,CAAsC,QAAtC;AACAjC,oBAAAA,MAAM,CAACkC,GAAP,CAAW;AAACC,sBAAAA,OAAO,EAAE;AAAV,qBAAX,EACEnF,IADF,CACOwE,QADP,EAEES,WAFF,CAEc,QAFd,EAGEG,KAHF,CAGQ,EAHR,EAIElB,OAJF,CAIU;AAACiB,sBAAAA,OAAO,EAAE;AAAV,qBAJV,EAI4B,GAJ5B;AAKA7F,oBAAAA,KAAK,CAAC8D,IAAN,CAAWW,qBAAX,CAAiCf,MAAM,CAACpB,IAAP,CAAY,kBAAZ,KAChCtC,KAAK,CAACI,MAAN,CAAa2F,WADd,EAC2B/E,MAD3B,EACmC0C,MADnC,EAC2CtB,IAD3C,CACgD,YAAM;AACrDpC,sBAAAA,KAAK,CAACgG,IAAN,IAAchG,KAAK,CAACgG,IAAN,CAAWC,QAAX,CAAoBvC,MAApB,CAAd;AACAA,sBAAAA,MAAM,CAACuB,OAAP,CAAe,wBAAf;AACA5D,sBAAAA,OAAO,CAAC6D,QAAD,EAASlB,MAAT,EAAiBmB,GAAjB,CAAP;AACA,qBALD;AAlBF;;AAyBAnF,gBAAAA,KAAK,CAACkG,KAAN,IAAelG,KAAK,CAACkG,KAAN,CAAYC,WAAZ,EAAf;AACA;AACD,aAlCD;AAmCA,WAvCD,EAuCG,UAAChB,GAAD,EAAMnB,MAAN,EAAcoC,KAAd,EAAwB;AAC1B1C,YAAAA,MAAM,CAAChD,IAAP,0GACKV,KAAK,CAACsE,IAAN,CAAW+B,KADhB,cACyBD,KADzB,kBACsCjB,GAAG,CAACmB,YAD1C;AAEAhF,YAAAA,MAAM,CAAC8E,KAAD,CAAN;AACA,WA3CD;AA4CA,SA5ED;AA6EA,OAlFM,CAAP;AAmFA;AA1NkB,GAAb;AA8NP;;;;;;AAGA,MAAIpF,MAAM,CAAChB,KAAX,EAAkB;AACjB,QAAIA,KAAK,CAACiD,GAAN,CAAUsD,MAAd,EAAsB;AACrBvG,MAAAA,KAAK,CAACI,MAAN,CAAaoG,OAAb,CAAqBC,IAArB,CAA0B,MAA1B;AACA,KAFD,MAEO;AACNzG,MAAAA,KAAK,CAACE,IAAN,GAAaA,IAAb;AACAwG,MAAAA,OAAO,CAACC,KAAR,CAAc,8BAAd;AACA;AACD","sourcesContent":["/* global MyAMS */\n/**\n * MyAMS generic skin features\n */\n\nconst $ = MyAMS.$;\n\n\nlet _initialized = false;\n\n\nexport const skin = {\n\n\t/**\n\t * Main *skin* module initialization\n\t */\n\tinit: () => {\n\n\t\tif (_initialized) {\n\t\t\treturn;\n\t\t}\n\t\t_initialized = true;\n\n\t\t// handle tooltips\n\t\tif (MyAMS.config.enableTooltips) {\n\t\t\tMyAMS.dom.root.tooltip({\n\t\t\t\tselector: '.hint',\n\t\t\t\thtml: MyAMS.config.enableHtmlTooltips\n\t\t\t});\n\t\t}\n\t\t$('.hint').mousedown((evt) => {\n\t\t\t$(evt.currentTarget).tooltip('hide');\n\t\t});\n\n\t\t// check URL when hash is changed\n\t\tskin.checkURL();\n\t\t$(window).on('hashchange', skin.checkURL);\n\t},\n\n\t/**\n\t * Specific content initialization\n\t *\n\t * @param element: the element to initialize\n\t */\n\tinitElement: (element) => {\n\t\tif (!MyAMS.config.enableTooltips) {\n\t\t\t$('.hint', element).tooltip({\n\t\t\t\thtml: MyAMS.config.enableHtmlTooltips\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * URL checking function.\n\t *\n\t * This function is an event handler for window's \"hashchange\" event, which is\n\t * triggered when the window location hash is modified; this can notably occur when a\n\t * navigation menu, for example, is clicked.\n\t */\n\tcheckURL: () => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst nav = MyAMS.dom.nav;\n\t\t\tlet hash = location.hash,\n\t\t\t\turl = hash.replace(/^#/, ''),\n\t\t\t\ttag = null;\n\t\t\tconst tagPosition = url.indexOf('!');\n\t\t\tif (tagPosition > 0) {\n\t\t\t\thash = hash.substring(0, tagPosition + 1);\n\t\t\t\ttag = url.substring(tagPosition + 1);\n\t\t\t\turl = url.substring(0, tagPosition);\n\t\t\t}\n\t\t\tlet menu;\n\t\t\tif (url) {\n\t\t\t\t// new hash\n\t\t\t\tlet container = $('#content');\n\t\t\t\tif (!container.exists()) {\n\t\t\t\t\tcontainer = MyAMS.dom.root;\n\t\t\t\t}\n\t\t\t\tmenu = $(`a[href=\"${hash}\"]`, nav);\n\t\t\t\t// load specified URL into '#content'\n\t\t\t\tMyAMS.skin.loadURL(url, container).then(() => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tprefix = $('html head title').data('ams-title-prefix'),\n\t\t\t\t\t\tfullPrefix = prefix ? `${prefix} > ` : '';\n\t\t\t\t\tdocument.title = `${fullPrefix}${$('[data-ams-page-title]:first', container).data('ams-page-title') ||\n\t\t\t\t\t\tmenu.attr('title') || document.title}`;\n\t\t\t\t\tif (tag) {\n\t\t\t\t\t\tconst anchor = $(`#${tag}`);\n\t\t\t\t\t\tif (anchor.exists()) {\n\t\t\t\t\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\t\t\t\t\tMyAMS.ajax.check($.fn.scrollTo,\n\t\t\t\t\t\t\t\t\t`${MyAMS.env.baseURL}../ext/jquery-scrollto${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t\t\t\t\t$('#main').scrollTo(anchor, {offset: -15});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// try to activate matching navigation menu\n\t\t\t\t\tif (menu.exists()) {\n\t\t\t\t\t\tMyAMS.require('nav').then(() => {\n\t\t\t\t\t\t\tMyAMS.nav.setActiveMenu(menu);\n\t\t\t\t\t\t\tMyAMS.nav.drawBreadcrumbs();\n\t\t\t\t\t\t}).then(resolve);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t}, reject);\n\t\t\t} else {\n\t\t\t\t// empty hash! We try to check if a specific menu was activated with a custom\n\t\t\t\t// data attribute, otherwise we go to the first navigation menu!\n\t\t\t\tconst activeUrl = $('[data-ams-active-menu]').data('ams-active-menu');\n\t\t\t\tif (activeUrl) {\n\t\t\t\t\tmenu = $(`a[href=\"${activeUrl}\"]`, nav);\n\t\t\t\t} else {\n\t\t\t\t\tmenu = $('>ul >li >a[href!=\"#\"]', nav).first();\n\t\t\t\t}\n\t\t\t\tif (menu.exists()) {\n\t\t\t\t\tMyAMS.require('nav').then(() => {\n\t\t\t\t\t\tMyAMS.nav.setActiveMenu(menu);\n\t\t\t\t\t\tif (activeUrl) {\n\t\t\t\t\t\t\tMyAMS.nav.drawBreadcrumbs();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// we use location.replace to avoid storing intermediate URL\n\t\t\t\t\t\t\t// into browser's history\n\t\t\t\t\t\t\twindow.location.replace(window.location.href + menu.attr('href'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then(resolve, reject);\n\t\t\t\t} else {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Load specific URL into given container target.\n\t *\n\t * The function returns a Promise which is resolved when the remote content is actually\n\t * loaded and initialized\n\t *\n\t * @param url: remote content URL\n\t * @param target: jQuery selector or target container\n\t * @param options: additional options to AJAX call\n\t * @returns {Promise<string>}\n\t */\n\tloadURL: (url, target, options={}) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (url.startsWith('#')) {\n\t\t\t\turl = url.substr(1);\n\t\t\t}\n\t\t\ttarget = $(target);\n\t\t\tMyAMS.core.clearContent(target).then((status) => {\n\t\t\t\tif (!status) {  // applied veto!\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst defaults = {\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\turl: url,\n\t\t\t\t\tdataType: 'html',\n\t\t\t\t\tcache: false,\n\t\t\t\t\tbeforeSend: () => {\n\t\t\t\t\t\ttarget.html(`<h1 class=\"loading\"><i class=\"fa fa-cog fa-spin\"></i> ${MyAMS.i18n.LOADING}</h1>`);\n\t\t\t\t\t\tif (options && options.preLoadCallback) {\n\t\t\t\t\t\t\tMyAMS.core.executeFunctionByName(options.preLoadCallback, this, options.preLoadCallbackOptions);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (target.attr('id') === 'content') {\n\t\t\t\t\t\t\tMyAMS.require('nav').then(() => {\n\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\tprefix = $('html head title').data('ams-title-prefix'),\n\t\t\t\t\t\t\t\t\tfullPrefix = prefix ? `${prefix} > ` : '';\n\t\t\t\t\t\t\t\tdocument.title = `${fullPrefix}${$('.breadcrumb li:last-child').text()}`;\n\t\t\t\t\t\t\t\tMyAMS.dom.root.animate({scrollTop: 0}, 'fast');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst\n\t\t\t\t\tsettings = $.extend({}, defaults, options),\n\t\t\t\t\tveto = { veto: false };\n\t\t\t\ttarget.trigger('before-load.ams.content', [settings, veto]);\n\t\t\t\tif (veto.veto) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$.ajax(settings).then((result, status, xhr) => {\n\t\t\t\t\tif ($.isArray(result)) {\n\t\t\t\t\t\t[result, status, xhr] = result;\n\t\t\t\t\t}\n\t\t\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\t\t\tconst response = MyAMS.ajax.getResponse(xhr);\n\t\t\t\t\t\tif (response) {\n\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\tdataType = response.contentType,\n\t\t\t\t\t\t\t\tresult = response.data;\n\t\t\t\t\t\t\t$('.loading', target).remove();\n\t\t\t\t\t\t\tswitch (dataType) {\n\t\t\t\t\t\t\t\tcase 'json':\n\t\t\t\t\t\t\t\t\tMyAMS.ajax.handleJSON(result, target);\n\t\t\t\t\t\t\t\t\tresolve(result, status, xhr);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'script':\n\t\t\t\t\t\t\t\tcase 'xml':\n\t\t\t\t\t\t\t\t\tresolve(result, status, xhr);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'html':\n\t\t\t\t\t\t\t\tcase 'text':\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\ttarget.parents('.hidden').removeClass('hidden');\n\t\t\t\t\t\t\t\t\ttarget.css({opacity: '0.0'})\n\t\t\t\t\t\t\t\t\t\t.html(result)\n\t\t\t\t\t\t\t\t\t\t.removeClass('hidden')\n\t\t\t\t\t\t\t\t\t\t.delay(30)\n\t\t\t\t\t\t\t\t\t\t.animate({opacity: '1.0'}, 300);\n\t\t\t\t\t\t\t\t\tMyAMS.core.executeFunctionByName(target.data('ams-init-content') ||\n\t\t\t\t\t\t\t\t\t\tMyAMS.config.initContent, window, target).then(() => {\n\t\t\t\t\t\t\t\t\t\tMyAMS.form && MyAMS.form.setFocus(target);\n\t\t\t\t\t\t\t\t\t\ttarget.trigger('after-load.ams.content');\n\t\t\t\t\t\t\t\t\t\tresolve(result, status, xhr);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tMyAMS.stats && MyAMS.stats.logPageview();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, (xhr, status, error) => {\n\t\t\t\t\ttarget.html(`<h3 class=\"error\"><i class=\"fa fa-exclamation-triangle text-danger\"></i> \n\t\t\t\t\t\t\t\t${MyAMS.i18n.ERROR} ${error}</h3>${xhr.responseText}`);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (window.MyAMS) {\n\tif (MyAMS.env.bundle) {\n\t\tMyAMS.config.modules.push('skin');\n\t} else {\n\t\tMyAMS.skin = skin;\n\t\tconsole.debug(\"MyAMS: skin module loaded...\");\n\t}\n}\n"],"file":"mod-skin-dev.js"}