{"version":3,"sources":["mod-plugins.js"],"names":["$","MyAMS","templates","jsrender","require","CHECKER_TEMPLATE_STRING","CHECKER_TEMPLATE","markup","checker","element","Promise","resolve","reject","checkers","length","each","idx","elt","legend","data","amsChecker","fieldset","parent","checked","hasClass","amsCheckerState","fieldName","amsCheckerFieldname","core","generateId","fieldId","replace","prefix","amsCheckerHiddenPrefix","marker","amsCheckerMarker","checkerMode","amsCheckerMode","checkedValue","amsCheckerValueOn","uncheckedValue","amsCheckerValueOff","props","text","value","amsCheckerValue","readonly","amsCheckerReadonly","state","veto","trigger","html","render","change","evt","input","target","is","prop","executeFunctionByName","amsCheckerChangeHandler","document","amsCheckerCancelDefault","siblings","removeClass","val","addClass","closest","on","click","contextMenu","menus","then","menu","options","menuSelector","amsContextmenuSelector","amsMenuSelector","settings","extend","amsContextmenuOptions","amsOptions","amsContextmenuInitCallback","amsInit","plugin","amsContextmenuAfterInitCallback","amsAfterInit","_datatablesHelpers","init","types","fn","dataTable","ext","type","e","detect","unshift","match","order","a","b","x","y","parseFloat","trimmed","trim","frDate","split","frDateTime","frTime","datatables","baseJS","env","baseURL","baseCSS","tables","ajax","check","extext","firstLoad","required","push","getScript","getCSS","when","apply","css","bases","extensions","depends","loaded","table","buttons","attr","removeData","autoFill","AutoFill","Buttons","isArray","indexOf","buttons_print","print","buttons_excel","excelHtml5","buttons_pdf","window","pdfMake","buttons_colvis","colvis","colReorder","ColReorder","fixedColumns","FixedColumns","fixedHeader","FixedHeader","keyTable","KeyTable","responsive","Responsive","rowGroup","RowGroup","rowReorder","RowReorder","scroller","Scroller","searchBuilder","SearchBuilder","searchPanes","SearchPanes","select","map","Object","entries","name","url","isDataTable","dom","amsDatatableDom","amsDom","searching","lengthChange","info","paging","defaultOptions","language","amsDatatableLanguage","amsLanguage","i18n","plugins","amsDatatableOptions","amsDatatableInitCallback","DataTable","amsDatatableAfterInitCallback","dragdrop","dragitems","draggable","item","dragOptions","cursor","amsDraggableCursor","containment","amsDraggableContainment","handle","amsDraggableHandle","connectToSortable","amsDraggableConnectSortable","helper","getFunctionByName","amsDraggableHelper","start","amsDraggableStart","stop","amsDraggableStop","amsDraggableOptions","amsDraggableInitCallback","disableSelection","amsDraggableAfterInitCallback","dropOptions","accept","amsDroppableAccept","amsAccept","drop","amsDroppableDrop","amsDroppableOptions","amsDroppableInitCallback","droppable","amsDroppableAfterInitCallback","sortOptions","items","amsSortableItems","amsSortableHandle","amsSortableHelper","connectWith","amsSortableConnectwith","amsSortableContainment","placeholder","amsSortablePlaceholder","amsSortableStart","over","amsSortableOver","amsSortableStop","amsSortableOptions","amsSortableInitCallback","sortable","amsSortableAfterInitCallback","fileInput","inputs","bsCustomFileInput","inputId","inputSelector","form","formId","formSelector","_select2Helpers","select2UpdateHiddenField","values","find","children","title","join","select2","selects","theme","amsSelect2Theme","amsTheme","amsSelect2Language","escapeMarkup","amsSelect2EscapeMarkup","amsEscapeMarkup","matcher","amsSelect2Matcher","amsMatcher","sorter","amsSelect2Sorter","amsSorter","templateResult","amsSelect2TemplateResult","amsTemplateResult","templateSelection","amsSelect2TemplateSelection","amsTemplateSelection","tokenizer","amsSelect2Tokenizer","amsTokenizer","ajaxUrl","amsSelect2AjaxUrl","amsAjaxUrl","amsSelect2AjaxData","amsAjaxData","processResults","amsSelect2AjaxProcessResults","amsAjaxProcessResults","transport","amsSelect2AjaxTransport","amsAjaxTransport","minimumInputLength","amsSelect2MinimumInputLength","amsMinimumInputLength","hidden","insertAfter","listattr","amsSelect2Separator","removeAttr","amsSelect2Options","amsSelect2InitCallback","modal","currentTarget","parents","first","exists","zIndex","parseInt","$dropdown","update","id","params","option","helpers","moveElementToParentEnd","amsSelect2AfterInitCallback","svgPlugin","svgs","container","svg","width","height","setAttribute","Math","round","switcher","switchers","minusClass","amsSwitcherMinusClass","amsMinusClass","plusClass","amsSwitcherPlusClass","amsPlusClass","amsSwitcher","amsSwitcherState","prependTo","preventDefault","switchIcon","validate","forms","dataOptions","ignore","invalidHandler","amsValidateInvalidHandler","validator","remove","errorList","error","panels","fieldsets","panel","tabs","index","errorElement","amsValidateErrorElement","errorClass","amsValidateErrorClass","errorPlacement","amsValidateErrorPlacement","append","submitHandler","amsValidateSubmitHandler","undefined","submit","get","rules","messages","amsValidateOptions","amsValidateInitCallback","amsValidateAfterInitCallback","registry","register","config","modules","bundle","console","debug"],"mappings":"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","sourcesContent":["/* global MyAMS, bsCustomFileInput */\n/**\n * MyAMS standard plugins\n */\n\nconst $ = MyAMS.$;\n\nif (!$.templates) {\n\tconst jsrender = require('jsrender');\n\t$.templates = jsrender.templates;\n}\n\n\n/**\n * Fieldset checker plug-in\n * A checker is like a simple switcher, but also provides a checkbox which is used\n * as \"switcher\" input field.\n * The \"checker\" class is applied to the fieldset legend; checkbox is created automatically\n * by the plug-in.\n * Check options are given as data attributes, all prefixed with \"ams-checker-\":\n *  - state: is 'off' by default; can be set to 'on' to automatically activate the checker\n *  - mode: is 'hide' by default, which make the fieldset hidden when the checker is not activated;\n *    you cna set it to \"disable\" to make fieldset content visible but disabled when the checker\n *    is not activated\n *  - fieldname: is the name of the input checkbox created by the plug-in\n *  - value: this is the \"checked\" value of the main checkbox field\n *  - readonly: if \"true\", the checkbox is disabled and in read-only mode\n *  - hidden-prefix: if not null, this is a prefix which will be assigned to an additional\n *    hidden input field, updated automatically when the checker is switched; the name of the\n *    hidden input if made of this prefix, followed by the \"fieldname\" value\n *  - value-on: this is the \"checked\" value of the hidden input; \"true\" by default\n *  - value-off: this is the \"unchecked\" value of the hidden input; \"false\" by default\n *  - marker: if not null, another hidden input with a fixed value of 1 will be created; the name\n *    of this input will be the \"fieldname\" value followed by this \"marker\" value\n *  - change-handler: this optional handler will be called on checker switch\n *  - cancel-default: if \"true\", the default behaviour will not be executed on checker switch\n */\n\nconst CHECKER_TEMPLATE_STRING = `\n\t<span class=\"custom-control custom-switch\">\n\t\t<input type=\"checkbox\"\n\t\t\t   id=\"{{: fieldId }}\" name=\"{{: fieldName }}\"\n\t\t\t   class=\"custom-control-input checker\"\n\t\t\t   {{if checked}}checked{{/if}}\n\t\t\t   {{if readonly}}disabled{{/if}}\n\t\t\t   value=\"{{: value }}\" />\n\t\t{{if prefix}}\n\t\t<input type=\"hidden\" class=\"prefix\"\n\t\t\t   id=\"{{: prefix}}{{: fieldName}}_prefix\"\n\t\t\t   name=\"{{: prefix}}{{: fieldName}}\"\n\t\t\t   value=\"{{if state==='on'}}{{: checkedValue}}{{else}}{{: uncheckedValue}}{{/if}}\" />\n\t\t{{else marker}}\n\t\t<input type=\"hidden\" class=\"marker\"\n\t\t\t   name=\"{{: fieldName}}{{: marker}}\"\n\t\t\t   value=\"1\" />\n\t\t{{/if}}\n\t\t<label for=\"{{: fieldId }}\"\n\t\t\t   class=\"custom-control-label\">\n\t\t\t{{: legend }}\n\t\t</label>\n\t</span>\n`;\n\nconst CHECKER_TEMPLATE = $.templates({\n\tmarkup: CHECKER_TEMPLATE_STRING\n});\n\nexport function checker(element) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst checkers = $('legend.checker', element);\n\t\tif (checkers.length > 0) {\n\t\t\tcheckers.each((idx, elt) => {\n\t\t\t\tconst\n\t\t\t\t\tlegend = $(elt),\n\t\t\t\t\tdata = legend.data();\n\t\t\t\tif (!data.amsChecker) {\n\t\t\t\t\tconst\n\t\t\t\t\t\tfieldset = legend.parent('fieldset'),\n\t\t\t\t\t\tchecked = fieldset.hasClass('switched') || (data.amsCheckerState === 'on'),\n\t\t\t\t\t\tfieldName = data.amsCheckerFieldname || `checker_${MyAMS.core.generateId()}`,\n\t\t\t\t\t\tfieldId = fieldName.replace(/\\./g, '_'),\n\t\t\t\t\t\tprefix = data.amsCheckerHiddenPrefix,\n\t\t\t\t\t\tmarker = data.amsCheckerMarker || false,\n\t\t\t\t\t\tcheckerMode = data.amsCheckerMode || 'hide',\n\t\t\t\t\t\tcheckedValue = data.amsCheckerValueOn || 'true',\n\t\t\t\t\t\tuncheckedValue = data.amsCheckerValueOff || 'false',\n\t\t\t\t\t\tprops = {\n\t\t\t\t\t\t\tlegend: legend.text(),\n\t\t\t\t\t\t\tfieldName: fieldName,\n\t\t\t\t\t\t\tfieldId: fieldId,\n\t\t\t\t\t\t\tvalue: data.amsCheckerValue || true,\n\t\t\t\t\t\t\tchecked: checked,\n\t\t\t\t\t\t\treadonly: data.amsCheckerReadonly,\n\t\t\t\t\t\t\tprefix: prefix,\n\t\t\t\t\t\t\tstate: data.amsCheckerState,\n\t\t\t\t\t\t\tcheckedValue: checkedValue,\n\t\t\t\t\t\t\tuncheckedValue: uncheckedValue,\n\t\t\t\t\t\t\tmarker: marker\n\t\t\t\t\t\t},\n\t\t\t\t\t\tveto = {veto: false};\n\t\t\t\t\tlegend.trigger('before-init.ams.checker', [legend, props, veto]);\n\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlegend.html(CHECKER_TEMPLATE.render(props));\n\t\t\t\t\t$('input', legend).change((evt) => {\n\t\t\t\t\t\tconst\n\t\t\t\t\t\t\tinput = $(evt.target),\n\t\t\t\t\t\t\tchecked = input.is(':checked'),\n\t\t\t\t\t\t\tveto = {veto: false};\n\t\t\t\t\t\tlegend.trigger('before-switch.ams.checker', [legend, veto]);\n\t\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\t\tinput.prop('checked', !checked);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(data.amsCheckerChangeHandler,\n\t\t\t\t\t\t\tdocument, legend, checked);\n\t\t\t\t\t\tif (!data.amsCheckerCancelDefault) {\n\t\t\t\t\t\t\tconst prefix = input.siblings('.prefix');\n\t\t\t\t\t\t\tif (checkerMode === 'hide') {\n\t\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\t\tfieldset.removeClass('switched');\n\t\t\t\t\t\t\t\t\tprefix.val(checkedValue);\n\t\t\t\t\t\t\t\t\tlegend.trigger('opened.ams.checker', [legend]);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfieldset.addClass('switched');\n\t\t\t\t\t\t\t\t\tprefix.val(uncheckedValue);\n\t\t\t\t\t\t\t\t\tlegend.trigger('closed.ams.checker', [legend]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfieldset.prop('disabled', !checked);\n\t\t\t\t\t\t\t\tprefix.val(checked ? checkedValue : uncheckedValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tlegend.closest('form').on('reset', () => {\n\t\t\t\t\t\tconst checker = $('.checker', legend);\n\t\t\t\t\t\tif (checker.prop('checked') !== checked) {\n\t\t\t\t\t\t\tchecker.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!checked) {\n\t\t\t\t\t\tif (checkerMode === 'hide') {\n\t\t\t\t\t\t\tfieldset.addClass('switched');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfieldset.prop('disabled', true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlegend.trigger('after-init.ams.checker', [legend]);\n\t\t\t\t\tlegend.data('ams-checker', true);\n\t\t\t\t}\n\t\t\t});\n\t\t\tresolve(checkers);\n\t\t} else {\n\t\t\tresolve(null);\n\t\t}\n\t});\n}\n\n\n/**\n * Context menu plug-in\n */\n\nexport function contextMenu(element) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst menus = $('.context-menu', element);\n\t\tif (menus.length > 0) {\n\t\t\tMyAMS.require('menu').then(() => {\n\t\t\t\tmenus.each((idx, elt) => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tmenu = $(elt),\n\t\t\t\t\t\tdata = menu.data(),\n\t\t\t\t\t\toptions = {\n\t\t\t\t\t\t\tmenuSelector: data.amsContextmenuSelector || data.amsMenuSelector\n\t\t\t\t\t\t};\n\t\t\t\t\tlet settings = $.extend({}, options, data.amsContextmenuOptions || data.amsOptions);\n\t\t\t\t\tsettings = MyAMS.core.executeFunctionByName(\n\t\t\t\t\t\tdata.amsContextmenuInitCallback || data.amsInit,\n\t\t\t\t\t\tdocument, menu, settings) || settings;\n\t\t\t\t\tconst veto = {veto: false};\n\t\t\t\t\tmenu.trigger('before-init.ams.contextmenu', [menu, settings, veto]);\n\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst plugin = menu.contextMenu(settings);\n\t\t\t\t\tMyAMS.core.executeFunctionByName(\n\t\t\t\t\t\tdata.amsContextmenuAfterInitCallback || data.amsAfterInit,\n\t\t\t\t\t\tdocument, menu, plugin, settings);\n\t\t\t\t\tmenu.trigger('after-init.ams.contextmenu', [menu, plugin]);\n\t\t\t\t});\n\t\t\t}, reject).then(() => {\n\t\t\t\tresolve(menus);\n\t\t\t});\n\t\t} else {\n\t\t\tresolve(null);\n\t\t}\n\t});\n}\n\n\n/**\n * JQuery Datatable plug-in\n */\n\nconst _datatablesHelpers = {\n\n\tinit: () => {\n\n\t\t// Add autodetect formats\n\t\ttry {\n\t\t\tconst types = $.fn.dataTable.ext.type;\n\t\t}\n\t\tcatch (e) {\n\t\t\treturn;\n\t\t}\n\n\t\ttypes.detect.unshift((data) => {\n\t\t\tif (data !== null && data.match(/^(0[1-9]|[1-2][0-9]|3[0-1])\\/(0[1-9]|1[0-2])\\/[0-3][0-9]{3}$/)) {\n\t\t\t\treturn 'date-euro';\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\t\ttypes.detect.unshift((data) => {\n\t\t\tif (data !== null && data.match(/^(0[1-9]|[1-2][0-9]|3[0-1])\\/(0[1-9]|1[0-2])\\/[0-3][0-9]{3} - ([0-1][0-9]|2[0-3]):[0-5][0-9]$/)) {\n\t\t\t\treturn 'datetime-euro';\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\t\t// Add sorting methods\n\t\t$.extend(types.order, {\n\n\t\t\t// numeric values using commas separators\n\t\t\t\"numeric-comma-asc\": (a, b) => {\n\t\t\t\tvar x = a.replace(/,/, \".\").replace(/ /g, '');\n\t\t\t\tvar y = b.replace(/,/, \".\").replace(/ /g, '');\n\t\t\t\tx = parseFloat(x);\n\t\t\t\ty = parseFloat(y);\n\t\t\t\treturn ((x < y) ? -1 : ((x > y) ? 1 : 0));\n\t\t\t},\n\t\t\t\"numeric-comma-desc\": (a, b) => {\n\t\t\t\tvar x = a.replace(/,/, \".\").replace(/ /g, '');\n\t\t\t\tvar y = b.replace(/,/, \".\").replace(/ /g, '');\n\t\t\t\tx = parseFloat(x);\n\t\t\t\ty = parseFloat(y);\n\t\t\t\treturn ((x < y) ? 1 : ((x > y) ? -1 : 0));\n\t\t\t},\n\n\t\t\t// date-euro column sorter\n\t\t\t\"date-euro-pre\": (a) => {\n\t\t\t\tvar trimmed = $.trim(a);\n\t\t\t\tvar x;\n\t\t\t\tif (trimmed !== '') {\n\t\t\t\t\tvar frDate = trimmed.split('/');\n\t\t\t\t\tx = (frDate[2] + frDate[1] + frDate[0]) * 1;\n\t\t\t\t} else {\n\t\t\t\t\tx = 10000000; // = l'an 1000 ...\n\t\t\t\t}\n\t\t\t\treturn x;\n\t\t\t},\n\t\t\t\"date-euro-asc\": (a, b) => {\n\t\t\t\treturn a - b;\n\t\t\t},\n\t\t\t\"date-euro-desc\": (a, b) => {\n\t\t\t\treturn b - a;\n\t\t\t},\n\n\t\t\t// datetime-euro column sorter\n\t\t\t\"datetime-euro-pre\": (a) => {\n\t\t\t\tvar trimmed = $.trim(a);\n\t\t\t\tvar x;\n\t\t\t\tif (trimmed !== '') {\n\t\t\t\t\tvar frDateTime = trimmed.split(' - ');\n\t\t\t\t\tvar frDate = frDateTime[0].split('/');\n\t\t\t\t\tvar frTime = frDateTime[1].split(':');\n\t\t\t\t\tx = (frDate[2] + frDate[1] + frDate[0] + frTime[0] + frTime[1]) * 1;\n\t\t\t\t} else {\n\t\t\t\t\tx = 100000000000; // = l'an 1000 ...\n\t\t\t\t}\n\t\t\t\treturn x;\n\t\t\t},\n\t\t\t\"datetime-euro-asc\": (a, b) => {\n\t\t\t\treturn a - b;\n\t\t\t},\n\t\t\t\"datetime-euro-desc\": (a, b) => {\n\t\t\t\treturn b - a;\n\t\t\t}\n\t\t});\n\t}\n};\n\nexport function datatables(element) {\n\tconst\n\t\tbaseJS = `${MyAMS.env.baseURL}../ext/datatables/`,\n\t\tbaseCSS = `${MyAMS.env.baseURL}../../css/ext/datatables/`;\n\treturn new Promise((resolve, reject) => {\n\t\tconst tables = $('.datatable', element);\n\t\tif (tables.length > 0) {\n\t\t\tMyAMS.ajax.check($.fn.dataTable,\n\t\t\t\t`${MyAMS.env.baseURL}../ext/datatables/dataTables${MyAMS.env.extext}.js`).then((firstLoad) => {\n\t\t\t\tconst required = [];\n\t\t\t\tif (firstLoad) {\n\t\t\t\t\trequired.push(MyAMS.core.getScript(`${baseJS}dataTables-bootstrap4${MyAMS.env.extext}.js`));\n\t\t\t\t\trequired.push(MyAMS.core.getCSS(`${baseCSS}dataTables-bootstrap4${MyAMS.env.extext}.css`, 'datatables-bs4'));\n\t\t\t\t}\n\t\t\t\t$.when.apply($, required).then(() => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tcss = {},\n\t\t\t\t\t\tbases = [],\n\t\t\t\t\t\textensions = [],\n\t\t\t\t\t\tdepends = [],\n\t\t\t\t\t\tloaded = {};\n\t\t\t\t\ttables.each((idx, elt) => {\n\t\t\t\t\t\tconst\n\t\t\t\t\t\t\ttable = $(elt),\n\t\t\t\t\t\t\tdata = table.data();\n\t\t\t\t\t\tif (data.buttons === 'default') {\n\t\t\t\t\t\t\ttable.attr('data-buttons', '[\"copy\", \"print\"]');\n\t\t\t\t\t\t\ttable.removeData('buttons');\n\t\t\t\t\t\t\tdata.buttons = table.data('buttons');\n\t\t\t\t\t\t} else if (data.buttons === 'all') {\n\t\t\t\t\t\t\ttable.attr('data-buttons', '[\"copy\", \"csv\", \"excel\", \"print\", \"pdf\", \"colvis\"]');\n\t\t\t\t\t\t\ttable.removeData('buttons');\n\t\t\t\t\t\t\tdata.buttons = table.data('buttons');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.autoFill && !loaded.autoFill && !$.fn.dataTable.AutoFill) {\n\t\t\t\t\t\t\tbases.push(`${baseJS}autoFill${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\textensions.push(`${baseJS}autoFill-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-autofill-bs4'] = `${baseCSS}autoFill-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.autoFill = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.buttons) {\n\t\t\t\t\t\t\tif (!loaded.buttons && !$.fn.dataTable.Buttons) {\n\t\t\t\t\t\t\t\tbases.push(`${baseJS}buttons${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\t\textensions.push(`${baseJS}buttons-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\t\textensions.push(`${baseJS}buttons-html5${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\t\tcss['dt-buttons-bs4'] = `${baseCSS}buttons-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\t\tloaded.buttons = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ($.isArray(data.buttons)) {\n\t\t\t\t\t\t\t\tif (data.buttons.indexOf('print') >= 0) {\n\t\t\t\t\t\t\t\t\tif (!loaded.buttons_print && !$.fn.dataTable.ext.buttons.print) {\n\t\t\t\t\t\t\t\t\t\tdepends.push(`${baseJS}buttons-print${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\t\t\t\tloaded.buttons_print = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (data.buttons.indexOf('excel') >= 0) {\n\t\t\t\t\t\t\t\t\tif (!loaded.buttons_excel && !$.fn.dataTable.ext.buttons.excelHtml5) {\n\t\t\t\t\t\t\t\t\t\tbases.push(`${baseJS}jszip${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\t\t\t\tloaded.buttons_excel = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (data.buttons.indexOf('pdf') >= 0) {\n\t\t\t\t\t\t\t\t\tif (!loaded.buttons_pdf && !window.pdfMake) {\n\t\t\t\t\t\t\t\t\t\tbases.push(`${baseJS}pdfmake${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\t\t\t\textensions.push(`${baseJS}vfs_fonts${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\t\t\t\tloaded.buttons_pdf = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (data.buttons.indexOf('colvis') >= 0) {\n\t\t\t\t\t\t\t\t\tif (!loaded.buttons_colvis && !$.fn.dataTable.ext.buttons.colvis) {\n\t\t\t\t\t\t\t\t\t\tdepends.push(`${baseJS}buttons-colVis${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\t\t\t\tloaded.buttons_colvis = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.colReorder && !loaded.colReorder && !$.fn.dataTable.ColReorder) {\n\t\t\t\t\t\t\tbases.push(`${baseJS}colReorder${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\textensions.push(`${baseJS}colReorder-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-colreorder-bs4'] = `${baseCSS}colReorder-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.colReorder = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.fixedColumns && !loaded.fixedColumns && !$.fn.dataTable.FixedColumns) {\n\t\t\t\t\t\t\tbases.push(`${baseJS}fixedColumns${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\textensions.push(`${baseJS}fixedColumns-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-fixedcolumns-bs4'] = `${baseCSS}fixedColumns-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.fixedColumns = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.fixedHeader && !loaded.fixedHeader && !$.fn.dataTable.FixedHeader) {\n\t\t\t\t\t\t\tbases.push(`${baseJS}fixedHeader${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\textensions.push(`${baseJS}fixedHeader-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-fixedheader-bs4'] = `${baseCSS}fixedHeader-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.fixedHeader = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.keyTable && !loaded.keyTable && !$.fn.dataTable.KeyTable) {\n\t\t\t\t\t\t\tbases.push(`${baseJS}keyTable${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\textensions.push(`${baseJS}keyTable-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-keytable-bs4'] = `${baseCSS}keyTable-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.keyTable = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ((data.responsive !== false) && !loaded.responsive && !$.fn.dataTable.Responsive) {\n\t\t\t\t\t\t\tbases.push(`${baseJS}responsive${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\textensions.push(`${baseJS}responsive-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-responsive-bs4'] = `${baseCSS}responsive-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.responsive = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.rowGroup && !loaded.rowGroup && !$.fn.dataTable.RowGroup) {\n\t\t\t\t\t\t\tbases.push(`${baseJS}rowGroup${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\textensions.push(`${baseJS}rowGroup-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-rowgroup-bs4'] = `${baseCSS}rowGroup-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.rowGroup = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.rowReorder && !loaded.rowReorder && !$.fn.dataTable.RowReorder) {\n\t\t\t\t\t\t\tbases.push(`${baseJS}rowReorder${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\textensions.push(`${baseJS}rowReorder-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-rowreorder-bs4'] = `${baseCSS}rowReorder-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.rowReorder = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.scroller && !loaded.scroller && !$.fn.dataTable.Scroller) {\n\t\t\t\t\t\t\tbases.push(`${baseJS}scroller${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\textensions.push(`${baseJS}scroller-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-scroller-bs4'] = `${baseCSS}scroller-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.scroller = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.searchBuilder && !loaded.searchBuilder && !$.fn.dataTable.SearchBuilder) {\n\t\t\t\t\t\t\tbases.push(`${baseJS}searchBuilder${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\textensions.push(`${baseJS}searchBuilder-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-searchbuilder-bs4'] = `${baseCSS}searchBuilder-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.searchBuilder = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.searchPanes && !loaded.searchPanes && !$.fn.dataTable.SearchPanes) {\n\t\t\t\t\t\t\tif (!loaded.select && !$.fn.dataTable.select) {\n\t\t\t\t\t\t\t\tbases.push(`${baseJS}select${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\t\textensions.push(`${baseJS}select-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\t\tcss['dt-select-bs4'] = `${baseCSS}select-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\t\tloaded.select = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\textensions.push(`${baseJS}searchPanes${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tdepends.push(`${baseJS}searchPanes-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-searchpanes-bs4'] = `${baseCSS}searchPanes-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.searchPanes = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.select && !loaded.select && !$.fn.dataTable.select) {\n\t\t\t\t\t\t\tbases.push(`${baseJS}select${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\textensions.push(`${baseJS}select-bootstrap4${MyAMS.env.extext}.js`);\n\t\t\t\t\t\t\tcss['dt-select-bs4'] = `${baseCSS}select-bootstrap4${MyAMS.env.extext}.css`;\n\t\t\t\t\t\t\tloaded.select = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t$.when.apply($, bases.map(MyAMS.core.getScript)).then(() => {\n\t\t\t\t\t\treturn $.when.apply($, extensions.map(MyAMS.core.getScript)).then(() => {\n\t\t\t\t\t\t\treturn $.when.apply($, depends.map(MyAMS.core.getScript)).then(() => {\n\t\t\t\t\t\t\t\tif (firstLoad) {\n\t\t\t\t\t\t\t\t\t_datatablesHelpers.init();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfor (const [name, url] of Object.entries(css)) {\n\t\t\t\t\t\t\t\t\tMyAMS.core.getCSS(url, name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttables.each((idx, elt) => {\n\t\t\t\t\t\t\t\t\tconst table = $(elt);\n\t\t\t\t\t\t\t\t\tif ($.fn.dataTable.isDataTable(table)) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst data = table.data();\n\t\t\t\t\t\t\t\t\tlet dom = data.amsDatatableDom || data.amsDom || data.dom || '';\n\t\t\t\t\t\t\t\t\tif (!dom) {\n\t\t\t\t\t\t\t\t\t\tif (data.buttons) {\n\t\t\t\t\t\t\t\t\t\t\tdom += \"B\";\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (data.searchBuilder) {\n\t\t\t\t\t\t\t\t\t\t\tdom += \"Q\";\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (data.searchPanes) {\n\t\t\t\t\t\t\t\t\t\t\tdom += \"P\";\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (data.searching !== false || data.lengthChange !== false) {\n\t\t\t\t\t\t\t\t\t\t\tdom += \"<'row px-2'\";\n\t\t\t\t\t\t\t\t\t\t\tif (data.searching !== false) {\n\t\t\t\t\t\t\t\t\t\t\t\tdom += \"<'col-sm-6 col-md-8'f>\";\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tif (data.lengthChange !== false) {\n\t\t\t\t\t\t\t\t\t\t\t\tdom += \"<'col-sm-6 col-md-4'l>\";\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdom += \">\";\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdom += \"<'row'<'col-sm-12'tr>>\";\n\t\t\t\t\t\t\t\t\t\tif (data.info !== false || data.paging !== false) {\n\t\t\t\t\t\t\t\t\t\t\tdom += \"<'row px-2 py-1'\";\n\t\t\t\t\t\t\t\t\t\t\tif (data.info !== false) {\n\t\t\t\t\t\t\t\t\t\t\t\tdom += \"<'col-sm-12 col-md-5'i>\";\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tif (data.paging !== false) {\n\t\t\t\t\t\t\t\t\t\t\t\tdom += \"<'col-sm-12 col-md-7'p>\";\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdom += \">\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\t\tdefaultOptions = {\n\t\t\t\t\t\t\t\t\t\t\tlanguage: data.amsDatatableLanguage || data.amsLanguage ||\n\t\t\t\t\t\t\t\t\t\t\t\tMyAMS.i18n.plugins.datatables,\n\t\t\t\t\t\t\t\t\t\t\tresponsive: true,\n\t\t\t\t\t\t\t\t\t\t\tdom: dom\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tlet settings = $.extend({}, defaultOptions, data.amsDatatableOptions || data.amsOptions);\n\t\t\t\t\t\t\t\t\tsettings = MyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\t\t\t\tdata.amsDatatableInitCallback || data.amsInit,\n\t\t\t\t\t\t\t\t\t\tdocument, table, settings) || settings;\n\t\t\t\t\t\t\t\t\tconst veto = {veto: false};\n\t\t\t\t\t\t\t\t\ttable.trigger('before-init.ams.datatable', [table, settings, veto]);\n\t\t\t\t\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst plugin = table.DataTable(settings);\n\t\t\t\t\t\t\t\t\tMyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\t\t\t\tdata.amsDatatableAfterInitCallback || data.amsAfterInit,\n\t\t\t\t\t\t\t\t\t\tdocument, table, plugin, settings);\n\t\t\t\t\t\t\t\t\ttable.trigger('after-init.ams.datatable', [table, plugin]);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tresolve(tables);\n\t\t\t\t\t\t\t}, reject);\n\t\t\t\t\t\t}, reject);\n\t\t\t\t\t}, reject);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t} else {\n\t\t\tresolve(null);\n\t\t}\n\t});\n}\n\n\n/**\n * JQuery-UI drag and drop plug-ins\n */\n\nexport function dragdrop(element) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst dragitems = $('.draggable, .droppable, .sortable', element);\n\t\tif (dragitems.length > 0) {\n\t\t\tMyAMS.ajax.check($.fn.draggable,\n\t\t\t\t`${MyAMS.env.baseURL}../ext/jquery-ui${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\tdragitems.each((idx, elt) => {\n\t\t\t\t\tconst\n\t\t\t\t\t\titem = $(elt),\n\t\t\t\t\t\tdata = item.data();\n\t\t\t\t\t// draggable components\n\t\t\t\t\tif (item.hasClass('draggable')) {\n\t\t\t\t\t\tconst dragOptions = {\n\t\t\t\t\t\t\tcursor: data.amsDraggableCursor || 'move',\n\t\t\t\t\t\t\tcontainment: data.amsDraggableContainment,\n\t\t\t\t\t\t\thandle: data.amsDraggableHandle,\n\t\t\t\t\t\t\tconnectToSortable: data.amsDraggableConnectSortable,\n\t\t\t\t\t\t\thelper: MyAMS.core.getFunctionByName(data.amsDraggableHelper) || data.amsDraggableHelper,\n\t\t\t\t\t\t\tstart: MyAMS.core.getFunctionByName(data.amsDraggableStart),\n\t\t\t\t\t\t\tstop: MyAMS.core.getFunctionByName(data.amsDraggableStop)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tlet settings = $.extend({}, dragOptions,\n\t\t\t\t\t\t\tdata.amsDraggableOptions || data.amsOptions);\n\t\t\t\t\t\tsettings = MyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\tdata.amsDraggableInitCallback || data.amsInit,\n\t\t\t\t\t\t\tdocument, item, settings) || settings;\n\t\t\t\t\t\tconst veto = {veto: false};\n\t\t\t\t\t\titem.trigger('before-init.ams.draggable', [item, settings, veto]);\n\t\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst plugin = item.draggable(settings);\n\t\t\t\t\t\titem.disableSelection();\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\tdata.amsDraggableAfterInitCallback || data.amsAfterInit,\n\t\t\t\t\t\t\tdocument, item, plugin, settings);\n\t\t\t\t\t\titem.trigger('after-init.ams.draggable', [item, plugin]);\n\t\t\t\t\t}\n\t\t\t\t\t// droppable components\n\t\t\t\t\tif (item.hasClass('droppable')) {\n\t\t\t\t\t\tconst dropOptions = {\n\t\t\t\t\t\t\taccept: data.amsDroppableAccept || data.amsAccept,\n\t\t\t\t\t\t\tdrop: MyAMS.core.getFunctionByName(data.amsDroppableDrop)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tlet settings = $.extend({}, dropOptions,\n\t\t\t\t\t\t\tdata.amsDroppableOptions || data.amsOptions);\n\t\t\t\t\t\tsettings = MyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\tdata.amsDroppableInitCallback || data.amsInit,\n\t\t\t\t\t\t\tdocument, item, settings) || settings;\n\t\t\t\t\t\tconst veto = {veto: false};\n\t\t\t\t\t\titem.trigger('before-init.ams.droppable', [item, settings, veto]);\n\t\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst plugin = item.droppable(settings);\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\tdata.amsDroppableAfterInitCallback || data.amsAfterInit,\n\t\t\t\t\t\t\tdocument, item, plugin, settings);\n\t\t\t\t\t\titem.trigger('after-init.ams.droppable', [item, plugin]);\n\t\t\t\t\t}\n\t\t\t\t\t// sortable components\n\t\t\t\t\tif (item.hasClass('sortable')) {\n\t\t\t\t\t\tconst sortOptions = {\n\t\t\t\t\t\t\titems: data.amsSortableItems,\n\t\t\t\t\t\t\thandle: data.amsSortableHandle,\n\t\t\t\t\t\t\thelper: MyAMS.core.getFunctionByName(data.amsSortableHelper) || data.amsSortableHelper,\n\t\t\t\t\t\t\tconnectWith: data.amsSortableConnectwith,\n\t\t\t\t\t\t\tcontainment: data.amsSortableContainment,\n\t\t\t\t\t\t\tplaceholder: data.amsSortablePlaceholder,\n\t\t\t\t\t\t\tstart: MyAMS.core.getFunctionByName(data.amsSortableStart),\n\t\t\t\t\t\t\tover: MyAMS.core.getFunctionByName(data.amsSortableOver),\n\t\t\t\t\t\t\tstop: MyAMS.core.getFunctionByName(data.amsSortableStop)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tlet settings = $.extend({}, sortOptions,\n\t\t\t\t\t\t\tdata.amsSortableOptions || data.amsOptions);\n\t\t\t\t\t\tsettings = MyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\tdata.amsSortableInitCallback || data.amsInit,\n\t\t\t\t\t\t\tdocument, item, settings) || settings;\n\t\t\t\t\t\tconst veto = {veto: false};\n\t\t\t\t\t\titem.trigger('before-init.ams.sortable', [item, settings, veto]);\n\t\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst plugin = item.sortable(settings);\n\t\t\t\t\t\titem.disableSelection();\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\tdata.amsSortableAfterInitCallback || data.amsAfterInit,\n\t\t\t\t\t\t\tdocument, item, plugin, settings);\n\t\t\t\t\t\titem.trigger('after-init.ams.sortable', [item, plugin]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, reject).then(() => {\n\t\t\t\tresolve(dragitems);\n\t\t\t});\n\t\t} else {\n\t\t\tresolve(null);\n\t\t}\n\t});\n}\n\n\n/**\n * Bootstrap custom file input manager\n */\n\nexport function fileInput(element) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst inputs = $('.custom-file-input', element);\n\t\tif (inputs.length > 0) {\n\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\tMyAMS.ajax.check(window.bsCustomFileInput,\n\t\t\t\t\t`${MyAMS.env.baseURL}../ext/bs-custom-file-input${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\tinputs.each((idx, elt) => {\n\t\t\t\t\t\tconst\n\t\t\t\t\t\t\tinput = $(elt),\n\t\t\t\t\t\t\tinputId = input.attr('id'),\n\t\t\t\t\t\t\tinputSelector = inputId ? `#${inputId}` : input.attr('name'),\n\t\t\t\t\t\t\tform = $(elt.form),\n\t\t\t\t\t\t\tformId = form.attr('id'),\n\t\t\t\t\t\t\tformSelector = formId ? `#${formId}` : form.attr('name'),\n\t\t\t\t\t\t\tveto = {veto: false};\n\t\t\t\t\t\tinput.trigger('before-init.ams.fileinput', [input, veto]);\n\t\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbsCustomFileInput.init(inputSelector, formSelector);\n\t\t\t\t\t\tinput.trigger('after-init.ams.fileinput', [input]);\n\t\t\t\t\t});\n\t\t\t\t}, reject).then(() => {\n\t\t\t\t\tresolve(inputs);\n\t\t\t\t});\n\t\t\t}, reject);\n\t\t} else {\n\t\t\tresolve(null);\n\t\t}\n\t});\n}\n\n\n/**\n * Select2 plug-in integration\n */\n\nconst _select2Helpers = {\n\n\tselect2UpdateHiddenField: (input) => {\n\t\tconst values = [];\n\t\tinput.parent().find('ul.select2-selection__rendered').children('li[title]').each((idx, elt) => {\n\t\t\tvalues.push(input.children(`option[data-content=\"${elt.title}\"]`).attr('value'));\n\t\t});\n\t\tinput.data('select2-target').val(values.join(input.data('ams-select2-separator') || ','));\n\t}\n};\n\nexport function select2(element) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst selects = $('.select2', element);\n\t\tif (selects.length > 0) {\n\t\t\tMyAMS.require('ajax', 'helpers').then(() => {\n\t\t\t\tMyAMS.ajax.check($.fn.select2,\n\t\t\t\t\t`${MyAMS.env.baseURL}../ext/select2/select2${MyAMS.env.extext}.js`).then((firstLoad) => {\n\t\t\t\t\tconst required = [];\n\t\t\t\t\tif (firstLoad) {\n\t\t\t\t\t\trequired.push(MyAMS.core.getScript(`${MyAMS.env.baseURL}../ext/select2/i18n/${MyAMS.i18n.language}.js`));\n\t\t\t\t\t\trequired.push(MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/select2${MyAMS.env.extext}.css`, 'select2'));\n\t\t\t\t\t\trequired.push(MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/select2-bootstrap4${MyAMS.env.extext}.css`, 'select2_bs4'));\n\t\t\t\t\t}\n\t\t\t\t\t$.when.apply($, required).then(() => {\n\t\t\t\t\t\tselects.each((idx, elt) => {\n\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\tselect = $(elt),\n\t\t\t\t\t\t\t\tdata = select.data();\n\t\t\t\t\t\t\tif (data.select2) {\n\t\t\t\t\t\t\t\treturn;  // already initialized\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst defaultOptions = {\n\t\t\t\t\t\t\t\ttheme: data.amsSelect2Theme || data.amsTheme || 'bootstrap4',\n\t\t\t\t\t\t\t\tlanguage: data.amsSelect2Language || data.amsLanguage || MyAMS.i18n.language,\n\t\t\t\t\t\t\t\tescapeMarkup: MyAMS.core.getFunctionByName(\n\t\t\t\t\t\t\t\t\tdata.amsSelect2EscapeMarkup || data.amsEscapeMarkup),\n\t\t\t\t\t\t\t\tmatcher: MyAMS.core.getFunctionByName(\n\t\t\t\t\t\t\t\t\tdata.amsSelect2Matcher || data.amsMatcher),\n\t\t\t\t\t\t\t\tsorter: MyAMS.core.getFunctionByName(\n\t\t\t\t\t\t\t\t\tdata.amsSelect2Sorter || data.amsSorter),\n\t\t\t\t\t\t\t\ttemplateResult: MyAMS.core.getFunctionByName(\n\t\t\t\t\t\t\t\t\tdata.amsSelect2TemplateResult || data.amsTemplateResult),\n\t\t\t\t\t\t\t\ttemplateSelection: MyAMS.core.getFunctionByName(\n\t\t\t\t\t\t\t\t\tdata.amsSelect2TemplateSelection || data.amsTemplateSelection),\n\t\t\t\t\t\t\t\ttokenizer: MyAMS.core.getFunctionByName(\n\t\t\t\t\t\t\t\t\tdata.amsSelect2Tokenizer || data.amsTokenizer)\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconst ajaxUrl = data.amsSelect2AjaxUrl || data.amsAjaxUrl || data['ajax-Url'];\n\t\t\t\t\t\t\tif (ajaxUrl) {\n\t\t\t\t\t\t\t\tdefaultOptions.ajax = {\n\t\t\t\t\t\t\t\t\turl: MyAMS.core.getFunctionByName(\n\t\t\t\t\t\t\t\t\t\tdata.amsSelect2AjaxUrl || data.amsAjaxUrl) ||\n\t\t\t\t\t\t\t\t\t\tdata.amsSelect2AjaxUrl || data.amsAjaxUrl,\n\t\t\t\t\t\t\t\t\tdata: MyAMS.core.getFunctionByName(\n\t\t\t\t\t\t\t\t\t\tdata.amsSelect2AjaxData || data.amsAjaxData) ||\n\t\t\t\t\t\t\t\t\t\tdata.amsSelect2AjaxData || data.amsAjaxData,\n\t\t\t\t\t\t\t\t\tprocessResults: MyAMS.core.getFunctionByName(\n\t\t\t\t\t\t\t\t\t\tdata.amsSelect2AjaxProcessResults || data.amsAjaxProcessResults) ||\n\t\t\t\t\t\t\t\t\t\tdata.amsSelect2AjaxProcessResults || data.amsAjaxProcessResults,\n\t\t\t\t\t\t\t\t\ttransport: MyAMS.core.getFunctionByName(\n\t\t\t\t\t\t\t\t\t\tdata.amsSelect2AjaxTransport || data.amsAjaxTransport) ||\n\t\t\t\t\t\t\t\t\t\tdata.amsSelect2AjaxTransport || data.amsAjaxTransport\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdefaultOptions.minimumInputLength = data.amsSelect2MinimumInputLength ||\n\t\t\t\t\t\t\t\t\tdata.amsMinimumInputLength || data.minimumInputLength || 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (select.hasClass('sortable')) {\n\t\t\t\t\t\t\t\t// create hidden input for sortable selections\n\t\t\t\t\t\t\t\tconst hidden = $(`<input type=\"hidden\" name=\"${select.attr('name')}\">`).insertAfter(select);\n\t\t\t\t\t\t\t\thidden.val($('option:selected', select).listattr('value').join(data.amsSelect2Separator || ','));\n\t\t\t\t\t\t\t\tselect.data('select2-target', hidden)\n\t\t\t\t\t\t\t\t\t.removeAttr('name');\n\t\t\t\t\t\t\t\tdefaultOptions.templateSelection = (data) => {\n\t\t\t\t\t\t\t\t\tconst elt = $(data.element);\n\t\t\t\t\t\t\t\t\telt.attr('data-content', elt.html());\n\t\t\t\t\t\t\t\t\treturn data.text;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet settings = $.extend({}, defaultOptions, data.amsSelect2Options || data.amsOptions);\n\t\t\t\t\t\t\tsettings = MyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\t\tdata.amsSelect2InitCallback || data.amsInit,\n\t\t\t\t\t\t\t\tdocument, select, settings) || settings;\n\t\t\t\t\t\t\tconst veto = {veto: false};\n\t\t\t\t\t\t\tselect.trigger('before-init.ams.select2', [select, settings, veto]);\n\t\t\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst plugin = select.select2(settings);\n\t\t\t\t\t\t\tselect.on('select2:opening select2:selecting select2:unselecting select2:clearing', (evt) => {\n\t\t\t\t\t\t\t\tif ($(evt.target).is(':disabled')) {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tselect.on('select2:opening', (evt) => {\n\t\t\t\t\t\t\t\tconst modal = $(evt.currentTarget).parents('.modal').first();\n\t\t\t\t\t\t\t\tif (modal.exists()) {\n\t\t\t\t\t\t\t\t\tconst zIndex = parseInt(modal.css('z-index'));\n\t\t\t\t\t\t\t\t\tplugin.data('select2').$dropdown.css('z-index', zIndex + 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (select.hasClass('sortable')) {\n\t\t\t\t\t\t\t\tMyAMS.ajax.check($.fn.sortable,\n\t\t\t\t\t\t\t\t\t`${MyAMS.env.baseURL}../ext/jquery-ui${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t\t\t\t\tselect.parent().find('ul.select2-selection__rendered').sortable({\n\t\t\t\t\t\t\t\t\t\tcontainment: 'parent',\n\t\t\t\t\t\t\t\t\t\tupdate: () => {\n\t\t\t\t\t\t\t\t\t\t\t_select2Helpers.select2UpdateHiddenField(select);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tselect.on('select2:select select2:unselect', (evt) => {\n\t\t\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\t\t\tid = evt.params.data.id,\n\t\t\t\t\t\t\t\t\t\t\ttarget = $(evt.currentTarget),\n\t\t\t\t\t\t\t\t\t\t\toption = target.children(`option[value=\"${id}\"]`);\n\t\t\t\t\t\t\t\t\t\tMyAMS.helpers.moveElementToParentEnd(option);\n\t\t\t\t\t\t\t\t\t\ttarget.trigger('change');\n\t\t\t\t\t\t\t\t\t\t_select2Helpers.select2UpdateHiddenField(target);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tMyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\t\tdata.amsSelect2AfterInitCallback || data.amsAfterInit,\n\t\t\t\t\t\t\t\tdocument, select, plugin, settings);\n\t\t\t\t\t\t\tselect.trigger('after-init.ams.select2', [select, plugin]);\n\t\t\t\t\t\t})\n\t\t\t\t\t}, reject).then(() => {\n\t\t\t\t\t\tresolve(selects);\n\t\t\t\t\t});\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t} else {\n\t\t\tresolve(null);\n\t\t}\n\t});\n}\n\n\n/**\n * SVG image plug-in\n */\n\nexport function svgPlugin(element) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst svgs = $('.svg-container', element);\n\t\tif (svgs.length > 0) {\n\t\t\tsvgs.each((idx, elt) => {\n\t\t\t\tconst\n\t\t\t\t\tcontainer = $(elt),\n\t\t\t\t\tsvg = $('svg', container),\n\t\t\t\t\twidth = svg.attr('width'),\n\t\t\t\t\theight = svg.attr('height');\n\t\t\t\tif (width && height) {\n\t\t\t\t\telt.setAttribute('viewBox',\n\t\t\t\t\t\t`0 0 ${Math.round(parseFloat(width))} ${Math.round(parseFloat(height))}`);\n\t\t\t\t}\n\t\t\t\tsvg.attr('width', '100%').attr('height', 'auto');\n\t\t\t});\n\t\t\tresolve(svgs);\n\t\t} else {\n\t\t\tresolve(null);\n\t\t}\n\t});\n}\n\n\n/**\n * Fieldset switcher plug-in\n */\n\nexport function switcher(element) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst switchers = $('legend.switcher', element);\n\t\tif (switchers.length > 0) {\n\t\t\tswitchers.each((idx, elt) => {\n\t\t\t\tconst\n\t\t\t\t\tlegend = $(elt),\n\t\t\t\t\tfieldset = legend.parent('fieldset'),\n\t\t\t\t\tdata = legend.data(),\n\t\t\t\t\tminusClass = data.amsSwitcherMinusClass || data.amsMinusClass || 'minus',\n\t\t\t\t\tplusClass = data.amsSwitcherPlusClass || data.amsPlusClass || 'plus';\n\t\t\t\tif (!data.amsSwitcher) {\n\t\t\t\t\tconst veto = {veto: false};\n\t\t\t\t\tlegend.trigger('before-init.ams.switcher', [legend, data, veto]);\n\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t$(`<i class=\"fa fa-${data.amsSwitcherState === 'open' ? minusClass : plusClass} mr-2\"></i>`)\n\t\t\t\t\t\t.prependTo(legend);\n\t\t\t\t\tlegend.on('click', (evt) => {\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\tconst veto = {};\n\t\t\t\t\t\tlegend.trigger('before-switch.ams.switcher', [legend, veto]);\n\t\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (fieldset.hasClass('switched')) {\n\t\t\t\t\t\t\tfieldset.removeClass('switched');\n\t\t\t\t\t\t\tMyAMS.core.switchIcon($('i', legend), plusClass, minusClass);\n\t\t\t\t\t\t\tlegend.trigger('opened.ams.switcher', [legend]);\n\t\t\t\t\t\t\tconst id = legend.attr('id');\n\t\t\t\t\t\t\tif (id) {\n\t\t\t\t\t\t\t\t$(`legend.switcher[data-ams-switcher-sync=\"${id}\"]`, fieldset).each((idx, elt) => {\n\t\t\t\t\t\t\t\t\tconst switcher = $(elt);\n\t\t\t\t\t\t\t\t\tif (switcher.parents('fieldset').hasClass('switched')) {\n\t\t\t\t\t\t\t\t\t\tswitcher.click();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfieldset.addClass('switched');\n\t\t\t\t\t\t\tMyAMS.core.switchIcon($('i', legend), minusClass, plusClass);\n\t\t\t\t\t\t\tlegend.trigger('closed.ams.switcher', [legend]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (data.amsSwitcherState !== 'open') {\n\t\t\t\t\t\tfieldset.addClass('switched');\n\t\t\t\t\t}\n\t\t\t\t\tlegend.trigger('after-init.ams.switcher', [legend]);\n\t\t\t\t\tlegend.data('ams-switcher', true);\n\t\t\t\t}\n\t\t\t});\n\t\t\tresolve(switchers);\n\t\t} else {\n\t\t\tresolve(null);\n\t\t}\n\t});\n}\n\n\n/**\n * Form validation plug-in\n */\n\nexport function validate(element) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst forms = $('form:not([novalidate])', element);\n\t\tif (forms.length > 0) {\n\t\t\tMyAMS.require('ajax', 'i18n').then(() => {\n\t\t\t\tMyAMS.ajax.check($.fn.validate,\n\t\t\t\t\t`${MyAMS.env.baseURL}../ext/validate/jquery-validate${MyAMS.env.extext}.js`).then((firstLoad) => {\n\t\t\t\t\tif (firstLoad && (MyAMS.i18n.language !== 'en')) {\n\t\t\t\t\t\tMyAMS.core.getScript(`${MyAMS.env.baseURL}../ext/validate/i18n/messages_${MyAMS.i18n.language}${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tforms.each((idx, elt) => {\n\t\t\t\t\t\tconst\n\t\t\t\t\t\t\tform = $(elt),\n\t\t\t\t\t\t\tdata = form.data(),\n\t\t\t\t\t\t\tdataOptions = {\n\t\t\t\t\t\t\t\tignore: null,\n\t\t\t\t\t\t\t\tinvalidHandler: MyAMS.core.getFunctionByName(data.amsValidateInvalidHandler) || (\n\t\t\t\t\t\t\t\t\t(evt, validator) => {\n\t\t\t\t\t\t\t\t\t\t// automatically display hidden fields with errors!\n\t\t\t\t\t\t\t\t\t\t$('span.is-invalid', form).remove();\n\t\t\t\t\t\t\t\t\t\t$('.is-invalid', form).removeClass('is-invalid');\n\t\t\t\t\t\t\t\t\t\tfor (const error of validator.errorList) {\n\t\t\t\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\t\t\t\telement = $(error.element),\n\t\t\t\t\t\t\t\t\t\t\t\tpanels = element.parents('.tab-pane'),\n\t\t\t\t\t\t\t\t\t\t\t\tfieldsets = element.parents('fieldset.switched');\n\t\t\t\t\t\t\t\t\t\t\tfieldsets.each((idx, elt) => {\n\t\t\t\t\t\t\t\t\t\t\t\t$('legend.switcher', elt).click();\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\tpanels.each((idx, elt) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanel = $(elt),\n\t\t\t\t\t\t\t\t\t\t\t\t\ttabs = panel.parents('.tab-content')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.siblings('.nav-tabs');\n\t\t\t\t\t\t\t\t\t\t\t\t$(`li:nth-child(${panel.index() + 1})`, tabs)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.addClass('is-invalid');\n\t\t\t\t\t\t\t\t\t\t\t\t$('li.is-invalid:first a', tabs)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.click();\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\terrorElement: data.amsValidateErrorElement || 'span',\n\t\t\t\t\t\t\t\terrorClass: data.amsValidateErrorClass || 'is-invalid',\n\t\t\t\t\t\t\t\terrorPlacement: MyAMS.core.getFunctionByName(data.amsValidateErrorPlacement) ||\n\t\t\t\t\t\t\t\t\t((error, element) => {\n\t\t\t\t\t\t\t\t\t\terror.addClass('invalid-feedback');\n\t\t\t\t\t\t\t\t\t\telement.closest('.form-widget').append(error);\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tsubmitHandler: MyAMS.core.getFunctionByName(data.amsValidateSubmitHandler) ||\n\t\t\t\t\t\t\t\t\t(form.attr('data-async') !== undefined ?\n\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\tMyAMS.require('form').then(() => {\n\t\t\t\t\t\t\t\t\t\t\t\tMyAMS.form.submit(form);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t: () => {\n\t\t\t\t\t\t\t\t\t\t\tform.get(0).submit();\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t$('[data-ams-validate-rules]', form).each((idx, elt) => {\n\t\t\t\t\t\t\tif (idx === 0) {\n\t\t\t\t\t\t\t\tdataOptions.rules = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdataOptions.rules[$(elt).attr('name')] = $(elt).data('ams-validate-rules');\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$('[data-ams-validate-messages]', form).each((idx, elt) => {\n\t\t\t\t\t\t\tif (idx === 0) {\n\t\t\t\t\t\t\t\tdataOptions.messages = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdataOptions.messages[$(elt).attr('name')] = $(elt).data('ams-validate-messages');\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet settings = $.extend({}, dataOptions, data.amsValidateOptions || data.amsOptions);\n\t\t\t\t\t\tsettings = MyAMS.core.executeFunctionByName(data.amsValidateInitCallback ||\n\t\t\t\t\t\t\tdata.amsInit, document, form, settings) || settings;\n\t\t\t\t\t\tconst veto = {veto: false};\n\t\t\t\t\t\tform.trigger('before-init.ams.validate', [form, settings, veto]);\n\t\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst plugin = form.validate(settings);\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(data.amsValidateAfterInitCallback ||\n\t\t\t\t\t\t\tdata.amsAfterInit, document, form, plugin, settings);\n\t\t\t\t\t\tform.trigger('after-init.ams.validate', [form, plugin]);\n\t\t\t\t\t});\n\t\t\t\t}, reject).then(() => {\n\t\t\t\t\tresolve(forms);\n\t\t\t\t});\n\t\t\t}, reject);\n\t\t}\n\t});\n}\n\n\n/**\n * Global module initialization\n */\n\nif (window.MyAMS) {\n\n\t// register loaded plug-ins\n\tMyAMS.registry.register(checker, 'checker');\n\tMyAMS.registry.register(contextMenu, 'contextMenu');\n\tMyAMS.registry.register(datatables, 'datatables');\n\tMyAMS.registry.register(dragdrop, 'dragdrop');\n\tMyAMS.registry.register(fileInput, 'fileInput');\n\tMyAMS.registry.register(select2, 'select2');\n\tMyAMS.registry.register(svgPlugin, 'svg');\n\tMyAMS.registry.register(switcher, 'switcher');\n\tMyAMS.registry.register(validate, 'validate');\n\n\t// register module\n\tMyAMS.config.modules.push('plugins');\n\tif (!MyAMS.env.bundle) {\n\t\tconsole.debug(\"MyAMS: plugins module loaded...\");\n\t}\n}\n"],"file":"mod-plugins-dev.js"}