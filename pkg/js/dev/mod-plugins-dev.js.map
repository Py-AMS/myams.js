{"version":3,"sources":["mod-plugins.js"],"names":["$","MyAMS","templates","jsrender","require","CHECKER_TEMPLATE_STRING","CHECKER_TEMPLATE","markup","checker","element","each","idx","elt","legend","data","amsChecker","fieldset","parent","checked","hasClass","amsCheckerState","fieldName","amsCheckerFieldname","core","generateId","fieldId","replace","prefix","amsCheckerHiddenPrefix","marker","amsCheckerMarker","checkerMode","amsCheckerMode","checkedValue","amsCheckerValueOn","uncheckedValue","amsCheckerValueOff","props","text","value","amsCheckerValue","readonly","amsCheckerReadonly","state","veto","trigger","html","render","change","evt","input","target","is","prop","executeFunctionByName","amsCheckerChangeHandler","document","amsCheckerCancelDefault","siblings","removeClass","val","addClass","closest","on","click","contextMenu","menus","length","then","menu","options","menuSelector","amsContextmenuSelector","amsMenuSelector","settings","extend","amsContextmenuOptions","amsOptions","amsContextmenuInitCallback","amsInit","plugin","amsContextmenuAfterInitCallback","amsAfterInit","fileInput","inputs","ajax","check","window","bsCustomFileInput","env","baseURL","extext","inputId","attr","inputSelector","form","formId","formSelector","init","_select2Helpers","select2UpdateHiddenField","values","find","children","push","title","join","select2","selects","fn","firstLoad","required","getScript","i18n","language","getCSS","when","apply","select","defaultOptions","theme","hidden","insertAfter","listattr","amsSelect2Separator","removeAttr","templateSelection","amsSelect2Options","amsSelect2InitCallback","modal","currentTarget","parents","first","exists","zIndex","parseInt","css","$dropdown","sortable","containment","update","id","params","option","helpers","moveElementToParentEnd","amsSelect2AfterInitCallback","svgPlugin","svgs","container","svg","width","height","setAttribute","Math","round","parseFloat","switcher","minusClass","amsSwitcherMinusClass","amsMinusClass","plusClass","amsSwitcherPlusClass","amsPlusClass","amsSwitcher","amsSwitcherState","prependTo","preventDefault","switchIcon","validate","forms","dataOptions","ignore","invalidHandler","getFunctionByName","amsValidateInvalidHandler","validator","remove","errorList","error","panels","fieldsets","panel","tabs","index","errorElement","amsValidateErrorElement","errorClass","amsValidateErrorClass","errorPlacement","amsvalidateErrorPlacement","append","submitHandler","amsValidateSubmitHandler","undefined","submit","get","rules","messages","amsValidateOptions","amsValidateInitCallback","amsValidateAfterInitCallback","registry","register","config","modules","bundle","console","debug"],"mappings":"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","sourcesContent":["/* global MyAMS, bsCustomFileInput */\n/**\n * MyAMS standard plugins\n */\n\nconst $ = MyAMS.$;\n\nif (!$.templates) {\n\tconst jsrender = require('jsrender');\n\t$.templates = jsrender.templates;\n}\n\n\n/**\n * Fieldset checker plug-in\n * A checker is like a simple switcher, but also provides a checkbox which is used\n * as \"switcher\" input field.\n * The \"checker\" class is applied to the fieldset legend; checkbox is created automatically\n * by the plug-in.\n * Check options are given as data attributes, all prefixed with \"ams-checker-\":\n *  - state: is 'off' by default; can be set to 'on' to automatically activate the checker\n *  - mode: is 'hide' by default, which make the fieldset hidden when the checker is not activated;\n *    you cna set it to \"disable\" to make fieldset content visible but disabled when the checker\n *    is not activated\n *  - fieldname: is the name of the input checkbox created by the plug-in\n *  - value: this is the \"checked\" value of the main checkbox field\n *  - readonly: if \"true\", the checkbox is disabled and in read-only mode\n *  - hidden-prefix: if not null, this is a prefix which will be assigned to an additional\n *    hidden input field, updated automatically when the checker is switched; the name of the\n *    hidden input if made of this prefix, followed by the \"fieldname\" value\n *  - value-on: this is the \"checked\" value of the hidden input; \"true\" by default\n *  - value-off: this is the \"unchecked\" value of the hidden input; \"false\" by default\n *  - marker: if not null, another hidden input with a fixed value of 1 will be created; the name\n *    of this input will be the \"fieldname\" value followed by this \"marker\" value\n *  - change-handler: this optional handler will be called on checker switch\n *  - cancel-default: if \"true\", the default behaviour will not be executed on checker switch\n */\n\nconst CHECKER_TEMPLATE_STRING = `\n\t<span class=\"custom-control custom-switch\">\n\t\t<input type=\"checkbox\"\n\t\t\t   id=\"{{: fieldId }}\" name=\"{{: fieldName }}\"\n\t\t\t   class=\"custom-control-input checker\"\n\t\t\t   {{if checked}}checked{{/if}}\n\t\t\t   {{if readonly}}disabled{{/if}}\n\t\t\t   value=\"{{: value }}\" />\n\t\t{{if prefix}}\n\t\t<input type=\"hidden\" class=\"prefix\"\n\t\t\t   id=\"{{: prefix}}{{: fieldName}}_prefix\"\n\t\t\t   name=\"{{: prefix}}{{: fieldName}}\"\n\t\t\t   value=\"{{if state==='on'}}{{: checkedValue}}{{else}}{{: uncheckedValue}}{{/if}}\" />\n\t\t{{else marker}}\n\t\t<input type=\"hidden\" class=\"marker\"\n\t\t\t   name=\"{{: fieldName}}{{: marker}}\"\n\t\t\t   value=\"1\" />\n\t\t{{/if}}\n\t\t<label for=\"{{: fieldId }}\"\n\t\t\t   class=\"custom-control-label\">\n\t\t\t{{: legend }}\n\t\t</label>\n\t</span>\n`;\n\nconst CHECKER_TEMPLATE = $.templates({\n\tmarkup: CHECKER_TEMPLATE_STRING\n});\n\nexport function checker(element) {\n\t$('legend.checker', element).each((idx, elt) => {\n\t\tconst\n\t\t\tlegend = $(elt),\n\t\t\tdata = legend.data();\n\t\tif (!data.amsChecker) {\n\t\t\tconst\n\t\t\t\tfieldset = legend.parent('fieldset'),\n\t\t\t\tchecked = fieldset.hasClass('switched') || (data.amsCheckerState === 'on'),\n\t\t\t\tfieldName = data.amsCheckerFieldname || `checker_${MyAMS.core.generateId()}`,\n\t\t\t\tfieldId = fieldName.replace(/\\./g, '_'),\n\t\t\t\tprefix = data.amsCheckerHiddenPrefix,\n\t\t\t\tmarker = data.amsCheckerMarker || false,\n\t\t\t\tcheckerMode = data.amsCheckerMode || 'hide',\n\t\t\t\tcheckedValue = data.amsCheckerValueOn || 'true',\n\t\t\t\tuncheckedValue = data.amsCheckerValueOff || 'false',\n\t\t\t\tprops = {\n\t\t\t\t\tlegend: legend.text(),\n\t\t\t\t\tfieldName: fieldName,\n\t\t\t\t\tfieldId: fieldId,\n\t\t\t\t\tvalue: data.amsCheckerValue || true,\n\t\t\t\t\tchecked: checked,\n\t\t\t\t\treadonly: data.amsCheckerReadonly,\n\t\t\t\t\tprefix: prefix,\n\t\t\t\t\tstate: data.amsCheckerState,\n\t\t\t\t\tcheckedValue: checkedValue,\n\t\t\t\t\tuncheckedValue: uncheckedValue,\n\t\t\t\t\tmarker: marker\n\t\t\t\t},\n\t\t\t\tveto = { veto: false };\n\t\t\tlegend.trigger('before-init.ams.checker', [legend, props, veto]);\n\t\t\tif (veto.veto) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlegend.html(CHECKER_TEMPLATE.render(props));\n\t\t\t$('input', legend).change((evt) => {\n\t\t\t\tconst\n\t\t\t\t\tinput = $(evt.target),\n\t\t\t\t\tchecked = input.is(':checked'),\n\t\t\t\t\tveto = { veto: false };\n\t\t\t\tlegend.trigger('before-switch.ams.checker', [legend, veto]);\n\t\t\t\tif (veto.veto) {\n\t\t\t\t\tinput.prop('checked', !checked);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tMyAMS.core.executeFunctionByName(data.amsCheckerChangeHandler, document,\n\t\t\t\t\tlegend, checked);\n\t\t\t\tif (!data.amsCheckerCancelDefault) {\n\t\t\t\t\tconst prefix = input.siblings('.prefix');\n\t\t\t\t\tif (checkerMode === 'hide') {\n\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\tfieldset.removeClass('switched');\n\t\t\t\t\t\t\tprefix.val(checkedValue);\n\t\t\t\t\t\t\tlegend.trigger('opened.ams.checker', [legend]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfieldset.addClass('switched');\n\t\t\t\t\t\t\tprefix.val(uncheckedValue);\n\t\t\t\t\t\t\tlegend.trigger('closed.ams.checker', [legend]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfieldset.prop('disabled', !checked);\n\t\t\t\t\t\tprefix.val(checked ? checkedValue : uncheckedValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tlegend.closest('form').on('reset', () => {\n\t\t\t\tconst checker = $('.checker', legend);\n\t\t\t\tif (checker.prop('checked') !== checked) {\n\t\t\t\t\tchecker.click();\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!checked) {\n\t\t\t\tif (checkerMode === 'hide') {\n\t\t\t\t\tfieldset.addClass('switched');\n\t\t\t\t} else {\n\t\t\t\t\tfieldset.prop('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlegend.trigger('after-init.ams.checker', [legend]);\n\t\t\tlegend.data('ams-checker', true);\n\t\t}\n\t});\n}\n\n\n/**\n * Context menu plug-in\n */\n\nexport function contextMenu(element) {\n\tconst menus = $('.context-menu', element);\n\tif (menus.length > 0) {\n\t\tMyAMS.require('menu').then(() => {\n\t\t\tmenus.each((idx, elt) => {\n\t\t\t\tconst\n\t\t\t\t\tmenu = $(elt),\n\t\t\t\t\tdata = menu.data(),\n\t\t\t\t\toptions = {\n\t\t\t\t\t\tmenuSelector: data.amsContextmenuSelector || data.amsMenuSelector\n\t\t\t\t\t};\n\t\t\t\tlet settings = $.extend({}, options, data.amsContextmenuOptions || data.amsOptions);\n\t\t\t\tsettings = MyAMS.core.executeFunctionByName(\n\t\t\t\t\tdata.amsContextmenuInitCallback || data.amsInit, menu, settings) || settings;\n\t\t\t\tconst veto = { veto: false };\n\t\t\t\tmenu.trigger('before-init.ams.contextmenu', [menu, settings, veto]);\n\t\t\t\tif (veto.veto) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst plugin = menu.contextMenu(settings);\n\t\t\t\tMyAMS.core.executeFunctionByName(\n\t\t\t\t\tdata.amsContextmenuAfterInitCallback || data.amsAfterInit, menu, plugin, settings);\n\t\t\t\tmenu.trigger('after-init.ams.contextmenu', [menu]);\n\t\t\t});\n\t\t});\n\t}\n}\n\n\n/**\n * Bootstrap custom file input manager\n */\n\nexport function fileInput(element) {\n\tconst inputs = $('.custom-file-input', element);\n\tif (inputs.length > 0) {\n\t\tMyAMS.require('ajax').then(() => {\n\t\t\tMyAMS.ajax.check(window.bsCustomFileInput,\n\t\t\t\t`${MyAMS.env.baseURL}../ext/bs-custom-file-input${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t$(inputs).each((idx, elt) => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tinput = $(elt),\n\t\t\t\t\t\tinputId = input.attr('id'),\n\t\t\t\t\t\tinputSelector = inputId ? `#${inputId}` : input.attr('name'),\n\t\t\t\t\t\tform = $(elt.form),\n\t\t\t\t\t\tformId = form.attr('id'),\n\t\t\t\t\t\tformSelector = formId ? `#${formId}` : form.attr('name'),\n\t\t\t\t\t\tveto = { veto: false };\n\t\t\t\t\tinput.trigger('before-init.ams.fileinput', [input, veto]);\n\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbsCustomFileInput.init(inputSelector, formSelector);\n\t\t\t\t\tinput.trigger('after-init.ams.fileinput', [input]);\n\t\t\t\t});\n\t\t\t});\n\t\t})\n\t}\n}\n\n\n/**\n * Select2 plug-in integration\n */\n\nconst _select2Helpers = {\n\n\tselect2UpdateHiddenField: function(input) {\n\t\tconst values = [];\n\t\tinput.parent().find('ul.select2-selection__rendered').children('li[title]').each((idx, elt) => {\n\t\t\tvalues.push(input.children(`option[data-content=\"${elt.title}\"]`).attr('value'));\n\t\t});\n\t\tinput.data('select2-target').val(values.join(input.data('ams-select2-separator') || ','));\n\t}\n};\n\nexport function select2(element) {\n\tconst selects = $('.select2', element);\n\tif (selects.length > 0) {\n\t\tMyAMS.require('ajax', 'helpers').then(() => {\n\t\t\tMyAMS.ajax.check($.fn.select2,\n\t\t\t\t`${MyAMS.env.baseURL}../ext/select2/select2${MyAMS.env.extext}.js`).then((firstLoad) => {\n\t\t\t\tconst required = [];\n\t\t\t\tif (firstLoad) {\n\t\t\t\t\trequired.push(MyAMS.core.getScript(`${MyAMS.env.baseURL}../ext/select2/i18n/${MyAMS.i18n.language}.js`));\n\t\t\t\t\trequired.push(MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/select2${MyAMS.env.extext}.css`, 'select2'));\n\t\t\t\t\trequired.push(MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/select2-bootstrap4${MyAMS.env.extext}.css`, 'select2_bs4'));\n\t\t\t\t}\n\t\t\t\t$.when.apply($, required).then(() => {\n\t\t\t\t\tselects.each((idx, elt) => {\n\t\t\t\t\t\tconst\n\t\t\t\t\t\t\tselect = $(elt),\n\t\t\t\t\t\t\tdata = select.data();\n\t\t\t\t\t\tif (data.select2) {\n\t\t\t\t\t\t\treturn;  // already initialized\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst defaultOptions = {\n\t\t\t\t\t\t\ttheme: 'bootstrap4',\n\t\t\t\t\t\t\tlanguage: MyAMS.i18n.language\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (select.hasClass('sortable')) {\n\t\t\t\t\t\t\t// create hidden input for sortable selections\n\t\t\t\t\t\t\tconst hidden = $(`<input type=\"hidden\" name=\"${select.attr('name')}\">`).insertAfter(select);\n\t\t\t\t\t\t\thidden.val($('option:selected', select).listattr('value').join(data.amsSelect2Separator || ','));\n\t\t\t\t\t\t\tselect.data('select2-target', hidden)\n\t\t\t\t\t\t\t\t.removeAttr('name');\n\t\t\t\t\t\t\tdefaultOptions.templateSelection = (data) => {\n\t\t\t\t\t\t\t\tconst elt = $(data.element);\n\t\t\t\t\t\t\t\telt.attr('data-content', elt.html());\n\t\t\t\t\t\t\t\treturn data.text;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet settings = $.extend({}, defaultOptions, data.amsSelect2Options || data.amsOptions);\n\t\t\t\t\t\tsettings = MyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\tdata.amsSelect2InitCallback || data.amsInit, select, settings) || settings;\n\t\t\t\t\t\tconst veto = { veto: false };\n\t\t\t\t\t\tselect.trigger('before-init.ams.select2', [select, settings, veto]);\n\t\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst plugin = select.select2(settings);\n\t\t\t\t\t\tselect.on('select2:opening select2:selecting select2:unselecting select2:clearing', (evt) => {\n\t\t\t\t\t\t\tif ($(evt.target).is(':disabled')) {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tselect.on('select2:opening', (evt) => {\n\t\t\t\t\t\t\tconst modal = $(evt.currentTarget).parents('.modal').first();\n\t\t\t\t\t\t\tif (modal.exists()) {\n\t\t\t\t\t\t\t\tconst zIndex = parseInt(modal.css('z-index'));\n\t\t\t\t\t\t\t\tplugin.data('select2').$dropdown.css('z-index', zIndex + 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (select.hasClass('sortable')) {\n\t\t\t\t\t\t\tMyAMS.ajax.check($.fn.sortable,\n\t\t\t\t\t\t\t\t`${MyAMS.env.baseURL}../ext/jquery-ui${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t\t\t\tselect.parent().find('ul.select2-selection__rendered').sortable({\n\t\t\t\t\t\t\t\t\tcontainment: 'parent',\n\t\t\t\t\t\t\t\t\tupdate: () => {\n\t\t\t\t\t\t\t\t\t\t_select2Helpers.select2UpdateHiddenField(select);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tselect.on('select2:select select2:unselect', (evt) => {\n\t\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\t\tid = evt.params.data.id,\n\t\t\t\t\t\t\t\t\t\ttarget = $(evt.currentTarget),\n\t\t\t\t\t\t\t\t\t\toption = target.children(`option[value=\"${id}\"]`);\n\t\t\t\t\t\t\t\t\tMyAMS.helpers.moveElementToParentEnd(option);\n\t\t\t\t\t\t\t\t\ttarget.trigger('change');\n\t\t\t\t\t\t\t\t\t_select2Helpers.select2UpdateHiddenField(target);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\tdata.amsSelect2AfterInitCallback || data.amsAfterInit,\n\t\t\t\t\t\t\tselect, plugin, settings);\n\t\t\t\t\t\tselect.trigger('after-init.ams.select2', [select]);\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t})\n\t\t});\n\t}\n}\n\n\n/**\n * SVG image plug-in\n */\n\nexport function svgPlugin(element) {\n\tconst svgs = $('.svg-container', element);\n\tif (svgs.length > 0) {\n\t\tsvgs.each((idx, elt) => {\n\t\t\tconst\n\t\t\t\tcontainer = $(elt),\n\t\t\t\tsvg = $('svg', container),\n\t\t\t\twidth = svg.attr('width'),\n\t\t\t\theight = svg.attr('height');\n\t\t\tif (width && height) {\n\t\t\t\telt.setAttribute('viewBox',\n\t\t\t\t\t`0 0 ${Math.round(parseFloat(width))} ${Math.round(parseFloat(height))}`);\n\t\t\t}\n\t\t\tsvg.attr('width', '100%').attr('height', 'auto');\n\t\t});\n\t}\n}\n\n\n/**\n * Fieldset switcher plug-in\n */\n\nexport function switcher(element) {\n\t$('legend.switcher', element).each((idx, elt) => {\n\t\tconst\n\t\t\tlegend = $(elt),\n\t\t\tfieldset = legend.parent('fieldset'),\n\t\t\tdata = legend.data(),\n\t\t\tminusClass = data.amsSwitcherMinusClass || data.amsMinusClass || 'minus',\n\t\t\tplusClass = data.amsSwitcherPlusClass || data.amsPlusClass || 'plus';\n\t\tif (!data.amsSwitcher) {\n\t\t\tconst veto = { veto: false };\n\t\t\tlegend.trigger('before-init.ams.switcher', [legend, data, veto]);\n\t\t\tif (veto.veto) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$(`<i class=\"fa fa-${data.amsSwitcherState === 'open' ? minusClass : plusClass} mr-2\"></i>`)\n\t\t\t\t.prependTo(legend);\n\t\t\tlegend.on('click', (evt) => {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tconst veto = {};\n\t\t\t\tlegend.trigger('before-switch.ams.switcher', [legend, veto]);\n\t\t\t\tif (veto.veto) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (fieldset.hasClass('switched')) {\n\t\t\t\t\tfieldset.removeClass('switched');\n\t\t\t\t\tMyAMS.core.switchIcon($('i', legend), plusClass, minusClass);\n\t\t\t\t\tlegend.trigger('opened.ams.switcher', [legend]);\n\t\t\t\t\tconst id = legend.attr('id');\n\t\t\t\t\tif (id) {\n\t\t\t\t\t\t$(`legend.switcher[data-ams-switcher-sync=\"${id}\"]`, fieldset).each((idx, elt) => {\n\t\t\t\t\t\t\tconst switcher = $(elt);\n\t\t\t\t\t\t\tif (switcher.parents('fieldset').hasClass('switched')) {\n\t\t\t\t\t\t\t\tswitcher.click();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfieldset.addClass('switched');\n\t\t\t\t\tMyAMS.core.switchIcon($('i', legend), minusClass, plusClass);\n\t\t\t\t\tlegend.trigger('closed.ams.switcher', [legend]);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (data.amsSwitcherState !== 'open') {\n\t\t\t\tfieldset.addClass('switched');\n\t\t\t}\n\t\t\tlegend.trigger('after-init.ams.switcher', [legend]);\n\t\t\tlegend.data('ams-switcher', true);\n\t\t}\n\t});\n}\n\n\n/**\n * Form validation plug-in\n */\n\nexport function validate(element) {\n\tconst forms = $('form:not([novalidate])', element);\n\tif (forms.length > 0) {\n\t\tMyAMS.require('ajax', 'i18n').then(() => {\n\t\t\tMyAMS.ajax.check($.fn.validate,\n\t\t\t\t`${MyAMS.env.baseURL}../ext/validate/jquery-validate${MyAMS.env.extext}.js`).then((firstLoad) => {\n\t\t\t\tif (firstLoad && (MyAMS.i18n.language !== 'en')) {\n\t\t\t\t\tMyAMS.core.getScript(`${MyAMS.env.baseURL}../ext/validate/i18n/messages_${MyAMS.i18n.language}${MyAMS.env.extext}.js`).then(() => {});\n\t\t\t\t}\n\t\t\t\tforms.each((idx, elt) => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tform = $(elt),\n\t\t\t\t\t\tdata = form.data(),\n\t\t\t\t\t\tdataOptions = {\n\t\t\t\t\t\t\tignore: null,\n\t\t\t\t\t\t\tinvalidHandler: MyAMS.core.getFunctionByName(data.amsValidateInvalidHandler) || (\n\t\t\t\t\t\t\t\t(evt, validator) => {\n\t\t\t\t\t\t\t\t\t// automatically display hidden fields with errors!\n\t\t\t\t\t\t\t\t\t$('span.is-invalid', form).remove();\n\t\t\t\t\t\t\t\t\t$('.is-invalid', form).removeClass('is-invalid');\n\t\t\t\t\t\t\t\t\tfor (const error of validator.errorList) {\n\t\t\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\t\t\telement = $(error.element),\n\t\t\t\t\t\t\t\t\t\t\tpanels = element.parents('.tab-pane'),\n\t\t\t\t\t\t\t\t\t\t\tfieldsets = element.parents('fieldset.switched');\n\t\t\t\t\t\t\t\t\t\tfieldsets.each((idx, elt) => {\n\t\t\t\t\t\t\t\t\t\t\t$('legend.switcher', elt).click();\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tpanels.each((idx, elt) => {\n\t\t\t\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\t\t\t\tpanel = $(elt),\n\t\t\t\t\t\t\t\t\t\t\t\ttabs = panel.parents('.tab-content')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.siblings('.nav-tabs');\n\t\t\t\t\t\t\t\t\t\t\t$(`li:nth-child(${panel.index()+1})`, tabs)\n\t\t\t\t\t\t\t\t\t\t\t\t.addClass('is-invalid');\n\t\t\t\t\t\t\t\t\t\t\t$('li.is-invalid:first a', tabs)\n\t\t\t\t\t\t\t\t\t\t\t\t.click();\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\terrorElement: data.amsValidateErrorElement || 'span',\n\t\t\t\t\t\t\terrorClass: data.amsValidateErrorClass || 'is-invalid',\n\t\t\t\t\t\t\terrorPlacement: MyAMS.core.getFunctionByName(data.amsvalidateErrorPlacement) ||\n\t\t\t\t\t\t\t\t((error, element) => {\n\t\t\t\t\t\t\t\t\terror.addClass('invalid-feedback');\n\t\t\t\t\t\t\t\t\telement.closest('.form-widget').append(error);\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tsubmitHandler: MyAMS.core.getFunctionByName(data.amsValidateSubmitHandler) ||\n\t\t\t\t\t\t\t\t(form.attr('data-async') !== undefined ?\n\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\tMyAMS.require('form').then(() => {\n\t\t\t\t\t\t\t\t\t\t\tMyAMS.form.submit(form);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t: () => {\n\t\t\t\t\t\t\t\t\t\tform.get(0).submit();\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t};\n\t\t\t\t\t$('[data-ams-validate-rules]', form).each((idx, elt) => {\n\t\t\t\t\t\tif (idx === 0) {\n\t\t\t\t\t\t\tdataOptions.rules = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdataOptions.rules[$(elt).attr('name')] = $(elt).data('ams-validate-rules');\n\t\t\t\t\t});\n\t\t\t\t\t$('[data-ams-validate-messages]', form).each((idx, elt) => {\n\t\t\t\t\t\tif (idx === 0) {\n\t\t\t\t\t\t\tdataOptions.messages = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdataOptions.messages[$(elt).attr('name')] = $(elt).data('ams-validate-messages');\n\t\t\t\t\t});\n\t\t\t\t\tlet settings = $.extend({}, dataOptions, data.amsValidateOptions || data.amsOptions);\n\t\t\t\t\tsettings = MyAMS.core.executeFunctionByName(data.amsValidateInitCallback ||\n\t\t\t\t\t\tdata.amsInit, form, settings) || settings;\n\t\t\t\t\tconst veto = { veto: false };\n\t\t\t\t\tform.trigger('before-init.ams.validate', [form, settings, veto]);\n\t\t\t\t\tif (veto.veto) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst plugin = form.validate(settings);\n\t\t\t\t\tMyAMS.core.executeFunctionByName(data.amsValidateAfterInitCallback ||\n\t\t\t\t\t\tdata.amsAfterInit, form, plugin, settings);\n\t\t\t\t\tform.trigger('after-init.ams.validate', [form]);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n\n\n/**\n * Global module initialization\n */\n\nif (window.MyAMS) {\n\n\t// register loaded plug-ins\n\tMyAMS.registry.register(checker, 'checker');\n\tMyAMS.registry.register(contextMenu, 'contextMenu');\n\tMyAMS.registry.register(fileInput, 'fileInput');\n\tMyAMS.registry.register(select2, 'select2');\n\tMyAMS.registry.register(svgPlugin, 'svg');\n\tMyAMS.registry.register(switcher, 'switcher');\n\tMyAMS.registry.register(validate, 'validate');\n\n\t// register module\n\tMyAMS.config.modules.push('plugins');\n\tif (!MyAMS.env.bundle) {\n\t\tconsole.debug(\"MyAMS: plugins module loaded...\");\n\t}\n}\n"],"file":"mod-plugins-dev.js"}