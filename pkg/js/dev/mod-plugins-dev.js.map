{"version":3,"sources":["mod-plugins.js"],"names":["$","MyAMS","CHECKER_TEMPLATE_STRING","CHECKER_TEMPLATE","templates","markup","checker","element","each","idx","elt","legend","data","amsChecker","fieldset","parent","checked","hasClass","amsCheckerState","fieldName","amsCheckerFieldname","core","generateId","fieldId","replace","prefix","amsCheckerHiddenPrefix","marker","amsCheckerMarker","checkerMode","amsCheckerMode","checkedValue","amsCheckerValueOn","uncheckedValue","amsCheckerValueOff","props","text","value","amsCheckerValue","readonly","amsCheckerReadonly","state","html","render","change","evt","input","target","is","veto","trigger","prop","executeFunctionByName","amsCheckerChangeHandler","document","amsCheckerCancelDefault","siblings","removeClass","val","addClass","closest","on","click","contextMenu","menus","length","require","then","menu","options","menuSelector","amsContextmenuSelector","amsMenuSelector","settings","extend","amsContextmenuOptions","amsOptions","amsContextmenuinitCallback","amsInit","plugin","amsContextmenuAfterInitCallback","amsAfterinit","fileInput","inputs","ajax","check","window","bsCustomFileInput","env","baseURL","extext","inputId","attr","inputSelector","form","formId","formSelector","init","_select2Helpers","select2UpdateHiddenField","values","find","children","push","title","join","select2","selects","fn","firstLoad","required","getScript","i18n","language","getCSS","when","apply","select","defaultOptions","theme","hidden","insertAfter","listattr","amsSelect2Separator","removeAttr","templateSelection","container","amsSelect2Options","amsSelect2InitCallback","modal","currentTarget","parents","first","exists","zIndex","parseInt","css","$dropdown","sortable","containment","update","id","params","option","helpers","moveElementToParentEnd","amsSelect2AfterInitCallback","amsAfterInit","svgPlugin","svgs","svg","width","height","setAttribute","Math","round","parseFloat","switcher","minusClass","amsSwitcherMinusClass","amsMinusClass","plusClass","amsSwitcherPlusClass","amsPlusClass","amsSwitcher","amsSwitcherState","prependTo","preventDefault","switchIcon","validate","forms","dataOptions","ignore","invalidHandler","getFunctionByName","amsValidateInvalidHandler","validator","remove","errorList","error","panels","fieldsets","panel","tabs","index","errorElement","amsValidateErrorElement","errorClass","amsValidateErrorClass","errorPlacement","amsvalidateErrorPlacement","append","submitHandler","amsValidateSubmitHandler","undefined","submit","get","rules","messages","amsValidateOptions","amsValidateInitCallback","amsValidateAfterInitCallback","registry","register","config","modules","bundle","console","debug"],"mappings":"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","sourcesContent":["/**\n * MyAMS standard plugins\n */\n\nconst $ = MyAMS.$;\n\n\n/**\n * Fieldset checker plug-in\n * A checker is like a simple switcher, but also provides a checkbox which is used\n * as \"switcher\" input field.\n * The \"checker\" class is applied to the fieldset legend; checkbox is created automatically\n * by the plug-in.\n * Check options are given as data attributes, all prefixed with \"ams-checker-\":\n *  - state: is 'off' by default; can be set to 'on' to automatically activate the checker\n *  - mode: is 'hide' by default, which make the fieldset hidden when the checker is not activated;\n *    you cna set it to \"disable\" to make fieldset content visible but disabled when the checker\n *    is not activated\n *  - fieldname: is the name of the input checkbox created by the plug-in\n *  - value: this is the \"checked\" value of the main checkbox field\n *  - readonly: if \"true\", the checkbox is disabled and in read-only mode\n *  - hidden-prefix: if not null, this is a prefix which will be assigned to an additional\n *    hidden input field, updated automatically when the checker is switched; the name of the\n *    hidden input if made of this prefix, followed by the \"fieldname\" value\n *  - value-on: this is the \"checked\" value of the hidden input; \"true\" by default\n *  - value-off: this is the \"unchecked\" value of the hidden input; \"false\" by default\n *  - marker: if not null, another hidden input with a fixed value of 1 will be created; the name\n *    of this input will be the \"fieldname\" value followed by this \"marker\" value\n *  - change-handler: this optional handler will be called on checker switch\n *  - cancel-default: if \"true\", the default behaviour will not be executed on checker switch\n */\n\nconst CHECKER_TEMPLATE_STRING = `\n\t<span class=\"custom-control custom-switch\">\n\t\t<input type=\"checkbox\"\n\t\t\t   id=\"{{: fieldId }}\" name=\"{{: fieldName }}\"\n\t\t\t   class=\"custom-control-input checker\"\n\t\t\t   {{if checked}}checked{{/if}}\n\t\t\t   {{if readonly}}disabled{{/if}}\n\t\t\t   value=\"{{: value }}\" />\n\t\t{{if prefix}}\n\t\t<input type=\"hidden\" class=\"prefix\"\n\t\t\t   id=\"{{: prefix}}{{: fieldName}}_prefix\"\n\t\t\t   name=\"{{: prefix}}{{: fieldName}}\"\n\t\t\t   value=\"{{if state==='on'}}{{: checkedValue}}{{else}}{{: uncheckedValue}}{{/if}}\" />\n\t\t{{else marker}}\n\t\t<input type=\"hidden\" class=\"marker\"\n\t\t\t   name=\"{{: fieldName}}{{: marker}}\"\n\t\t\t   value=\"1\" />\n\t\t{{/if}}\n\t\t<label for=\"{{: fieldId }}\"\n\t\t\t   class=\"custom-control-label\">\n\t\t\t{{: legend }}\n\t\t</label>\n\t</span>\n`;\n\nconst CHECKER_TEMPLATE = $.templates({\n\tmarkup: CHECKER_TEMPLATE_STRING\n});\n\nfunction checker(element) {\n\t$('legend.checker', element).each((idx, elt) => {\n\t\tconst\n\t\t\tlegend = $(elt),\n\t\t\tdata = legend.data();\n\t\tif (!data.amsChecker) {\n\t\t\tconst\n\t\t\t\tfieldset = legend.parent('fieldset'),\n\t\t\t\tchecked = fieldset.hasClass('switched') || (data.amsCheckerState === 'on'),\n\t\t\t\tfieldName = data.amsCheckerFieldname || `checker_${MyAMS.core.generateId()}`,\n\t\t\t\tfieldId = fieldName.replace(/\\./g, '_'),\n\t\t\t\tprefix = data.amsCheckerHiddenPrefix,\n\t\t\t\tmarker = data.amsCheckerMarker || false,\n\t\t\t\tcheckerMode = data.amsCheckerMode || 'hide',\n\t\t\t\tcheckedValue = data.amsCheckerValueOn || 'true',\n\t\t\t\tuncheckedValue = data.amsCheckerValueOff || 'false',\n\t\t\t\tprops = {\n\t\t\t\t\tlegend: legend.text(),\n\t\t\t\t\tfieldName: fieldName,\n\t\t\t\t\tfieldId: fieldId,\n\t\t\t\t\tvalue: data.amsCheckerValue || true,\n\t\t\t\t\tchecked: checked,\n\t\t\t\t\treadonly: data.amsCheckerReadonly,\n\t\t\t\t\tprefix: prefix,\n\t\t\t\t\tstate: data.amsCheckerState,\n\t\t\t\t\tcheckedValue: checkedValue,\n\t\t\t\t\tuncheckedValue: uncheckedValue,\n\t\t\t\t\tmarker: marker\n\t\t\t\t};\n\t\t\tlegend.html(CHECKER_TEMPLATE.render(props));\n\t\t\t$('input', legend).change((evt) => {\n\t\t\t\tconst\n\t\t\t\t\tinput = $(evt.target),\n\t\t\t\t\tchecked = input.is(':checked'),\n\t\t\t\t\tveto = { veto: false };\n\t\t\t\tlegend.trigger('before-switch.ams.checker', [legend, veto]);\n\t\t\t\tif (veto.veto) {\n\t\t\t\t\tinput.prop('checked', !checked);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tMyAMS.core.executeFunctionByName(data.amsCheckerChangeHandler, document,\n\t\t\t\t\tlegend, checked);\n\t\t\t\tif (!data.amsCheckerCancelDefault) {\n\t\t\t\t\tconst prefix = input.siblings('.prefix');\n\t\t\t\t\tif (checkerMode === 'hide') {\n\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\tfieldset.removeClass('switched');\n\t\t\t\t\t\t\tprefix.val(checkedValue);\n\t\t\t\t\t\t\tlegend.trigger('opened.ams.checker', [legend]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfieldset.addClass('switched');\n\t\t\t\t\t\t\tprefix.val(uncheckedValue);\n\t\t\t\t\t\t\tlegend.trigger('closed.ams.checker', [legend]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfieldset.prop('disabled', !checked);\n\t\t\t\t\t\tprefix.val(checked ? checkedValue : uncheckedValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tlegend.closest('form').on('reset', (evt) => {\n\t\t\t\tconst checker = $('.checker', legend);\n\t\t\t\tif (checker.prop('checked') !== checked) {\n\t\t\t\t\tchecker.click();\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!checked) {\n\t\t\t\tif (checkerMode === 'hide') {\n\t\t\t\t\tfieldset.addClass('switched');\n\t\t\t\t} else {\n\t\t\t\t\tfieldset.prop('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlegend.data('ams-checker', true);\n\t\t}\n\t});\n}\n\n\n/**\n * Context menu plug-in\n */\n\nfunction contextMenu(element) {\n\tconst menus = $('.context-menu', element);\n\tif (menus.length > 0) {\n\t\tMyAMS.require('menu').then(() => {\n\t\t\tmenus.each((idx, elt) => {\n\t\t\t\tconst\n\t\t\t\t\tmenu = $(elt),\n\t\t\t\t\tdata = menu.data(),\n\t\t\t\t\toptions = {\n\t\t\t\t\t\tmenuSelector: data.amsContextmenuSelector || data.amsMenuSelector\n\t\t\t\t\t};\n\t\t\t\tlet settings = $.extend({}, options, data.amsContextmenuOptions || data.amsOptions);\n\t\t\t\tsettings = MyAMS.core.executeFunctionByName(\n\t\t\t\t\tdata.amsContextmenuinitCallback || data.amsInit, menu, settings) || settings;\n\t\t\t\tconst plugin = menu.contextMenu(settings);\n\t\t\t\tMyAMS.core.executeFunctionByName(\n\t\t\t\t\tdata.amsContextmenuAfterInitCallback || data.amsAfterinit, menu, plugin, settings);\n\t\t\t});\n\t\t});\n\t}\n}\n\n\n/**\n * Bootstrap custom file input manager\n */\n\nfunction fileInput(element) {\n\tconst inputs = $('.custom-file-input', element);\n\tif (inputs.length > 0) {\n\t\tMyAMS.require('ajax').then(() => {\n\t\t\tMyAMS.ajax.check(window.bsCustomFileInput,\n\t\t\t\t`${MyAMS.env.baseURL}../ext/bs-custom-file-input${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t$(inputs).each((idx, elt) => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tinput = $(elt),\n\t\t\t\t\t\tinputId = input.attr('id'),\n\t\t\t\t\t\tinputSelector = inputId ? `#${inputId}` : input.attr('name'),\n\t\t\t\t\t\tform = $(elt.form),\n\t\t\t\t\t\tformId = form.attr('id'),\n\t\t\t\t\t\tformSelector = formId ? `#${formId}` : form.attr('name');\n\t\t\t\t\tbsCustomFileInput.init(inputSelector, formSelector);\n\t\t\t\t});\n\t\t\t});\n\t\t})\n\t}\n}\n\n\n/**\n * Select2 plug-in integration\n */\n\nconst _select2Helpers = {\n\n\tselect2UpdateHiddenField: function(input) {\n\t\tconst values = [];\n\t\tinput.parent().find('ul.select2-selection__rendered').children('li[title]').each((idx, elt) => {\n\t\t\tvalues.push(input.children(`option[data-content=\"${elt.title}\"]`).attr('value'));\n\t\t});\n\t\tinput.data('select2-target').val(values.join(input.data('ams-select2-separator') || ','));\n\t}\n};\n\nfunction select2(element) {\n\tconst selects = $('.select2', element);\n\tif (selects.length > 0) {\n\t\tMyAMS.require('ajax', 'helpers').then(() => {\n\t\t\tMyAMS.ajax.check($.fn.select2,\n\t\t\t\t`${MyAMS.env.baseURL}../ext/select2/select2${MyAMS.env.extext}.js`).then((firstLoad) => {\n\t\t\t\tconst required = [];\n\t\t\t\tif (firstLoad) {\n\t\t\t\t\trequired.push(MyAMS.core.getScript(`${MyAMS.env.baseURL}../ext/select2/i18n/${MyAMS.i18n.language}.js`));\n\t\t\t\t\trequired.push(MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/select2${MyAMS.env.extext}.css`, 'select2'));\n\t\t\t\t\trequired.push(MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/select2-bootstrap4${MyAMS.env.extext}.css`, 'select2_bs4'));\n\t\t\t\t}\n\t\t\t\t$.when.apply($, required).then(() => {\n\t\t\t\t\tselects.each((idx, elt) => {\n\t\t\t\t\t\tconst\n\t\t\t\t\t\t\tselect = $(elt),\n\t\t\t\t\t\t\tdata = select.data();\n\t\t\t\t\t\tif (data.select2) {\n\t\t\t\t\t\t\treturn;  // already initialized\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst defaultOptions = {\n\t\t\t\t\t\t\ttheme: 'bootstrap4',\n\t\t\t\t\t\t\tlanguage: MyAMS.i18n.language\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (select.hasClass('sortable')) {\n\t\t\t\t\t\t\t// create hidden input for sortable selections\n\t\t\t\t\t\t\tconst hidden = $(`<input type=\"hidden\" name=\"${select.attr('name')}\">`).insertAfter(select);\n\t\t\t\t\t\t\thidden.val($('option:selected', select).listattr('value').join(data.amsSelect2Separator || ','));\n\t\t\t\t\t\t\tselect.data('select2-target', hidden)\n\t\t\t\t\t\t\t\t.removeAttr('name');\n\t\t\t\t\t\t\tdefaultOptions.templateSelection = (data, container) => {\n\t\t\t\t\t\t\t\tconst elt = $(data.element);\n\t\t\t\t\t\t\t\telt.attr('data-content', elt.html());\n\t\t\t\t\t\t\t\treturn data.text;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet settings = $.extend({}, defaultOptions, data.amsSelect2Options || data.amsOptions);\n\t\t\t\t\t\tsettings = MyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\tdata.amsSelect2InitCallback || data.amsInit, select, settings) || settings;\n\t\t\t\t\t\tconst plugin = select.select2(settings);\n\t\t\t\t\t\tselect.on('select2:opening select2:selecting select2:unselecting select2:clearing', (evt) => {\n\t\t\t\t\t\t\tif ($(evt.target).is(':disabled')) {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tselect.on('select2:opening', (evt) => {\n\t\t\t\t\t\t\tconst modal = $(evt.currentTarget).parents('.modal').first();\n\t\t\t\t\t\t\tif (modal.exists()) {\n\t\t\t\t\t\t\t\tconst zIndex = parseInt(modal.css('z-index'));\n\t\t\t\t\t\t\t\tplugin.data('select2').$dropdown.css('z-index', zIndex + 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (select.hasClass('sortable')) {\n\t\t\t\t\t\t\tMyAMS.ajax.check($.fn.sortable,\n\t\t\t\t\t\t\t\t`${MyAMS.env.baseURL}../ext/jquery-ui${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t\t\t\tselect.parent().find('ul.select2-selection__rendered').sortable({\n\t\t\t\t\t\t\t\t\tcontainment: 'parent',\n\t\t\t\t\t\t\t\t\tupdate: () => {\n\t\t\t\t\t\t\t\t\t\t_select2Helpers.select2UpdateHiddenField(select);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tselect.on('select2:select select2:unselect', (evt) => {\n\t\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\t\tid = evt.params.data.id,\n\t\t\t\t\t\t\t\t\t\ttarget = $(evt.currentTarget),\n\t\t\t\t\t\t\t\t\t\toption = target.children(`option[value=\"${id}\"]`);\n\t\t\t\t\t\t\t\t\tMyAMS.helpers.moveElementToParentEnd(option);\n\t\t\t\t\t\t\t\t\ttarget.trigger('change');\n\t\t\t\t\t\t\t\t\t_select2Helpers.select2UpdateHiddenField(target);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(\n\t\t\t\t\t\t\tdata.amsSelect2AfterInitCallback || data.amsAfterInit,\n\t\t\t\t\t\t\tselect, plugin, settings);\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t})\n\t\t});\n\t}\n}\n\n\n/**\n * SVG image plug-in\n */\n\nfunction svgPlugin(element) {\n\tconst svgs = $('.svg-container', element);\n\tif (svgs.length > 0) {\n\t\tsvgs.each((idx, elt) => {\n\t\t\tconst container = $(elt),\n\t\t\t\t  svg = $('svg', container),\n\t\t\t\t  width = svg.attr('width'),\n\t\t\t\t  height = svg.attr('height');\n\t\t\tif (width && height) {\n\t\t\t\telt.setAttribute('viewBox',\n\t\t\t\t\t\t\t\t `0 0 ${Math.round(parseFloat(width))} ${Math.round(parseFloat(height))}`);\n\t\t\t}\n\t\t\tsvg.attr('width', '100%')\n\t\t\t   .attr('height', 'auto');\n\t\t});\n\t}\n}\n\n\n/**\n * Fieldset switcher plug-in\n */\n\nfunction switcher(element) {\n\t$('legend.switcher', element).each((idx, elt) => {\n\t\tconst\n\t\t\tlegend = $(elt),\n\t\t\tfieldset = legend.parent('fieldset'),\n\t\t\tdata = legend.data(),\n\t\t\tminusClass = data.amsSwitcherMinusClass || data.amsMinusClass || 'minus',\n\t\t\tplusClass = data.amsSwitcherPlusClass || data.amsPlusClass || 'plus';\n\t\tif (!data.amsSwitcher) {\n\t\t\t$(`<i class=\"fa fa-${data.amsSwitcherState === 'open' ? minusClass : plusClass} mr-2\"></i>`)\n\t\t\t\t.prependTo(legend);\n\t\t\tlegend.on('click', (evt) => {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tconst veto = {};\n\t\t\t\tlegend.trigger('before-switch.ams.switcher', [legend, veto]);\n\t\t\t\tif (veto.veto) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (fieldset.hasClass('switched')) {\n\t\t\t\t\tfieldset.removeClass('switched');\n\t\t\t\t\tMyAMS.core.switchIcon($('i', legend), plusClass, minusClass);\n\t\t\t\t\tlegend.trigger('opened.ams.switcher', [legend]);\n\t\t\t\t\tconst id = legend.attr('id');\n\t\t\t\t\tif (id) {\n\t\t\t\t\t\t$(`legend.swicther[data-ams-switcher-sync=\"${id}\"]`, fieldset).each((idx, elt) => {\n\t\t\t\t\t\t\tconst switcher = $(elt);\n\t\t\t\t\t\t\tif (switcher.parents('fieldset').hasClass('switched')) {\n\t\t\t\t\t\t\t\tswitcher.click();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfieldset.addClass('switched');\n\t\t\t\t\tMyAMS.core.switchIcon($('i', legend), minusClass, plusClass);\n\t\t\t\t\tlegend.trigger('closed.ams.switcher', [legend]);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (data.amsSwitcherState !== 'open') {\n\t\t\t\tfieldset.addClass('switched');\n\t\t\t}\n\t\t\tlegend.data('ams-switcher', true);\n\t\t}\n\t});\n}\n\n\n/**\n * Form validation plug-in\n */\n\nfunction validate(element) {\n\tconst forms = $('form:not([novalidate])', element);\n\tif (forms.length > 0) {\n\t\tMyAMS.require('ajax', 'i18n').then(() => {\n\t\t\tMyAMS.ajax.check($.fn.validate,\n\t\t\t\t`${MyAMS.env.baseURL}../ext/validate/jquery-validate${MyAMS.env.extext}.js`).then((firstLoad) => {\n\t\t\t\tif (firstLoad && (MyAMS.i18n.language !== 'en')) {\n\t\t\t\t\tMyAMS.core.getScript(`${MyAMS.env.baseURL}../ext/validate/i18n/messages_${MyAMS.i18n.language}${MyAMS.env.extext}.js`).then(() => {});\n\t\t\t\t}\n\t\t\t\tforms.each((idx, elt) => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tform = $(elt),\n\t\t\t\t\t\tdata = form.data(),\n\t\t\t\t\t\tdataOptions = {\n\t\t\t\t\t\t\tignore: null,\n\t\t\t\t\t\t\tinvalidHandler: MyAMS.core.getFunctionByName(data.amsValidateInvalidHandler) || (\n\t\t\t\t\t\t\t\t(evt, validator) => {\n\t\t\t\t\t\t\t\t\t// automatically display hidden fields with errors!\n\t\t\t\t\t\t\t\t\t$('span.is-invalid', form).remove();\n\t\t\t\t\t\t\t\t\t$('.is-invalid', form).removeClass('is-invalid');\n\t\t\t\t\t\t\t\t\tfor (const error of validator.errorList) {\n\t\t\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\t\t\telement = $(error.element),\n\t\t\t\t\t\t\t\t\t\t\tpanels = element.parents('.tab-pane'),\n\t\t\t\t\t\t\t\t\t\t\tfieldsets = element.parents('fieldset.switched');\n\t\t\t\t\t\t\t\t\t\tfieldsets.each((idx, elt) => {\n\t\t\t\t\t\t\t\t\t\t\t$('legend.switcher', elt).click();\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tpanels.each((idx, elt) => {\n\t\t\t\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\t\t\t\tpanel = $(elt),\n\t\t\t\t\t\t\t\t\t\t\t\ttabs = panel.parents('.tab-content')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.siblings('.nav-tabs');\n\t\t\t\t\t\t\t\t\t\t\t$(`li:nth-child(${panel.index()+1})`, tabs)\n\t\t\t\t\t\t\t\t\t\t\t\t.addClass('is-invalid');\n\t\t\t\t\t\t\t\t\t\t\t$('li.is-invalid:first a', tabs)\n\t\t\t\t\t\t\t\t\t\t\t\t.click();\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\terrorElement: data.amsValidateErrorElement || 'span',\n\t\t\t\t\t\t\terrorClass: data.amsValidateErrorClass || 'is-invalid',\n\t\t\t\t\t\t\terrorPlacement: MyAMS.core.getFunctionByName(data.amsvalidateErrorPlacement) ||\n\t\t\t\t\t\t\t\t((error, element) => {\n\t\t\t\t\t\t\t\t\terror.addClass('invalid-feedback');\n\t\t\t\t\t\t\t\t\telement.closest('.form-widget').append(error);\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tsubmitHandler: MyAMS.core.getFunctionByName(data.amsValidateSubmitHandler) ||\n\t\t\t\t\t\t\t\t(form.attr('data-async') !== undefined ?\n\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\tMyAMS.require('form').then(() => {\n\t\t\t\t\t\t\t\t\t\t\tMyAMS.form.submit(form);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t: () => {\n\t\t\t\t\t\t\t\t\t\tform.get(0).submit();\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t};\n\t\t\t\t\t$('[data-ams-validate-rules]', form).each((idx, elt) => {\n\t\t\t\t\t\tif (idx === 0) {\n\t\t\t\t\t\t\tdataOptions.rules = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdataOptions.rules[$(elt).attr('name')] = $(elt).data('ams-validate-rules');\n\t\t\t\t\t});\n\t\t\t\t\t$('[data-ams-validate-messages]', form).each((idx, elt) => {\n\t\t\t\t\t\tif (idx === 0) {\n\t\t\t\t\t\t\tdataOptions.messages = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdataOptions.messages[$(elt).attr('name')] = $(elt).data('ams-validate-messages');\n\t\t\t\t\t});\n\t\t\t\t\tlet settings = $.extend({}, dataOptions, data.amsValidateOptions || data.amsOptions);\n\t\t\t\t\tsettings = MyAMS.core.executeFunctionByName(data.amsValidateInitCallback ||\n\t\t\t\t\t\tdata.amsInit, form, settings) || settings;\n\t\t\t\t\tconst plugin = form.validate(settings);\n\t\t\t\t\tMyAMS.core.executeFunctionByName(data.amsValidateAfterInitCallback ||\n\t\t\t\t\t\tdata.amsAfterInit, form, plugin, settings);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n\n\n/**\n * Global module initialization\n */\n\nif (window.MyAMS) {\n\n\t// register loaded plug-ins\n\tMyAMS.registry.register(checker, 'checker');\n\tMyAMS.registry.register(contextMenu, 'contextMenu');\n\tMyAMS.registry.register(fileInput, 'fileInput');\n\tMyAMS.registry.register(select2, 'select2');\n\tMyAMS.registry.register(svgPlugin, 'svg');\n\tMyAMS.registry.register(switcher, 'switcher');\n\tMyAMS.registry.register(validate, 'validate');\n\n\t// register module\n\tMyAMS.config.modules.push('plugins');\n\tif (!MyAMS.env.bundle) {\n\t\tconsole.debug(\"MyAMS: plugins module loaded...\");\n\t}\n}\n"],"file":"mod-plugins-dev.js"}