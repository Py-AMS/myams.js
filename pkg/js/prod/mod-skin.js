!function(t,e){if("function"==typeof define&&define.amd)define(["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var n={};e(n),t.modSkin=n}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.skin=void 0;function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],a=!0,o=!1,i=void 0;try{for(var c,r=t[Symbol.iterator]();!(a=(c=r.next()).done)&&(n.push(c.value),!e||n.length!==e);a=!0);}catch(t){o=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f=MyAMS.$,e=!1,n={init:function(){e||(e=!0,MyAMS.config.enableTooltips&&MyAMS.dom.root.tooltip({selector:".hint",html:MyAMS.config.enableHtmlTooltips}),f(".hint").mousedown(function(t){f(t.currentTarget).tooltip("hide")}),n.checkURL(),f(window).on("hashchange",n.checkURL))},initElement:function(t){MyAMS.config.enableTooltips||f(".hint",t).tooltip({html:MyAMS.config.enableHtmlTooltips})},checkURL:function(){return new Promise(function(t,e){var a,n=MyAMS.dom.nav,o=location.hash,i=o.replace(/^#/,""),c=null,r=i.indexOf("!");if(0<r&&(o=o.substring(0,r+1),c=i.substring(r+1),i=i.substring(0,r)),i){var s=f("#content");s.exists()||(s=MyAMS.dom.root),a=f('a[href="'.concat(o,'"]'),n),MyAMS.skin.loadURL(i,s).then(function(){var t=f("html head title").data("ams-title-prefix"),e=t?"".concat(t," > "):"";if(document.title="".concat(e).concat(f("[data-ams-page-title]:first",s).data("ams-page-title")||a.attr("title")||document.title),c){var n=f("#".concat(c));n.exists()&&MyAMS.require("ajax").then(function(){MyAMS.ajax.check(f.fn.scrollTo,"".concat(MyAMS.env.baseURL,"../ext/jquery-scrollto").concat(MyAMS.env.extext,".js")).then(function(){f("#main").scrollTo(n,{offset:-15})})})}},e).then(function(){a.exists()?MyAMS.require("nav").then(function(){MyAMS.nav.setActiveMenu(a)}).then(t):t()})}else{var l=f("[data-ams-active-menu]").data("ams-active-menu");(a=l?f('a[href="'.concat(l,'"]'),n):f('>ul >li >a[href!="#"]',n).first()).exists()?MyAMS.require("nav").then(function(){MyAMS.nav.setActiveMenu(a),l?MyAMS.nav.drawBreadcrumbs():window.location.replace(window.location.href+a.attr("href"))}).then(t,e):t()}})},loadURL:function(c,r,t){var s=2<arguments.length&&void 0!==t?t:{};return new Promise(function(i,o){c.startsWith("#")&&(c=c.substr(1)),r=f(r),MyAMS.core.clearContent(r).then(function(t){if(t){var e={type:"GET",url:c,dataType:"html",cache:!1,beforeSend:function(){r.html('<h1 class="loading"><i class="fa fa-cog fa-spin"></i> '.concat(MyAMS.i18n.LOADING,"</h1>")),s&&s.preLoadCallback&&MyAMS.core.executeFunctionByName(s.preLoadCallback,void 0,s.preLoadCallbackOptions),r[0]===f("#content")[0]&&MyAMS.require("nav").then(function(){MyAMS.nav.drawBreadcrumbs();var t=f("html head title").data("ams-title-prefix"),e=t?"".concat(t," > "):"";document.title="".concat(e).concat(f(".breadcrumb li:last-child").text()),MyAMS.dom.root.animate({scrollTop:0},"fast")})}},n=f.extend({},e,s),a={veto:!1};r.trigger("before-load.ams.content",[n,a]),a.veto||f.ajax(n).then(function(t,a,o){if(f.isArray(t)){var e=l(t,3);t=e[0],a=e[1],o=e[2]}MyAMS.require("ajax").then(function(){var t=MyAMS.ajax.getResponse(o);if(t){var e=t.contentType,n=t.data;switch(f(".loading",r).remove(),e){case"json":MyAMS.ajax.handleJSON(n,r),i(n,a,o);break;case"script":case"xml":i(n,a,o);break;case"html":case"text":default:r.parents(".hidden").removeClass("hidden"),r.css({opacity:"0.0"}).html(n).removeClass("hidden").delay(30).animate({opacity:"1.0"},300),MyAMS.core.executeFunctionByName(r.data("ams-init-content")||MyAMS.config.initContent,window,r).then(function(){MyAMS.form&&MyAMS.form.setFocus(r),r.trigger("after-load.ams.content"),i(n,a,o)})}MyAMS.stats&&MyAMS.stats.logPageview()}})},function(t,e,n){r.html('<h3 class="error"><i class="fa fa-exclamation-triangle text-danger"></i> \n\t\t\t\t\t\t\t\t'.concat(MyAMS.i18n.ERROR," ").concat(n,"</h3>").concat(t.responseText)),o(n)})}})})}};t.skin=n,window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("skin"):(MyAMS.skin=n,console.debug("MyAMS: skin module loaded...")))});