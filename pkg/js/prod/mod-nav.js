!function(e,n){var t;"function"==typeof define&&define.amd?define(["exports"],n):"undefined"!=typeof exports?n(exports):(n(t={}),e.modNav=t)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e){"use strict";function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(t.push(r.value),!n||t.length!==n);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return t}(e,n)||l(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=l(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==t.return||t.return()}finally{if(s)throw o}}}}function l(e,n){if(e){if("string"==typeof e)return a(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}Object.defineProperty(e,"__esModule",{value:!0}),e.linkClickHandler=M,e.nav=e.NavigationMenu=void 0;var p=MyAMS.$,r=function(){function n(e){i(this,n),this.props=e}return t(n,[{key:"render",value:function(){return p('<li class="header"></li>').text(this.props.header||"")}}]),n}(),h=function(){function e(){i(this,e)}return t(e,[{key:"render",value:function(){return p('<li class="divider"></li>')}}]),e}(),s=function(){function u(e){i(this,u),this.items=e}return t(u,[{key:"render",value:function(){var e,n=p("<div></div>"),t=m(this.items);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.label){for(var i=p("<li></li>"),o=p("<a></a>").attr("href",a.href||"#").attr("title",a.label),r=0,s=Object.entries(a.attrs||{});r<s.length;r++){var l=f(s[r],2),c=l[0],d=l[1];o.attr(c,d)}a.icon&&p('<i class="fa-lg fa-fw mr-1"></i>').addClass(a.icon).appendTo(o),p('<span class="menu-item-parent"></span>').text(a.label).appendTo(o),a.badge&&p('<span class="badge ml-1 mr-3 float-right"></span>').addClass("bg-".concat(a.badge.status)).text(a.badge.value).appendTo(o),o.appendTo(i),a.items&&p("<ul></ul>").append(new u(a.items).render()).appendTo(i),i.appendTo(n)}else(new h).render().appendTo(n)}}catch(e){t.e(e)}finally{t.f()}return n.children()}}]),u}(),c=function(){function a(e,n,t){i(this,a),this.menus=e,this.parent=n,this.settings=t}return t(a,[{key:"getMenus",value:function(){var e,n=p("<ul></ul>"),t=m(this.menus);try{for(t.s();!(e=t.n()).done;){var a=e.value;void 0!==a.header&&n.append(new r(a).render()),n.append(new s(a.items).render())}}catch(e){t.e(e)}finally{t.f()}return n}},{key:"render",value:function(){var e=this.getMenus();this.init(e),this.parent.append(e)}},{key:"init",value:function(a){var s=this.settings;a.find("li").each(function(e,n){var t,a=p(n);0<a.find("ul").length&&((t=a.find("a:first")).append('<b class="collapse-sign">'.concat(s.closedSign,"</b>")),"#"===t.attr("href")&&t.click(function(){return!1}))}),a.find("li.active").each(function(e,n){var t=p(n).parents("ul"),a=t.parent("li");t.slideDown(s.speed),a.find("b:first").html(s.openedSign),a.addClass("open")}),a.find("li a").on("click",function(e){var i,o,r,n,t=p(e.currentTarget);t.hasClass("active")||(t.parents("li").removeClass("active"),i=t.attr("href").replace(/^#/,""),o=t.parent().find("ul"),s.accordion&&(r=t.parent().parents("ul"),a.find("ul:visible").each(function(e,t){var n,a=!0;r.each(function(e,n){if(n===t)return a=!1}),a&&o!==t&&(n=p(t),!i&&n.hasClass("active")||n.slideUp(s.speed,function(){n.parent("li").removeClass("open").find("b:first").delay(s.speed).html(s.closedSign)}))})),n=t.parent().find("ul:first"),i||!n.is(":visible")||n.hasClass("active")?n.slideDown(s.speed,function(){t.parent("li").addClass("open").find("b:first").delay(s.speed).html(s.openedSign)}):n.slideUp(s.speed,function(){t.parent("li").removeClass("open").find("b:first").delay(s.speed).html(s.closedSign)}))})}}]),a}();e.NavigationMenu=c;var n=!1,d=null;function u(e){location&&e.startsWith("#")?e!==location.hash&&(window.location.hash=e):window.location=e}function M(d){return new Promise(function(n,t){var e,a,i,o,r,s,l=p(d.currentTarget),c=l.data("ams-disabled-handlers");!0!==c&&"click"!==c&&"all"!==c&&(!(s=l.attr("href")||l.data("ams-url"))||s.startsWith("javascript:")||l.attr("target")||!0===l.data("ams-context-menu")||(d.preventDefault(),d.stopPropagation(),i=0<=s.indexOf("?")?(a=(e=s.split("?"))[0],e[1].unserialize()):void(a=s),"function"==typeof(o=MyAMS.core.getFunctionByName(a))&&(s=o(l,i)),"function"==typeof s?n(s(l,i)):(s=s.replace(/%23/,"#"),d.ctrlKey?(window.open&&window.open(s),n()):(r=l.data("ams-target")||l.attr("target"))?"_blank"===r?(window.open&&window.open(s),n()):MyAMS.form?MyAMS.form.confirmChangedForm().then(function(e){"success"===e&&MyAMS.skin&&MyAMS.skin.loadURL(s,r,l.data("ams-link-options"),l.data("ams-link-callback")).then(n,t)}):MyAMS.skin&&MyAMS.skin.loadURL(s,r,l.data("ams-link-options"),l.data("ams-link-callback")).then(n,t):MyAMS.form?MyAMS.form.confirmChangedForm().then(function(e){"success"===e&&u(s)}).then(n):(u(s),n()))))})}var v={init:function(){n||(n=!0,p.fn.extend({navigationMenu:function(e){var n,t,a,i,o,r,s=this;0!==this.length&&(t={accordion:!1!==(n=this.data()).amsMenuAccordion,speed:200},MyAMS.config.useSVGIcons?(a=FontAwesome.findIconDefinition({iconName:"angle-down"}),i=FontAwesome.findIconDefinition({iconName:"angle-up"}),p.extend(t,{closedSign:"<em data-fa-i2svg>".concat(FontAwesome.icon(a).html,"</em>"),openedSign:"<em data-fa-i2svg>".concat(FontAwesome.icon(i).html,"</em>")})):p.extend(t,{closedSign:'<em class="fa fa-angle-down"></em>',openedSign:'<em class="fa fa-angle-up"></em>'}),o=p.extend({},t,e),n.amsMenuConfig?MyAMS.require("ajax","skin").then(function(){MyAMS.ajax.get(n.amsMenuConfig).then(function(e){new(MyAMS.core.getObject(n.amsMenuFactory)||c)(e,p(s),o).render(),MyAMS.skin.checkURL()})}):(r=p("ul",this),new c(null,p(this),o).init(r)))}}),MyAMS.config.ajaxNav&&(p(document).on("click",'a[href="#"]',function(e){e.preventDefault()}),p(document).on("click",'a[href!="#"]:not([data-toggle]), [data-ams-url]:not([data-toggle])',function(e){if(!p(e).data("ams-click-handler"))return M(e)}),p(document).on("click",'a[target="_blank"]',function(e){e.preventDefault();var n=p(e.currentTarget);window.open&&window.open(n.attr("href")),MyAMS.stats&&MyAMS.stats.logEvent(n.data("ams-stats-category")||"Navigation",n.data("ams-stats-action")||"External",n.data("ams-stats-label")||n.attr("href"))}),p(document).on("click",'a[target="_top"]',function(n){n.preventDefault(),MyAMS.form&&MyAMS.form.confirmChangedForm().then(function(e){"success"===e&&(window.location=p(n.currentTarget).attr("href"))})}),p(document).on("click",".nav-tabs a[data-toggle=tab]",function(e){if(p(e.currentTarget).parent("li").hasClass("disabled"))return e.stopPropagation(),e.preventDefault(),!1}),p(document).on("show.bs.tab",function(e){var n=p(e.target);n.exists()&&"A"!==n.get(0).tagName&&(n=p("a[href]",n));var t=n.data();if(t&&t.amsUrl){if(t.amsTabLoaded)return;n.append('<i class="fa fa-spin fa-cog ml-1"></i>'),MyAMS.require("skin").then(function(){MyAMS.skin.loadURL(t.amsUrl,n.attr("href")).then(function(){t.amsTabLoadOnce&&(t.amsTabLoaded=!0),p("i",n).remove()},function(){p("i",n).remove()})})}}),MyAMS.config.isMobile?(MyAMS.dom.root.addClass("mobile-detected"),MyAMS.require("ajax").then(function(){MyAMS.config.enableFastclick&&MyAMS.ajax.check(p.fn.noClickDelay,"".concat(MyAMS.env.baseURL,"../ext/js-smartclick").concat(MyAMS.env.extext,".js")).then(function(){p("a",MyAMS.dom.nav).noClickDelay(),p("a","#hide-menu").noClickDelay()}),MyAMS.dom.root.exists()&&MyAMS.ajax.check(window.Hammer,"".concat(MyAMS.env.baseURL,"../ext/hammer").concat(MyAMS.env.extext,".js")).then(function(){(d=new Hammer.Manager(MyAMS.dom.root.get(0))).add(new Hammer.Pan({direction:Hammer.DIRECTION_HORIZONTAL,threshold:200})),d.on("panright",function(){MyAMS.dom.root.hasClass("hidden-menu")||MyAMS.nav.switchMenu()}),d.on("panleft",function(){MyAMS.dom.root.hasClass("hidden-menu")&&MyAMS.nav.switchMenu()})})})):MyAMS.dom.root.addClass("desktop-detected")),v.restoreState())},initElement:function(e){p("nav",e).navigationMenu({speed:MyAMS.config.menuSpeed})},setActiveMenu:function(e){var n,t,a=MyAMS.dom.nav;p(".active",a).removeClass("active"),e.addClass("open").addClass("active"),e.parents("li").addClass("open active").children("ul").addClass("active").show(),e.parents("li:first").removeClass("open"),e.parents("ul").addClass(e.attr("href").replace(/^#/,"")?"active":"").show(),e.exists()&&(n=a.scrollTop(),((t=p(e).parents("li:last").position()).top<n||t.top>a.height()+n)&&a.scrollTop(t.top))},drawBreadcrumbs:function(){var e,r=p("ol.breadcrumb","#ribbon");p("li",r).not(".persistent").remove(),p("li",r).exists()||(e='<li class="breadcrumb-item">\n\t\t\t\t\t<a class="p-r-1" href="'.concat(p('a[href!="#"]:first',MyAMS.dom.nav).attr("href"),'">\n\t\t\t\t\t\t').concat(MyAMS.i18n.HOME,"\n\t\t\t\t\t</a>\n\t\t\t\t</li>"),r.append(p(e))),p("li.active >a",MyAMS.dom.nav).each(function(e,n){var t=p(n),a=p.trim(t.clone().children(".badge").remove().end().text()),i=t.attr("href"),o=p('<li class="breadcrumb-item"></li>').append(i.replace(/^#/,"")?p("<a></a>").html(a).attr("href",i):a);r.append(o)})},minifyMenu:function(e){e&&e.preventDefault(),MyAMS.dom.root.toggleClass("minified"),MyAMS.dom.root.hasClass("minified")?MyAMS.core.switchIcon(p("i",e.currentTarget),"arrow-circle-left","arrow-circle-right"):MyAMS.core.switchIcon(p("i",e.currentTarget),"arrow-circle-right","arrow-circle-left"),window.localStorage&&(MyAMS.dom.root.hasClass("minified")?localStorage.setItem("window-state","minified"):localStorage.setItem("window-state",""))},switchMenu:function(e){e&&e.preventDefault(),MyAMS.dom.root.toggleClass("hidden-menu"),window.localStorage&&(MyAMS.dom.root.hasClass("hidden-menu")?localStorage.setItem("window-state","hidden-menu"):localStorage.setItem("window-state",""))},restoreState:function(){var e;window.localStorage&&("minified"===(e=localStorage.getItem("window-state"))?MyAMS.nav.minifyMenu({currentTarget:p("#minifyme"),preventDefault:function(){}}):MyAMS.dom.root.addClass(e))}};e.nav=v,MyAMS.env.bundle?MyAMS.config.modules.push("nav"):(MyAMS.nav=v,console.debug("MyAMS: nav module loaded..."))});