!function(e,n){if("function"==typeof define&&define.amd)define(["exports"],n);else if("undefined"!=typeof exports)n(exports);else{var t={};n(t),e.modNav=t}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e){"use strict";function M(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(t.push(r.value),!n||t.length!==n);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}Object.defineProperty(e,"__esModule",{value:!0}),e.linkClickHandler=r,e.nav=e.NavigationMenu=void 0;var h=MyAMS.$,s=function(){function n(e){i(this,n),this.props=e}return t(n,[{key:"render",value:function(){return h('<li class="header"></li>').text(this.props.header||"")}}]),n}(),v=function(){function e(){i(this,e)}return t(e,[{key:"render",value:function(){return h('<li class="divider"></li>')}}]),e}(),l=function(){function p(e){i(this,p),this.items=e}return t(p,[{key:"render",value:function(){var e=h("<div></div>"),n=!0,t=!1,a=void 0;try{for(var i,o=this.items[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var r=i.value;if(r.label){for(var s=h("<li></li>"),l=h("<a></a>").attr("href",r.href||"#").attr("title",r.label),c=0,d=Object.entries(r.attrs||{});c<d.length;c++){var f=M(d[c],2),u=f[0],m=f[1];l.attr(u,m)}r.icon&&h('<i class="fa-lg fa-fw mr-1"></i>').addClass(r.icon).appendTo(l),h('<span class="menu-item-parent"></span>').text(r.label).appendTo(l),r.badge&&h('<span class="badge ml-1 mr-3 float-right"></span>').addClass("bg-".concat(r.badge.status)).text(r.badge.value).appendTo(l),l.appendTo(s),r.items&&h("<ul></ul>").append(new p(r.items).render()).appendTo(s),s.appendTo(e)}else(new v).render().appendTo(e)}}catch(e){t=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw a}}return e.children()}}]),p}(),c=function(){function a(e,n,t){i(this,a),this.menus=e,this.parent=n,this.settings=t}return t(a,[{key:"getMenus",value:function(){var e=h("<ul></ul>"),n=!0,t=!1,a=void 0;try{for(var i,o=this.menus[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var r=i.value;void 0!==r.header&&e.append(new s(r).render()),e.append(new l(r.items).render())}}catch(e){t=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw a}}return e}},{key:"render",value:function(){var e=this.getMenus();this.init(e),this.parent.append(e)}},{key:"init",value:function(a){var s=this.settings;a.find("li").each(function(e,n){var t=h(n);if(0<t.find("ul").length){var a=t.find("a:first");a.append('<b class="collapse-sign">'.concat(s.closedSign,"</b>")),"#"===a.attr("href")&&a.click(function(){return!1})}}),a.find("li.active").each(function(e,n){var t=h(n).parents("ul"),a=t.parent("li");t.slideDown(s.speed),a.find("b:first").html(s.openedSign),a.addClass("open")}),a.find("li a").on("click",function(e){var n=h(e.currentTarget);if(!n.hasClass("active")){n.parents("li").removeClass("active");var i=n.attr("href").replace(/^#/,""),o=n.parent().find("ul");if(s.accordion){var r=n.parent().parents("ul");a.find("ul:visible").each(function(e,t){var a=!0;if(r.each(function(e,n){if(n===t)return a=!1}),a&&o!==t){var n=h(t);!i&&n.hasClass("active")||n.slideUp(s.speed,function(){n.parent("li").removeClass("open").find("b:first").delay(s.speed).html(s.closedSign)})}})}var t=n.parent().find("ul:first");i||!t.is(":visible")||t.hasClass("active")?t.slideDown(s.speed,function(){n.parent("li").addClass("open").find("b:first").delay(s.speed).html(s.openedSign)}):t.slideUp(s.speed,function(){n.parent("li").removeClass("open").find("b:first").delay(s.speed).html(s.closedSign)})}})}}]),a}();e.NavigationMenu=c;var n=!1,o=null;function f(e){e.startsWith("#")?e!==location.hash&&(window.location.hash=e):window.location=e}function r(d){return new Promise(function(n,t){var a=h(d.currentTarget),e=a.data("ams-disabled-handlers");if(!0!==e&&"click"!==e&&"all"!==e){var i=a.attr("href")||a.data("ams-url");if(i&&!i.startsWith("javascript:")&&!a.attr("target")&&!0!==a.data("ams-context-menu")){var o,r,s;d.preventDefault(),d.stopPropagation(),s=0<=i.indexOf("?")?(r=(o=i.split("?"))[0],o[1].unserialize()):void(r=i);var l=MyAMS.core.getFunctionByName(r);if("function"==typeof l&&(i=l(a,s)),"function"==typeof i)n(i(a,s));else if(i=i.replace(/%23/,"#"),d.ctrlKey)window.open&&window.open(i),n();else{var c=a.data("ams-target")||a.attr("target");c?"_blank"===c?(window.open&&window.open(i),n()):MyAMS.form?MyAMS.form.confirmChangedForm().then(function(e){"success"===e&&MyAMS.skin&&MyAMS.skin.loadURL(i,c,a.data("ams-link-options"),a.data("ams-link-callback")).then(n,t)}):MyAMS.skin&&MyAMS.skin.loadURL(i,c,a.data("ams-link-options"),a.data("ams-link-callback")).then(n,t):MyAMS.form?MyAMS.form.confirmChangedForm().then(function(e){"success"===e&&f(i)}).then(n):(f(i),n())}}}})}var d={init:function(){n||(n=!0,h.fn.extend({navigationMenu:function(e){var n=this;if(0!==this.length){var t=this.data(),a={accordion:!1!==t.amsMenuAccordion,speed:200};if(MyAMS.config.useSVGIcons){var i=FontAwesome.findIconDefinition({iconName:"angle-down"}),o=FontAwesome.findIconDefinition({iconName:"angle-up"});h.extend(a,{closedSign:"<em data-fa-i2svg>".concat(FontAwesome.icon(i).html,"</em>"),openedSign:"<em data-fa-i2svg>".concat(FontAwesome.icon(o).html,"</em>")})}else h.extend(a,{closedSign:'<em class="fa fa-angle-down"></em>',openedSign:'<em class="fa fa-angle-up"></em>'});var r=h.extend({},a,e);if(t.amsMenuConfig)MyAMS.require("ajax").then(function(){MyAMS.ajax.get(t.amsMenuConfig).then(function(e){new(MyAMS.core.getObject(t.amsMenuFactory)||c)(e,h(n),r).render(),MyAMS.require("skin").then(function(){MyAMS.skin.checkURL()})})});else{var s=h("ul",this);new c(null,h(this),r).init(s)}}}}),MyAMS.config.ajaxNav&&(h(document).on("click",'a[href="#"]',function(e){e.preventDefault()}),h(document).on("click",'a[href!="#"]:not([data-toggle]), [data-ams-url]:not([data-toggle])',function(e){if(!h(e).data("ams-click-handler"))return r(e)}),h(document).on("click",'a[target="_blank"]',function(e){e.preventDefault();var n=h(e.currentTarget);window.open&&window.open(n.attr("href")),MyAMS.stats&&MyAMS.stats.logEvent(n.data("ams-stats-category")||"Navigation",n.data("ams-stats-action")||"External",n.data("ams-stats-label")||n.attr("href"))}),h(document).on("click",'a[target="_top"]',function(n){n.preventDefault(),MyAMS.form&&MyAMS.form.confirmChangedForm().then(function(e){"success"===e&&(window.location=h(n.currentTarget).attr("href"))})}),h(document).on("click",".nav-tabs a[data-toggle=tab]",function(e){if(h(e.currentTarget).parent("li").hasClass("disabled"))return e.stopPropagation(),e.preventDefault(),!1}),h(document).on("show.bs.tab",function(e){var n=h(e.target);n.exists()&&"A"!==n.get(0).tagName&&(n=h("a[href]",n));var t=n.data();if(t&&t.amsUrl){if(t.amsTabLoaded)return;n.append('<i class="fa fa-spin fa-cog ml-1"></i>'),MyAMS.require("skin").then(function(){MyAMS.skin.loadURL(t.amsUrl,n.attr("href")).then(function(){t.amsTabLoadOnce&&(t.amsTabLoaded=!0),h("i",n).remove()},function(){h("i",n).remove()})})}}),MyAMS.config.isMobile?(MyAMS.dom.root.addClass("mobile-detected"),MyAMS.require("ajax").then(function(){MyAMS.config.enableFastclick&&MyAMS.ajax.check(h.fn.noClickDelay,"".concat(MyAMS.env.baseURL,"../ext/js-smartclick").concat(MyAMS.env.extext,".js")).then(function(){h("a",MyAMS.dom.nav).noClickDelay(),h("a","#hide-menu").noClickDelay()}),MyAMS.dom.root.exists()&&MyAMS.ajax.check(window.Hammer,"".concat(MyAMS.env.baseURL,"../ext/hammer").concat(MyAMS.env.extext,".js")).then(function(){(o=new Hammer.Manager(MyAMS.dom.root.get(0))).add(new Hammer.Pan({direction:Hammer.DIRECTION_HORIZONTAL,threshold:200})),o.on("panright",function(){MyAMS.dom.root.hasClass("hidden-menu")||MyAMS.nav.switchMenu()}),o.on("panleft",function(){MyAMS.dom.root.hasClass("hidden-menu")&&MyAMS.nav.switchMenu()})})})):MyAMS.dom.root.addClass("desktop-detected")),d.restoreState())},initElement:function(e){h("nav",e).navigationMenu({speed:MyAMS.config.menuSpeed})},setActiveMenu:function(e){var n=MyAMS.dom.nav;if(h(".active",n).removeClass("active"),e.addClass("open").addClass("active"),e.parents("li").addClass("open active").children("ul").addClass("active").show(),e.parents("li:first").removeClass("open"),e.parents("ul").addClass(e.attr("href").replace(/^#/,"")?"active":"").show(),e.exists()){var t=n.scrollTop(),a=h(e).parents("li:last").position();(a.top<t||a.top>n.height()+t)&&n.scrollTop(a.top)}},drawBreadcrumbs:function(){var r=h("ol.breadcrumb","#ribbon");if(h("li",r).not(".persistent").remove(),!h("li",r).exists()){var e='<li class="breadcrumb-item">\n\t\t\t\t\t<a class="p-r-1" href="'.concat(h('a[href!="#"]:first',MyAMS.dom.nav).attr("href"),'">\n\t\t\t\t\t\t').concat(MyAMS.i18n.HOME,"\n\t\t\t\t\t</a>\n\t\t\t\t</li>");r.append(h(e))}h("li.active >a",MyAMS.dom.nav).each(function(e,n){var t=h(n),a=h.trim(t.clone().children(".badge").remove().end().text()),i=t.attr("href"),o=h('<li class="breadcrumb-item"></li>').append(i.replace(/^#/,"")?h("<a></a>").html(a).attr("href",i):a);r.append(o)})},minifyMenu:function(e){e&&e.preventDefault(),MyAMS.dom.root.toggleClass("minified"),MyAMS.dom.root.hasClass("minified")?MyAMS.core.switchIcon(h("i",e.currentTarget),"arrow-circle-left","arrow-circle-right"):MyAMS.core.switchIcon(h("i",e.currentTarget),"arrow-circle-right","arrow-circle-left"),window.localStorage&&(MyAMS.dom.root.hasClass("minified")?localStorage.setItem("window-state","minified"):localStorage.setItem("window-state",""))},switchMenu:function(e){e&&e.preventDefault(),MyAMS.dom.root.toggleClass("hidden-menu"),window.localStorage&&(MyAMS.dom.root.hasClass("hidden-menu")?localStorage.setItem("window-state","hidden-menu"):localStorage.setItem("window-state",""))},restoreState:function(){if(window.localStorage){var e=localStorage.getItem("window-state");"minified"===e?MyAMS.nav.minifyMenu({currentTarget:h("#minifyme"),preventDefault:function(){}}):MyAMS.dom.root.addClass(e)}}};e.nav=d,MyAMS.env.bundle?MyAMS.config.modules.push("nav"):(MyAMS.nav=d,console.debug("MyAMS: nav module loaded..."))});