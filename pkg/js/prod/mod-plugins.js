!function(e,t){if("function"==typeof define&&define.amd)define([],t);else if("undefined"!=typeof exports)t();else{t(),e.modPlugins={}}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(){"use strict";var f=MyAMS.$,M=f.templates({markup:'\n\t<span class="custom-control custom-switch">\n\t\t<input type="checkbox"\n\t\t\t   id="{{: fieldId }}" name="{{: fieldName }}"\n\t\t\t   class="custom-control-input checker"\n\t\t\t   {{if checked}}checked{{/if}}\n\t\t\t   {{if readonly}}disabled{{/if}}\n\t\t\t   value="{{: value }}" />\n\t\t{{if prefix}}\n\t\t<input type="hidden" class="prefix"\n\t\t\t   id="{{: prefix}}{{: fieldName}}_prefix"\n\t\t\t   name="{{: prefix}}{{: fieldName}}"\n\t\t\t   value="{{if state===\'on\'}}{{: checkedValue}}{{else}}{{: uncheckedValue}}{{/if}}" />\n\t\t{{else marker}}\n\t\t<input type="hidden" class="marker"\n\t\t\t   name="{{: fieldName}}{{: marker}}"\n\t\t\t   value="1" />\n\t\t{{/if}}\n\t\t<label for="{{: fieldId }}"\n\t\t\t   class="custom-control-label">\n\t\t\t{{: legend }}\n\t\t</label>\n\t</span>\n'});var l=function(a){var n=[];a.parent().find("ul.select2-selection__rendered").children("li[title]").each(function(e,t){n.push(a.children('option[data-content="'.concat(t.title,'"]')).attr("value"))}),a.data("select2-target").val(n.join(a.data("ams-select2-separator")||","))};window.MyAMS&&(MyAMS.registry.register(function(e){f("legend.checker",e).each(function(e,t){var s=f(t),i=s.data();if(!i.amsChecker){var r=s.parent("fieldset"),a=r.hasClass("switched")||"on"===i.amsCheckerState,n=i.amsCheckerFieldname||"checker_".concat(MyAMS.core.generateId()),c=n.replace(/\./g,"_"),l=i.amsCheckerHiddenPrefix,o=i.amsCheckerMarker||!1,d=i.amsCheckerMode||"hide",u=i.amsCheckerValueOn||"true",m=i.amsCheckerValueOff||"false",h={legend:s.text(),fieldName:n,fieldId:c,value:i.amsCheckerValue||!0,checked:a,readonly:i.amsCheckerReadonly,prefix:l,state:i.amsCheckerState,checkedValue:u,uncheckedValue:m,marker:o};s.html(M.render(h)),f("input",s).change(function(e){var t=f(e.target),a=t.is(":checked"),n={veto:!1};if(s.trigger("before-switch.myams.checker",[s,n]),n.veto)t.prop("checked",!a);else if(MyAMS.core.executeFunctionByName(i.amsCheckerChangeHandler,document,s,a),!i.amsCheckerCancelDefault){var c=t.siblings(".prefix");"hide"===d?a?(r.removeClass("switched"),c.val(u),s.trigger("opened.myams.checker",[s])):(r.addClass("switched"),c.val(m),s.trigger("closed.myams.checker",[s])):(r.prop("disabled",!a),c.val(a?u:m))}}),s.closest("form").on("reset",function(e){var t=f(".checker",s);t.prop("checked")!==a&&t.click()}),a||("hide"===d?r.addClass("switched"):r.prop("disabled",!0)),s.data("ams-checker",!0)}})},"checker"),MyAMS.registry.register(function(e){var t=f(".context-menu",e);0<t.length&&MyAMS.require("menu").then(function(){t.each(function(e,t){var a=f(t),n=a.data(),c={menuSelector:n.amsContextmenuSelector||n.amsMenuSelector},s=f.extend({},c,n.amsContextmenuOptions||n.amsOptions);s=MyAMS.core.executeFunctionByName(n.amsContextmenuinitCallback||n.amsInit,a,s)||s;var i=a.contextMenu(s);MyAMS.core.executeFunctionByName(n.amsContextmenuAfterInitCallback||n.amsAfterinit,a,i,s)})})},"contextMenu"),MyAMS.registry.register(function(e){var t=f(".custom-file-input",e);0<t.length&&MyAMS.require("ajax").then(function(){MyAMS.ajax.check(window.bsCustomFileInput,"".concat(MyAMS.env.baseURL,"../ext/bs-custom-file-input").concat(MyAMS.env.extext,".js")).then(function(){f(t).each(function(e,t){var a=f(t),n=a.attr("id"),c=n?"#".concat(n):a.attr("name"),s=f(t.form),i=s.attr("id"),r=i?"#".concat(i):s.attr("name");bsCustomFileInput.init(c,r)})})})},"fileInput"),MyAMS.registry.register(function(e){var a=f(".select2",e);0<a.length&&MyAMS.require("ajax","helpers").then(function(){MyAMS.ajax.check(f.fn.select2,"".concat(MyAMS.env.baseURL,"../ext/select2/select2").concat(MyAMS.env.extext,".js")).then(function(e){var t=[];e&&(t.push(MyAMS.core.getScript("".concat(MyAMS.env.baseURL,"../ext/select2/i18n/").concat(MyAMS.i18n.language,".js"))),t.push(MyAMS.core.getCSS("".concat(MyAMS.env.baseURL,"../../css/ext/select2").concat(MyAMS.env.extext,".css"),"select2")),t.push(MyAMS.core.getCSS("".concat(MyAMS.env.baseURL,"../../css/ext/select2-bootstrap4").concat(MyAMS.env.extext,".css"),"select2_bs4"))),f.when.apply(f,t).then(function(){a.each(function(e,t){var a=f(t),n=a.data();if(!n.select2){var c={theme:"bootstrap4",language:MyAMS.i18n.language};if(a.hasClass("sortable")){var s=f('<input type="hidden" name="'.concat(a.attr("name"),'">')).insertAfter(a);s.val(f("option:selected",a).listattr("value").join(n.amsSelect2Separator||",")),a.data("select2-target",s).removeAttr("name"),c.templateSelection=function(e,t){var a=f(e.element);return a.attr("data-content",a.html()),e.text}}var i=f.extend({},c,n.amsSelect2Options||n.amsOptions);i=MyAMS.core.executeFunctionByName(n.amsSelect2InitCallback||n.amsInit,a,i)||i;var r=a.select2(i);a.on("select2:opening select2:selecting select2:unselecting select2:clearing",function(e){if(f(e.target).is(":disabled"))return!1}),a.on("select2:opening",function(e){var t=f(e.currentTarget).parents(".modal").first();if(t.exists()){var a=parseInt(t.css("z-index"));r.data("select2").$dropdown.css("z-index",a+1)}}),a.hasClass("sortable")&&MyAMS.ajax.check(f.fn.sortable,"".concat(MyAMS.env.baseURL,"../ext/jquery-ui").concat(MyAMS.env.extext,".js")).then(function(){a.parent().find("ul.select2-selection__rendered").sortable({containment:"parent",update:function(){l(a)}}),a.on("select2:select select2:unselect",function(e){var t=e.params.data.id,a=f(e.currentTarget),n=a.children('option[value="'.concat(t,'"]'));MyAMS.helpers.moveElementToParentEnd(n),a.trigger("change"),l(a)})}),MyAMS.core.executeFunctionByName(n.amsSelect2AfterInitCallback||n.amsAfterInit,a,r,i)}})})})})},"select2"),MyAMS.registry.register(function(e){var t=f(".svg-container",e);0<t.length&&t.each(function(e,t){var a=f(t),n=f("svg",a),c=n.attr("width"),s=n.attr("height");c&&s&&t.setAttribute("viewBox","0 0 "+Math.round(parseFloat(c))+" "+Math.round(parseFloat(s))),n.attr("width","100%").attr("height","auto")})},"svg"),MyAMS.registry.register(function(e){f("legend.switcher",e).each(function(e,t){var n=f(t),c=n.parent("fieldset"),a=n.data(),s=a.amsSwitcherMinusClass||a.amsMinusClass||"minus",i=a.amsSwitcherPlusClass||a.amsPlusClass||"plus";a.amsSwitcher||(f('<i class="fa fa-'.concat("open"===a.amsSwitcherState?s:i,' mr-2"></i>')).prependTo(n),n.on("click",function(e){e.preventDefault();var t={};if(n.trigger("before-switch.myams.switcher",[n,t]),!t.veto)if(c.hasClass("switched")){c.removeClass("switched"),MyAMS.core.switchIcon(f("i",n),i,s),n.trigger("opened.myams.switcher",[n]);var a=n.attr("id");a&&f('legend.swicther[data-ams-switcher-sync="'.concat(a,'"]'),c).each(function(e,t){var a=f(t);a.parents("fieldset").hasClass("switched")&&a.click()})}else c.addClass("switched"),MyAMS.core.switchIcon(f("i",n),s,i),n.trigger("closed.myams.switcher",[n])}),"open"!==a.amsSwitcherState&&c.addClass("switched"),n.data("ams-switcher",!0))})},"switcher"),MyAMS.registry.register(function(e){var t=f("form:not([novalidate])",e);0<t.length&&MyAMS.require("ajax","i18n").then(function(){MyAMS.ajax.check(f.fn.validate,"".concat(MyAMS.env.baseURL,"../ext/validate/jquery-validate").concat(MyAMS.env.extext,".js")).then(function(e){e&&"en"!==MyAMS.i18n.language&&MyAMS.core.getScript("".concat(MyAMS.env.baseURL,"../ext/validate/i18n/messages_").concat(MyAMS.i18n.language).concat(MyAMS.env.extext,".js")).then(function(){}),t.each(function(e,t){var d=f(t),a=d.data(),n={ignore:null,invalidHandler:MyAMS.core.getFunctionByName(a.amsValidateInvalidHandler)||function(e,t){f("span.is-invalid",d).remove(),f(".is-invalid",d).removeClass("is-invalid");var a=!0,n=!1,c=void 0;try{for(var s,i=t.errorList[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var r=s.value,l=f(r.element),o=l.parents(".tab-pane");l.parents("fieldset.switched").each(function(e,t){f("legend.switcher",t).click()}),o.each(function(e,t){var a=f(t),n=a.parents(".tab-content").siblings(".nav-tabs");f("li:nth-child(".concat(a.index()+1,")"),n).addClass("is-invalid"),f("li.is-invalid:first a",n).click()})}}catch(e){n=!0,c=e}finally{try{a||null==i.return||i.return()}finally{if(n)throw c}}},errorElement:a.amsValidateErrorElement||"span",errorClass:a.amsValidateErrorClass||"is-invalid",errorPlacement:MyAMS.core.getFunctionByName(a.amsvalidateErrorPlacement)||function(e,t){e.addClass("invalid-feedback"),t.closest(".form-widget").append(e)},submitHandler:MyAMS.core.getFunctionByName(a.amsValidateSubmitHandler)||(void 0!==d.attr("data-async")?function(){MyAMS.require("form").then(function(){MyAMS.form.submit(d)})}:function(){d.get(0).submit()})};f("[data-ams-validate-rules]",d).each(function(e,t){0===e&&(n.rules={}),n.rules[f(t).attr("name")]=f(t).data("ams-validate-rules")}),f("[data-ams-validate-messages]",d).each(function(e,t){0===e&&(n.messages={}),n.messages[f(t).attr("name")]=f(t).data("ams-validate-messages")});var c=f.extend({},n,a.amsValidateOptions||a.amsOptions);c=MyAMS.core.executeFunctionByName(a.amsValidateInitCallback||a.amsInit,d,c)||c;var s=d.validate(c);MyAMS.core.executeFunctionByName(a.amsValidateAfterInitCallback||a.amsAfterInit,d,s,c)})})})},"validate"),MyAMS.config.modules.push("plugins"),MyAMS.env.bundle||console.debug("MyAMS: plugins module loaded..."))});