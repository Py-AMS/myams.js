!function(e,t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof exports?t():(t(),e.modPlugins={})}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(){"use strict";function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,c=function(){};return{s:c,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var h=MyAMS.$,M=h.templates({markup:'\n\t<span class="custom-control custom-switch">\n\t\t<input type="checkbox"\n\t\t\t   id="{{: fieldId }}" name="{{: fieldName }}"\n\t\t\t   class="custom-control-input checker"\n\t\t\t   {{if checked}}checked{{/if}}\n\t\t\t   {{if readonly}}disabled{{/if}}\n\t\t\t   value="{{: value }}" />\n\t\t{{if prefix}}\n\t\t<input type="hidden" class="prefix"\n\t\t\t   id="{{: prefix}}{{: fieldName}}_prefix"\n\t\t\t   name="{{: prefix}}{{: fieldName}}"\n\t\t\t   value="{{if state===\'on\'}}{{: checkedValue}}{{else}}{{: uncheckedValue}}{{/if}}" />\n\t\t{{else marker}}\n\t\t<input type="hidden" class="marker"\n\t\t\t   name="{{: fieldName}}{{: marker}}"\n\t\t\t   value="1" />\n\t\t{{/if}}\n\t\t<label for="{{: fieldId }}"\n\t\t\t   class="custom-control-label">\n\t\t\t{{: legend }}\n\t\t</label>\n\t</span>\n'});var u=function(n){var a=[];n.parent().find("ul.select2-selection__rendered").children("li[title]").each(function(e,t){a.push(n.children('option[data-content="'.concat(t.title,'"]')).attr("value"))}),n.data("select2-target").val(a.join(n.data("ams-select2-separator")||","))};window.MyAMS&&(MyAMS.registry.register(function(e){h("legend.checker",e).each(function(e,t){var r,n,a,c,i,s,o,l,u,d,m=h(t),f=m.data();f.amsChecker||(r=m.parent("fieldset"),n=r.hasClass("switched")||"on"===f.amsCheckerState,c=(a=f.amsCheckerFieldname||"checker_".concat(MyAMS.core.generateId())).replace(/\./g,"_"),i=f.amsCheckerHiddenPrefix,s=f.amsCheckerMarker||!1,o=f.amsCheckerMode||"hide",l=f.amsCheckerValueOn||"true",u=f.amsCheckerValueOff||"false",d={legend:m.text(),fieldName:a,fieldId:c,value:f.amsCheckerValue||!0,checked:n,readonly:f.amsCheckerReadonly,prefix:i,state:f.amsCheckerState,checkedValue:l,uncheckedValue:u,marker:s},m.html(M.render(d)),h("input",m).change(function(e){var t,n=h(e.target),a=n.is(":checked"),c={veto:!1};m.trigger("before-switch.ams.checker",[m,c]),c.veto?n.prop("checked",!a):(MyAMS.core.executeFunctionByName(f.amsCheckerChangeHandler,document,m,a),f.amsCheckerCancelDefault||(t=n.siblings(".prefix"),"hide"===o?a?(r.removeClass("switched"),t.val(l),m.trigger("opened.ams.checker",[m])):(r.addClass("switched"),t.val(u),m.trigger("closed.ams.checker",[m])):(r.prop("disabled",!a),t.val(a?l:u))))}),m.closest("form").on("reset",function(){var e=h(".checker",m);e.prop("checked")!==n&&e.click()}),n||("hide"===o?r.addClass("switched"):r.prop("disabled",!0)),m.data("ams-checker",!0))})},"checker"),MyAMS.registry.register(function(e){var t=h(".context-menu",e);0<t.length&&MyAMS.require("menu").then(function(){t.each(function(e,t){var n=h(t),a=n.data(),c={menuSelector:a.amsContextmenuSelector||a.amsMenuSelector},r=h.extend({},c,a.amsContextmenuOptions||a.amsOptions),r=MyAMS.core.executeFunctionByName(a.amsContextmenuinitCallback||a.amsInit,n,r)||r,i=n.contextMenu(r);MyAMS.core.executeFunctionByName(a.amsContextmenuAfterInitCallback||a.amsAfterinit,n,i,r)})})},"contextMenu"),MyAMS.registry.register(function(e){var t=h(".custom-file-input",e);0<t.length&&MyAMS.require("ajax").then(function(){MyAMS.ajax.check(window.bsCustomFileInput,"".concat(MyAMS.env.baseURL,"../ext/bs-custom-file-input").concat(MyAMS.env.extext,".js")).then(function(){h(t).each(function(e,t){var n=h(t),a=n.attr("id"),c=a?"#".concat(a):n.attr("name"),r=h(t.form),i=r.attr("id"),s=i?"#".concat(i):r.attr("name");bsCustomFileInput.init(c,s)})})})},"fileInput"),MyAMS.registry.register(function(e){var n=h(".select2",e);0<n.length&&MyAMS.require("ajax","helpers").then(function(){MyAMS.ajax.check(h.fn.select2,"".concat(MyAMS.env.baseURL,"../ext/select2/select2").concat(MyAMS.env.extext,".js")).then(function(e){var t=[];e&&(t.push(MyAMS.core.getScript("".concat(MyAMS.env.baseURL,"../ext/select2/i18n/").concat(MyAMS.i18n.language,".js"))),t.push(MyAMS.core.getCSS("".concat(MyAMS.env.baseURL,"../../css/ext/select2").concat(MyAMS.env.extext,".css"),"select2")),t.push(MyAMS.core.getCSS("".concat(MyAMS.env.baseURL,"../../css/ext/select2-bootstrap4").concat(MyAMS.env.extext,".css"),"select2_bs4"))),h.when.apply(h,t).then(function(){n.each(function(e,t){var n,a,c,r,i=h(t),s=i.data();s.select2||(n={theme:"bootstrap4",language:MyAMS.i18n.language},i.hasClass("sortable")&&((a=h('<input type="hidden" name="'.concat(i.attr("name"),'">')).insertAfter(i)).val(h("option:selected",i).listattr("value").join(s.amsSelect2Separator||",")),i.data("select2-target",a).removeAttr("name"),n.templateSelection=function(e){var t=h(e.element);return t.attr("data-content",t.html()),e.text}),c=h.extend({},n,s.amsSelect2Options||s.amsOptions),c=MyAMS.core.executeFunctionByName(s.amsSelect2InitCallback||s.amsInit,i,c)||c,r=i.select2(c),i.on("select2:opening select2:selecting select2:unselecting select2:clearing",function(e){if(h(e.target).is(":disabled"))return!1}),i.on("select2:opening",function(e){var t,n=h(e.currentTarget).parents(".modal").first();n.exists()&&(t=parseInt(n.css("z-index")),r.data("select2").$dropdown.css("z-index",t+1))}),i.hasClass("sortable")&&MyAMS.ajax.check(h.fn.sortable,"".concat(MyAMS.env.baseURL,"../ext/jquery-ui").concat(MyAMS.env.extext,".js")).then(function(){i.parent().find("ul.select2-selection__rendered").sortable({containment:"parent",update:function(){u(i)}}),i.on("select2:select select2:unselect",function(e){var t=e.params.data.id,n=h(e.currentTarget),a=n.children('option[value="'.concat(t,'"]'));MyAMS.helpers.moveElementToParentEnd(a),n.trigger("change"),u(n)})}),MyAMS.core.executeFunctionByName(s.amsSelect2AfterInitCallback||s.amsAfterInit,i,r,c))})})})})},"select2"),MyAMS.registry.register(function(e){var t=h(".svg-container",e);0<t.length&&t.each(function(e,t){var n=h(t),a=h("svg",n),c=a.attr("width"),r=a.attr("height");c&&r&&t.setAttribute("viewBox","0 0 ".concat(Math.round(parseFloat(c))," ").concat(Math.round(parseFloat(r)))),a.attr("width","100%").attr("height","auto")})},"svg"),MyAMS.registry.register(function(e){h("legend.switcher",e).each(function(e,t){var a=h(t),c=a.parent("fieldset"),n=a.data(),r=n.amsSwitcherMinusClass||n.amsMinusClass||"minus",i=n.amsSwitcherPlusClass||n.amsPlusClass||"plus";n.amsSwitcher||(h('<i class="fa fa-'.concat("open"===n.amsSwitcherState?r:i,' mr-2"></i>')).prependTo(a),a.on("click",function(e){e.preventDefault();var t,n={};a.trigger("before-switch.ams.switcher",[a,n]),n.veto||(c.hasClass("switched")?(c.removeClass("switched"),MyAMS.core.switchIcon(h("i",a),i,r),a.trigger("opened.ams.switcher",[a]),(t=a.attr("id"))&&h('legend.swicther[data-ams-switcher-sync="'.concat(t,'"]'),c).each(function(e,t){var n=h(t);n.parents("fieldset").hasClass("switched")&&n.click()})):(c.addClass("switched"),MyAMS.core.switchIcon(h("i",a),r,i),a.trigger("closed.ams.switcher",[a])))}),"open"!==n.amsSwitcherState&&c.addClass("switched"),a.data("ams-switcher",!0))})},"switcher"),MyAMS.registry.register(function(e){var t=h("form:not([novalidate])",e);0<t.length&&MyAMS.require("ajax","i18n").then(function(){MyAMS.ajax.check(h.fn.validate,"".concat(MyAMS.env.baseURL,"../ext/validate/jquery-validate").concat(MyAMS.env.extext,".js")).then(function(e){e&&"en"!==MyAMS.i18n.language&&MyAMS.core.getScript("".concat(MyAMS.env.baseURL,"../ext/validate/i18n/messages_").concat(MyAMS.i18n.language).concat(MyAMS.env.extext,".js")).then(function(){}),t.each(function(e,t){var s=h(t),n=s.data(),a={ignore:null,invalidHandler:MyAMS.core.getFunctionByName(n.amsValidateInvalidHandler)||function(e,t){h("span.is-invalid",s).remove(),h(".is-invalid",s).removeClass("is-invalid");var n,a=o(t.errorList);try{for(a.s();!(n=a.n()).done;){var c=n.value,r=h(c.element),i=r.parents(".tab-pane");r.parents("fieldset.switched").each(function(e,t){h("legend.switcher",t).click()}),i.each(function(e,t){var n=h(t),a=n.parents(".tab-content").siblings(".nav-tabs");h("li:nth-child(".concat(n.index()+1,")"),a).addClass("is-invalid"),h("li.is-invalid:first a",a).click()})}}catch(e){a.e(e)}finally{a.f()}},errorElement:n.amsValidateErrorElement||"span",errorClass:n.amsValidateErrorClass||"is-invalid",errorPlacement:MyAMS.core.getFunctionByName(n.amsvalidateErrorPlacement)||function(e,t){e.addClass("invalid-feedback"),t.closest(".form-widget").append(e)},submitHandler:MyAMS.core.getFunctionByName(n.amsValidateSubmitHandler)||(void 0!==s.attr("data-async")?function(){MyAMS.require("form").then(function(){MyAMS.form.submit(s)})}:function(){s.get(0).submit()})};h("[data-ams-validate-rules]",s).each(function(e,t){0===e&&(a.rules={}),a.rules[h(t).attr("name")]=h(t).data("ams-validate-rules")}),h("[data-ams-validate-messages]",s).each(function(e,t){0===e&&(a.messages={}),a.messages[h(t).attr("name")]=h(t).data("ams-validate-messages")});var c=h.extend({},a,n.amsValidateOptions||n.amsOptions),c=MyAMS.core.executeFunctionByName(n.amsValidateInitCallback||n.amsInit,s,c)||c,r=s.validate(c);MyAMS.core.executeFunctionByName(n.amsValidateAfterInitCallback||n.amsAfterInit,s,r,c)})})})},"validate"),MyAMS.config.modules.push("plugins"),MyAMS.env.bundle||console.debug("MyAMS: plugins module loaded..."))});