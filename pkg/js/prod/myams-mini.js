!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){
/*! JsRender v1.0.11: http://jsviews.com/#jsrender */
/*! **VERSION FOR WEB** (For NODE.JS see http://jsviews.com/download/jsrender-node.js) */
!function(t,n){var a=n.jQuery;e.exports=a?t(n,a):function(e){if(e&&!e.fn)throw"Provide jQuery or null";return t(n,e)}}((function(e,t){"use strict";var n=!1===t;t=t&&t.fn?t:e.jQuery;var a,r,o,i,s,c,l,u,d,m,f,p,h,y,g,v,M,b,S,A,x,w,C="v1.0.11",k=/[ \t]*(\r\n|\n|\r)/g,T=/\\(['"\\])/g,j=/['"\\]/g,_=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,N=/^if\s/,O=/<(\w+)[>\s]/,R=/[\x00`><\"'&=]/,I=/^on[A-Z]|^convert(Back)?$/,P=/^\#\d+_`[\s\S]*\/\d+_`$/,F=/[\x00`><"'&=]/g,B=/[&<>]/g,E=/&(amp|gt|lt);/g,D=/\[['"]?|['"]?\]/g,L=0,U={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},$={amp:"&",gt:">",lt:"<"},H="For #index in nested block use #getIndex().",q={},V={},W=e.jsrender,z=W&&t&&!t.render,G={template:{compile:function e(n,a,r,o){function s(a){var i,s;if(""+a===a||a.nodeType>0&&(c=a)){if(!c)if(/^\.?\/[^\\:*?"<>]*$/.test(a))(s=u[n=n||a])?a=s:c=document.getElementById(a);else if("#"===a.charAt(0))c=document.getElementById(a.slice(1));else if(t.fn&&!p.rTmpl.test(a))try{c=t(a,document)[0]}catch(e){}c&&("SCRIPT"!==c.tagName&&ge(a+": Use script block, not "+c.tagName),o?a=c.innerHTML:((i=c.getAttribute("data-jsv-tmpl"))&&("jsvTmpl"!==i?(a=u[i],delete u[i]):t.fn&&(a=t.data(c).jsvTmpl)),i&&a||(n=n||(t.fn?"jsvTmpl":a),a=e(n,c.innerHTML,r,o)),a.tmplName=n=n||i,"jsvTmpl"!==n&&(u[n]=a),c.setAttribute("data-jsv-tmpl",n),t.fn&&t.data(c,"jsvTmpl",a))),c=void 0}else a.fn||(a=void 0);return a}var c,l,m=a=a||"";p._html=d.html,0===o&&(o=void 0,m=s(m));(o=o||(a.markup?a.bnds?ee({},a):a:{})).tmplName=o.tmplName||n||"unnamed",r&&(o._parentTmpl=r);!m&&a.markup&&(m=s(a.markup))&&m.fn&&(m=m.markup);if(void 0!==m)return m.render||a.render?m.tmpls&&(l=m):(a=de(m,o),Me(m.replace(j,"\\$&"),a)),l||function(e){var t,n,a;for(t in G)e[n=t+"s"]&&(a=e[n],e[n]={},i[n](a,e))}(l=ee((function(){return l.render.apply(l,arguments)}),a)),l}},tag:{compile:function(e,t,n){var a,r,o,i=new p._tg;function s(){this._={unlinked:!0},this.inline=!0,this.tagName=e}c(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t});if(r=t.baseTag)for(o in t.flow=!!t.flow,(r=""+r===r?n&&n.tags[r]||f[r]:r)||ge('baseTag: "'+t.baseTag+'" not found'),i=ee(i,r),t)i[o]=K(r[o],t[o]);else i=ee(i,t);void 0!==(a=i.template)&&(i.template=""+a===a?u[a]||u(a):a);(s.prototype=i).constructor=i._ctr=s,n&&(i._parentTmpl=n);return i}},viewModel:{compile:function(e,n){var a,r,o,i=this,u=n.getters,d=n.extend,m=n.id,f=t.extend({_is:e||"unnamed",unmap:x,merge:A},d),p="",h="",y=u?u.length:0,g=t.observable,v={};function M(e){r.apply(this,e)}function b(){return new M(arguments)}function S(e,t){for(var n,a,r,o,s,c=0;c<y;c++)n=void 0,(r=u[c])+""!==r&&(r=(n=r).getter,s=n.parentRef),void 0===(o=e[r])&&n&&void 0!==(a=n.defaultVal)&&(o=le(a,e)),t(o,n&&i[n.type],r,s)}function A(e,t,n){e=e+""===e?JSON.parse(e):e;var a,r,o,i,c,u,d,f,p,h,y=0,M=this;if(l(M)){for(d={},p=[],r=e.length,o=M.length;y<r;y++){for(f=e[y],u=!1,a=0;a<o&&!u;a++)d[a]||(c=M[a],m&&(d[a]=u=m+""===m?f[m]&&(v[m]?c[m]():c[m])===f[m]:m(c,f)));u?(c.merge(f),p.push(c)):(p.push(h=b.map(f)),n&&ue(h,n,t))}g?g(M).refresh(p,!0):M.splice.apply(M,[0,M.length].concat(p))}else for(i in S(e,(function(e,t,n,a){t?M[n]().merge(e,M,a):M[n]()!==e&&M[n](e)})),e)i===s||v[i]||(M[i]=e[i])}function x(){var e,t,n,a,r=0;function o(e){for(var t=[],n=0,a=e.length;n<a;n++)t.push(e[n].unmap());return t}if(l(this))return o(this);for(e={};r<y;r++)n=void 0,(t=u[r])+""!==t&&(t=(n=t).getter),a=this[t](),e[t]=n&&a&&i[n.type]?l(a)?o(a):a.unmap():a;for(t in this)!this.hasOwnProperty(t)||"_"===t.charAt(0)&&v[t.slice(1)]||t===s||c(this[t])||(e[t]=this[t]);return e}for(M.prototype=f,a=0;a<y;a++)!function(e){e=e.getter||e,v[e]=a+1;var t="_"+e;p+=(p?",":"")+e,h+="this."+t+" = "+e+";\n",f[e]=f[e]||function(n){if(!arguments.length)return this[t];g?g(this).setProperty(e,n):this[t]=n},g&&(f[e].set=f[e].set||function(e){this[t]=e})}(u[a]);return h=new Function(p,h),(r=function(){h.apply(this,arguments),(o=arguments[y+1])&&ue(this,arguments[y],o)}).prototype=f,f.constructor=r,b.map=function(t){t=t+""===t?JSON.parse(t):t;var n,a,r,o,i=0,c=t,d=[];if(l(t)){for(n=(t=t||[]).length;i<n;i++)d.push(this.map(t[i]));return d._is=e,d.unmap=x,d.merge=A,d}if(t){for(S(t,(function(e,t){t&&(e=t.map(e)),d.push(e)})),c=this.apply(this,d),i=y;i--;)if(r=d[i],(o=u[i].parentRef)&&r&&r.unmap)if(l(r))for(n=r.length;n--;)ue(r[n],o,c);else ue(r,o,c);for(a in t)a===s||v[a]||(c[a]=t[a])}return c},b.getters=u,b.extend=d,b.id=m,b}},helper:{},converter:{}};function J(e,t){return function(){var n,a=this,r=a.base;return a.base=e,n=t.apply(a,arguments),a.base=r,n}}function K(e,t){return c(t)&&((t=J(e?e._d?e:J(Q,e):Q,t))._d=(e&&e._d||0)+1),t}function Y(e,t){var n,a=t.props;for(n in a)!I.test(n)||e[n]&&e[n].fix||(e[n]="convert"!==n?K(e.constructor.prototype[n],a[n]):a[n])}function X(e){return e}function Q(){return""}function Z(e){this.name=(t.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function ee(e,t){if(e){for(var n in t)e[n]=t[n];return e}}function te(){var e=this.get("item");return e?e.index:void 0}function ne(){return this.index}function ae(e,t,n,a){var r,o,i,s=0;if(1===n&&(a=1,n=void 0),t)for(i=(o=t.split(".")).length;e&&s<i;s++)r=e,e=o[s]?e[o[s]]:e;return n&&(n.lt=n.lt||s<i),void 0===e?a?Q:"":a?function(){return e.apply(r,arguments)}:e}function re(n,a,r){var o,i,s,l,u,d,f,h=this,y=!w&&arguments.length>1,g=h.ctx;if(n){if(h._||(u=h.index,h=h.tag),d=h,g&&g.hasOwnProperty(n)||(g=m).hasOwnProperty(n)){if(s=g[n],"tag"===n||"tagCtx"===n||"root"===n||"parentTags"===n)return s}else g=void 0;if((!w&&h.tagCtx||h.linked)&&(s&&s._cxp||(h=h.tagCtx||c(s)?h:!(h=h.scope||h).isTop&&h.ctx.tag||h,void 0!==s&&h.tagCtx&&(h=h.tagCtx.view.scope),g=h._ocps,(s=g&&g.hasOwnProperty(n)&&g[n]||s)&&s._cxp||!r&&!y||((g||(h._ocps=h._ocps||{}))[n]=s=[{_ocp:s,_vw:d,_key:n}],s._cxp={path:"_ocp",ind:0,updateValue:function(e,n){return t.observable(s[0]).setProperty("_ocp",e),this}})),l=s&&s._cxp)){if(arguments.length>2)return(i=s[1]?p._ceo(s[1].deps):["_ocp"]).unshift(s[0]),i._cxp=l,i;if(u=l.tagElse,f=s[1]?l.tag&&l.tag.cvtArgs?l.tag.cvtArgs(u,1)[l.ind]:s[1](s[0].data,s[0],p):s[0]._ocp,y)return p._ucp(n,a,h,l),h;s=f}return s&&c(s)&&ee(o=function(){return s.apply(this&&this!==e?this:d,arguments)},s),o||s}}function oe(e,t){var n,a,r,o,i,s,c,u=this;if(u.tagName){if(!(u=((s=u).tagCtxs||[u])[e||0]))return}else s=u.tag;if(i=s.bindFrom,o=u.args,(c=s.convert)&&""+c===c&&(c="true"===c?void 0:u.view.getRsc("converters",c)||ge("Unknown converter: '"+c+"'")),c&&!t&&(o=o.slice()),i){for(r=[],n=i.length;n--;)a=i[n],r.unshift(ie(u,a));t&&(o=r)}if(c){if(void 0===(c=c.apply(s,r||o)))return o;if(n=(i=i||[0]).length,l(c)&&(!1===c.arg0||1!==n&&c.length===n&&!c.arg0)||(c=[c],i=[0],n=1),t)o=c;else for(;n--;)+(a=i[n])===a&&(o[a]=c[n])}return o}function ie(e,t){return(e=e[+t===t?"args":"props"])&&e[t]}function se(e){return this.cvtArgs(e,1)}function ce(e,t,n,a,r,o,i,s){var c,l,u,d="array"===t;this.content=s,this.views=d?[]:{},this.data=a,this.tmpl=r,u=this._={key:0,useKey:d?0:1,id:""+L++,onRender:i,bnds:{}},this.linked=!!i,this.type=t||"top",t&&(this.cache={_ct:h._cchCt}),n&&"top"!==n.type||((this.ctx=e||{}).root=this.data),(this.parent=n)?(this.root=n.root||this,c=n.views,l=n._,this.isTop=l.scp,this.scope=(!e.tag||e.tag===n.ctx.tag)&&!this.isTop&&n.scope||this,l.useKey?(c[u.key="_"+l.useKey++]=this,this.index=H,this.getIndex=te):c.length===(u.key=this.index=o)?c.push(this):c.splice(o,0,this),this.ctx=e||n.ctx):t&&(this.root=this)}function le(e,t){return c(e)?e.call(t):e}function ue(e,t,n){Object.defineProperty(e,t,{value:n,configurable:!0})}function de(e,n){var a,r=y._wm||{},o={tmpls:[],links:{},bnds:[],_is:"template",render:he};return n&&(o=ee(o,n)),o.markup=e,o.htmlTag||(a=O.exec(e),o.htmlTag=a?a[1].toLowerCase():""),(a=r[o.htmlTag])&&a!==r.div&&(o.markup=t.trim(o.markup)),o}function me(e,t){var n=e+"s";i[n]=function a(r,o,s){var c,l,u,d=p.onStore[e];if(r&&"object"==typeof r&&!r.nodeType&&!r.markup&&!r.getTgt&&!("viewModel"===e&&r.getters||r.extend)){for(l in r)a(l,r[l],o);return o||i}return r&&""+r!==r&&(s=o,o=r,r=void 0),u=s?"viewModel"===e?s:s[n]=s[n]||{}:a,c=t.compile,void 0===o&&(o=c?r:u[r],r=void 0),null===o?r&&delete u[r]:(c&&((o=c.call(u,r,o,s,0)||{})._is=e),r&&(u[r]=o)),d&&d(r,o,s,c),o}}function fe(e){g[e]=g[e]||function(t){return arguments.length?(h[e]=t,g):h[e]}}function pe(e){function t(t,n){this.tgt=e.getTgt(t,n),n.map=this}return c(e)&&(e={getTgt:e}),e.baseMap&&(e=ee(ee({},e.baseMap),e)),e.map=function(e,n){return new t(e,n)},e}function he(e,t,n,a,r,i){var s,u,d,m,f,h,g,v,M=a,b="";if(!0===t?(n=t,t=void 0):"object"!=typeof t&&(t=void 0),(d=this.tag)?(f=this,m=(M=M||f.view)._getTmpl(d.template||f.tmpl),arguments.length||(e=d.contentCtx&&c(d.contentCtx)?e=d.contentCtx(e):M)):m=this,m){if(!a&&e&&"view"===e._is&&(M=e),M&&e===M&&(e=M.data),h=!M,w=w||h,h&&((t=t||{}).root=e),!w||y.useViews||m.useViews||M&&M!==o)b=ye(m,e,t,n,M,r,i,d);else{if(M?(g=M.data,v=M.index,M.index=H):(g=(M=o).data,M.data=e,M.ctx=t),l(e)&&!n)for(s=0,u=e.length;s<u;s++)M.index=s,M.data=e[s],b+=m.fn(e[s],M,p);else M.data=e,b+=m.fn(e,M,p);M.data=g,M.index=v}h&&(w=void 0)}return b}function ye(e,t,n,a,r,o,i,s){var c,u,d,m,f,h,y,g,v,M,b,S,A,x="";if(s&&(v=s.tagName,S=s.tagCtx,n=n?we(n,s.ctx):s.ctx,e===r.content?y=e!==r.ctx._wrp?r.ctx._wrp:void 0:e!==S.content?e===s.template?(y=S.tmpl,n._wrp=S.content):y=S.content||r.content:y=r.content,!1===S.props.link&&((n=n||{}).link=!1)),r&&(i=i||r._.onRender,(A=n&&!1===n.link)&&r._.nl&&(i=void 0),n=we(n,r.ctx),S=!s&&r.tag?r.tag.tagCtxs[r.tagElse]:S),(M=S&&S.props.itemVar)&&("~"!==M[0]&&ve("Use itemVar='~myItem'"),M=M.slice(1)),!0===o&&(h=!0,o=0),i&&s&&s._.noVws&&(i=void 0),g=i,!0===i&&(g=void 0,i=r._.onRender),b=n=e.helpers?we(e.helpers,n):n,l(t)&&!a)for((d=h?r:void 0!==o&&r||new ce(n,"array",r,t,e,o,i,y))._.nl=A,r&&r._.useKey&&(d._.bnd=!s||s._.bnd&&s,d.tag=s),c=0,u=t.length;c<u;c++)m=new ce(b,"item",d,t[c],e,(o||0)+c,i,d.content),M&&((m.ctx=ee({},b))[M]=p._cp(t[c],"#data",m)),f=e.fn(t[c],m,p),x+=d._.onRender?d._.onRender(f,m):f;else d=h?r:new ce(b,v||"data",r,t,e,o,i,y),M&&((d.ctx=ee({},b))[M]=p._cp(t,"#data",d)),d.tag=s,d._.nl=A,x+=e.fn(t,d,p);return s&&(d.tagElse=S.index,S.contentView=d),g?g(x,d):x}function ge(e){throw new p.Err(e)}function ve(e){ge("Syntax error\n"+e)}function Me(e,t,n,a,o){function i(t){(t-=y)&&A.push(e.substr(y,t).replace(k,"\\n"))}function s(t,n){t&&(t+="}}",ve((n?"{{"+n+"}} block has {{/"+t+" without {{"+t:"Unmatched or missing {{/"+t)+", in template:\n"+e))}var c,l,u,d,m,f=h.allowCode||t&&t.allowCode||!0===g.allowCode,p=[],y=0,M=[],A=p,x=[,,p];if(f&&t._is&&(t.allowCode=f),n&&(void 0!==a&&(e=e.slice(0,-a.length-2)+b),e=v+e+S),s(M[0]&&M[0][2].pop()[0]),e.replace(r,(function(r,c,l,m,p,h,g,v,b,S,w,C){(g&&c||b&&!l||v&&":"===v.slice(-1)||S)&&ve(r),h&&(p=":",m="html");var j,O,R,P=(c||n)&&[[]],F="",B="",E="",D="",L="",U="",$="",H="",q=!(b=b||n&&!o)&&!p;l=l||(v=v||"#data",p),i(C),y=C+r.length,g?f&&A.push(["*","\n"+v.replace(/^:/,"ret+= ").replace(T,"$1")+";\n"]):l?("else"===l&&(N.test(v)&&ve('For "{{else if expr}}" use "{{else expr}}"'),P=x[9]&&[[]],x[10]=e.substring(x[10],C),O=x[11]||x[0]||ve("Mismatched: "+r),x=M.pop(),A=x[2],q=!0),v&&Ae(v.replace(k," "),P,t,n).replace(_,(function(e,t,n,a,r,o,i,s){return"this:"===a&&(o="undefined"),s&&(R=R||"@"===s[0]),a="'"+r+"':",i?(B+=n+o+",",D+="'"+s+"',"):n?(E+=a+"j._cp("+o+',"'+s+'",view),',U+=a+"'"+s+"',"):t?$+=o:("trigger"===r&&(H+=o),"lateRender"===r&&(j="false"!==s),F+=a+o+",",L+=a+"'"+s+"',",d=d||I.test(r)),""})).slice(0,-1),P&&P[0]&&P.pop(),u=[l,m||!!a||d||"",q&&[],Se(D||(":"===l?"'#data',":""),L,U),Se(B||(":"===l?"data,":""),F,E),$,H,j,R,P||0],A.push(u),q&&(M.push(x),(x=u)[10]=y,x[11]=O)):w&&(s(w!==x[0]&&w!==x[11]&&w,x[0]),x[10]=e.substring(x[10],C),x=M.pop()),s(!x&&w),A=x[2]})),i(e.length),(y=p[p.length-1])&&s(""+y!==y&&+y[10]===y[10]&&y[0]),n){for(l=xe(p,e,n),m=[],c=p.length;c--;)m.unshift(p[c][9]);be(l,m)}else l=xe(p,t);return l}function be(e,t){var n,a,r=0,o=t.length;for(e.deps=[],e.paths=[];r<o;r++)for(n in e.paths.push(a=t[r]),a)"_jsvto"!==n&&a.hasOwnProperty(n)&&a[n].length&&!a[n].skp&&(e.deps=e.deps.concat(a[n]))}function Se(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function Ae(e,n,a,r){var o,i,s,c,l,u=n&&n[0],d={bd:u},m={0:d},f=0,h=0,g=0,v={},M=0,b={},S={},A={},x={0:0},w={0:""},C=0;return"@"===e[0]&&(e=e.replace(D,".")),s=(e+(a?" ":"")).replace(p.rPrm,(function(a,s,k,T,_,N,O,R,I,P,F,B,E,D,L,U,$,H,V,W,z){T&&!R&&(_=T+_),N=N||"",E=E||"",k=k||s||E,_=_||I,P&&(P=!/\)|]/.test(z[W-1]))&&(_=_.slice(1).split(".").join("^")),F=F||H||"";var G,J,K,Y,X,Q,Z,ee=W;if(!l&&!c){if(O&&ve(e),$&&u){if(G=A[g-1],z.length-1>ee-(G||0)){if(G=t.trim(z.slice(G,ee+a.length)),J=i||m[g-1].bd,(K=J[J.length-1])&&K.prm){for(;K.sb&&K.sb.prm;)K=K.sb;Y=K.sb={path:K.sb,bnd:K.bnd}}else J.push(Y={path:J.pop()});K&&K.sb===Y&&(w[g]=w[g-1].slice(K._cpPthSt)+w[g],w[g-1]=w[g-1].slice(0,K._cpPthSt)),Y._cpPthSt=x[g-1],Y._cpKey=G,w[g]+=z.slice(C,W),C=W,Y._cpfn=q[G]=q[G]||new Function("data,view,j","//"+G+"\nvar v;\nreturn ((v="+w[g]+("]"===U?")]":U)+")!=null?v:null);"),w[g-1]+=S[h]&&y.cache?'view.getCache("'+G.replace(j,"\\$&")+'"':w[g],Y.prm=d.bd,Y.bnd=Y.bnd||Y.path&&Y.path.indexOf("^")>=0}w[g]=""}"["===F&&(F="[j._sq("),"["===k&&(k="[j._sq(")}return Z=l?(l=!D)?a:E+'"':c?(c=!L)?a:E+'"':(k?(b[++h]=!0,v[h]=0,u&&(A[g++]=ee++,d=m[g]={bd:[]},w[g]="",x[g]=1),k):"")+(V?h?"":(f=z.slice(f,ee),(o?(o=i=!1,"\b"):"\b,")+f+(f=ee+a.length,u&&n.push(d.bd=[]),"\b")):R?(g&&ve(e),u&&n.pop(),o="_"+_,T,f=ee+a.length,u&&((u=d.bd=n[o]=[]).skp=!T),_+":"):_?_.split("^").join(".").replace(p.rPath,(function(e,t,a,s,c,l,m,f){if(X="."===a,a&&(_=_.slice(t.length),/^\.?constructor$/.test(f||_)&&ve(e),X||(e=(P?(r?"":"(ltOb.lt=ltOb.lt||")+"(ob=":"")+(s?'view.ctxPrm("'+s+'")':c?"view":"data")+(P?")===undefined"+(r?"":")")+'?"":view._getOb(ob,"':"")+(f?(l?"."+l:s||c?"":"."+a)+(m||""):(f=s?"":c?l||"":a,"")),e=t+("view.data"===(e+=f?"."+f:"").slice(0,9)?e.slice(5):e)+(P?(r?'"':'",ltOb')+(F?",1)":")"):"")),u)){if(J="_linkTo"===o?i=n._jsvto=n._jsvto||[]:d.bd,K=X&&J[J.length-1]){if(K._cpfn){for(;K.sb;)K=K.sb;K.prm&&(K.bnd&&(_="^"+_.slice(1)),K.sb=_,K.bnd=K.bnd||"^"===_[0])}}else J.push(_);F&&!X&&(A[g]=ee,x[g]=w[g].length)}return e}))+(F||N):N||(U?"]"===U?")]":")":B?(S[h]||ve(e),","):s?"":(l=D,c=L,'"'))),l||c||U&&(S[h]=!1,h--),u&&(l||c||(U&&(b[h+1]&&(d=m[--g],b[h+1]=!1),M=v[h+1]),F&&(v[h+1]=w[g].length+(k?1:0),(_||U)&&(d=m[++g]={bd:[]},b[h+1]=!0))),w[g]=(w[g]||"")+z.slice(C,W),C=W+a.length,l||c||((Q=k&&b[h+1])&&(w[g-1]+=k,x[g-1]++),"("===F&&X&&!Y&&(w[g]=w[g-1].slice(M)+w[g],w[g-1]=w[g-1].slice(0,M))),w[g]+=Q?Z.slice(1):Z),l||c||!F||(h++,_&&"("===F&&(S[h]=!0)),l||c||!H||(u&&(w[g]+=F),Z+=F),Z})),u&&(s=w[0]),!h&&s||ve(e)}function xe(e,t,n){var a,r,o,i,s,c,l,u,d,m,p,g,v,M,b,S,A,x,w,C,j,_,N,O,R,I,P,F,B,E,D,L,U,$,H=0,q=y.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,V="",W={},z=e.length;for(""+t===t?(A=n?'data-link="'+t.replace(k," ").slice(1,-1)+'"':t,t=0):(A=t.tmplName||"unnamed",t.allowCode&&(W.allowCode=!0),t.debug&&(W.debug=!0),m=t.bnds,S=t.tmpls),a=0;a<z;a++)if(""+(r=e[a])===r)V+='+"'+r+'"';else if("*"===(o=r[0]))V+=";\n"+r[1]+"\nret=ret";else{if(i=r[1],C=!n&&r[2],U=r[3],$=g=r[4],s="\n\tparams:{args:["+U[0]+"],\n\tprops:{"+U[1]+"}"+(U[2]?",\n\tctx:{"+U[2]+"}":"")+"},\n\targs:["+$[0]+"],\n\tprops:{"+$[1]+"}"+($[2]?",\n\tctx:{"+$[2]+"}":""),B=r[6],E=r[7],r[8]?(D="\nvar ob,ltOb={},ctxs=",L=";\nctxs.lt=ltOb.lt;\nreturn ctxs;"):(D="\nreturn ",L=""),j=r[10]&&r[10].replace(T,"$1"),(O="else"===o)?p&&p.push(r[9]):(P=r[5]||!1!==h.debugMode&&"undefined",m&&(p=r[9])&&(p=[p],H=m.push(1))),q=q||g[1]||g[2]||p||/view.(?!index)/.test(g[0]),(R=":"===o)?i&&(o="html"===i?">":i+o):(C&&((x=de(j,W)).tmplName=A+"/"+o,x.useViews=x.useViews||q,xe(C,x),q=x.useViews,S.push(x)),O||(w=o,q=q||o&&(!f[o]||!f[o].flow),N=V,V=""),_=(_=e[a+1])&&"else"===_[0]),F=P?";\ntry{\nret+=":"\n+",v="",M="",R&&(p||B||i&&"html"!==i||E)){if((I=new Function("data,view,j","// "+A+" "+ ++H+" "+o+D+"{"+s+"};"+L))._er=P,I._tag=o,I._bd=!!p,I._lr=E,n)return I;be(I,p),d=!0,v=(b='c("'+i+'",view,')+H+",",M=")"}if(V+=R?(n?(P?"try{\n":"")+"return ":F)+(d?(d=void 0,q=u=!0,b+(I?(m[H-1]=I,H):"{"+s+"}")+")"):">"===o?(l=!0,"h("+g[0]+")"):(!0,"((v="+g[0]+")!=null?v:"+(n?"null)":'"")'))):(c=!0,"\n{view:view,content:false,tmpl:"+(C?S.length:"false")+","+s+"},"),w&&!_){if(V="["+V.slice(0,-1)+"]",b='t("'+w+'",view,this,',n||p){if((V=new Function("data,view,j"," // "+A+" "+H+" "+w+D+V+L))._er=P,V._tag=w,p&&be(m[H-1]=V,p),V._lr=E,n)return V;v=b+H+",undefined,",M=")"}V=N+F+b+(p&&H||V)+")",p=0,w=0}P&&!_&&(q=!0,V+=";\n}catch(e){ret"+(n?"urn ":"+=")+v+"j._err(e,view,"+P+")"+M+";}"+(n?"":"\nret=ret"))}V="// "+A+(W.debug?"\ndebugger;":"")+"\nvar v"+(c?",t=j._tag":"")+(u?",c=j._cnvt":"")+(l?",h=j._html":"")+(n?(r[8]?", ob":"")+";\n":',ret=""')+V+(n?"\n":";\nreturn ret;");try{V=new Function("data,view,j",V)}catch(e){ve("Compiled template code:\n\n"+V+'\n: "'+(e.message||e)+'"')}return t&&(t.fn=V,t.useViews=!!q),V}function we(e,t){return e&&e!==t?t?ee(ee({},t),e):e:t&&ee({},t)}function Ce(e,n){var a,r,o,i=n.tag,s=n.props,u=n.params.props,d=s.filter,m=s.sort,f=!0===m,p=parseInt(s.step),h=s.reverse?-1:1;if(!l(e))return e;if(f||m&&""+m===m?((a=e.map((function(e,t){return{i:t,v:""+(e=f?e:ae(e,m))===e?e.toLowerCase():e}}))).sort((function(e,t){return e.v>t.v?h:e.v<t.v?-h:0})),e=a.map((function(t){return e[t.i]}))):(m||h<0)&&!i.dataMap&&(e=e.slice()),c(m)&&(e=e.sort((function(){return m.apply(n,arguments)}))),h<0&&(!m||c(m))&&(e=e.reverse()),e.filter&&d&&(e=e.filter(d,n),n.tag.onFilter&&n.tag.onFilter(n)),u.sorted&&(a=m||h<0?e:e.slice(),i.sorted?t.observable(i.sorted).refresh(a):n.map.sorted=a),r=s.start,o=s.end,(u.start&&void 0===r||u.end&&void 0===o)&&(r=o=0),isNaN(r)&&isNaN(o)||(r=+r||0,o=void 0===o||o>e.length?e.length:+o,e=e.slice(r,o)),p>1){for(r=0,o=e.length,a=[];r<o;r+=p)a.push(e[r]);e=a}return u.paged&&i.paged&&$observable(i.paged).refresh(e),e}function ke(e,n,a){var r=this.jquery&&(this[0]||ge("Unknown template")),o=r.getAttribute("data-jsv-tmpl");return he.call(o&&t.data(r).jsvTmpl||u(r),e,n,a)}function Te(e){return U[e]||(U[e]="&#"+e.charCodeAt(0)+";")}function je(e,t){return $[t]||""}function _e(e){return null!=e?R.test(e)&&(""+e).replace(F,Te)||e:""}if(i={jsviews:C,sub:{rPath:/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rPrm:/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(?:(\()\s*)?\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,View:ce,Err:Z,tmplFn:Me,parse:Ae,extend:ee,extendCtx:we,syntaxErr:ve,onStore:{template:function(e,t){null===t?delete V[e]:e&&(V[e]=t)}},addSetting:fe,settings:{allowCode:!1},advSet:Q,_thp:Y,_gm:K,_tg:function(){},_cnvt:function(e,t,n,a){var r,o,i,s,c,l="number"==typeof n&&t.tmpl.bnds[n-1];void 0===a&&l&&l._lr&&(a="");void 0!==a?n=a={props:{},args:[a]}:l&&(n=l(t.data,t,p));if(l=l._bd&&l,e||l){if(o=t._lc,r=o&&o.tag,n.view=t,!r){if(r=ee(new p._tg,{_:{bnd:l,unlinked:!0,lt:n.lt},inline:!o,tagName:":",convert:e,onArrayChange:!0,flow:!0,tagCtx:n,tagCtxs:[n],_is:"tag"}),(s=n.args.length)>1)for(c=r.bindTo=[];s--;)c.unshift(s);o&&(o.tag=r,r.linkCtx=o),n.ctx=we(n.ctx,(o?o.view:t).ctx),Y(r,n)}r._er=a&&i,r.ctx=n.ctx||r.ctx||{},n.ctx=void 0,i=r.cvtArgs()[0],r._er=a&&i}else i=n.args[0];return null!=(i=l&&t._.onRender?t._.onRender(i,t,r):i)?i:""},_tag:function(e,t,n,a,r,i){function s(e){var t=c[e];if(void 0!==t)for(t=l(t)?t:[t],g=t.length;g--;)B=t[g],isNaN(parseInt(B))||(t[g]=parseInt(B));return t||[0]}var c,u,m,f,h,y,g,v,M,b,S,A,x,w,C,k,T,j,_,N,O,R,I,F,B,E,D,L,U,$=0,H="",q=(t=t||o)._lc||!1,V=t.ctx,W=n||t.tmpl,z="number"==typeof a&&t.tmpl.bnds[a-1];"tag"===e._is?(e=(c=e).tagName,a=c.tagCtxs,c.template):(u=t.getRsc("tags",e)||ge("Unknown tag: {{"+e+"}} "),u.template);void 0===i&&z&&(z._lr=u.lateRender&&!1!==z._lr||z._lr)&&(i="");void 0!==i?(H+=i,a=i=[{props:{},args:[],params:{props:{}}}]):z&&(a=z(t.data,t,p));for(y=a.length;$<y;$++)b=a[$],k=b.tmpl,(!q||!q.tag||$&&!q.tag.inline||c._er||k&&+k===k)&&(k&&W.tmpls&&(b.tmpl=b.content=W.tmpls[k-1]),b.index=$,b.ctxPrm=re,b.render=he,b.cvtArgs=oe,b.bndArgs=se,b.view=t,b.ctx=we(we(b.ctx,u&&u.ctx),V)),(n=b.props.tmpl)&&(b.tmpl=t._getTmpl(n),b.content=b.content||b.tmpl),c?q&&q.fn._lr&&(T=!!c.init):(c=new u._ctr,T=!!c.init,c.parent=h=V&&V.tag,c.tagCtxs=a,q&&(c.inline=!1,q.tag=c),c.linkCtx=q,(c._.bnd=z||q.fn)?(c._.ths=b.params.props.this,c._.lt=a.lt,c._.arrVws={}):c.dataBoundOnly&&ge(e+" must be data-bound:\n{^{"+e+"}}")),I=c.dataMap,b.tag=c,I&&a&&(b.map=a[$].map),c.flow||(S=b.ctx=b.ctx||{},m=c.parents=S.parentTags=V&&we(S.parentTags,V.parentTags)||{},h&&(m[h.tagName]=h),m[c.tagName]=S.tag=c,S.tagCtx=b);if(!(c._er=i)){for(Y(c,a[0]),c.rendering={rndr:c.rendering},$=0;$<y;$++){if(b=c.tagCtx=a[$],R=b.props,c.ctx=b.ctx,!$){if(T&&(c.init(b,q,c.ctx),T=void 0),b.args.length||!1===b.argDefault||!1===c.argDefault||(b.args=N=[b.view.data],b.params.args=["#data"]),x=s("bindTo"),void 0!==c.bindTo&&(c.bindTo=x),void 0!==c.bindFrom?c.bindFrom=s("bindFrom"):c.bindTo&&(c.bindFrom=c.bindTo=x),w=c.bindFrom||x,D=x.length,E=w.length,c._.bnd&&(L=c.linkedElement)&&(c.linkedElement=L=l(L)?L:[L],D!==L.length&&ge("linkedElement not same length as bindTo")),(L=c.linkedCtxParam)&&(c.linkedCtxParam=L=l(L)?L:[L],E!==L.length&&ge("linkedCtxParam not same length as bindFrom/bindTo")),w)for(c._.fromIndex={},c._.toIndex={},v=E;v--;)for(B=w[v],g=D;g--;)B===x[g]&&(c._.fromIndex[g]=v,c._.toIndex[v]=g);q&&(q.attr=c.attr=q.attr||c.attr||q._dfAt),f=c.attr,c._.noVws=f&&"html"!==f}if(N=c.cvtArgs($),c.linkedCtxParam)for(O=c.cvtArgs($,1),g=E,U=c.constructor.prototype.ctx;g--;)(A=c.linkedCtxParam[g])&&(B=w[g],C=O[g],b.ctx[A]=p._cp(U&&void 0===C?U[A]:C,void 0!==C&&ie(b.params,B),b.view,c._.bnd&&{tag:c,cvt:c.convert,ind:g,tagElse:$}));(j=R.dataMap||I)&&(N.length||R.dataMap)&&((_=b.map)&&_.src===N[0]&&!r||(_&&_.src&&_.unmap(),j.map(N[0],b,_,!c._.bnd),_=b.map),N=[_.tgt]),M=void 0,c.render&&(M=c.render.apply(c,N),t.linked&&M&&!P.test(M)&&((n={links:[]}).render=n.fn=function(){return M},M=ye(n,t.data,void 0,!0,t,void 0,void 0,c))),N.length||(N=[t]),void 0===M&&(F=N[0],c.contentCtx&&(F=!0===c.contentCtx?t:c.contentCtx(F)),M=b.render(F,!0)||(r?void 0:"")),H=H?H+(M||""):void 0!==M?""+M:void 0}c.rendering=c.rendering.rndr}c.tagCtx=a[0],c.ctx=c.tagCtx.ctx,c._.noVws&&c.inline&&(H="text"===f?d.html(H):"");return z&&t._.onRender?t._.onRender(H,t,c):H},_er:ge,_err:function(e,t,n){var a=void 0!==n?c(n)?n.call(t.data,e,t):n||"":"{Error: "+(e.message||e)+"}";h.onError&&void 0!==(n=h.onError.call(t.data,e,n&&a,t))&&(a=n);return t&&!t._lc?d.html(a):a},_cp:X,_sq:function(e){return"constructor"===e&&ve(""),e}},settings:{delimiters:function e(t,n,a){if(!t)return h.delimiters;if(l(t))return e.apply(i,t);A=a?a[0]:A,/^(\W|_){5}$/.test(t+n+A)||ge("Invalid delimiters");return v=t[0],M=t[1],b=n[0],S=n[1],h.delimiters=[v+M,b+S,A],t="\\"+v+"(\\"+A+")?\\"+M,n="\\"+b+"\\"+S,r="(?:(\\w+(?=[\\/\\s\\"+b+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+b+"]|\\"+b+"(?!\\"+S+"))*?)",p.rTag="(?:"+r+")",r=new RegExp("(?:"+t+r+"(\\/)?|\\"+v+"(\\"+A+")?\\"+M+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+n,"g"),p.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+t+".*"+n),g},advanced:function(e){return e?(ee(y,e),p.advSet(),g):y}},map:pe},(Z.prototype=new Error).constructor=Z,te.depends=function(){return[this.get("item"),"index"]},ne.depends="index",ce.prototype={get:function(e,t){t||!0===e||(t=e,e=void 0);var n,a,r,o,i=this,s="root"===t;if(e){if(!(o=t&&i.type===t&&i))if(n=i.views,i._.useKey){for(a in n)if(o=t?n[a].get(e,t):n[a])break}else for(a=0,r=n.length;!o&&a<r;a++)o=t?n[a].get(e,t):n[a]}else if(s)o=i.root;else if(t)for(;i&&!o;)o=i.type===t?i:void 0,i=i.parent;else o=i.parent;return o||void 0},getIndex:ne,ctxPrm:re,getRsc:function(e,t){var n,a,r=this;if(""+t===t){for(;void 0===n&&r;)n=(a=r.tmpl&&r.tmpl[e])&&a[t],r=r.parent;return n||i[e][t]}},_getTmpl:function(e){return e&&(e.fn?e:this.getRsc("templates",e)||u(e))},_getOb:ae,getCache:function(e){return h._cchCt>this.cache._ct&&(this.cache={_ct:h._cchCt}),void 0!==this.cache[e]?this.cache[e]:this.cache[e]=q[e](this.data,this,p)},_is:"view"},p=i.sub,g=i.settings,!(W||t&&t.render)){for(a in G)me(a,G[a]);if(d=i.converters,m=i.helpers,f=i.tags,p._tg.prototype={baseApply:function(e){return this.base.apply(this,e)},cvtArgs:oe,bndArgs:se,ctxPrm:re},o=p.topView=new ce,t){if(t.fn.render=ke,s=t.expando,t.observable){if(C!==(C=t.views.jsviews))throw"jquery.observable.js requires jsrender.js "+C;ee(p,t.views.sub),i.map=t.views.map}}else t={},n&&(e.jsrender=t),t.renderFile=t.__express=t.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},t.isFunction=function(e){return"function"==typeof e},t.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},p._jq=function(e){e!==t&&(ee(e,t),(t=e).fn.render=ke,delete t.jsrender,s=t.expando)},t.jsrender=C;for(x in(h=p.settings).allowCode=!1,c=t.isFunction,t.render=V,t.views=i,t.templates=u=i.templates,h)fe(x);(g.debugMode=function(e){return void 0===e?h.debugMode:(h._clFns&&h._clFns(),h.debugMode=e,h.onError=e+""===e?function(){return e}:c(e)?e:void 0,g)})(!1),y=h.advanced={cache:!0,useViews:!1,_jsv:!1},f({if:{render:function(e){var t=this.tagCtx;return this.rendering.done||!e&&(t.args.length||!t.index)?"":(this.rendering.done=!0,void(this.selected=t.index))},contentCtx:!0,flow:!0},for:{sortDataMap:pe(Ce),init:function(e,t){this.setDataMap(this.tagCtxs)},render:function(e){var t,n,a,r,o,i=this.tagCtx,s=!1===i.argDefault,c=i.props,u=s||i.args.length,d="",m=0;if(!this.rendering.done){if(t=u?e:i.view.data,s)for(s=c.reverse?"unshift":"push",r=+c.end,o=+c.step||1,t=[],a=+c.start||0;(r-a)*o>0;a+=o)t[s](a);void 0!==t&&(n=l(t),d+=i.render(t,!u||c.noIteration),m+=n?t.length:1),(this.rendering.done=m)&&(this.selected=i.index)}return d},setDataMap:function(e){for(var t,n,a,r=e.length;r--;)n=(t=e[r]).props,a=t.params.props,t.argDefault=void 0===n.end||t.args.length>0,n.dataMap=!1!==t.argDefault&&l(t.args[0])&&(a.sort||a.start||a.end||a.step||a.filter||a.reverse||n.sort||n.start||n.end||n.step||n.filter||n.reverse)&&this.sortDataMap},flow:!0},props:{baseTag:"for",dataMap:pe((function(e,n){var a,r,o=n.map,i=o&&o.propsArr;if(!i){if(i=[],"object"==typeof e||c(e))for(a in e)r=e[a],a===s||!e.hasOwnProperty(a)||n.props.noFunctions&&t.isFunction(r)||i.push({key:a,prop:r});o&&(o.propsArr=o.options&&i)}return Ce(i,n)})),init:Q,flow:!0},include:{flow:!0},"*":{render:X,flow:!0},":*":{render:X,flow:!0},dbg:m.dbg=d.dbg=function(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}}),d({html:_e,attr:_e,encode:function(e){return""+e===e?e.replace(B,Te):e},unencode:function(e){return""+e===e?e.replace(E,je):e},url:function(e){return null!=e?encodeURI(""+e):null===e?e:""}})}return h=p.settings,l=(t||W).isArray,g.delimiters("{{","}}","^"),z&&W.views.sub._jq(t),t||W}),window)},function(e,t){e.exports=jquery},function(e,t,n){"use strict";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}n.r(t);var d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c(this,e),this.name=t,this.src=n.src,this.css=n.css,this.callbacks=[],n.callback&&this.callbacks.push({callback:n.callback,context:n.context||"body"}),this.async=void 0===n.async||n.async,this.loaded=a}return u(e,[{key:"load",value:function(){var e=this;return new Promise((function(t,n){if(e.loaded)t();else{var a=[];e.src&&a.push(MyAMS.core.getScript(e.src)),e.css&&a.push(MyAMS.core.getCSS(e.css,"".concat(e.name,"_css"))),$.when.apply($,a).then((function(){e.loaded=!0,t()}),n)}}))}},{key:"run",value:function(e){var t,n=[],a=o(this.callbacks);try{for(a.s();!(t=a.n()).done;){var r=t.value;"string"==typeof r.callback&&(console.debug("Resolving callback ".concat(r.callback)),r.callback=MyAMS.core.getFunctionByName(r.callback)||r.callback),n.push(r.callback(e,r.context))}}catch(e){a.e(e)}finally{a.f()}return Promise.all(n)}}]),e}(),m=new(function(){function e(){c(this,e),this.plugins=new Map}return u(e,[{key:"register",value:function(e,t){!t&&Object.prototype.hasOwnProperty.call(e,"name")&&(t=e.name);var n=this.plugins;if(n.has(t)){window.console&&console.debug&&console.debug("Plug-in ".concat(t," is already registered!"));var a,i=n.get(t),s=!0,c=o(i.callbacks);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(l.callback===e.callback&&l.context===e.context){s=!1;break}}}catch(e){c.e(e)}finally{c.f()}return s&&i.callbacks.push({callback:e.callback,context:e.context||"body"}),i}return"string"==typeof e&&(e=MyAMS.core.getFunctionByName(e)),"function"==typeof e?n.set(t,new d(t,{callback:e},!0)):"object"===r(e)&&n.set(t,new d(t,e,!(e.src||e.css))),n.get(t)}},{key:"load",value:function(e){var t=this,n=[],a=[];$("[data-ams-plugins]",e).each((function(e,r){var i,s,c=$(r),l=c.data("ams-plugins");if("string"==typeof l){var u,d=o(l.split(/[\s,;]+/));try{for(d.s();!(u=d.n()).done;){var m=u.value,f=m.toLowerCase();s={src:c.data("ams-plugin-".concat(f,"-src")),css:c.data("ams-plugin-".concat(f,"-css")),callback:c.data("ams-plugin-".concat(f,"-callback")),context:c,async:c.data("ams-plugin-".concat(f,"-async"))},(i=t.register(s,m)).loaded||(!1===s.async?a.push(i.load()):n.push(i.load()))}}catch(e){d.e(e)}finally{d.f()}}else{var p,h=o($.isArray(l)?l:[l]);try{for(h.s();!(p=h.n()).done;)s=p.value,$.extend(s,{context:c}),(i=t.register(s)).loaded||(!1===i.async?a.push(i.load()):n.push(i.load()))}catch(e){h.e(e)}finally{h.f()}}}));for(var r=$.when.apply($,n),i=0,s=a;i<s.length;i++){s[i];r=r.done((function(){}))}return r}},{key:"run",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Set;$("[data-ams-plugins-disabled]",e).each((function(e,t){var a,r=o($(t).data("ams-plugins-disabled").split(/[\s,;]+/));try{for(r.s();!(a=r.n()).done;){var i=a.value;n.add(i)}}catch(e){r.e(e)}finally{r.f()}}));var r=this.plugins;if(t){var i,s=o(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;r.has(c)&&r.get(c).run(e)}}catch(e){s.e(e)}finally{s.f()}}else{var l,u=o(r.entries());try{for(u.s();!(l=u.n()).done;){var d=a(l.value,2),m=d[0],f=d[1];n.has(m)||f.run(e)}}catch(e){u.e(e)}finally{u.f()}}}}]),e}()),f={plugins:m,initElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#content";return MyAMS.core.executeFunctionByName(MyAMS.config.initData,window,e),m.load(e)},register:function(e,t,n){return m.register(e,t,n)},run:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return m.run(e,t)}};function p(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=g(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function g(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function M(e){var t=[],n=e.data("ams-modules");if("string"==typeof n)t=t.concat(n.trim().split(/[\s,;]+/));else if(n)for(var a=0,r=Object.entries(n);a<r.length;a++){var o=h(r[a],2),i=o[0],s=o[1],c={};c[i]=s,t.push(c)}return $("[data-ams-modules]",e).each((function(e,n){var a=$(n).data("ams-modules");if("string"==typeof a)t=t.concat(a.trim().split(/[\s,;]+/));else if(a)for(var r=0,o=Object.entries(a);r<o.length;r++){var i=h(o[r],2),s=i[0],c=i[1],l={};l[s]=c,t.push(l)}})),p(new Set(t))}function b(e,t){if(e){if("string"!=typeof e)return e;var n=e.split(".");t=null==t?window:t;var a,r=y(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;try{t=t[o]}catch(e){return}}}catch(e){r.e(e)}finally{r.f()}return t}}function S(e,t){if(null!=e){if("function"==typeof e)return e;if("string"==typeof e){var n=e.split("."),a=n.pop();t=null==t?window:t;var r,o=y(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;try{t=t[i]}catch(e){return}}}catch(e){o.e(e)}finally{o.f()}try{return t[a]}catch(e){return}}}}function A(e,t){var n=S(e,window);if("function"==typeof n){var a=Array.prototype.slice.call(arguments,2);return n.apply(t,a)}}function x(e){return e.replace(/{[^{}]*}/g,(function(e){return b(e.substr(1,e.length-2))}))}window.jQuery||(window.$=window.jQuery=n(1));var w=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),C={modules:[],ajaxNav:!0,enableFastclick:!0,useSVGIcons:void 0!==window.FontAwesome&&"nest"===FontAwesome.config.autoReplaceSvg,menuSpeed:235,initPage:"MyAMS.core.initPage",initData:"MyAMS.core.initData",initContent:"MyAMS.core.initContent",clearContent:"MyAMS.core.clearContent",useRegistry:!0,alertsContainerClass:"toast-wrapper",safeMethods:["GET","HEAD","OPTIONS","TRACE"],csrfCookieName:"csrf_token",csrfHeaderName:"X-CSRF-Token",enableTooltips:!0,enableHtmlTooltips:!0,warnOnFormChange:!0,formChangeCallback:null,isMobile:w,device:w?"mobile":"desktop"},k={getObject:b,getFunctionByName:S,executeFunctionByName:A,getSource:x,getScript:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){var r={dataType:"script",url:x(e),cache:T.env.devmode,async:!0},o=$.extend({},r,t);$.ajax(o).then((function(){n(e)}),(function(e,t,n){a(n)}))}))},getCSS:function(e,t){return new Promise((function(n){var a=$("HEAD"),r=$('style[data-ams-id="'.concat(t,'"]'),a);if(0===r.length){r=$("<style>").attr("data-ams-id",t).text('@import "'.concat(x(e),'";')).appendTo(a);var o=setInterval((function(){try{r[0].sheet.cssRules;clearInterval(o),n(!0)}catch(e){}}),10)}else n(!1)}))},getQueryVar:function(e,t){if(!("string"!=typeof e||e.indexOf("?")<0)){e.endsWith("&")||(e+="&");var n=new RegExp(".*?[&\\?]".concat(t,"=(.*?)&.*")),a=e.replace(n,"$1");return a===e?null:a}},generateId:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()},generateUUID:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},switchIcon:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fa";if("string"==typeof e&&(e=$(e)),T.config.useSVGIcons){var r=FontAwesome.findIconDefinition({iconName:n,prefix:a});r&&e.html(FontAwesome.icon(r).html)}else e.removeClass("fa-".concat(t)).addClass("fa-".concat(n))},initPage:function(){return T.require("i18n").then((function(){T.dom={page:$("html"),root:$("body"),nav:$("nav"),main:$("#main"),leftPanel:$("#left-panel"),shortcuts:$("#shortcuts")},T.theme=function(){var e;if(T.env.bundle)e=T.theme;else{var t=$('link[href*="/myams.css"], link[href*="/emerald.css"], link[href*="/darkmode.css"]');e=t.length>0?/.*\/([a-z]+).css/.exec(t.attr("href"))[1]:"unknown"}return e}(),A(T.config.initData,window,T.dom.root);var e=M(T.dom.root);T.require.apply(T,p(e)).then((function(){var e,t=y(T.config.modules);try{for(t.s();!(e=t.n()).done;){var n=e.value;A("MyAMS.".concat(n,".init"))}}catch(e){t.e(e)}finally{t.f()}A(T.dom.page.data("ams-init-content")||T.config.initContent)}))}))},initData:function(e){$("[data-ams-data]",e).each((function(e,t){var n=$(t),a=n.data("ams-data");if(a)for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)){var o=a[r];"string"!=typeof o&&(o=JSON.stringify(o)),n.attr("data-".concat(r),o)}n.removeAttr("data-ams-data")}))},initContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;function t(){var t,n=y(T.config.modules);try{for(n.s();!(t=n.n()).done;){var a=t.value;A("MyAMS.".concat(a,".initElement"),document,e)}}catch(e){n.e(e)}finally{n.f()}}return null===e&&(e=$("body")),e=$(e),new Promise((function(n,a){A(T.config.initData,window,e);var r=M(e);return T.require.apply(T,p(r)).then((function(){e.trigger("before-init.ams.content"),T.config.useRegistry&&!e.data("ams-disable-registry")?T.registry.initElement(e).then((function(){t()})).then((function(){T.registry.run(e),e.trigger("after-init.ams.content")})).then(n):(t(),n())}),(function(){a("Missing MyAMS modules!")}))}))},clearContent:function(e){return"string"==typeof e&&(e=$(e)),new Promise((function(t,n){var a={veto:!1};$(document).trigger("clear.ams.content",[a,e]),a.veto?t(!a.veto):T.require("events").then((function(){$(T.events.getHandlers(e,"clear.ams.content")).each((function(e,t){if($(t).trigger("clear.ams.content",[a]),a.veto)return!1})),a.veto||($(T.events.getHandlers(e,"cleared.ams.content")).each((function(e,t){$(t).trigger("cleared.ams.content")})),$(document).trigger("cleared.ams.content",[e])),t(!a.veto)}),(function(){n("Missing MyAMS.events module!")}))}))}},T={$:$,env:function(e){var t=e('script[src*="/myams.js"], script[src*="/myams-dev.js"], script[src*="/emerald.js"], script[src*="/emerald-dev.js"], script[src*="/darkmode.js"], script[src*="/darkmode-dev.js"], script[src*="/myams-core.js"], script[src*="/myams-core-dev.js"], script[src*="/myams-mini.js"], script[src*="/myams-mini-dev.js"]').attr("src"),n=!t||t.indexOf("-dev.js")>=0;return{bundle:!t||t.indexOf("-core")<0&&t.indexOf("-mini")<0,devmode:n,devext:n?"-dev":"",extext:n?"":".min",baseURL:t?t.substring(0,t.lastIndexOf("/")+1):"/"}}($),config:C,core:k,registry:f};window.MyAMS=T;var j=T;function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=O(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function O(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=MyAMS.$;function F(e,t){var n,a;"object"===I(e)?(n=e.src,a=e.css):n=e.startsWith("http://")||e.startsWith("https://")||e.endsWith(".js")?e:"".concat(MyAMS.env.baseURL,"mod-").concat(e).concat(MyAMS.env.devext,".js");var r=[MyAMS.core.getScript(n,{async:!0},console.error)];return a&&r.push(MyAMS.core.getCSS(a,"".concat(t,"_css"))),r}n(0);function B(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var D=MyAMS.$,L=D.templates({markup:'\n\t<div class="alert alert-{{:status}}" role="alert">\n\t\t<button type="button" class="close" data-dismiss="alert" \n\t\t\t\taria-label="{{*: MyAMS.i18n.BTN_CLODE }}">\n\t\t\t<i class="fa fa-times" aria-hidden="true"></i>\t\n\t\t</button>\n\t\t{{if header}}\n\t\t<h5 class="alert-heading">{{:header}}</h5>\n\t\t{{/if}}\n\t\t{{if message}}\n\t\t<p>{{:message}}</p>\n\t\t{{/if}}\n\t\t{{if messages}}\n\t\t<ul>\n\t\t{{for messages}}\n\t\t\t<li>\n\t\t\t\t{{if header}}<strong>{{:header}} :</strong>{{/if}}\n\t\t\t\t{{:message}}\n\t\t\t</li>\n\t\t{{/for}}\n\t\t</ul>\n\t\t{{/if}}\n\t\t{{if widgets}}\n\t\t<ul>\n\t\t{{for widgets}}\n\t\t\t<li>\n\t\t\t\t{{if header}}<strong>{{:header}} :</strong>{{/if}}\n\t\t\t\t{{:message}}\n\t\t\t</li>\n\t\t{{/for}}\n\t\t</ul>\n\t\t{{/if}}\n\t</div>',allowCode:!0}),U={showErrors:function(e,t){return new Promise((function(n,a){"string"==typeof t?MyAMS.require("i18n","alert").then((function(){MyAMS.alert.alert({parent:e,status:"danger",header:MyAMS.i18n.ERROR_OCCURED,message:t})})).then(n,a):D.isArray(t)?MyAMS.require("i18n","alert").then((function(){MyAMS.alert.alert({parent:e,status:"danger",header:MyAMS.i18n.ERRORS_OCCURED,message:t})})).then(n,a):MyAMS.require("i18n","ajax","alert","form").then((function(){MyAMS.form.clearAlerts(e);var n,a=[],r=B(t.messages||[]);try{for(r.s();!(n=r.n()).done;){var o=n.value;"string"==typeof o?a.push({header:null,message:o}):a.push(o)}}catch(e){r.e(e)}finally{r.f()}var i,s=B(t.widgets||[]);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push({header:c.label,message:c.message})}}catch(e){s.e(e)}finally{s.f()}var l={status:"danger",header:t.header||(a.length>1?MyAMS.i18n.ERRORS_OCCURED:MyAMS.i18n.ERROR_OCCURED),message:t.error||null,messages:a};D(L.render(l)).prependTo(e);var u,d=B(t.widgets||[]);try{for(d.s();!(u=d.n()).done;){var m=u.value,f=void 0;(f=m.id?D("#".concat(m.id),e):D('[name="'.concat(m.name,'"]'),e)).exists()&&MyAMS.form.setInvalid(e,f,m.message)}}catch(e){d.e(e)}finally{d.f()}MyAMS.require("helpers").then((function(){var t=e.parents(".modal-body");t.exists()||(t=D("#main")),MyAMS.helpers.scrollTo(t,e,{offset:-15})}))})).then(n,a)}))},showHTTPError:function(e){return new Promise((function(t,n){MyAMS.require("alert").then((function(){MyAMS.alert.messageBox({status:"error",title:e.title,message:e.message,hideTimestamp:!1,timeout:0})})).then(t,n)}))}};function H(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("error"):(MyAMS.error=U,console.debug("MyAMS: error module loaded...")));var V=MyAMS.$;function W(e){if(window.Cookies){var t=Cookies.get(MyAMS.config.csrfCookieName);t&&e.setRequestHeader(MyAMS.config.csrfHeaderName,t)}}var z={check:function(e,t){return new Promise((function(n,a){var r=[];if(void 0===e){t instanceof Array||(t=[t]);var o,i=H(t);try{for(i.s();!(o=i.n()).done;){var s=o.value;r.push(MyAMS.core.getScript(s))}}catch(e){i.e(e)}finally{i.f()}}else{e instanceof Array||(e=[e]);for(var c=0;c<e.length;c++)void 0===e[c]&&r.push(MyAMS.core.getScript(t[c]))}V.when.apply(V,r).then((function(){n(r.length>0)}),a)}))},getAddr:function(e){var t=e||V("html head base").attr("href")||window.location.href;return t.substr(0,t.lastIndexOf("/")+1)},start:function(){V("#ajax-gear").show()},stop:function(){V("#ajax-gear").hide()},progress:function(e){e.lengthComputable&&(e.loaded>=e.total||console&&console.debug&&console.debug("".concat(Math.round(e.loaded/e.total*100),"%")))},get:function(e,t,n){return new Promise((function(a,r){var o={url:e.startsWith(window.location.protocol)?e:MyAMS.ajax.getAddr()+e,type:"get",cache:!1,data:V.param(t||null),dataType:"json",beforeSend:W},i=V.extend({},o,n);V.ajax(i).then((function(e,t,n){a(e,t,n)}),(function(e,t,n){r(n)}))}))},post:function(e,t,n){return new Promise((function(a,r){var o={url:e.startsWith(window.location.protocol)?e:MyAMS.ajax.getAddr()+e,type:"post",cache:!1,data:V.param(t||null),dataType:"json",beforeSend:W},i=V.extend({},o,n);V.ajax(i).then((function(e,t,n){a(e,t,n)}),(function(e,t,n){r(n)}))}))},getJSON:function(){return function(e,t){var n=t.url;return delete t.url,MyAMS.ajax.post(n,t).then(MyAMS.ajax.handleJSON)}},getResponse:function(e){var t,n="unknown";if(e){var a=e.getResponseHeader("content-type");if(!a)try{a=e.responseXML.contentType}catch(e){a=null}if(a)if(a.startsWith("application/javascript"))t=e.responseText,n="script";else if(a.startsWith("text/html"))t=e.responseText,n="html";else if(a.startsWith("text/xml"))t=e.responseText,n="xml";else if(t=e.responseJSON)n="json";else try{t=JSON.parse(e.responseText),n="json"}catch(a){t=e.responseText,n="binary"}else t={status:"alert",alert:{title:MyAMS.i18n.ERROR_OCCURED,content:MyAMS.i18n.NO_SERVER_RESPONSE}},n="json"}return{contentType:n,data:t}},handleJSON:function(e,t,n){function a(){return new Promise((function(n,a){void 0!==t?MyAMS.require("form").then((function(){MyAMS.form.resetChanged(t)})).then((function(){!1!==e.closeForm?MyAMS.require("modal").then((function(){MyAMS.modal.close(t)})).then(n,a):n()})):n()}))}var r=null,o=null,i=e.status,s=[];switch(n instanceof jQuery&&!n.length&&(n=null),i){case"alert":if(window.alert){var c=e.alert;window.alert("".concat(c.title,"\n\n").concat(c.content))}break;case"error":s.push(MyAMS.require("error").then((function(){MyAMS.error.showErrors(t,e)})));break;case"message":case"messagebox":case"smallbox":break;case"info":case"success":case"notify":case"callback":case"callbacks":s.push(a());break;case"modal":s.push(MyAMS.require("modal").then((function(){MyAMS.modal.open(e.location)})));break;case"reload":a(),(r=e.location||window.location.hash).startsWith("#")&&(r=r.substr(1)),o=V(e.target||n||"#content"),s.push(MyAMS.require("skin").then((function(){MyAMS.skin.loadURL(r,o,{preLoadCallback:MyAMS.core.getFunctionByName(e.preReload||function(){V("[data-ams-pre-reload]",o).each((function(e,t){MyAMS.core.executeFunctionByName(V(t).data("ams-pre-reload"))}))}),preLoadCallbackOptions:e.preReloadOptions,afterLoadCallback:MyAMS.core.getFunctionByName(e.postReload||function(){V("[data-ams-post-reload]",o).each((function(e,t){MyAMS.core.executeFunctionByName(V(t).data("ams-post-reload"))}))}),afterLoadCallbackOptions:e.postReloadOptions})})));break;case"redirect":a(),(r=e.location||window.location.href).endsWith("##")&&(r=r.replace(/##/,window.location.hash)),e.window?window.open(r,e.window,e.options):(V(window).off("beforeunload"),window.location.href===r?window.location.reload():window.location.replace(r));break;default:e.code?s.push(MyAMS.require("error").then((function(){MyAMS.error.showHTTPError(e)}))):window.console&&console.warn&&console.warn("Unhandled JSON response status: ".concat(i))}if(e.content){var l=e.content,u=V(l.target||n||"#content");"string"==typeof l?u.html(l):(l.text?u.text(l.text):u.html(l.html),s.push(MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,u).then((function(){l.keepHidden||u.removeClass("hidden")}))))}if(e.contents){var d,m=H(e.contents);try{var f=function(){var e=d.value,t=V(e.target);e.text?t.text(e.text):t.html(e.html),s.push(MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,t).then((function(){e.keepHidden||t.removeClass("hidden")})))};for(m.s();!(d=m.n()).done;)f()}catch(e){m.e(e)}finally{m.f()}}if(e.message&&!e.code&&s.push(MyAMS.require("alert").then((function(){if("string"==typeof e.message)MyAMS.alert.smallBox({status:i,message:e.message,icon:"fa-info-circle",timeout:3e3});else{var n=e.message;MyAMS.alert.alert({parent:t,status:n.status||i,header:n.header,subtitle:n.subtitle,message:n.message})}}))),e.messagebox&&s.push(MyAMS.require("alert").then((function(){if("string"==typeof e.messagebox)MyAMS.alert.messageBox({status:i,title:MyAMS.i18n.ERROR_OCCURED,icon:"fa-info-circle",message:e.messagebox,timeout:1e4});else{var t=e.messagebox;MyAMS.alert.messageBox({status:t.status||i,title:t.title||MyAMS.i18n.ERROR_OCCURED,icon:t.icon||"fa-info-circle",message:t.message,content:t.content,timeout:0===t.timeout?0:t.timeout||1e4})}}))),e.smallbox&&s.push(MyAMS.require("alert").then((function(){if("string"==typeof e.smallbox)MyAMS.alert.smallBox({status:i,message:e.smallbox,icon:"fa-info-circle",timeout:3e3});else{var t=e.smallbox;MyAMS.alert.smallBox({status:t.status||i,message:t.message,content:t.content,icon:t.icon||"fa-info-circle",timeout:t.timeout})}}))),e.event&&t.trigger(e.event,e.eventOptions),e.events){var p,h=H(e.events);try{for(h.s();!(p=h.n()).done;){var y=p.value;"string"==typeof y?t.trigger(y,e.eventOptions):t.trigger(y.event,y.options)}}catch(e){h.e(e)}finally{h.f()}}if(e.callback&&s.push(MyAMS.core.executeFunctionByName(e.callback,document,t,e.options)),e.callbacks){var g,v=H(e.callbacks);try{var M=function(){var n=g.value;"string"==typeof n?s.push(MyAMS.core.executeFunctionByName(n,document,t,e.options)):s.push(MyAMS.require(n.module||[]).then((function(){MyAMS.core.executeFunctionByName(n.callback,document,t,n.options)})))};for(v.s();!(g=v.n()).done;)M()}catch(e){v.e(e)}finally{v.f()}}return Promise.all(s)},error:function(e,t,n,a){if("abort"!==a&&!(t&&t.statusText&&"OK"===t.statusText.toUpperCase()||!0===t.x_ams_handled)){var r=MyAMS.ajax.getResponse(t);r?"json"===r.contentType?(MyAMS.ajax.handleJSON(r.data),t.x_ams_handled=!0):MyAMS.require("i18n","alert").then((function(){var t=a||e.statusText||e.type,n=r.responseText;MyAMS.alert.messageBox({status:"error",title:MyAMS.i18n.ERROR_OCCURED,content:"<h4>".concat(t,"</h4><p>").concat(n||"","</p>"),icon:"fa-exclamation-triangle",timeout:5e3})}),(function(){window.console&&(console.error&&console.error(e),console.debug&&console.debug(r))})):window.console&&(console.error&&console.error("ERROR: Can't parse response!"),console.debug&&console.debug(t))}}};"undefined"==typeof jest&&z.check(window.Cookies,"".concat(MyAMS.env.baseURL,"../ext/js-cookie").concat(MyAMS.env.extext,".js")).then((function(){var e=V.ajaxSettings.xhr;V.ajaxSetup({beforeSend:function(e,t){if(MyAMS.config.safeMethods.indexOf(t.type)<0&&void 0!==window.Cookies){var n=Cookies.get(MyAMS.config.csrfCookieName);n&&e.setRequestHeader(MyAMS.config.csrfHeaderName,n)}},progress:z.progress,progressUpload:z.progress,xhr:function(){var t=e();return t&&"function"==typeof t.addEventListener&&z.progress&&t.addEventListener("progress",(function(e){MyAMS.ajax.progress(e)}),!1),t}})})),V(document).ajaxStart(z.start),V(document).ajaxStop(z.stop),V(document).ajaxError(z.error),MyAMS.env.bundle?MyAMS.config.modules.push("ajax"):(MyAMS.ajax=z,console.debug("MyAMS: AJAX module loaded..."));var G=MyAMS.$,J=!1,K={language:"en",INFO:"Information",WARNING:"!! WARNING !!",ERROR:"ERROR: ",LOADING:"Loading...",PROGRESS:"Processing",WAIT:"Please wait!",FORM_SUBMITTED:"This form was already submitted...",NO_SERVER_RESPONSE:"No response from server!",ERROR_OCCURED:"An error occured!",ERRORS_OCCURED:"Some errors occured!",BAD_LOGIN_TITLE:"Bad login!",BAD_LOGIN_MESSAGE:"Your anthentication credentials didn't allow you to open a session; please check your credentials or contact administrator.",CONFIRM:"Confirm",CONFIRM_REMOVE:"Removing this content can't be undone. Do you confirm?",BTN_OK:"OK",BTN_CANCEL:"Cancel",BTN_YES:"Yes",BTN_NO:"No",BTN_CLOSE:"Close",CLIPBOARD_COPY:"Copy to clipboard with Ctrl+C, and Enter",CLIPBOARD_CHARACTER_COPY_OK:"Character copied to clipboard.",CLIPBOARD_TEXT_COPY_OK:"Text copied to clipboard.",FORM_CHANGED_WARNING:"Some changes were not saved. These updates will be lost if you leave this page.",DELETE_WARNING:"This change can't be undone. Are you sure that you want to delete this element?",NO_UPDATE:"No changes were applied.",DATA_UPDATED:"Data successfully updated.",HOME:"Home",LOGOUT:"Logout?",LOGOUT_COMMENT:"You can improve your security further after logging out by closing this opened browser",LAST_UPDATE:"Last update: ",DT_COLUMNS:"Columns",NO_SELECTED_VALUE:"No selected value",plugins:{datatables:{search:"",searchPlaceholder:"Search..."}},init:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,n){if(!J||e){J=!0;var a=G("html"),r=a.attr("lang")||a.attr("xml:lang");r&&!r.startsWith("en")?MyAMS.core.getScript("".concat(MyAMS.env.baseURL,"i18n/myams-").concat(r.substr(0,2),".js")).then(t,n):t()}else t()}))}};function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Q(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Q(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}MyAMS.env.bundle?MyAMS.config.modules.push("i18n"):(MyAMS.i18n=K,console.debug("MyAMS: I18n module loaded..."));var ae=MyAMS.$,re=function(){function e(t){ee(this,e),this.props=t}return ne(e,[{key:"render",value:function(){return ae('<li class="header"></li>').text(this.props.header||"")}}]),e}(),oe=function(){function e(){ee(this,e)}return ne(e,[{key:"render",value:function(){return ae('<li class="divider"></li>')}}]),e}(),ie=function(){function e(t){ee(this,e),this.items=t}return ne(e,[{key:"render",value:function(){var t,n=ae("<div></div>"),a=X(this.items);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.label){for(var o=ae("<li></li>"),i=ae("<a></a>").attr("href",r.href||"#").attr("title",r.label),s=0,c=Object.entries(r.attrs||{});s<c.length;s++){var l=Y(c[s],2),u=l[0],d=l[1];i.attr(u,d)}r.icon&&ae('<i class="fa-lg fa-fw mr-1"></i>').addClass(r.icon).appendTo(i),ae('<span class="menu-item-parent"></span>').text(r.label).appendTo(i),r.badge&&ae('<span class="badge ml-1 mr-3 float-right"></span>').addClass("bg-".concat(r.badge.status)).text(r.badge.value).appendTo(i),i.appendTo(o),r.items&&ae("<ul></ul>").append(new e(r.items).render()).appendTo(o),o.appendTo(n)}else(new oe).render().appendTo(n)}}catch(e){a.e(e)}finally{a.f()}return n.children()}}]),e}(),se=function(){function e(t,n,a){ee(this,e),this.menus=t,this.parent=n,this.settings=a}return ne(e,[{key:"getMenus",value:function(){var e,t=ae("<ul></ul>"),n=X(this.menus);try{for(n.s();!(e=n.n()).done;){var a=e.value;void 0!==a.header&&t.append(new re(a).render()),t.append(new ie(a.items).render())}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"render",value:function(){var e=this.getMenus();this.init(e),this.parent.append(e)}},{key:"init",value:function(e){var t=this.settings;e.find("li").each((function(e,n){var a=ae(n);if(a.find("ul").length>0){var r=a.find("a:first"),o=ae('<b class="collapse-sign">'.concat(t.closedSign,"</b>"));o.on("click",(function(e){e.preventDefault()})),r.append(o),"#"===r.attr("href")&&r.click((function(){return!1}))}})),e.find("li.open").each((function(e,n){var a=ae(n);ae("> ul",a).slideDown(t.speed),a.find(">a b.collapse-sign").html(t.openedSign)})),e.find("li.active").each((function(e,n){var a=ae(n).parents("ul"),r=a.parent("li");a.slideDown(t.speed),r.find("b:first").html(t.openedSign),r.addClass("open")})),e.find("li a").on("click",(function(n){var a=ae(n.currentTarget);if(!a.hasClass("active")){a.parents("li").removeClass("active");var r=a.attr("href").replace(/^#/,""),o=a.parent().find("ul");if(t.accordion){var i=a.parent().parents("ul");e.find("ul:visible").each((function(e,n){var a=!0;if(i.each((function(e,t){if(t===n)return a=!1,!1})),a&&o!==n){var s=ae(n);!r&&s.hasClass("active")||s.slideUp(t.speed,(function(){s.parent("li").removeClass("open").find("b:first").delay(t.speed).html(t.closedSign)}))}}))}var s=a.parent().find("ul:first");r||!s.is(":visible")||s.hasClass("active")?s.slideDown(t.speed,(function(){a.parent("li").addClass("open").find("b:first").delay(t.speed).html(t.openedSign)})):s.slideUp(t.speed,(function(){a.parent("li").removeClass("open").find("b:first").delay(t.speed).html(t.closedSign)}))}}))}}]),e}(),ce=!1,le=null;function ue(e){location&&e.startsWith("#")?e!==location.hash&&(location.hash=e):location.toString()===e?location.reload():window.location=e}var de={init:function(){ce||(ce=!0,ae.fn.extend({navigationMenu:function(e){var t=this;if(0!==this.length){var n=this.data(),a={accordion:!1!==n.amsMenuAccordion,speed:200};if(MyAMS.config.useSVGIcons){var r=FontAwesome.findIconDefinition({iconName:"angle-down"}),o=FontAwesome.findIconDefinition({iconName:"angle-up"});ae.extend(a,{closedSign:"<em data-fa-i2svg>".concat(FontAwesome.icon(r).html,"</em>"),openedSign:"<em data-fa-i2svg>".concat(FontAwesome.icon(o).html,"</em>")})}else ae.extend(a,{closedSign:'<em class="fa fa-angle-down"></em>',openedSign:'<em class="fa fa-angle-up"></em>'});var i=ae.extend({},a,e),s=MyAMS.core.getObject(n.amsMenuFactory)||se;if(n.amsMenuConfig)MyAMS.require("ajax","skin").then((function(){MyAMS.ajax.get(n.amsMenuConfig).then((function(e){new s(e,ae(t),i).render(),MyAMS.skin.checkURL()}))}));else{var c=ae("ul",this);new s(null,ae(this),i).init(c)}}}}),MyAMS.config.ajaxNav&&(ae(document).on("click",'a[href="#"]',(function(e){e.preventDefault()})),ae(document).on("click",'a[href!="#"]:not([data-toggle]), [data-ams-url]:not([data-toggle])',(function(e){if(!ae(e).data("ams-click-handler")){if("TD"===e.target.tagName){var t=ae(e.target);if(t.hasClass("dtr-control"))if(t.parents("table.datatable").hasClass("collapsed"))return}return function(e){return new Promise((function(t,n){var a=ae(e.currentTarget),r=a.data("ams-disabled-handlers");if(!0!==r&&"click"!==r&&"all"!==r){var o=a.attr("href")||a.data("ams-url");if(o&&!o.startsWith("javascript:")&&!a.attr("target")&&!0!==a.data("ams-context-menu")){var i,s,c;e.preventDefault(),e.stopPropagation(),o.indexOf("?")>=0?(s=(i=o.split("?"))[0],c=i[1].unserialize()):(s=o,c=void 0);var l=MyAMS.core.getFunctionByName(s);if("function"==typeof l&&(o=l(a,c)),o)if("function"==typeof o)t(o(a,c));else if(o=o.replace(/%23/,"#"),e.ctrlKey)window.open&&window.open(o),t();else{var u=a.data("ams-target")||a.attr("target");u?"_blank"===u?(window.open&&window.open(o),t()):"_top"===u?(window.location=o,t()):MyAMS.form?MyAMS.form.confirmChangedForm().then((function(e){"success"===e&&MyAMS.skin&&MyAMS.skin.loadURL(o,u,a.data("ams-link-options"),a.data("ams-link-callback")).then(t,n)})):MyAMS.skin&&MyAMS.skin.loadURL(o,u,a.data("ams-link-options"),a.data("ams-link-callback")).then(t,n):MyAMS.form?MyAMS.form.confirmChangedForm().then((function(e){"success"===e&&ue(o)})).then(t):(ue(o),t())}else t(null)}}}))}(e)}})),ae(document).on("click",'a[target="_blank"]',(function(e){e.preventDefault();var t=ae(e.currentTarget);window.open&&window.open(t.attr("href")),MyAMS.stats&&MyAMS.stats.logEvent(t.data("ams-stats-category")||"Navigation",t.data("ams-stats-action")||"External",t.data("ams-stats-label")||t.attr("href"))})),ae(document).on("click",'a[target="_top"]',(function(e){e.preventDefault(),MyAMS.form&&MyAMS.form.confirmChangedForm().then((function(t){"success"===t&&(window.location=ae(e.currentTarget).attr("href"))}))})),ae(document).on("click",".nav-tabs a[data-toggle=tab]",(function(e){if(ae(e.currentTarget).parent("li").hasClass("disabled"))return e.stopPropagation(),e.preventDefault(),!1})),ae(document).on("show.bs.tab",(function(e){var t=ae(e.target);t.exists()&&"A"!==t.get(0).tagName&&(t=ae("a[href]",t));var n=t.data();if(n&&n.amsUrl){if(n.amsTabLoaded)return;t.append('<i class="fa fa-spin fa-cog ml-1"></i>'),MyAMS.require("skin").then((function(){MyAMS.skin.loadURL(n.amsUrl,t.attr("href")).then((function(){n.amsTabLoadOnce&&(n.amsTabLoaded=!0),ae("i",t).remove()}),(function(){ae("i",t).remove()}))}))}})),MyAMS.config.isMobile?(MyAMS.dom.root.addClass("mobile-detected"),MyAMS.require("ajax").then((function(){MyAMS.config.enableFastclick&&MyAMS.ajax.check(ae.fn.noClickDelay,"".concat(MyAMS.env.baseURL,"../ext/js-smartclick").concat(MyAMS.env.extext,".js")).then((function(){ae("a",MyAMS.dom.nav).noClickDelay(),ae("a","#hide-menu").noClickDelay()})),MyAMS.dom.root.exists()&&MyAMS.ajax.check(window.Hammer,"".concat(MyAMS.env.baseURL,"../ext/hammer").concat(MyAMS.env.extext,".js")).then((function(){(le=new Hammer.Manager(MyAMS.dom.root.get(0))).add(new Hammer.Pan({direction:Hammer.DIRECTION_HORIZONTAL,threshold:200})),le.on("panright",(function(){MyAMS.dom.root.hasClass("hidden-menu")||MyAMS.nav.switchMenu()})),le.on("panleft",(function(){MyAMS.dom.root.hasClass("hidden-menu")&&MyAMS.nav.switchMenu()}))}))}))):MyAMS.dom.root.addClass("desktop-detected")),de.restoreState())},initElement:function(e){ae("nav",e).navigationMenu({speed:MyAMS.config.menuSpeed})},setActiveMenu:function(e){var t=MyAMS.dom.nav;if(ae(".active",t).removeClass("active"),e.addClass("open").addClass("active"),e.parents("li").addClass("open active").children("ul").addClass("active").show(),e.parents("li:first").removeClass("open"),e.parents("ul").addClass(e.attr("href").replace(/^#/,"")?"active":"").show(),e.exists()){var n=t.scrollTop(),a=ae(e).parents("li:last").position();(a.top<n||a.top>t.height()+n)&&t.scrollTop(a.top)}},drawBreadcrumbs:function(){var e=ae("ol.breadcrumb","#ribbon");if(ae("li",e).not(".persistent").remove(),!ae("li",e).exists()){var t='<li class="breadcrumb-item">\n\t\t\t\t\t<a class="p-r-1" href="'.concat(ae('a[href!="#"]:first',MyAMS.dom.nav).attr("href"),'">\n\t\t\t\t\t\t').concat(MyAMS.i18n.HOME,"\n\t\t\t\t\t</a>\n\t\t\t\t</li>");e.append(ae(t))}ae("li.active >a",MyAMS.dom.nav).each((function(t,n){var a=ae(n),r=ae.trim(a.clone().children(".badge").remove().end().text()),o=a.attr("href"),i=ae('<li class="breadcrumb-item"></li>').append(o.replace(/^#/,"")?ae("<a></a>").html(r).attr("href",o):r);e.append(i)}))},minifyMenu:function(e){e&&e.preventDefault(),MyAMS.dom.root.toggleClass("minified"),MyAMS.dom.root.hasClass("minified")?MyAMS.core.switchIcon(ae("i",e.currentTarget),"arrow-circle-left","arrow-circle-right"):MyAMS.core.switchIcon(ae("i",e.currentTarget),"arrow-circle-right","arrow-circle-left"),window.localStorage&&(MyAMS.dom.root.hasClass("minified")?localStorage.setItem("window-state","minified"):localStorage.setItem("window-state",""))},switchMenu:function(e){e&&e.preventDefault(),MyAMS.dom.root.toggleClass("hidden-menu"),window.localStorage&&(MyAMS.dom.root.hasClass("hidden-menu")?localStorage.setItem("window-state","hidden-menu"):localStorage.setItem("window-state",""))},restoreState:function(){if(window.localStorage){var e=localStorage.getItem("window-state");"minified"===e?MyAMS.nav.minifyMenu({currentTarget:ae("#minifyme"),preventDefault:function(){}}):MyAMS.dom.root.addClass(e)}}};MyAMS.env.bundle?MyAMS.config.modules.push("nav"):(MyAMS.nav=de,console.debug("MyAMS: nav module loaded..."));function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var pe=MyAMS.$,he=!1,ye={init:function(){he||(he=!0,MyAMS.config.enableTooltips&&MyAMS.dom.root.tooltip({selector:".hint",html:MyAMS.config.enableHtmlTooltips}),pe(".hint").mousedown((function(e){pe(e.currentTarget).tooltip("hide")})),pe(document).on("clear.ams.content",(function(){pe(".tooltip").remove()})),ye.checkURL(),pe(window).on("hashchange",ye.checkURL))},initElement:function(e){MyAMS.config.enableTooltips||pe(".hint",e).tooltip({html:MyAMS.config.enableHtmlTooltips})},checkURL:function(){return new Promise((function(e,t){var n,a=MyAMS.dom.nav,r=location.hash,o=r.replace(/^#/,""),i=null,s=o.indexOf("!");if(s>0&&(r=r.substring(0,s+1),i=o.substring(s+1),o=o.substring(0,s)),o){var c=pe("#content");c.exists()||(c=MyAMS.dom.root),n=pe('a[href="'.concat(r,'"]'),a),MyAMS.skin.loadURL(o,c).then((function(){var t=pe("html head title").data("ams-title-prefix"),a=t?"".concat(t," > "):"";if(document.title="".concat(a).concat(pe("[data-ams-page-title]:first",c).data("ams-page-title")||n.attr("title")||n.text().trim()||document.title),i){var r=pe("#".concat(i));r.exists()&&MyAMS.require("helpers").then((function(){MyAMS.helpers.scrollTo("#main",r,{offset:-15})}))}n.exists()?MyAMS.require("nav").then((function(){MyAMS.nav.setActiveMenu(n),MyAMS.nav.drawBreadcrumbs()})).then(e):e()}),t)}else{var l=pe("[data-ams-active-menu]").data("ams-active-menu");(n=l?pe('a[href="'.concat(l,'"]'),a):pe('ul li a[href!="#"]',a).first()).exists()?MyAMS.require("nav").then((function(){MyAMS.nav.setActiveMenu(n),l?MyAMS.nav.drawBreadcrumbs():window.location.replace(window.location.href+n.attr("href"))})).then(e,t):e()}}))},loadURL:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,r){e.startsWith("#")&&(e=e.substr(1)),t=pe(t),MyAMS.core.executeFunctionByName(MyAMS.config.clearContent,document,t).then((function(o){if(o){var i={type:"GET",url:e,dataType:"html",cache:!1,beforeSend:function(){t.html('<h1 class="loading"><i class="fa fa-cog fa-spin"></i> '.concat(MyAMS.i18n.LOADING,"</h1>")),n&&n.preLoadCallback&&MyAMS.core.executeFunctionByName(n.preLoadCallback,void 0,n.preLoadCallbackOptions),"content"===t.attr("id")&&MyAMS.require("nav").then((function(){var e=pe("html head title").data("ams-title-prefix"),t=e?"".concat(e," > "):"";document.title="".concat(t).concat(pe(".breadcrumb li:last-child").text()),MyAMS.dom.root.animate({scrollTop:0},"fast")}))}},s=pe.extend({},i,n),c={veto:!1};t.trigger("before-load.ams.content",[s,c]),c.veto||pe.ajax(s).then((function(e,o,i){if(pe.isArray(e)){var s=me(e,3);e=s[0],o=s[1],i=s[2]}MyAMS.require("ajax").then((function(){var e=MyAMS.ajax.getResponse(i);if(e){var s=e.contentType,c=e.data;switch(pe(".loading",t).remove(),s){case"json":MyAMS.ajax.handleJSON(c,t),a(c,o,i);break;case"script":case"xml":a(c,o,i);break;case"html":case"text":default:t.parents(".hidden").removeClass("hidden"),MyAMS.core.executeFunctionByName(t.data("ams-clear-content")||MyAMS.config.clearContent,document,t).then((function(){t.css({opacity:"0.0"}).html(c).removeClass("hidden").delay(30).animate({opacity:"1.0"},300),MyAMS.core.executeFunctionByName(t.data("ams-init-content")||MyAMS.config.initContent,window,t).then((function(){MyAMS.form&&MyAMS.form.setFocus(t),n&&n.afterLoadCallback?MyAMS.core.executeFunctionByName(n.afterLoadCallback,void 0,n.afterLoadCallbackOptions).then((function(){t.trigger("after-load.ams.content"),a(c,o,i)}),r):(t.trigger("after-load.ams.content"),a(c,o,i))}),r)}),r)}MyAMS.stats&&MyAMS.stats.logPageview()}}))}),(function(e,n,a){t.html('<h3 class="error"><i class="fa fa-exclamation-triangle text-danger"></i> \n\t\t\t\t\t\t\t\t'.concat(MyAMS.i18n.ERROR," ").concat(a,"</h3>").concat(e.responseText)),r(a)}))}}))}))}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("skin"):(MyAMS.skin=ye,console.debug("MyAMS: skin module loaded...")));var ge=MyAMS.$;if(!ge.templates){var ve=n(0);ge.templates=ve.templates}var Me=ge.templates({markup:'\n\t<div class="alert alert-{{:status}}" role="alert">\n\t\t<button type="button" class="close" data-dismiss="alert" \n\t\t\t\taria-label="{{*: MyAMS.i18n.BTN_CLODE }}">\n\t\t\t<i class="fa fa-times" aria-hidden="true"></i>\t\n\t\t</button>\n\t\t{{if header}}\n\t\t<h5 class="alert-heading">{{:header}}</h5>\n\t\t{{/if}}\n\t\t{{* if (typeof message === \'string\') { }}\n\t\t<ul>\n\t\t\t<li>{{:message}}</li>\n\t\t</ul>\n\t\t{{* } else { }}\n\t\t<ul>\n\t\t{{for message}}\n\t\t\t<li>{{:}}</li>\n\t\t{{/for}}\n\t\t</ul>\n\t\t{{* } }}\n\t</div>',allowCode:!0}),be=ge.templates({markup:'\n\t<div role="alert" class="toast toast-{{:status}} fade hide"\n\t\t data-autohide="{{*: Boolean(data.timeout !== 0).toString() }}"\n\t\t data-delay="{{: timeout || 5000}}">\n\t\t<div class="toast-header">\n\t\t{{if icon}}\n\t\t\t<i class="fa {{:icon}} mr-2"></i>\n\t\t{{/if}}\n\t\t\t<strong class="mr-auto">{{:title}}</strong>\n\t\t{{if !hideTimestamp}}\n\t\t\t<small>{{*: new Date().toLocaleTimeString() }}</small>\n\t\t{{/if}}\n\t\t\t<button type="button" class="ml-2 mb-1 close" data-dismiss="toast">\n\t\t\t\t<i class="fa fa-times text-white"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="toast-body">\n\t\t\t<div>\n\t\t\t{{if content}}\n\t\t\t\t{{:content}}\n\t\t\t{{else}}\n\t\t\t\t<p>{{:message}}</p>\n\t\t\t{{/if}}\n\t\t\t</div>\n\t\t</div>\n\t</div>',allowCode:!0}),Se=ge.templates({markup:'\n\t<div role="alert" class="toast toast-{{:status}} fade hide"\n\t\t data-autohide="true"\n\t\t data-delay="{{: timeout || 5000}}">\n\t\t<div class="toast-body">\n\t\t\t<div>\n\t\t\t{{if content}}\n\t\t\t\t{{:content}}\n\t\t\t{{else}}\n\t\t\t\t<span>\n\t\t\t\t\t{{if icon}}\n\t\t\t\t\t<i class="fa {{:icon}} mr-2"></i>\n\t\t\t\t\t{{/if}}\n\t\t\t\t\t{{:message}}\n\t\t\t\t</span>\n\t\t\t{{/if}}\n\t\t\t</div>\n\t\t</div>\n\t</div>',allowCode:!0}),Ae=ge.templates({markup:'\n\t<div class="modal fade" data-backdrop="static" role="dialog">\n\t\t<div class="modal-dialog">\n\t\t\t<div class="modal-content">\n\t\t\t\t<div class="modal-header alert-{{:status}}">\n\t\t\t\t\t<h5 class="modal-title">\n\t\t\t\t\t{{if icon}}\n\t\t\t\t\t\t<i class="fa {{:icon}} mr-2"></i>\n\t\t\t\t\t{{/if}}\n\t\t\t\t\t{{:title}}\n\t\t\t\t\t</h5>\n\t\t\t\t\t<button type="button" class="close" \n\t\t\t\t\t\t\tdata-dismiss="modal" data-modal-dismiss-value="cancel">\n\t\t\t\t\t\t<i class="fa fa-times"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal-body">\n\t\t\t\t\t<p>{{:message}}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t<button type="button" class="btn btn-primary" \n\t\t\t\t\t\t\tdata-dismiss="modal" data-modal-dismiss-value="success">\n\t\t\t\t\t\t{{*: data.successLabel || MyAMS.i18n.BTN_OK }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type="button" class="btn btn-secondary" \n\t\t\t\t\t\t\tdata-dismiss="modal" data-modal-dismiss-value="cancel">\n\t\t\t\t\t\t{{*: data.cancelLabel || MyAMS.i18n.BTN_CANCEL }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>',allowCode:!0}),xe={alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status||"info";"error"===t&&(t="danger"),e.status=t,ge(".alert-".concat(t),e.parent).not(".persistent").remove(),ge(Me.render(e)).prependTo(e.parent),MyAMS.require("helpers").then((function(){MyAMS.helpers.scrollTo("#content",e.parent,{offset:-15})}))},messageBox:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status||"info";"error"===t&&(t="danger"),e.status=t;var n=ge(".".concat(MyAMS.config.alertsContainerClass));0===n.length&&(n=ge("<div></div>").addClass(MyAMS.config.alertsContainerClass).appendTo(MyAMS.dom.root)),ge(be.render(e)).appendTo(n).toast("show").on("hidden.bs.toast",(function(e){ge(e.currentTarget).remove()}))},smallBox:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status||"info";"error"===t&&(t="danger"),e.status=t;var n=ge(".".concat(MyAMS.config.alertsContainerClass));0===n.length&&(n=ge("<div></div>").addClass(MyAMS.config.alertsContainerClass).appendTo(MyAMS.dom.root)),ge(Se.render(e)).appendTo(n).toast("show").on("hidden.bs.toast",(function(e){ge(e.currentTarget).remove()}))},bigBox:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){var a=e.status||"info";"error"===a&&(a="danger"),e.status=a,MyAMS.require("modal").then((function(){var n=ge(Ae.render(e)).appendTo(MyAMS.dom.root);n.on("shown.bs.modal",(function(e){ge(".btn-primary",e.target).focus()})),n.on("hidden.bs.modal",(function(){t(n.data("modal-result")),n.remove()})),n.modal("show")}),(function(){n("Missing 'modal' module!")}))}))}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("alert"):(MyAMS.alert=xe,console.debug("MyAMS: alert module loaded...")));var we=MyAMS.$,Ce=!1;function ke(e){return new Promise((function(t,n){var a=we(e.currentTarget),r=a.data("ams-disabled-handlers");a.attr("disabled")||a.hasClass("disabled")||!0===r||"click"===r||"all"===r?t(!1):!0!==a.data("ams-context-menu")?(!0===a.data("ams-stop-propagation")&&e.stopPropagation(),e.preventDefault(),a.tooltip("hide"),MyAMS.modal.open(a).then((function(){t(!0)}),n)):t(!1)}))}function Te(e){var t=we(e.target),n=1100+100*we(".modal:visible").length;t.css("z-index",n),setTimeout((function(){we(".modal-backdrop").not(".modal-stack").first().css("z-index",n-10).addClass("modal-stack")}),0),we(t).off("click",'[data-dismiss="modal"]').on("click",'[data-dismiss="modal"]',(function(e){var t=we(e.currentTarget).data("ams-dismiss-handler")||Ne;return MyAMS.core.executeFunctionByName(t,document,e)}))}function je(e){var t=we(e.target);return MyAMS.core.executeFunctionByName(t.data("ams-init-content")||MyAMS.config.initContent,document,t)}function _e(e){return new Promise((function(t,n){MyAMS.require("form").then((function(){var n=we(e.target);MyAMS.form.setFocus(n),t(n)}),n)}))}function Ne(e){return new Promise((function(t,n){var a=we(e.currentTarget).parents(".modal").first();a.data("modal-result",we(e.currentTarget).data("modal-dismiss-value")),MyAMS.form?MyAMS.form.confirmChangedForm(a).then((function(e){"success"===e&&a.modal("hide")})).then(t,n):(a.modal("hide"),t())}))}function Oe(){we(".modal:visible").length>0&&(we.fn.modal.Constructor.prototype._checkScrollbar(),we.fn.modal.Constructor.prototype._setScrollbar(),we("body").addClass("modal-open"))}function Re(e){var t=we(e.target);MyAMS.core.executeFunctionByName(t.data("ams-clear-content")||MyAMS.config.clearContent,document,t).then((function(){!0===t.data("dynamic")&&t.remove()}))}var Ie={init:function(){Ce||(Ce=!0,MyAMS.config.ajaxNav&&we(document).off("click",'[data-toggle="modal"]').on("click",'[data-toggle="modal"]',(function(e){e.stopPropagation();var t=we(e.currentTarget).data("ams-modal-handler")||ke;MyAMS.core.executeFunctionByName(t,document,e)})),we(document).on("shown.bs.modal",".modal",(function(e){var t=we(e.currentTarget).data("ams-shown-handler")||Te;MyAMS.core.executeFunctionByName(t,document,e)})),we(document).on("hidden.bs.modal",".modal",(function(e){var t=we(e.currentTarget).data("ams-hidden-handler")||Oe;MyAMS.core.executeFunctionByName(t,document,e)})))},open:function(e,t){return new Promise((function(n,a){var r={},o=e;"string"!=typeof e&&(r=e.data(),o=e.attr("href")||r.amsUrl);var i=MyAMS.core.getFunctionByName(o);"function"==typeof i&&(o=i(e)),o||a("No provided URL!"),o.startsWith("#")?(we(o).modal("show"),n()):we.ajax({type:"get",url:o,cache:void 0!==r.amsAllowCache&&r.amsAllowCache,data:t}).then((function(t,a,i){var s=null;MyAMS.require("ajax").then((function(){var t,n,a,c,l,u=MyAMS.ajax.getResponse(i),d=u.contentType,m=u.data;switch(d){case"json":MyAMS.ajax.handleJSON(m,we(we(e).data("ams-json-target")||"#content"));break;case"script":case"xml":break;case"html":case"text":default:t=we(m),c={backdrop:void 0===(a=(n=we(".modal-dialog",t.wrap("<div></div>").parent())).data()||{}).backdrop?"static":a.backdrop,keyboard:void 0===a.keyboard||a.keyboard},l=we.extend({},c,a.amsOptions),l=MyAMS.core.executeFunctionByName(a.amsInit,n,l)||l,s=we("<div>").addClass("modal fade").attr("tabIndex","-1").data("dynamic",!0).append(t).on("show.bs.modal",je).on("shown.bs.modal",_e).on("hidden.bs.modal",Re).modal(l),MyAMS.stats&&!1!==r.amsLogEvent&&!1!==a.amsLogEvent&&MyAMS.stats.logPageview(o)}})).then((function(){n(s)}))}))}))},close:function(e){"string"==typeof e?e=we(e):void 0===e&&(e=we(".modal-dialog:last"));var t=e.objectOrParentWithClass("modal");t.length>0&&t.modal("hide")}};function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||Be(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Be(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Be(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}MyAMS.env.bundle?MyAMS.config.modules.push("modal"):(MyAMS.modal=Ie,console.debug("MyAMS: modal module loaded..."));var Le=MyAMS.$;if(!Le.templates){var Ue=n(0);Le.templates=Ue.templates}var $e=!1,He={init:function(){$e||($e=!0,Le(document).on("click",'[type="submit"], .submit',(function(e){var t=Le(e.currentTarget);t.exists()&&Le(t).closest("form").data("ams-submit-button",t)})),Le(document).on("click",'input[type="checkbox"][readonly]',(function(){return!1})),Le(document).on("reset",MyAMS.form.resetHandler),Le(document).on("reset","[data-ams-reset-handler]",MyAMS.form.customResetHandler),Le(document).on("keydown","textarea",(function(e){if((10===e.keyCode||13===e.keyCode)&&(e.ctrlKey||e.metaKey)){var t=Le(e.currentTarget).closest("form");Le('button[type="submit"]',t).first().click()}})),Le(document).on("focus","input[readonly]",(function(e){Le(e.currentTarget).blur()})),Le(document).on("focusin",(function(e){Le(e.target).closest(".mce-window").length>=0&&e.stopImmediatePropagation()})),Le(window).on("beforeunload",MyAMS.form.checkBeforeUnload))},initElement:function(e){"string"==typeof e&&(e=Le(e)),(MyAMS.config.warnOnFormChange?Le('form[data-ams-warn-on-change!="false"]',e):Le('form[data-ams-warn-on-change="true"]',e)).each((function(e,t){var n=Le(t),a=n.data().amsChangedCallback||MyAMS.config.formChangeCallback;Le("input, select, textarea, [data-ams-changed-event]",n).each((function(e,t){var r=Le(t),o=r.data();if(!0!==o.amsIgnoreChange){var i=o.amsChangedEvent||"change";r.on(i,(function(){MyAMS.form.setChanged(n),MyAMS.core.executeFunctionByName(o.amsChangedCallback||a,document,n,r)}))}}))})),MyAMS.form.setFocus(e)},setFocus:function(e){return new Promise((function(t,n){setTimeout((function(){var n,a,r,o=Le("[data-ams-focus-target]",e).first();o.exists()||(o="test"===(null===(n=window)||void 0===n||null===(a=n.process)||void 0===a||null===(r=a.env)||void 0===r?void 0:r.NODE_ENV)?Le("input, select, textarea",e).first():Le("input:enabled:visible, select:enabled:visible, textarea:enabled:visible",e).first());o.exists()&&o.get(0).focus(),t(o)}),100)}))},checkBeforeUnload:function(){if(MyAMS.i18n&&Le('form[data-ams-form-changed="true"]').exists())return MyAMS.i18n.FORM_CHANGED_WARNING},confirmChangedForm:function(e){return new Promise((function(t,n){var a=Le('form[data-ams-form-changed="true"]',e);a.exists()?MyAMS.require("alert").then((function(){MyAMS.alert.bigBox({status:"danger",title:MyAMS.i18n.WARNING,icon:"text-danger fa-bell",message:MyAMS.i18n.FORM_CHANGED_WARNING}).then((function(e){"success"===e&&MyAMS.form.resetChanged(a),t(e)}))}),(function(){n("Missing 'alert' module!")})):(He.resetChanged(a),t("success"))}))},setChanged:function(e){e.attr("data-ams-form-changed",!0)},resetHandler:function(e){var t=Le(e.target);MyAMS.form.clearAlerts(t),MyAMS.form.handleDefaultReset(t)},clearAlerts:function(e){Le(".alert-danger, SPAN.state-error",e).not(".persistent").remove(),Le(".state-error",e).removeClassPrefix("state-"),Le(".invalid-feedback",e).remove(),Le(".is-invalid",e).removeClass("is-invalid")},handleDefaultReset:function(e){setTimeout((function(){e.find(".select2").trigger("change"),Le("[data-ams-reset-callback]",e).each((function(t,n){var a=Le(n),r=a.data(),o=MyAMS.core.getFunctionByName(r.amsResetCallback);void 0!==o&&o.call(document,e,a,r.amsResetCallbackOptions)})),MyAMS.form.resetChanged(e)}),10)},resetChanged:function(e){void 0!==e&&Le(e).removeAttr("data-ams-form-changed")},customResetHandler:function(e){var t=Le(e.target),n=t.data();if(n.amsResetHandler){!0!==n.amsKeepDefault&&!0!==n.amsResetKeepDefault&&e.preventDefault();var a=MyAMS.core.getFunctionByName(n.amsResetHandler);void 0!==a&&a.call(document,e,t,n.amsResetHandlerOptions)}},setInvalid:function(e,t,n){if("string"==typeof t&&(t=Le('[name="'.concat(t,'"]'),e)),t.exists()){var a=t.closest(".form-widget");Le(".invalid-feedback",a).remove(),Le("<span>").text(n).addClass("is-invalid invalid-feedback").appendTo(a),t.removeClass("valid").addClass("is-invalid")}},getSettings:function(e,t,n,a,r){var o={submitWarning:qe,getValidators:Ve,checkValidators:We,clearAlerts:MyAMS.form.clearAlerts,initSubmitButton:ze,resetSubmitButton:Ge,getData:Je,initData:Ke,initDataCallback:null,getTarget:Ye,initTarget:Qe,getAction:Ze,getAjaxSettings:et,getProgressSettings:tt,getProgressState:nt,submit:at,datatype:null,submitOptions:null,submitHandler:(e.attr("action")||"").replace(/#/,""),submitTarget:e.attr("target")||null,submitMessage:null,submitCallback:rt,progressHandler:null,progressFieldName:"progressId",progressInterval:1e3,progressTarget:null,progressCallback:null,progressEndCallback:null,resetBeforeSubmit:!1,keepModalOpen:!1,resetAfterSubmit:ot,resetTimeout:1e3,resetAfterError:it,downloadTarget:null,getDownloadTarget:st,initDownloadTarget:ct,resetDownloadTarget:lt},i=Le.extend({},o);return Le.extendPrefix(i,"amsForm",(function(e){return MyAMS.core.getFunctionByName(e)||e}),t,a),Le.extendOnly(i,(function(e){return MyAMS.core.getFunctionByName(e)||e}),r),i},submit:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(e=Le(e)).exists())return!1;"object"===De(t)&&(n=t,t=void 0);var a=e.data(),r=Le(a.amsSubmitButton),o=r.data()||{},i=MyAMS.form.getSettings(e,a,r,o,n);return a.submitted?(i.submitWarning(e,i),!1):(i.checkValidators(e,i).then((function(s){"success"===s&&MyAMS.require("ajax","i18n").then((function(){MyAMS.ajax.check(Le.fn.ajaxSubmit,"".concat(MyAMS.env.baseURL,"../ext/jquery-form").concat(MyAMS.env.extext,".js")).then((function(){i.clearAlerts(e,i),i.initSubmitButton(e,i,r);var s=i.getData(e,i,a,r,o,n),c={veto:!1};if(i.initData(e,i,r,s,n,c),c.veto)i.resetSubmitButton(e,i,r);else{var l=i.getTarget(e,i,a,o);l&&l.exists()&&i.initTarget(e,i,l);var u=i.getAction(e,i,t),d=i.getAjaxSettings(e,i,r,s,u,l),m=i.getDownloadTarget(e,i);m&&i.initDownloadTarget(e,i,m,d),d.progress=i.getProgressSettings(e,i,r,s),i.submit(e,i,r,s,d,l),m&&i.resetDownloadTarget(e,i,r,m,d)}}))}))})),!1)}};function qe(e){return new Promise((function(t,n){e.data("ams-form-hide-submitted")?t():MyAMS.require("i18n","alert").then((function(){MyAMS.alert.messageBox({status:"warning",title:MyAMS.i18n.WAIT,message:MyAMS.i18n.FORM_SUBMITTED,icon:"fa-save",timeout:e.data("ams-form-alert-timeout")||5e3})})).then(t,n)}))}function Ve(e){var t=new Map,n=(e.data("ams-form-validator")||"").trim().split(/[\s,;]+/),a=[];return Le(n).each((function(e,t){t&&a.push(t)})),a.length>0&&t.set(e,a),Le("[data-ams-form-validator]",e).each((function(e,n){var r=Le(n),o=(r.data("ams-form-validator")||"").trim().split(/[\s,;]+/);a=[],Le(o).each((function(e,t){t&&a.push(t)})),a.length>0&&t.set(r,a)})),t}function We(e,t){return new Promise((function(n,a){var r=t.getValidators(e,t);if(r.size){var o,i=[],s=Fe(r.entries());try{for(s.s();!(o=s.n()).done;){var c,l=Pe(o.value,2),u=l[0],d=Fe(l[1]);try{for(d.s();!(c=d.n()).done;){var m=c.value;i.push(MyAMS.core.executeFunctionByName(m,document,e,u))}}catch(e){d.e(e)}finally{d.f()}}}catch(e){s.e(e)}finally{s.f()}Le.when.apply(Le,i).then((function(){for(var t="success",a=[],r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];for(var s=0,c=o;s<c.length;s++){var l=c[s];!0!==l&&(t="error","string"==typeof l?a.push(l):Le.isArray(l)&&l.length>0&&(a=a.concat(l)))}a.length>0?MyAMS.require("i18n","alert").then((function(){var r=1===a.length?MyAMS.i18n.ERROR_OCCURED:MyAMS.i18n.ERRORS_OCCURED;MyAMS.alert.alert({parent:e,status:"danger",header:r,message:a}),n(t)})):n(t)}),(function(){a("error")}))}else n("success")}))}function ze(e,t,n){var a=n.data("ams-loading-text")||n.text().trim();a?(n.data("original-text",n.text()).prop("disabled",!0).text("".concat(a,"...")),Le("<div>").addClass("progress").appendTo(n)):n.data("original-html",n.html()).prop("disabled",!0).html('<i class="fa fa-cog fa-spin"></i>')}function Ge(e,t,n){Le(".progress",n).remove();var a=n.data("original-text");if(a)n.text(a);else{var r=n.data("original-html");r&&n.html(r)}n.prop("disabled",!1)}function Je(e,t,n,a,r,o){var i=Le.extend({},n.amsFormData,r.amsFormData,o.data),s=a.attr("name");return s&&(i[s]=a.val()),i}function Ke(e,t,n,a,r,o){var i=t.initDataCallback;i&&Le.extend(a,i(e,t,n,a,r,o)),e.trigger("init-data.ams.form",[a,o])}function Ye(e,t){return Le(t.submitTarget)}var Xe=Le.templates({markup:'\n\t<div class="row m-3">\n\t\t<div class="text-center w-100">\n\t\t\t<i class="fa fa-3x fa-cog fa-spin"></i>\n\t\t\t{{if message}}\n\t\t\t<strong>{{:message}}</strong>\n\t\t\t{{/if}}\n\t\t</div>\n\t</div>'});function Qe(e,t,n){n.html(Xe.render({message:t.submitMessage})),n.parents(".hidden").removeClass("hidden")}function Ze(e,t,n){var a=n||t.submitHandler;return a.startsWith(window.location.protocol)?a:MyAMS.ajax.getAddr()+a}function et(e,t,n,a,r,o){var i={url:r,type:"post",cache:!1,data:a,dataType:t.datatype,beforeSerialize:function(e){var t={veto:!1};if(e.trigger("before-serialize.ams.form",[t]),t.veto)return!1;void 0!==window.tinyMCE&&tinyMCE.triggerSave()},beforeSubmit:function(e,a){var r={veto:!1};if(a.trigger("before-submit.ams.form",[e,r]),r.veto)return!1;a.data("submitted",!0),t.resetBeforeSubmit&&setTimeout((function(){t.resetSubmitButton(a,t,n)}),250)},uploadProgress:function(e,t,a,r){Le(".progress",n).css("background-image","linear-gradient(to right, white -45%, green ".concat(r,"%, red ").concat(r,"%, red)"))},complete:function(t){e.trigger("complete.ams.form",[t])},success:function(e,a,r,i){var s={veto:!1};if(i.trigger("submit-success.ams.form",[e,a,r,s]),!s.veto){if(e&&"error"!==e.status&&!1!==e.closeForm){var c=i.closest(".modal-dialog");c.exists()&&!t.keepModalOpen&&MyAMS.modal&&MyAMS.modal.close(c)}try{t.submitCallback(i,t,o,e,a,r)}finally{t.resetAfterSubmit(i,t,n),MyAMS.form.resetChanged(i)}}},error:function(e,a,r,i){i.trigger("submit-error.ams.form",[e,a,r,o]),o&&t.resetAfterError(i,t,n,o),t.resetAfterSubmit(i,t,n)},iframe:!1};return Le.extend({},i,t.submitOptions)}function tt(e,t,n,a){var r=t.progressHandler;if(r){var o=t.progressFieldName;a[o]=MyAMS.core.generateUUID();var i=n;return t.progressTarget&&(i=Le(t.progressTarget)),{handler:r,interval:t.progressInterval,fieldname:o,target:i,callback:t.progressCallback,endCallback:t.progressEndCallback}}}function nt(e,t,n,a,r){var o=setTimeout((function e(){var t={};t[a.fieldname]=n[a.fieldname],MyAMS.ajax.post(a.handler,t).then(MyAMS.core.getFunctionByName(a.callback||function(t,n){if(Le.isArray(t)&&(n=t[1],t=t[0]),"success"===n)if("running"===t.status){if(t.message)r.text(t.message);else{var s=t.progress||r.data("ams-progress-text")||MyAMS.i18n.PROGRESS;t.current?s+=": ".concat(t.current," / ").concat(t.length||100):s+="...",r.text(s)}o=setTimeout(e,a.interval)}else"finished"===t.status&&i();else i()}),i)}),a.interval);function i(){clearTimeout(o),t.resetSubmitButton(e,t,r),MyAMS.core.executeFunctionByName(a.endCallback,document,e,t,r),MyAMS.form.resetChanged(e)}}function at(e,t,n,a,r,o){r.progress&&t.getProgressState(e,t,a,r.progress,o),e.ajaxSubmit(r)}function rt(e,t,n,a,r,o){var i=t.datatype;if(!i){var s=MyAMS.ajax.getResponse(o);s&&(i=s.contentType,a=s.data)}switch(i){case"binary":case"script":case"xml":break;case"json":MyAMS.ajax.handleJSON(a,e,n);break;default:MyAMS.form.resetChanged(e),n.css({opacity:"0.0"}),n.removeClass("hidden").parents(".hidden").removeClass(".hidden"),n.html(a).delay(50).animate({opacity:"1.0"},250),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,n).then((function(){MyAMS.require("helpers").then((function(){MyAMS.helpers.scrollTo("#main",n,{offset:-15})}))}))}var c=o.getResponseHeader("X-AMS-Callback");if(c){var l=o.getResponseHeader("X-AMS-Callback-Options")||"{}";MyAMS.core.executeFunctionByName(c,document,e,t,l,a,r,o)}e.trigger("after-submit.ams.form",[a])}function ot(e,t,n){e.data("submitted")&&(t.resetSubmitButton(e,t,n),e.data("submitted",!1),e.removeData("ams-submit-button"),e.trigger("after-reset.ams.form"),e.data("ams-reset-after-submit")&&e.get(0).reset())}function it(e,t,n){Le("i",n).removeClass("fa-spin").removeClass("fa-cog").addClass("fa-ambulance")}function st(e,t){return t.downloadTarget}function ct(e,t,n,a){var r=Le('iframe[name="'.concat(n,'"]'));r.exists()||(r=Le("<iframe>").attr("name",n).hide().appendTo(MyAMS.dom.root)),Le.extend(a,{iframe:!0,iframeTarget:r})}function lt(e,t,n,a,r){var o=e.closest(".modal-dialog"),i=t.keepModalOpen;o.exists()&&!0!==i&&MyAMS.require("modal").then((function(){MyAMS.modal.close(o)})),r.progress||setTimeout((function(){t.resetAfterSubmit(e,t,n),MyAMS.ajax&&MyAMS.ajax.stop(),MyAMS.form.resetChanged(e)}),t.resetTimeout)}function ut(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=mt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||mt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){if(e){if("string"==typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ft(e,t):void 0}}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("form"):(MyAMS.form=He,console.debug("MyAMS: form module loaded...")));var pt=MyAMS.$,ht=!1,yt={init:function(){ht||(ht=!0,pt(document).on("click","[data-ams-click-handler]",MyAMS.events.clickHandler),pt(document).on("change","[data-ams-change-handler]",MyAMS.events.changeHandler),pt(document).on("click","[data-ams-click-event]",MyAMS.events.triggerEvent))},initElement:function(e){pt("[data-ams-events-handlers]",e).each((function(e,t){var n=pt(t),a=n.data("ams-events-handlers");if(a)for(var r=function(){var e=dt(i[o],2),t=e[0],a=e[1];n.on(t,(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var i;r.length>0?(i=MyAMS.core).executeFunctionByName.apply(i,[a,document,e].concat(r)):MyAMS.core.executeFunctionByName(a,document,e,n.data("ams-events-options")||{})}))},o=0,i=Object.entries(a);o<i.length;o++)r()}))},getHandlers:function(e,t){var n=[],a=e.data("ams-events-handlers");return a&&a[t]&&n.push(e),pt("[data-ams-events-handlers]",e).each((function(e,a){var r=pt(a),o=r.data("ams-events-handlers");o&&o[t]&&n.push(r)})),n},clickHandler:function(e){var t=pt(e.currentTarget),n=t.data("ams-disabled-handlers");if(!0!==n&&"click"!==n&&"all"!==n){var a=t.data();if(a.amsClickHandler){!1!==a.amsPreventDefault&&!1!==a.amsClickPreventDefault&&e.preventDefault(),!1!==a.amsStopPropagation&&!1!==a.amsClickStopPropagation&&e.stopPropagation();var r,o=ut(a.amsClickHandler.split(/[\s,;]+/));try{for(o.s();!(r=o.n()).done;){var i=r.value,s=MyAMS.core.getFunctionByName(i);void 0!==s&&s.call(document,e,a.amsClickHandlerOptions)}}catch(e){o.e(e)}finally{o.f()}}}},changeHandler:function(e){var t=pt(e.currentTarget);if(!t.prop("readonly")){var n=t.data("ams-disabled-handlers");if(!0!==n&&"change"!==n&&"all"!==n){var a=t.data();if(a.amsChangeHandler){!1!==a.amsKeepDefault&&!1!==a.amsChangeKeepDefault&&e.preventDefault(),!1!==a.amsStopPropagation&&!1!==a.amsChangeStopPropagation&&e.stopPropagation();var r,o=ut(a.amsChangeHandler.split(/[\s,;]+/));try{for(o.s();!(r=o.n()).done;){var i=r.value,s=MyAMS.core.getFunctionByName(i);void 0!==s&&s.call(document,e,a.amsChangeHandlerOptions)}}catch(e){o.e(e)}finally{o.f()}}}}},triggerEvent:function(e){var t=pt(e.currentTarget);pt(e.target).trigger(t.data("ams-click-event"),t.data("ams-click-event-options"))}};function gt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}MyAMS.env.bundle?MyAMS.config.modules.push("events"):(MyAMS.events=yt,console.debug("MyAMS: events module loaded..."));var Mt=MyAMS.$,bt=!1,St={init:function(){bt||(bt=!0)},initElement:function(e){return new Promise((function(t,n){var a=[];Mt("[data-ams-callback]",e).each((function(e,t){var n=Mt(t).data(),r=n.amsCallback;if("string"==typeof r)try{r=JSON.parse(n.amsCallback)}catch(e){r=n.amsCallback.split(/[\s,;]+/)}Mt.isArray(r)||(r=[r]);var o,i=gt(r);try{var s=function(){var e=o.value,r=void 0,i=void 0,s=void 0,c=void 0;"string"==typeof e?(r=e,i=MyAMS.core.getFunctionByName(r),s=n.amsCallbackOptions,"string"==typeof(c=n.amsCallbackOptions)&&(c=c.unserialize())):(r=e.callback,i=MyAMS.core.getFunctionByName(r),s=e.source,c=e.options),void 0===i?s?a.push(MyAMS.core.getScript(s).then((function(){void 0===(i=MyAMS.core.getFunctionByName(r))?console.warn("Missing callback ".concat(r,"!")):i.call(document,t,c)}))):console.warn("Missing source for undefined callback ".concat(e,"!")):a.push(Promise.resolve(i.call(document,t,c)))};for(i.s();!(o=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}})),Mt.when.apply(Mt,a).then(t,n)}))}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("callbacks"):(MyAMS.callbacks=St,console.debug("MyAMS: callbacks module loaded...")));var At=MyAMS.$;function xt(e){var t=!1;if(window.clipboardData&&window.clipboardData.setData)t=clipboardData.setData("Text",e);else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=At("<textarea>");n.val(e).css("position","fixed").appendTo(MyAMS.dom.root),n.get(0).select();try{document.execCommand("copy"),t=!0}catch(e){console.warn("Clipboard copy failed!",e)}finally{n.remove()}}t?MyAMS.require("i18n","alert").then((function(){MyAMS.alert.smallBox({status:"success",message:e.length>1?MyAMS.i18n.CLIPBOARD_TEXT_COPY_OK:MyAMS.i18n.CLIPBOARD_CHARACTER_COPY_OK,icon:"fa-info-circle",timeout:3e3})})):MyAMS.require("i18n").then((function(){prompt(MyAMS.i18n.CLIPBOARD_COPY,e)}))}var wt={copy:function(e){if(void 0===e)return function(){var e=At(this),t=e.text();e.parents(".btn-group").removeClass("open"),xt(t)};xt(e)}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("clipboard"):(MyAMS.clipboard=wt,console.debug("MyAMS: clipboard module loaded...")));var Ct=MyAMS.$,kt={switchElementAttribute:function(e){return function(e,t){MyAMS.require("ajax","alert","i18n").then((function(){var t=e.parents("td").first(),n=Ct("i",t),a=t.parents("tr"),r=a.parents("table"),o=Ct("thead th:nth-child(".concat(t.index()+1,")"),r),i=e.data("ams-location")||o.data("ams-location")||a.data("ams-location")||r.data("ams-location")||"";i&&(i+="/");var s=e.data("ams-update-target")||o.data("ams-update-target")||a.data("ams-update-target")||r.data("ams-update-target")||"switch-element-attribute.json",c=a.data("ams-element-name"),l=n.attr("data-original-title")||n.attr("title");n.tooltip("hide").replaceWith('<i class="fas fa-spinner fa-spin"></i>'),MyAMS.ajax.post(i+s,{object_name:c,attribute_name:o.data("ams-attribute-name")}).then((function(e,n,a){var r=Ct("i",t);"success"===e.status?(e.state?r.replaceWith('<i class="'.concat(o.data("ams-icon-on"),'"></i>')):r.replaceWith('<i class="'.concat(o.data("ams-icon-off"),'"></i>')),l&&(r=Ct("i",t)).addClass("hint").attr("data-original-title",l),e.handle_json&&MyAMS.ajax.handleJSON(e)):MyAMS.ajax.handleJSON(e)}))}))}},deleteElement:function(e){return function(e,t){MyAMS.require("ajax","alert","i18n").then((function(){MyAMS.alert.bigBox({status:"danger",icon:"fas fa-bell",title:MyAMS.i18n.WARNING,message:MyAMS.i18n.CONFIRM_REMOVE,successLabel:MyAMS.i18n.CONFIRM,cancelLabel:MyAMS.i18n.BTN_CANCEL}).then((function(t){if("success"===t){var n=e.parents("td"),a=n.parents("tr"),r=a.parents("table"),o=Ct("thead th:nth-child(".concat(n.index()+1,")"),r),i=e.data("ams-location")||o.data("ams-location")||a.data("ams-location")||r.data("ams-location")||"";i&&(i+="/");var s=e.data("ams-delete-target")||o.data("ams-delete-target")||a.data("ams-delete-target")||r.data("ams-delete-target")||"delete-element.json",c=a.data("ams-element-name");MyAMS.ajax.post(i+s,{object_name:c}).then((function(e,t,n){"success"===e.status?(r.hasClass("datatable")?r.DataTable().row(a).remove().draw():a.remove(),e.handle_json&&MyAMS.ajax.handleJSON(e)):MyAMS.ajax.handleJSON(e)}))}}))}))}}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("container"):(MyAMS.container=kt,console.debug("MyAMS: container module loaded...")));MyAMS.$;var Tt={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("datatable"):(MyAMS.datatable=Tt,console.debug("MyAMS: datatable module loaded...")));MyAMS.$;var jt={};function _t(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Nt(){return(Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("graph"):(MyAMS.graph=jt,console.debug("MyAMS: graph module loaded...")));var Ot=MyAMS.$,Rt={clearValue:function(e){var t=Ot(e.currentTarget).data("target");t&&Ot(t).val(null)},clearDatetimeValue:function(e){var t=Ot(e.currentTarget).data("target"),n=Ot(t).data("datetimepicker");n&&n.date(null)},scrollTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#content",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=Nt({},n);"string"==typeof t&&(t=Ot(t)),t.exists()&&MyAMS.require("ajax").then((function(){MyAMS.ajax.check(Ot.fn.scrollTo,"".concat(MyAMS.env.baseURL,"../ext/jquery-scrollto").concat(MyAMS.env.extext,".js")).then((function(){Ot(e).scrollTo(t,a)}))}))},setLoginHash:function(){var e=Ot("#login_form");Ot('input[name="login_form.widgets.hash"]',e).val(window.location.hash)},setSEOStatus:function(e){var t=Ot(e.target),n=t.siblings(".progress").children(".progress-bar"),a=Math.min(t.val().length,100),r="success";a<20||a>80?r="danger":(a<40||a>66)&&(r="warning"),n.removeClassPrefix("bg-").addClass("bg-"+r).css("width",a+"%")},select2ChangeHelper:function(e){var t=Ot(e.currentTarget),n=t.data(),a=Ot(n.amsSelect2HelperTarget);switch(n.amsSelect2HelperType){case"html":a.html('<div class="text-center"><i class="fas fa-2x fa-spinner fa-spin"></i></div>');var r={};r[n.amsSelect2HelperArgument||"value"]=t.val(),Ot.get(n.amsSelect2HelperUrl,r).then((function(e){(MyAMS.core.getFunctionByName(n.amsSelect2HelperCallback)||function(e){e?(a.html(e),MyAMS.core.initContent(a).then()):a.empty()})(e)})).catch((function(){a.empty()}));break;default:var o=n.amsSelect2HelperCallback;o&&MyAMS.core.executeFunctionByName(o,t,n)}},refreshElement:function(e,t){return new Promise((function(e,n){var a=Ot('[id="'.concat(t.object_id,'"]'));MyAMS.core.executeFunctionByName(MyAMS.config.clearContent,document,a).then((function(){a.replaceWith(Ot(t.content));var r=(a=Ot('[id="'.concat(t.object_id,'"]'))).parents().first();MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,r).then((function(){e(a)}),n)}),n)}))},refreshWidget:function(e,t){return new Promise((function(e,n){var a=Ot('[id="'.concat(t.widget_id,'"]')),r=a.parents(".widget-group");MyAMS.core.executeFunctionByName(MyAMS.config.clearContent,document,r).then((function(){r.replaceWith(Ot(t.content)),a=Ot('[id="'.concat(t.widget_id,'"]')),r=a.parents(".widget-group"),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,r).then((function(){e(a)}),n)}),n)}))},addTableRow:function(e,t){return new Promise((function(e,n){var a,r='table[id="'.concat(t.table_id,'"]'),o=Ot(r),i=o.DataTable();t.data?(i.rows.add(t.data).draw(),a=Ot('tr[id="'.concat(t.row_id,'"]'),o),e(a)):(a=Ot(t.content),i.rows.add(a).draw(),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,a).then((function(){e(a)}),n))}))},refreshTableRow:function(e,t){return new Promise((function(e,n){var a='tr[id="'.concat(t.row_id,'"]'),r=Ot(a),o=r.parents("table").first();if(t.data)if(Ot.fn.DataTable){var i=o.DataTable();"string"==typeof t.data?(i.row(a).remove(),i.row.add(Ot(t.data)).draw()):i.row(a).data(t.data).draw(),e(r)}else n("No DataTable plug-in available!");else{var s=Ot(t.content);r.replaceWith(s),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,s).then((function(){e(s)}),n)}}))},refreshImage:function(e,t){Ot('[id="'.concat(t.image_id,'"]')).attr("src",t.src)},moveElementToParentEnd:function(e){var t=e.parent();return e.detach().appendTo(t)},addElementToParent:function(e,t){var n=t.element,a=t.parent,r=_t(t,["element","parent"]);n=Ot(n),a=Ot(a);var o=n.appendTo(a);return r.scrollTo&&MyAMS.helpers.scrollTo(r.scrollParent,n),o},hideDropdown:function(e){Ot(e.target).closest(".dropdown-menu").dropdown("hide")}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("helpers"):(MyAMS.helpers=Rt,console.debug("MyAMS: helpers module loaded...")));var It=MyAMS.$;var Pt=!1,Ft={init:function(){Pt||(Pt=!0,It.fn.extend({contextMenu:function(e){function t(t,n){var a=It(window)[n](),r=It(e.menuSelector)[n](),o=t;return t+r>a&&r<t&&(o-=r),o}return this.each((function(n,a){var r=It(a),o=It(e.menuSelector);It("a",o).each((function(e,t){It(t).data("ams-context-menu",!0)})),r.on("contextmenu",(function(e){if(!e.ctrlKey)return o.data("contextmenu-event-source",r).dropdown("show").css({position:"fixed",left:t(e.clientX,"width")-10,top:t(e.clientY,"height")-10}).off("click").on("click",(function(e){e.stopPropagation(),e.preventDefault(),o.dropdown("hide"),function(e){"A"!==e.get(0).tagName&&(e=e.parents("a").first());var t=e.data();if("modal"===t.toggle)MyAMS.require("modal").then((function(){MyAMS.modal.open(e)}));else{var n=e.attr("href")||t.amsUrl;if(!n||n.startsWith("javascript:")||e.attr("target"))return;var a=MyAMS.core.getFunctionByName(n);if("function"==typeof a&&(n=a(e)),void 0===n)return;"function"==typeof n?n(e):MyAMS.require("form","skin").then((function(){n=n.replace(/%23/,"#");var t=e.data("ams-target");t?MyAMS.form.confirmChangedForm(t).then((function(a){"success"===a&&MyAMS.skin.loadURL(n,t,e.data("ams-link-options"),e.data("ams-link-callback"))})):MyAMS.form.confirmChangedForm().then((function(e){"success"===e&&(n.startsWith("#")?n!==location.hash&&(MyAMS.dom.root.hasClass("mobile-view-activated")?(MyAMS.dom.root.removeClass("hidden-menu"),setTimeout((function(){window.location.hash=n}),50)):window.location.hash=n):window.location=n)}))}))}}(It(e.target))})),!1})),It(document).click((function(){o.dropdown("hide")}))}))}}),It(document).on("show.bs.dropdown",".btn-group",(function(e){var t=It(e.currentTarget),n=t.children(".dropdown-menu"),a=t.get(0).getBoundingClientRect(),r=a.top,o=a.height,i=n.outerHeight();r>i&&It(window).height()-r<o+i&&t.addClass("dropup"),It("input, select, textarea",n).first().focus()})).on("hidden.bs.dropdown",".btn-group",(function(e){It(e.currentTarget).removeClass("dropup")})),It(document).on("hide.bs.dropdown",(function(e){if(e.clickEvent&&!1===It(e.clickEvent.target).parents(".dropdown-menu").data("ams-click-dismiss"))return e.preventDefault(),!1})))}};function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("menu"):(MyAMS.menu=Ft,console.debug("MyAMS: menu module loaded...")));var Dt=MyAMS.$;if(!Dt.templates){var Lt=n(0);Dt.templates=Lt.templates}var Ut=Dt.templates({markup:'\n\t<li class="p-1 my-1{{if status}} alert-{{:status}}{{/if}}">\n\t\t<a class="d-flex flex-row"{{if url}} href="{{:url}}"{{/if}}>\n\t\t\t{{if source.avatar}}\n\t\t\t<img class="avatar mx-1 mt-1" src="{{:source.avatar}}"\n\t\t\t\t alt="{{:source.title}}" title="{{:source.title}}" />\n\t\t\t{{else}}\n\t\t\t<i class="avatar fa fa-fw fa-2x fa-user mx-1 mt-1"\n\t\t\t   title="{{:source.title}}"></i>\n\t\t\t{{/if}}\n\t\t\t<div class="flex-grow-1 ml-2">\n\t\t\t\t<small class="timestamp float-right text-muted">\n\t\t\t\t\t{{*: new Date(data.timestamp).toLocaleString()}}\n\t\t\t\t</small>\n\t\t\t\t<strong class="title d-block">\n\t\t\t\t\t{{:title}}\n\t\t\t\t</strong>\n\t\t\t\t<p class="text-muted mb-2">{{:message}}</p>\n\t\t\t</div>\n\t\t</a>\n\t</li>',allowCode:!0}),$t=Dt.templates({markup:'\n\t<ul class="list-style-none flex-grow-1 overflow-auto m-0 p-0">\n\t\t{{for notifications tmpl=~itemTemplate /}}\n\t</ul>\n\t{{if !~options.hideTimestamp}}\n\t<div class="timestamp border-top pt-1">\n\t\t<span>{{*: MyAMS.i18n.LAST_UPDATE }}{{: ~timestamp.toLocaleString() }}</span>\n\t\t<i class="fa fa-fw fa-sync float-right"\n\t\t   data-ams-click-handler="MyAMS.notifications.getNotifications"\n\t\t   data-ams-click-handler-options=\'{"localTimestamp": "{{: ~useLocalTime }}"}\'></i>\n\t</div>\n\t{{/if}}',allowCode:!0}),Ht=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Bt(this,e),this.values=t,this.options=n}var t,n,a;return t=e,(n=[{key:"render",value:function(e){Dt(e).html($t.render(this.values,{itemTemplate:Ut,timestamp:this.options.localTimestamp?new Date:new Date(this.values.timestamp),useLocalTime:this.options.localTimestamp?"true":"false",options:this.options}))}}])&&Et(t.prototype,n),a&&Et(t,a),e}(),qt={checkPermission:function(){return new Promise((function(e,t){"Notification"in window?"denied"!==Notification.permission?"default"===Notification.permission?!function(){try{Notification.requestPermission().then()}catch(e){return!1}return!0}()?Notification.requestPermission((function(t){e("granted"===t)})):Notification.requestPermission().then((function(t){e("granted"===t)})):e(!0):e(!1):(console.debug("Notifications are not supported by this browser!"),e(!1))}))},checkUserPermission:function(){MyAMS.notifications.checkPermission().then((function(){}))},getNotifications:function(e,t){var n=Dt.extend({},t,e.data),a=Dt(e.target),r=Dt(e.currentTarget),o=r.data("ams-notifications-source")||r.parents("[data-ams-notifications-source]").data("ams-notifications-source");return new Promise((function(e,t){MyAMS.require("ajax").then((function(){MyAMS.ajax.get(o,r.data("ams-notifications-params")||"",r.data("ams-notifications-options")||{}).then((function(t){var o=Dt(a.data("ams-notifications-target")||a.parents("[data-ams-notifications-target]").data("ams-notifications-target")||r.attr("href"));new Ht(t,n).render(o),Dt("#notifications-count").text(""),qt.checkUserPermission(),e()}),t)}),t)}))},addNotification:function(e,t){var n=Dt("ul","#notifications-pane"),a=Dt(Ut.render(e)),r=Dt("#notifications-count"),o=parseInt(r.text())||0;n.prepend(a),r.text(o+1),t&&qt.showDesktopNotification(e)},showDesktopNotification:function(e){qt.checkPermission().then((function(t){if(t){var n={title:e.title,body:e.message,icon:e.source.avatar},a=new Notification(n.title,n);e.url&&(a.onclick=function(){window.open(e.url)})}}))}};function Vt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}MyAMS.env.bundle?MyAMS.config.modules.push("notifications"):(MyAMS.notifications=qt,console.debug("MyAMS: notifications module loaded..."));var zt=MyAMS.$,Gt={switchTreeNode:function(e){var t=zt(e.currentTarget),n=zt("i.switch",t),a=t.parents("tr").first(),r=a.parents("table").first(),o=r.DataTable();if(t.tooltip("hide"),n.hasClass("minus"))!function e(t){zt('tr[data-ams-tree-node-parent-id="'.concat(t,'"]')).each((function(t,n){var a=zt(n);e(a.data("ams-tree-node-id")),o.row(a).remove().draw()}))}(a.data("ams-tree-node-id")),MyAMS.core.switchIcon(n,"minus-square","plus-square","far"),n.removeClass("minus");else{var i=a.data("ams-location")||r.data("ams-location")||"",s=a.data("ams-tree-nodes-target")||r.data("ams-tree-nodes-target")||"get-tree-nodes.json",c=a.data("ams-element-name");MyAMS.core.switchIcon(n,"plus-square","cog","fas"),MyAMS.require("ajax").then((function(){MyAMS.ajax.post("".concat(i,"/").concat(c,"/").concat(s),{can_sort:!zt("td.sorter",a).is(":empty")}).then((function(e){if(e.length>0){var t,a,r=Vt(e);try{for(r.s();!(a=r.n()).done;){var i=a.value;t=zt(i),o.row.add(t).draw(),MyAMS.core.initContent(t).then()}}catch(e){r.e(e)}finally{r.f()}}MyAMS.core.switchIcon(n,"cog","minus-square","far"),n.addClass("minus")}))}))}},switchTree:function(e){var t=zt(e.currentTarget),n=zt("i.switch",t),a=t.parents("th").parents("table").first(),r=a.data("ams-tree-node-id"),o=a.DataTable();if(t.tooltip("hide"),n.hasClass("minus"))zt("tr[data-ams-tree-node-parent-id]").filter('tr[data-ams-tree-node-parent-id!="'.concat(r,'"]')).each((function(e,t){o.row(t).remove().draw()})),zt("i.switch",a).each((function(e,t){MyAMS.core.switchIcon(zt(t),"minus-square","plus-square","far"),zt(t).removeClass("minus")}));else{var i=a.data("ams-location")||"",s=a.data("ams-tree-nodes-target")||"get-tree.json",c=zt("tbody tr",a.first());MyAMS.core.switchIcon(n,"plus-square","cog","fas"),MyAMS.require("ajax").then((function(){MyAMS.ajax.post("".concat(i,"/").concat(s),{can_sort:!zt("td.sorter",c).is(":empty")}).then((function(e){zt("tr[data-ams-tree-node-id]",a).each((function(e,t){o.row(t).remove().draw()})),zt(e).each((function(e,t){var n=zt(t);o.row.add(n).draw()})),MyAMS.core.initContent(a).then(),MyAMS.core.switchIcon(n,"cog","minus-square","far"),n.addClass("minus")}))}))}},deleteElement:function(e,t){console.debug(t);var n=t.node_id;n&&zt('tr[data-ams-tree-node-parent-id="'.concat(n,'"]')).each((function(e,t){zt(t).parents("table").DataTable().row(t).remove().draw()}))},sortTree:function(e,t){var n=zt(e.target),a=n.DataTable(),r=zt(n).data(),o=r.amsReorderUrl;if(o){var i=zt(r.amsReorderSource.node);i.data("ams-disabled-handlers","click");try{var s,c,l=i.parents("table").first().data("ams-tree-node-id"),u=i.data("ams-tree-node-id"),d=i.data("ams-tree-node-parent-id"),m=i.prev("tr");m.exists()?(s=m.data("ams-tree-node-id"),c=zt(".switch",m).hasClass("minus")?d===s?"reorder":"reparent":d===(s=m.data("ams-tree-node-parent-id"))?"reorder":"reparent"):(null,c=d===(s=l)?"reorder":"reparent");var f=MyAMS.core.getFunctionByName(o);if("function"==typeof f)f.call(n,dnd_table,post_data);else{if(!o.startsWith(window.location.protocol)){var p=r.amsLocation;p&&(o="".concat(p,"/").concat(o))}var h={action:c,child:u,parent:s,order:JSON.stringify(zt("tr[data-ams-tree-node-id]").listattr("data-ams-tree-node-id")),can_sort:!zt("td.sorter",i).is(":empty")};MyAMS.require("ajax").then((function(){MyAMS.ajax.post(o,h).then((function(e){var t=function e(t){zt('tr[data-ams-tree-node-parent-id="'.concat(t,'"]')).each((function(t,n){var r=zt(n),o=r.attr("data-ams-tree-node-id");e(o),a.row(r).remove().draw()}))};if(e.status)MyAMS.ajax.handleJSON(e);else{var n,r;"reparent"===h.action&&function(e){var t=zt('tr[data-ams-tree-node-id="'.concat(e,'"]'));a.row(t).remove().draw()}(s),t(s),t(u),a.row(i).remove().draw();var o,c=Vt(e);try{for(c.s();!(o=c.n()).done;){var l=o.value;n=zt(l),r=zt('tr[id="'.concat(n.attr("id"),'"]')),a.row(r).remove().draw(),a.row.add(n).draw(),MyAMS.core.initContent(n).then()}}catch(e){c.e(e)}finally{c.f()}}}))}))}}finally{setTimeout((function(){zt(i).removeData("ams-disabled-handlers")}),50)}}return!1}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("tree"):(MyAMS.tree=Gt,console.debug("MyAMS: tree module loaded...")));MyAMS.$;var Jt={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("jsonrpc"):(MyAMS.jsonrpc=Jt,console.debug("MyAMS: jsonrpc module loaded...")));MyAMS.$;var Kt={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("xmlrpc"):(MyAMS.xmlrpc=Kt,console.debug("MyAMS: xmlrpc module loaded...")));MyAMS.$;var Yt={logPageview:function(){},logEvent:function(){}};function Xt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Zt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||Zt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e,t){if(e){if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?en(e,t):void 0}}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("stats"):(MyAMS.stats=Yt,console.debug("MyAMS: stats module loaded...")));var tn=MyAMS.$;if(!tn.templates){var nn=n(0);tn.templates=nn.templates}var an=tn.templates({markup:'\n\t<span class="custom-control custom-switch">\n\t\t<input type="checkbox"\n\t\t\t   id="{{: fieldId }}" name="{{: fieldName }}"\n\t\t\t   class="custom-control-input checker"\n\t\t\t   {{if checked}}checked{{/if}}\n\t\t\t   {{if readonly}}disabled{{/if}}\n\t\t\t   value="{{: value }}" />\n\t\t{{if prefix}}\n\t\t<input type="hidden" class="prefix"\n\t\t\t   id="{{: prefix}}{{: fieldName}}_prefix"\n\t\t\t   name="{{: prefix}}{{: fieldName}}"\n\t\t\t   value="{{if state===\'on\'}}{{: checkedValue}}{{else}}{{: uncheckedValue}}{{/if}}" />\n\t\t{{else marker}}\n\t\t<input type="hidden" class="marker"\n\t\t\t   name="{{: fieldName}}{{: marker}}"\n\t\t\t   value="1" />\n\t\t{{/if}}\n\t\t<label for="{{: fieldId }}"\n\t\t\t   class="custom-control-label">\n\t\t\t{{: legend }}\n\t\t</label>\n\t</span>\n'});var rn={init:function(){var e=tn.fn.dataTable.ext.type;e.detect.unshift((function(e){return null!==e&&e.match(/^(0[1-9]|[1-2][0-9]|3[0-1])\/(0[1-9]|1[0-2])\/[0-3][0-9]{3}$/)?"date-euro":null})),e.detect.unshift((function(e){return null!==e&&e.match(/^(0[1-9]|[1-2][0-9]|3[0-1])\/(0[1-9]|1[0-2])\/[0-3][0-9]{3} - ([0-1][0-9]|2[0-3]):[0-5][0-9]$/)?"datetime-euro":null})),tn.extend(e.order,{"numeric-comma-asc":function(e,t){var n=e.replace(/,/,".").replace(/ /g,""),a=t.replace(/,/,".").replace(/ /g,"");return(n=parseFloat(n))<(a=parseFloat(a))?-1:n>a?1:0},"numeric-comma-desc":function(e,t){var n=e.replace(/,/,".").replace(/ /g,""),a=t.replace(/,/,".").replace(/ /g,"");return(n=parseFloat(n))<(a=parseFloat(a))?1:n>a?-1:0},"date-euro-pre":function(e){var t,n=tn.trim(e);if(""!==n){var a=n.split("/");t=1*(a[2]+a[1]+a[0])}else t=1e7;return t},"date-euro-asc":function(e,t){return e-t},"date-euro-desc":function(e,t){return t-e},"datetime-euro-pre":function(e){var t,n=tn.trim(e);if(""!==n){var a=n.split(" - "),r=a[0].split("/"),o=a[1].split(":");t=1*(r[2]+r[1]+r[0]+o[0]+o[1])}else t=1e11;return t},"datetime-euro-asc":function(e,t){return e-t},"datetime-euro-desc":function(e,t){return t-e}})},preReorder:function(e,t){tn(e.target).data("ams-reorder-source",t)},reorderRows:function(e){return new Promise((function(t,n){var a,r=tn(e.target),o=r.DataTable(),i=r.data(),s=i.amsReorderInputTarget,c=i.amsReorderUrl;s||c||t();var l=tn("tbody tr",r),u=MyAMS.core.getFunctionByName(i.amsReorderData)||"data-ams-row-value";a="function"==typeof u?tn.makeArray(l).map(u):l.listattr(u);var d=i.amsReorderSeparator||";";if(s?(s=tn(s)).exists()&&s.val(a.join(d)):a=a.join(d),c){if(!(c=MyAMS.core.executeFunctionByName(c,document,r)||c).startsWith(window.location.protocol)&&!c.startsWith("/")){var m=r.data("ams-location");c="".concat(m||"","/").concat(c)}if(a.length>0){var f;if(i.amsReorderPostData)f=MyAMS.core.executeFunctionByName(i.amsReorderPostData,document,r,a);else{var p=i.amsReorderPostAttr||"order";(f={})[p]=a}MyAMS.require("ajax").then((function(){MyAMS.ajax.post(c,f).then((function(e,n,a){tn("td.sorter",r).each((function(e,t){tn(t).removeData().attr("data-order",e),o.row(tn(t).parents("tr").get(0)).invalidate().draw()}));var s=i.amsReorderCallback;s?MyAMS.core.executeFunctionByName(s,document,r,e,n,a).then((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t.apply.apply(t,[r].concat(n))})):MyAMS.ajax.handleJSON(e,r.parents(".dataTables_wrapper")).then((function(){t(e)}))}),n)}))}}}))}};var on=function(e){var t=[];e.parent().find("ul.select2-selection__rendered").children("li[title]").each((function(n,a){t.push(e.children('option[data-content="'.concat(a.title,'"]')).attr("value"))})),e.data("select2-target").val(t.join(e.data("ams-select2-separator")||","))},sn=function(e,t){return Object.assign({},e,t)};window.MyAMS&&(MyAMS.registry.register((function(e){return new Promise((function(t){var n=tn("legend.checker",e);n.length>0?(n.each((function(e,t){var n=tn(t),a=n.data();if(!a.amsChecker){var r=n.parent("fieldset"),o=a.amsCheckerState||a.amsState,i=r.hasClass("switched")||"on"===o,s=a.amsCheckerFieldname||a.amsFieldname||"checker_".concat(MyAMS.core.generateId()),c=s.replace(/\./g,"_"),l=a.amsCheckerHiddenPrefix||a.amsHiddenPrefix,u=a.amsCheckerMarker||a.amsMarker||!1,d=a.amsCheckerMode||a.amsMode||"hide",m=a.amsCheckerValueOn||a.amsValueOn||"true",f=a.amsCheckerValueOff||a.amsValueOff||"false",p=a.amsCheckerValue||a.amsValue,h=a.amsCheckerReadonly||a.amsReadonly,y={legend:n.text(),fieldName:s,fieldId:c,value:p||!0,checked:i,readonly:h,prefix:l,state:o,checkedValue:m,uncheckedValue:f,marker:u},g={veto:!1};if(n.trigger("before-init.ams.checker",[n,y,g]),g.veto)return;n.html(an.render(y)),tn("input",n).change((function(e){var t=tn(e.target),o=t.is(":checked"),i={veto:!1};if(n.trigger("before-switch.ams.checker",[n,i]),i.veto)t.prop("checked",!o);else if(MyAMS.core.executeFunctionByName(a.amsCheckerChangeHandler||a.amsChangeHandler,document,n,o),!a.amsCheckerCancelDefault&&!a.amsCancelDefault){var s=t.siblings(".prefix");"hide"===d?o?(r.removeClass("switched"),s.val(m),n.trigger("opened.ams.checker",[n])):(r.addClass("switched"),s.val(f),n.trigger("closed.ams.checker",[n])):(r.prop("disabled",!o),s.val(o?m:f))}})),n.closest("form").on("reset",(function(){var e=tn(".checker",n);e.prop("checked")!==i&&e.click()})),i||("hide"===d?r.addClass("switched"):r.prop("disabled",!0)),n.trigger("after-init.ams.checker",[n]),n.data("ams-checker",!0)}})),t(n)):t(null)}))}),"checker"),MyAMS.registry.register((function(e){return new Promise((function(t,n){var a=tn(".context-menu",e);a.length>0?MyAMS.require("menu").then((function(){a.each((function(e,t){var n=tn(t),a=n.data(),r={menuSelector:a.amsContextmenuSelector||a.amsMenuSelector},o=tn.extend({},r,a.amsContextmenuOptions||a.amsOptions);o=MyAMS.core.executeFunctionByName(a.amsContextmenuInitCallback||a.amsInit,document,n,o)||o;var i={veto:!1};if(n.trigger("before-init.ams.contextmenu",[n,o,i]),!i.veto){var s=n.contextMenu(o);MyAMS.core.executeFunctionByName(a.amsContextmenuAfterInitCallback||a.amsAfterInit,document,n,s,o),n.trigger("after-init.ams.contextmenu",[n,s])}}))}),n).then((function(){t(a)})):t(null)}))}),"contextMenu"),MyAMS.registry.register((function(e){var t="".concat(MyAMS.env.baseURL,"../ext/datatables/"),n="".concat(MyAMS.env.baseURL,"../../css/ext/datatables/");return new Promise((function(a,r){var o=tn(".datatable",e);o.length>0?MyAMS.ajax.check(tn.fn.dataTable,"".concat(MyAMS.env.baseURL,"../ext/datatables/dataTables").concat(MyAMS.env.extext,".js")).then((function(e){var i=[];e&&(i.push(MyAMS.core.getScript("".concat(t,"dataTables-bootstrap4").concat(MyAMS.env.extext,".js"))),i.push(MyAMS.core.getCSS("".concat(n,"dataTables-bootstrap4").concat(MyAMS.env.extext,".css"),"datatables-bs4"))),tn.when.apply(tn,i).then((function(){var i={},s=[],c=[],l=[],u={};o.each((function(e,a){var r=tn(a),o=r.data();"default"===o.buttons?(r.attr("data-buttons",'["copy", "print"]'),r.removeData("buttons"),o.buttons=r.data("buttons")):"all"===o.buttons&&(r.attr("data-buttons",'["copy", "csv", "excel", "print", "pdf", "colvis"]'),r.removeData("buttons"),o.buttons=r.data("buttons")),!o.autoFill||u.autoFill||tn.fn.dataTable.AutoFill||(s.push("".concat(t,"autoFill").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"autoFill-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-autofill-bs4"]="".concat(n,"autoFill-bootstrap4").concat(MyAMS.env.extext,".css"),u.autoFill=!0),o.buttons&&(u.buttons||tn.fn.dataTable.Buttons||(s.push("".concat(t,"buttons").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"buttons-bootstrap4").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"buttons-html5").concat(MyAMS.env.extext,".js")),i["dt-buttons-bs4"]="".concat(n,"buttons-bootstrap4").concat(MyAMS.env.extext,".css"),u.buttons=!0),tn.isArray(o.buttons)&&(o.buttons.indexOf("print")>=0&&(u.buttons_print||tn.fn.dataTable.ext.buttons.print||(l.push("".concat(t,"buttons-print").concat(MyAMS.env.extext,".js")),u.buttons_print=!0)),o.buttons.indexOf("excel")>=0&&(u.buttons_excel||tn.fn.dataTable.ext.buttons.excelHtml5||(s.push("".concat(t,"jszip").concat(MyAMS.env.extext,".js")),u.buttons_excel=!0)),o.buttons.indexOf("pdf")>=0&&(u.buttons_pdf||window.pdfMake||(s.push("".concat(t,"pdfmake").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"vfs_fonts").concat(MyAMS.env.extext,".js")),u.buttons_pdf=!0)),o.buttons.indexOf("colvis")>=0&&(u.buttons_colvis||tn.fn.dataTable.ext.buttons.colvis||(l.push("".concat(t,"buttons-colVis").concat(MyAMS.env.extext,".js")),u.buttons_colvis=!0)))),!o.colReorder||u.colReorder||tn.fn.dataTable.ColReorder||(s.push("".concat(t,"colReorder").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"colReorder-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-colreorder-bs4"]="".concat(n,"colReorder-bootstrap4").concat(MyAMS.env.extext,".css"),u.colReorder=!0),!o.fixedColumns||u.fixedColumns||tn.fn.dataTable.FixedColumns||(s.push("".concat(t,"fixedColumns").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"fixedColumns-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-fixedcolumns-bs4"]="".concat(n,"fixedColumns-bootstrap4").concat(MyAMS.env.extext,".css"),u.fixedColumns=!0),!o.fixedHeader||u.fixedHeader||tn.fn.dataTable.FixedHeader||(s.push("".concat(t,"fixedHeader").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"fixedHeader-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-fixedheader-bs4"]="".concat(n,"fixedHeader-bootstrap4").concat(MyAMS.env.extext,".css"),u.fixedHeader=!0),!o.keyTable||u.keyTable||tn.fn.dataTable.KeyTable||(s.push("".concat(t,"keyTable").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"keyTable-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-keytable-bs4"]="".concat(n,"keyTable-bootstrap4").concat(MyAMS.env.extext,".css"),u.keyTable=!0),!1===o.responsive||u.responsive||tn.fn.dataTable.Responsive||(s.push("".concat(t,"responsive").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"responsive-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-responsive-bs4"]="".concat(n,"responsive-bootstrap4").concat(MyAMS.env.extext,".css"),u.responsive=!0),!o.rowGroup||u.rowGroup||tn.fn.dataTable.RowGroup||(s.push("".concat(t,"rowGroup").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"rowGroup-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-rowgroup-bs4"]="".concat(n,"rowGroup-bootstrap4").concat(MyAMS.env.extext,".css"),u.rowGroup=!0),!o.rowReorder||u.rowReorder||tn.fn.dataTable.RowReorder||(s.push("".concat(t,"rowReorder").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"rowReorder-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-rowreorder-bs4"]="".concat(n,"rowReorder-bootstrap4").concat(MyAMS.env.extext,".css"),u.rowReorder=!0),!o.scroller||u.scroller||tn.fn.dataTable.Scroller||(s.push("".concat(t,"scroller").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"scroller-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-scroller-bs4"]="".concat(n,"scroller-bootstrap4").concat(MyAMS.env.extext,".css"),u.scroller=!0),!o.searchBuilder||u.searchBuilder||tn.fn.dataTable.SearchBuilder||(s.push("".concat(t,"searchBuilder").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"searchBuilder-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-searchbuilder-bs4"]="".concat(n,"searchBuilder-bootstrap4").concat(MyAMS.env.extext,".css"),u.searchBuilder=!0),!o.searchPanes||u.searchPanes||tn.fn.dataTable.SearchPanes||(u.select||tn.fn.dataTable.select||(s.push("".concat(t,"select").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"select-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-select-bs4"]="".concat(n,"select-bootstrap4").concat(MyAMS.env.extext,".css"),u.select=!0),c.push("".concat(t,"searchPanes").concat(MyAMS.env.extext,".js")),l.push("".concat(t,"searchPanes-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-searchpanes-bs4"]="".concat(n,"searchPanes-bootstrap4").concat(MyAMS.env.extext,".css"),u.searchPanes=!0),!o.select||u.select||tn.fn.dataTable.select||(s.push("".concat(t,"select").concat(MyAMS.env.extext,".js")),c.push("".concat(t,"select-bootstrap4").concat(MyAMS.env.extext,".js")),i["dt-select-bs4"]="".concat(n,"select-bootstrap4").concat(MyAMS.env.extext,".css"),u.select=!0)})),tn.when.apply(tn,s.map(MyAMS.core.getScript)).then((function(){return tn.when.apply(tn,c.map(MyAMS.core.getScript)).then((function(){return tn.when.apply(tn,l.map(MyAMS.core.getScript)).then((function(){e&&rn.init();for(var t=0,n=Object.entries(i);t<n.length;t++){var r=Qt(n[t],2),s=r[0],c=r[1];MyAMS.core.getCSS(c,s)}o.each((function(e,t){var n=tn(t);if(!tn.fn.dataTable.isDataTable(n)){var a=n.data(),r=a.amsDatatableDom||a.amsDom||a.dom||"";r||(a.buttons&&(r+="B"),a.searchBuilder&&(r+="Q"),a.searchPanes&&(r+="P"),!1===a.searching&&!1===a.lengthChange||(r+="<'row px-2'",!1!==a.searching&&(r+="<'col-sm-6 col-md-8'f>"),!1!==a.lengthChange&&(r+="<'col-sm-6 col-md-4'l>"),r+=">"),r+="<'row'<'col-sm-12'tr>>",!1===a.info&&!1===a.paging||(r+="<'row px-2 py-1'",!1!==a.info&&(r+="<'col-sm-12 col-md-5'i>"),!1!==a.paging&&(r+="<'col-sm-12 col-md-7'p>"),r+=">")),(a.buttons||a.searchBuilder||a.searchPanes||!1!==a.searching)&&!1!==a.lengthChange||n.siblings("h3").addClass("mb-0");var o={language:a.amsDatatableLanguage||a.amsLanguage||MyAMS.i18n.plugins.datatables,responsive:!0,dom:r},i=a.amsDatatableOrder||a.amsOrder;if("string"==typeof i){var s=i.split(";");i=[];var c,l=Xt(s);try{for(l.s();!(c=l.n()).done;){var u=c.value.split(",");u[0]=parseInt(u[0]),i.push(u)}}catch(e){l.e(e)}finally{l.f()}}i&&(o.order=i);var d=tn("thead th",n),m=[];d.each((function(e,t){m[e]=tn(t).data("ams-column")||{}}));var f,p=Xt(d.listattr("data-ams-sortable").entries());try{for(p.s();!(f=p.n()).done;){var h=Qt(f.value,2),y=h[0],g=h[1];a.rowReorder?m[y].sortable=!1:void 0!==g&&(m[y].sortable="string"==typeof g?JSON.parse(g):g)}}catch(e){p.e(e)}finally{p.f()}var v,M=Xt(d.listattr("data-ams-type").entries());try{for(M.s();!(v=M.n()).done;){var b=Qt(v.value,2),S=b[0],A=b[1];void 0!==A&&(m[S].type=A)}}catch(e){M.e(e)}finally{M.f()}o.columns=m;var x=tn.extend({},o,a.amsDatatableOptions||a.amsOptions);x=MyAMS.core.executeFunctionByName(a.amsDatatableInitCallback||a.amsInit,document,n,x)||x;var w={veto:!1};n.trigger("before-init.ams.datatable",[n,x,w]),w.veto||setTimeout((function(){var e=n.DataTable(x);MyAMS.core.executeFunctionByName(a.amsDatatableAfterInitCallback||a.amsAfterInit,document,n,e,x),n.trigger("after-init.ams.datatable",[n,e]),x.rowReorder&&(e.on("pre-row-reorder",MyAMS.core.getFunctionByName(a.amsDatatablePreReorder||a.amsPreReorder)||rn.preReorder),e.on("row-reorder",MyAMS.core.getFunctionByName(a.amsDatatableReordered||a.amsReordered)||rn.reorderRows))}),100)}})),a(o)}),r)}),r)}),r)}),r)}),r):a(null)}))}),"datatables"),MyAMS.registry.register((function(e){return new Promise((function(t,n){var a=tn(".datetime",e);a.length>0?MyAMS.ajax.check(window.moment,"".concat(MyAMS.env.baseURL,"../ext/moment").concat(MyAMS.env.extext,".js")).then((function(){MyAMS.ajax.check(tn.fn.datetimepicker,"".concat(MyAMS.env.baseURL,"../ext/tempusdominus-bootstrap4").concat(MyAMS.env.extext,".js")).then((function(e){var t=[];e&&t.push(MyAMS.core.getCSS("".concat(MyAMS.env.baseURL,"../../css/ext/tempusdominus-bootstrap4").concat(MyAMS.env.extext,".css"),"tempusdominus")),tn.when.apply(tn,t).then((function(){a.each((function(e,t){var n=tn(t),a=n.data(),r={locale:a.amsDatetimeLanguage||a.amsLanguage||MyAMS.i18n.language,icons:{time:"far fa-clock",date:"far fa-calendar",up:"fas fa-arrow-up",down:"fas fa-arrow-down",previous:"fas fa-chevron-left",next:"fas fa-chevron-right",today:"far fa-calendar-check-o",clear:"far fa-trash",close:"far fa-times"},date:n.val(),format:a.amsDatetimeFormat||a.amsFormat},o=tn.extend({},r,a.datetimeOptions||a.options);o=MyAMS.core.executeFunctionByName(a.amsDatetimeInitCallback||a.amsInit,document,n,o)||o;var i={veto:!1};if(n.trigger("before-init.ams.datetime",[n,o,i]),!i.veto){n.datetimepicker(o);var s=n.data("datetimepicker");(a.amsDatetimeIsoTarget||a.amsIsoTarget)&&n.on("change.datetimepicker",(function(e){var t=tn(e.currentTarget).data();tn(t.amsDatetimeIsoTarget||t.amsIsoTarget).val(e.date?e.date.toISOString(!0):null)})),n.trigger("after-init.ams.datetime",[n,s])}}))}))}),n).then((function(){t(a)}))}),n):t(null)}))}),"datetime"),MyAMS.registry.register((function(e){return new Promise((function(t,n){var a=tn(".draggable, .droppable, .sortable, .resizable",e);a.length>0?MyAMS.ajax.check(tn.fn.draggable,"".concat(MyAMS.env.baseURL,"../ext/jquery-ui").concat(MyAMS.env.extext,".js")).then((function(){MyAMS.core.getCSS("".concat(MyAMS.env.baseURL,"../../css/ext/jquery-ui.structure").concat(MyAMS.env.extext,".css"),"jquery-ui").then((function(){a.each((function(e,t){var n=tn(t),a=n.data();if(n.hasClass("draggable")){var r={cursor:a.amsDraggableCursor||"move",containment:a.amsDraggableContainment,handle:a.amsDraggableHandle,connectToSortable:a.amsDraggableConnectSortable,helper:MyAMS.core.getFunctionByName(a.amsDraggableHelper)||a.amsDraggableHelper,start:MyAMS.core.getFunctionByName(a.amsDraggableStart),stop:MyAMS.core.getFunctionByName(a.amsDraggableStop)},o=tn.extend({},r,a.amsDraggableOptions||a.amsOptions);o=MyAMS.core.executeFunctionByName(a.amsDraggableInitCallback||a.amsInit,document,n,o)||o;var i={veto:!1};if(n.trigger("before-init.ams.draggable",[n,o,i]),i.veto)return;var s=n.draggable(o);n.disableSelection(),MyAMS.core.executeFunctionByName(a.amsDraggableAfterInitCallback||a.amsAfterInit,document,n,s,o),n.trigger("after-init.ams.draggable",[n,s])}if(n.hasClass("droppable")){var c={accept:a.amsDroppableAccept||a.amsAccept,drop:MyAMS.core.getFunctionByName(a.amsDroppableDrop)},l=tn.extend({},c,a.amsDroppableOptions||a.amsOptions);l=MyAMS.core.executeFunctionByName(a.amsDroppableInitCallback||a.amsInit,document,n,l)||l;var u={veto:!1};if(n.trigger("before-init.ams.droppable",[n,l,u]),u.veto)return;var d=n.droppable(l);MyAMS.core.executeFunctionByName(a.amsDroppableAfterInitCallback||a.amsAfterInit,document,n,d,l),n.trigger("after-init.ams.droppable",[n,d])}if(n.hasClass("sortable")){var m={items:a.amsSortableItems,handle:a.amsSortableHandle,helper:MyAMS.core.getFunctionByName(a.amsSortableHelper)||a.amsSortableHelper,connectWith:a.amsSortableConnectwith,containment:a.amsSortableContainment,placeholder:a.amsSortablePlaceholder,start:MyAMS.core.getFunctionByName(a.amsSortableStart),over:MyAMS.core.getFunctionByName(a.amsSortableOver),stop:MyAMS.core.getFunctionByName(a.amsSortableStop)},f=tn.extend({},m,a.amsSortableOptions||a.amsOptions);f=MyAMS.core.executeFunctionByName(a.amsSortableInitCallback||a.amsInit,document,n,f)||f;var p={veto:!1};if(n.trigger("before-init.ams.sortable",[n,f,p]),p.veto)return;var h=n.sortable(f);n.disableSelection(),MyAMS.core.executeFunctionByName(a.amsSortableAfterInitCallback||a.amsAfterInit,document,n,h,f),n.trigger("after-init.ams.sortable",[n,h])}if(n.hasClass("resizable")){var y={autoHide:!1===a.amsResizableAutohide||a.amsResizableAutohide,containment:a.amsResizableContainment,grid:a.amsResizableGrid,handles:a.amsResizableHandles,start:MyAMS.core.getFunctionByName(a.amsResizableStart),resize:MyAMS.core.getFunctionByName(a.amsResizableResize),stop:MyAMS.core.getFunctionByName(a.amsResizableStop)},g=tn.extend({},y,a.amsResizableOptions||a.amsOptions);g=MyAMS.core.executeFunctionByName(a.amsResizableInitCallback||a.amsInit,document,n,g)||g;var v={veto:!1};if(n.trigger("before-init.ams.resizable",[n,g,v]),v.veto)return;var M=n.resizable(g);n.disableSelection(),MyAMS.core.executeFunctionByName(a.amsResizableAfterInitCallback||a.amsAfterInit,document,n,M,g),n.trigger("after-init.ams.resizable",[n,M])}}))}))}),n).then((function(){t(a)})):t(null)}))}),"dragdrop"),MyAMS.registry.register((function(e){return new Promise((function(t,n){var a=tn(".editor textarea",e);a.length>0?MyAMS.require("ajax").then((function(){MyAMS.ajax.check(window.ace,"".concat(MyAMS.env.baseURL,"../ext/ace/ace").concat(MyAMS.env.extext,".js")).then((function(e){var t=window.ace,n=[];e&&(t.config.set("basePath","".concat(MyAMS.env.baseURL,"../ext/ace")),n.push(MyAMS.core.getScript("".concat(MyAMS.env.baseURL,"../ext/ace/ext-modelist").concat(MyAMS.env.extext,".js")))),tn.when.apply(tn,n).then((function(){a.each((function(e,n){var a=tn(n),r=a.parents(".editor"),o=a.data(),i=t.require("ace/ext/modelist"),s=o.amsEditorMode||o.amsMode||i.getModeForPath(o.amsEditorFilename||o.amsFilename||"text.txt").mode;setTimeout((function(){var e=tn("<div>",{position:"absolute",width:a.width(),height:a.height(),class:a.attr("class")}).insertBefore(a);a.css("display","none");var n={mode:s,fontSize:12,tabSize:4,useSoftTabs:!1,showGutter:!0,showLineNumbers:!0,printMargin:132,showInvisibles:!0},i=tn.extend({},n,o.amsEditorOptions||o.amsOptions);i=MyAMS.core.executeFunctionByName(o.amsEditorInitCallback||o.amsInit,document,a,i)||i;var c={veto:!1};if(a.trigger("before-init.ams.editor",[a,i,c]),!c.veto){var l=t.edit(e[0]);l.setOptions(i),"darkmode"===MyAMS.theme?l.setTheme("ace/theme/dracula"):l.setTheme("ace/theme/textmate"),l.session.setValue(a.val()),a.attr("disabled")&&l.setReadOnly(!0),l.session.on("change",(function(){a.val(l.session.getValue())})),r.data("editor",l),MyAMS.core.executeFunctionByName(o.amsEditorAfterEditCallback||o.amsAfterInit,document,a,l,i),a.trigger("after-init.ams.editor",[a,l])}}),200)}))}))}))}),n).then((function(){t(a)})):t(null)}))}),"editor"),MyAMS.registry.register((function(e){return new Promise((function(t,n){var a=tn(".custom-file-input",e);a.length>0?MyAMS.require("ajax").then((function(){MyAMS.ajax.check(window.bsCustomFileInput,"".concat(MyAMS.env.baseURL,"../ext/bs-custom-file-input").concat(MyAMS.env.extext,".js")).then((function(){a.each((function(e,t){var n=tn(t),a=n.attr("id"),r=a?"#".concat(a):n.attr("name"),o=tn(t.form),i=o.attr("id"),s=i?"#".concat(i):o.attr("name"),c={veto:!1};n.trigger("before-init.ams.fileinput",[n,c]),c.veto||(bsCustomFileInput.init(r,s),n.trigger("after-init.ams.fileinput",[n]))}))}),n).then((function(){t(a)}))}),n):t(null)}))}),"fileInput"),MyAMS.registry.register((function(e){return new Promise((function(t,n){var a=tn(".imgareaselect",e);a.length>0?MyAMS.require("ajax").then((function(){MyAMS.ajax.check(tn.fn.imgAreaSelect,"".concat(MyAMS.env.baseURL,"../ext/jquery-imgareaselect").concat(MyAMS.env.extext,".js")).then((function(e){var r=[];e&&r.push(MyAMS.core.getCSS("".concat(MyAMS.env.baseURL,"../../css/ext/imgareaselect-animated").concat(MyAMS.env.extext,".css"),"imgareaselect")),tn.when.apply(tn,r).then((function(){a.each((function(e,t){var n=tn(t);if(!n.data("imgAreaSelect")){var a=n.data(),r=a.amsImgareaselectParent||a.amsParent,o=r?n.parents(r):"body",i={instance:!0,handles:!0,parent:o,x1:a.amsImgareaselectX1||a.amsX1||0,y1:a.amsImgareaselectY1||a.amsY1||0,x2:a.amsImgareaselectX2||a.amsX2||a.amsImgareaselectImageWidth||a.amsImageWidth,y2:a.amsImgareaselectY2||a.amsY2||a.amsImgareaselectImageHeight||a.amsImageHeight,imageWidth:a.amsImgareaselectImageWidth||a.amsImageWidth,imageHeight:a.amsImgareaselectImageHeight||a.amsImageHeight,imgWidth:a.amsImgareaselectThumbWidth||a.amsThumbWidth,imgHeight:a.amsImgareaselectThumbHeight||a.amsThumbHeight,minWidth:128,minHeight:128,aspectRatio:a.amsImgareaselectAspectRatio||a.amsAspectRatio,onSelectEnd:MyAMS.core.getFunctionByName(a.amsImgareaselectSelectEnd||a.amsSelectedEnd)||function(e,t){var n=a.amsImgareaselectTargetField||a.amsTargetField||"image_";tn('input[name="'.concat(n,'x1"]'),o).val(t.x1),tn('input[name="'.concat(n,'y1"]'),o).val(t.y1),tn('input[name="'.concat(n,'x2"]'),o).val(t.x2),tn('input[name="'.concat(n,'y2"]'),o).val(t.y2)}},s=tn.extend({},i,a.amsImgareaselectOptions||a.amsOptions);s=MyAMS.core.executeFunctionByName(a.amsImgareaselectInitCallback||a.amsInit,document,n,s)||s;var c={veto:!1};n.trigger("before-init.ams.imgareaselect",[n,s,c]),c.veto||setTimeout((function(){var e=n.imgAreaSelect(s);n.trigger("after-init.ams.imgareaselect",[n,e])}),200)}}))}),n).then((function(){t(a)}))}),n)}),n):t(null)}))}),"imgAreaSelect"),MyAMS.registry.register((function(e){return new Promise((function(t,n){var a=tn(".select2",e);a.length>0?MyAMS.require("ajax","helpers").then((function(){MyAMS.ajax.check(tn.fn.select2,"".concat(MyAMS.env.baseURL,"../ext/select2/select2").concat(MyAMS.env.extext,".js")).then((function(e){var r=[];e&&r.push(MyAMS.core.getScript("".concat(MyAMS.env.baseURL,"../ext/select2/i18n/").concat(MyAMS.i18n.language,".js"))),tn.when.apply(tn,r).then((function(){a.each((function(e,t){var n=tn(t),a=n.data();if(!a.select2){var r={theme:a.amsSelect2Theme||a.amsTheme||"bootstrap4",language:a.amsSelect2Language||a.amsLanguage||MyAMS.i18n.language,escapeMarkup:MyAMS.core.getFunctionByName(a.amsSelect2EscapeMarkup||a.amsEscapeMarkup),matcher:MyAMS.core.getFunctionByName(a.amsSelect2Matcher||a.amsMatcher),sorter:MyAMS.core.getFunctionByName(a.amsSelect2Sorter||a.amsSorter),templateResult:MyAMS.core.getFunctionByName(a.amsSelect2TemplateResult||a.amsTemplateResult),templateSelection:MyAMS.core.getFunctionByName(a.amsSelect2TemplateSelection||a.amsTemplateSelection),tokenizer:MyAMS.core.getFunctionByName(a.amsSelect2Tokenizer||a.amsTokenizer)};if(a.amsSelect2AjaxUrl||a.amsAjaxUrl||a["ajax-Url"]){var o,i=MyAMS.core.getFunctionByName(a.amsSelect2AjaxParams||a.amsAjaxParams||a["ajax-Params"])||a.amsSelect2AjaxParams||a.amsAjaxParams||a["ajax-Params"];"function"==typeof i?o=i:i&&(o=function(e){return sn(e,i)}),r.ajax={url:MyAMS.core.getFunctionByName(a.amsSelect2AjaxUrl||a.amsAjaxUrl)||a.amsSelect2AjaxUrl||a.amsAjaxUrl,data:o||MyAMS.core.getFunctionByName(a.amsSelect2AjaxData||a.amsAjaxData)||a.amsSelect2AjaxData||a.amsAjaxData,processResults:MyAMS.core.getFunctionByName(a.amsSelect2AjaxProcessResults||a.amsAjaxProcessResults)||a.amsSelect2AjaxProcessResults||a.amsAjaxProcessResults,transport:MyAMS.core.getFunctionByName(a.amsSelect2AjaxTransport||a.amsAjaxTransport)||a.amsSelect2AjaxTransport||a.amsAjaxTransport},r.minimumInputLength=a.amsSelect2MinimumInputLength||a.amsMinimumInputLength||a.minimumInputLength||1}if(n.hasClass("sortable")){var s=tn('<input type="hidden" name="'.concat(n.attr("name"),'">')).insertAfter(n);s.val(tn("option:selected",n).listattr("value").join(a.amsSelect2Separator||",")),n.data("select2-target",s).removeAttr("name"),r.templateSelection=function(e){var t=tn(e.element);return t.attr("data-content",t.html()),e.text}}var c=tn.extend({},r,a.amsSelect2Options||a.amsOptions);c=MyAMS.core.executeFunctionByName(a.amsSelect2InitCallback||a.amsInit,document,n,c)||c;var l={veto:!1};if(n.trigger("before-init.ams.select2",[n,c,l]),!l.veto){var u=n.select2(c);n.on("select2:opening select2:selecting select2:unselecting select2:clearing",(function(e){if(tn(e.target).is(":disabled"))return!1})),n.on("select2:opening",(function(e){var t=tn(e.currentTarget).parents(".modal").first();if(t.exists()){var n=parseInt(t.css("z-index"));u.data("select2").$dropdown.css("z-index",n+1)}})),n.on("select2:open",(function(){setTimeout((function(){var e=tn(".select2-search__field",u.data("select2").$dropdown);e.exists()&&e.get(0).focus()}),50)})),n.hasClass("sortable")&&MyAMS.ajax.check(tn.fn.sortable,"".concat(MyAMS.env.baseURL,"../ext/jquery-ui").concat(MyAMS.env.extext,".js")).then((function(){n.parent().find("ul.select2-selection__rendered").sortable({containment:"parent",update:function(){on(n)}}),n.on("select2:select select2:unselect",(function(e){var t=e.params.data.id,n=tn(e.currentTarget),a=n.children('option[value="'.concat(t,'"]'));MyAMS.helpers.moveElementToParentEnd(a),n.trigger("change"),on(n)}))})),MyAMS.core.executeFunctionByName(a.amsSelect2AfterInitCallback||a.amsAfterInit,document,n,u,c),n.trigger("after-init.ams.select2",[n,u])}}}))}),n).then((function(){t(a)}))}),n)}),n):t(null)}))}),"select2"),MyAMS.registry.register((function(e){return new Promise((function(t){var n=tn(".svg-container",e);n.length>0?(n.each((function(e,t){var n=tn(t),a=tn("svg",n),r=a.attr("width"),o=a.attr("height");r&&o&&t.setAttribute("viewBox","0 0 ".concat(Math.round(parseFloat(r))," ").concat(Math.round(parseFloat(o)))),a.attr("width","100%").attr("height","auto")})),t(n)):t(null)}))}),"svg"),MyAMS.registry.register((function(e){return new Promise((function(t){var n=tn("legend.switcher",e);n.length>0?(n.each((function(e,t){var n=tn(t),a=n.parent("fieldset"),r=n.data(),o=r.amsSwitcherState||r.amsState,i=r.amsSwitcherMinusClass||r.amsMinusClass||"minus",s=r.amsSwitcherPlusClass||r.amsPlusClass||"plus";if(!r.amsSwitcher){var c={veto:!1};if(n.trigger("before-init.ams.switcher",[n,r,c]),c.veto)return;tn('<i class="fa fa-'.concat("open"===o?i:s,' mr-2"></i>')).prependTo(n),n.on("click",(function(e){e.preventDefault();var t={};if(n.trigger("before-switch.ams.switcher",[n,t]),!t.veto)if(a.hasClass("switched")){a.removeClass("switched"),MyAMS.core.switchIcon(tn("i",n),s,i),n.trigger("opened.ams.switcher",[n]);var r=n.attr("id");r&&tn('legend.switcher[data-ams-switcher-sync="'.concat(r,'"]'),a).each((function(e,t){var n=tn(t);n.parents("fieldset").hasClass("switched")&&n.click()}))}else a.addClass("switched"),MyAMS.core.switchIcon(tn("i",n),i,s),n.trigger("closed.ams.switcher",[n])})),"open"!==o&&a.addClass("switched"),n.trigger("after-init.ams.switcher",[n]),n.data("ams-switcher",!0)}})),t(n)):t(null)}))}),"switcher"),MyAMS.registry.register((function e(t){return new Promise((function(n,a){var r=tn(".tinymce",t);r.length>0?MyAMS.require("ajax","i18n").then((function(){var t="".concat(MyAMS.env.baseURL,"../ext/tinymce").concat(MyAMS.env.devmode?"/dev":"");MyAMS.ajax.check(window.tinymce,"".concat(t,"/tinymce").concat(MyAMS.env.extext,".js")).then((function(o){var i=[];o&&(e.baseURL=t,e.suffix=MyAMS.env.extext,i.push(MyAMS.core.getScript("".concat(t,"/jquery.tinymce.min.js"))),i.push(MyAMS.core.getScript("".concat(t,"/themes/silver/theme").concat(MyAMS.env.extext,".js"))),tn(document).on("focusin",(function(e){tn(e.target).closest(".tox-tinymce, .tox-tinymce-aux, .moxman-window, .tam-assetmanager-root").length&&e.stopImmediatePropagation()})),tn(document).on("clear.ams.content",(function(e,t,n){tn(".tinymce",n).each((function(e,t){var n=tn(t).attr("id"),a=window.tinymce.get(n);null!==a&&a.remove()}))}))),tn.when.apply(tn,i).then((function(){r.each((function(e,n){var a=tn(n),r=a.data(),o={selector:"textarea#".concat(a.attr("id")),base_url:t,theme:r.amsTinymceTheme||r.amsTheme||"silver",language:MyAMS.i18n.language,menubar:!1!==r.amsTinymceMenubar&&!1!==r.amsMenubar,statusbar:!1!==r.amsTinymceStatusbar&&!1!==r.amsStatusbar,plugins:r.amsTinymcePlugins||r.amsPlugins||["advlist autosave autolink lists link charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime nonbreaking save table contextmenu directionality","emoticons paste textcolor colorpicker textpattern autoresize"],toolbar:r.amsTinymceToolbar||r.amsToolbar,toolbar1:!1!==r.amsTinymceToolbar1&&!1!==r.amsToolbar1&&(r.amsTinymceToolbar1||r.amsToolbar1||"undo redo | pastetext | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent"),toolbar2:!1!==r.amsTinymceToolbar2&&!1!==r.amsToolbar2&&(r.amsTinymceToolbar2||r.amsToolbar2||"forecolor backcolor emoticons | charmap link image media | fullscreen preview print | code"),content_css:r.amsTinymceContentCss||r.amsContentCss,formats:r.amsTinymceFormats||r.amsFormats,style_formats:r.amsTinymceStyleFormats||r.amsStyleFormats,block_formats:r.amsTinymceBlockFormats||r.amsBlockFormats,valid_classes:r.amsTinymceValidClasses||r.amsValidClasses,image_advtab:!0,image_list:MyAMS.core.getFunctionByName(r.amsTinymceImageList||r.amsImageList)||r.amsTinymceImageList||r.amsImageList,image_class_list:r.amsTinymceImageClassList||r.amsImageClassList,link_list:MyAMS.core.getFunctionByName(r.amsTinymceLinkList||r.amsLinkList)||r.amsTinymceLinkList||r.amsLinkList,link_class_list:r.amsTinymceLinkClassList||r.amsLinkClassList,paste_as_text:void 0===r.amsTinymcePasteAsText&&void 0===r.amsPasteAsText||(r.amsTinymcePasteAsText||r.amsPasteAsText),paste_auto_cleanup_on_paste:void 0===r.amsTinymcePasteAutoCleanup&&void 0===r.amsPasteAutoCleanup||(r.amsTinymcePasteAutoCleanup||r.amsPasteAutoCleanup),paste_strip_class_attributes:r.amsTinymcePasteStripClassAttributes||r.amsPasteStripClassAttributes||"all",paste_remove_spans:void 0===r.amsTinymcePasteRemoveSpans&&void 0===r.amsPasteRemoveSpans||(r.amsTinymcePasteRemoveSpans||r.amsPasteRemoveSpans),paste_remove_styles:void 0===r.amsTinymcePasteRemoveStyles||void 0===r.amsPasteRemoveStyles||(r.amsTinymcePasteRemoveStyles||r.amsPasteRemoveStyles),height:r.amsTinymceHeight||r.amsHeight||50,min_height:50,resize:!0,autoresize_min_height:50,autoresize_max_height:500},i=r.amsTinymceExternalPlugins||r.amsExternalPlugins;if(i){var s,c=Xt(i.split(/\s+/));try{for(c.s();!(s=c.n()).done;){var l=s.value,u=a.data("ams-tinymce-plugin-".concat(l))||a.data("ams-plugin-".concat(l));window.tinymce.PluginManager.load(l,MyAMS.core.getSource(u))}}catch(e){c.e(e)}finally{c.f()}}var d=tn.extend({},o,r.amsTinymceOptions||r.amsOptions);d=MyAMS.core.executeFunctionByName(r.amsTinymceInitCallback||r.amsInit,document,a,d)||d;var m={veto:!1};a.trigger("before-init.ams.tinymce",[a,d,m]),m.veto||setTimeout((function(){var e=a.tinymce(d);MyAMS.core.executeFunctionByName(r.amsTinymceAfterInitCallback||r.amsAfterInit,document,a,e,d),a.trigger("after-init.ams.tinymce",[a,d])}),250)}))}),a).then((function(){n(r)}))}),a)}),a):n(null)}))}),"tinymce"),MyAMS.registry.register((function(e){return new Promise((function(t,n){var a=tn(".treeview",e);a.length>0?MyAMS.require("ajax").then((function(){MyAMS.ajax.check(tn.fn.treview,"".concat(MyAMS.env.baseURL,"../ext/bootstrap-treeview").concat(MyAMS.env.extext,".js")).then((function(e){var r=[];e&&r.push(MyAMS.core.getCSS("".concat(MyAMS.env.baseURL,"../../css/ext/bootstrap-treeview").concat(MyAMS.env.extext,".css"),"treeview")),tn.when.apply(tn,r).then((function(){a.each((function(e,t){var n=tn(t),a=n.data(),r={data:a.amsTreeviewData,levels:a.amsTreeviewLevels,injectStyle:a.amsTreeviewInjectStyle,expandIcon:a.amsTreeviewExpandIcon||"far fa-fw fa-plus-square",collapseIcon:a.amsTreeviewCollaspeIcon||"far fa-fw fa-minus-square",emptyIcon:a.amsTreeviewEmptyIcon,nodeIcon:a.amsTreeviewNodeIcon,selectedIcon:a.amsTreeviewSelectedIcon,checkedIcon:a.amsTreeviewCheckedIcon||"far fa-fw fa-check-square",uncheckedIcon:a.amsTreeviewUncheckedIcon||"far fa-fw fa-square",color:a.amsTreeviewColor,backColor:a.amsTreeviewBackColor,borderColor:a.amsTreeviewBorderColor,onHoverColor:a.amsTreeviewHoverColor,selectedColor:a.amsTreeviewSelectedColor,selectedBackColor:a.amsTreeviewSelectedBackColor,unselectableColor:a.amsTreeviewUnselectableColor||"rgba(1,1,1,0.25)",unselectableBackColor:a.amsTreeviewUnselectableBackColor||"rgba(1,1,1,0.25)",enableLinks:a.amsTreeviewEnableLinks,highlightSelected:a.amsTreeviewHighlightSelected,highlightSearchResults:a.amsTreeviewhighlightSearchResults,showBorder:a.amsTreeviewShowBorder,showIcon:a.amsTreeviewShowIcon,showCheckbox:a.amsTreeviewShowCheckbox,showTags:a.amsTreeviewShowTags,toggleUnselectable:a.amsTreeviewToggleUnselectable,multiSelect:a.amsTreeviewMultiSelect,onNodeChecked:MyAMS.core.getFunctionByName(a.amsTreeviewNodeChecked),onNodeCollapsed:MyAMS.core.getFunctionByName(a.amsTreeviewNodeCollapsed),onNodeDisabled:MyAMS.core.getFunctionByName(a.amsTreeviewNodeDisabled),onNodeEnabled:MyAMS.core.getFunctionByName(a.amsTreeviewNodeEnabled),onNodeExpanded:MyAMS.core.getFunctionByName(a.amsTreeviewNodeExpanded),onNodeSelected:MyAMS.core.getFunctionByName(a.amsTreeviewNodeSelected),onNodeUnchecked:MyAMS.core.getFunctionByName(a.amsTreeviewNodeUnchecked),onNodeUnselected:MyAMS.core.getFunctionByName(a.amsTreeviewNodeUnselected),onSearchComplete:MyAMS.core.getFunctionByName(a.amsTreeviewSearchComplete),onSearchCleared:MyAMS.core.getFunctionByName(a.amsTreeviewSearchCleared)},o=tn.extend({},r,a.amsTreeviewOptions);o=MyAMS.core.executeFunctionByName(a.amsTreeviewInitcallback||a.amsInit,document,n,o)||o;var i={veto:!1};if(n.trigger("before-init.ams.treeview",[n,o,i]),!i.veto){var s=n.treeview(o);MyAMS.core.executeFunctionByName(a.amsTreeviewAfterInitCallback||a.amsAfterInit,document,n,s,o),n.trigger("after-init.ams.treeview",[n,s])}})),t(a)}),n)}),n)}),n):t(null)}))}),"treeview"),MyAMS.registry.register((function(e){return new Promise((function(t,n){var a=tn("form:not([novalidate])",e);a.length>0&&MyAMS.require("ajax","i18n").then((function(){MyAMS.ajax.check(tn.fn.validate,"".concat(MyAMS.env.baseURL,"../ext/validate/jquery-validate").concat(MyAMS.env.extext,".js")).then((function(e){e&&"en"!==MyAMS.i18n.language&&MyAMS.core.getScript("".concat(MyAMS.env.baseURL,"../ext/validate/i18n/messages_").concat(MyAMS.i18n.language).concat(MyAMS.env.extext,".js")).then((function(){})),a.each((function(e,t){var n=tn(t),a=n.data(),r={ignore:null,invalidHandler:MyAMS.core.getFunctionByName(a.amsValidateInvalidHandler)||function(e,t){tn("span.is-invalid",n).remove(),tn(".is-invalid",n).removeClass("is-invalid");var a,r=Xt(t.errorList);try{for(r.s();!(a=r.n()).done;){var o=a.value,i=tn(o.element),s=i.parents(".tab-pane");i.parents("fieldset.switched").each((function(e,t){tn("legend.switcher",t).click()})),s.each((function(e,t){var n=tn(t),a=n.parents(".tab-content").siblings(".nav-tabs");tn("li:nth-child(".concat(n.index()+1,")"),a).addClass("is-invalid"),tn("li.is-invalid:first a",a).click()}))}}catch(e){r.e(e)}finally{r.f()}},errorElement:a.amsValidateErrorElement||"span",errorClass:a.amsValidateErrorClass||"is-invalid",errorPlacement:MyAMS.core.getFunctionByName(a.amsValidateErrorPlacement)||function(e,t){e.addClass("invalid-feedback"),t.closest(".form-widget").append(e)},submitHandler:MyAMS.core.getFunctionByName(a.amsValidateSubmitHandler)||(void 0!==n.attr("data-async")?function(){MyAMS.require("form").then((function(){MyAMS.form.submit(n)}))}:function(){n.get(0).submit()})};tn("[data-ams-validate-rules]",n).each((function(e,t){0===e&&(r.rules={}),r.rules[tn(t).attr("name")]=tn(t).data("ams-validate-rules")})),tn("[data-ams-validate-messages]",n).each((function(e,t){0===e&&(r.messages={}),r.messages[tn(t).attr("name")]=tn(t).data("ams-validate-messages")}));var o=tn.extend({},r,a.amsValidateOptions||a.amsOptions);o=MyAMS.core.executeFunctionByName(a.amsValidateInitCallback||a.amsInit,document,n,o)||o;var i={veto:!1};if(n.trigger("before-init.ams.validate",[n,o,i]),!i.veto){var s=n.validate(o);MyAMS.core.executeFunctionByName(a.amsValidateAfterInitCallback||a.amsAfterInit,document,n,s,o),n.trigger("after-init.ams.validate",[n,s])}}))}),n).then((function(){t(a)}))}),n)}))}),"validate"),MyAMS.config.modules.push("plugins"),MyAMS.env.bundle||console.debug("MyAMS: plugins module loaded...")),j.$.extend(j,{require:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise((function(e,n){var a,r=[],o=[],i=MyAMS.config.modules,s=N(t);try{for(s.s();!(a=s.n()).done;){var c=a.value;if("string"==typeof c)i.indexOf(c)<0&&(r.push(c),o.extendWith(F(c)));else if(P.isArray(c)){var l,u=N(c);try{for(u.s();!(l=u.n()).done;){var d=l.value;i.indexOf(d)<0&&(r.push(d),o.extendWith(F(d)))}}catch(e){u.e(e)}finally{u.f()}}else for(var m=0,f=Object.entries(c);m<f.length;m++){var p=_(f[m],2),h=p[0],y=p[1];i.indexOf(h)<0&&(r.push(h),o.extendWith(F(y,h)))}}}catch(e){s.e(e)}finally{s.f()}P.when.apply(P,o).then((function(){var t,n=N(r);try{for(n.s();!(t=n.n()).done;){var a=t.value;i.indexOf(a)<0&&(i.push(a),MyAMS.core.executeFunctionByName("MyAMS.".concat(a,".init")))}}catch(e){n.e(e)}finally{n.f()}e()}),(function(){n("Can't load requested modules (".concat(r,")!"))}))}))},ajax:z,alert:xe,callbacks:St,clipboard:wt,container:kt,datatable:Tt,error:U,events:yt,form:He,graph:jt,helpers:Rt,i18n:K,jsonrpc:Jt,menu:Ft,modal:Ie,nav:de,notifications:qt,skin:ye,stats:Yt,tree:Gt,xmlrpc:Kt}),!1!==j.$("html").data("ams-init")&&function(e){e.extend(String.prototype,{camelCase:function(){return this?this.replace(/-(.)/g,(function(e,t){return t.toUpperCase()})):this},deCase:function(){return this?this.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())})):this},initLowerCase:function(){return this?this.charAt(0).toLowerCase()+this.slice(1):this},unserialize:function(){if(!this)return this;var e,t={},n=y(decodeURIComponent(this).split("&"));try{for(n.s();!(e=n.n()).done;){var a=h(e.value.split("=",2),2),r=a[0],o=a[1];t[r]=o}}catch(e){n.e(e)}finally{n.f()}return t}}),e.extend(Array.prototype,{extendWith:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.push(a)}}catch(e){n.e(e)}finally{n.f()}}}),e.extend(e,{extendPrefix:function(e,t,n){for(var a=arguments.length,r=new Array(a>3?a-3:0),o=3;o<a;o++)r[o-3]=arguments[o];for(var i=0,s=r;i<s.length;i++)for(var c=s[i],l=0,u=Object.entries(c);l<u.length;l++){var d=h(u[l],2),m=d[0],f=d[1];m.startsWith(t)&&(e[m.substring(t.length).initLowerCase()]=null===n?f:n(f))}return e},extendOnly:function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];for(var o=0,i=a;o<i.length;o++)for(var s=i[o],c=0,l=Object.entries(s);c<l.length;c++){var u=h(l[c],2),d=u[0],m=u[1];Object.prototype.hasOwnProperty.call(e,d)&&(e[d]=null===t?m:t(m))}return e}}),e.fn.extend({exists:function(){return e(this).length>0},objectOrParentWithClass:function(e){return this.hasClass(e)?this:this.parents(".".concat(e))},listattr:function(t){var n=[];return this.each((function(a,r){n.push(e(r).attr(t))})),n},style:function(e,t,n){var a=this;return this.each((function(r,o){if(void 0===o)return!1;var i=o.style;return void 0===e?(a=i,!1):void 0===t?(a=i.getPropertyValue(e),!1):(n=void 0!==n?n:"",void i.setProperty(e,t,n))})),a},removeClassPrefix:function(t){return this.each((function(n,a){var r=a.className.split(/\s+/).map((function(e){return e.startsWith(t)?"":e}));a.className=e.trim(r.join(" "))})),this}}),e.expr[":"].hasvalue=function(t,n,a){return""!==e(t).val()},e.expr[":"].econtains=function(t,n,a){return(t.textContent||t.innerText||e(t).text()||"").toLowerCase()===a[3].toLowerCase()},e.expr[":"].withtext=function(t,n,a){return(t.textContent||t.innerText||e(t).text()||"")===a[3]},e.expr[":"].parents=function(t,n,a){return e(t).parents(a[3]).length>0},e(document).ready((function(){var t=e("html");t.removeClass("no-js").addClass("js"),T.core.executeFunctionByName(t.data("ams-init-page")||T.config.initPage)}))}(j.$)}]);