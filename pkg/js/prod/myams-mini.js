!function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e){t.exports=jquery},function(t,e,n){
/*! JsRender v1.0.6: http://jsviews.com/#jsrender */
/*! **VERSION FOR WEB** (For NODE.JS see http://jsviews.com/download/jsrender-node.js) */
!function(e,n){var a=n.jQuery;t.exports=a?e(n,a):function(t){if(t&&!t.fn)throw"Provide jQuery or null";return e(n,t)}}((function(t,e){"use strict";var n=!1===e;e=e&&e.fn?e:t.jQuery;var a,r,o,i,s,l,c,d,u,f,m,p,g,h,v,y,M,b,S,A,w,x,C="v1.0.6",k=/[ \t]*(\r\n|\n|\r)/g,T=/\\(['"])/g,j=/['"\\]/g,_=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,O=/^if\s/,R=/<(\w+)[>\s]/,N=/[\x00`><\"'&=]/,E=/^on[A-Z]|^convert(Back)?$/,P=/^\#\d+_`[\s\S]*\/\d+_`$/,F=/[\x00`><"'&=]/g,D=/[&<>]/g,I=/&(amp|gt|lt);/g,B=/\[['"]?|['"]?\]/g,L=0,$={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},U={amp:"&",gt:">",lt:"<"},q="For #index in nested block use #getIndex().",V={},H=t.jsrender,W=H&&e&&!e.render,G={template:{compile:function t(n,a,r,o){function s(a){var i,s;if(""+a===a||a.nodeType>0&&(l=a)){if(!l)if(/^\.\/[^\\:*?"<>]*$/.test(a))(s=d[n=n||a])?a=s:l=document.getElementById(a);else if(e.fn&&!p.rTmpl.test(a))try{l=e(a,document)[0]}catch(t){}l&&("SCRIPT"!==l.tagName&&ht(a+": Use script block, not "+l.tagName),o?a=l.innerHTML:((i=l.getAttribute("data-jsv-tmpl"))&&("jsvTmpl"!==i?(a=d[i],delete d[i]):e.fn&&(a=e.data(l).jsvTmpl)),i&&a||(n=n||(e.fn?"jsvTmpl":a),a=t(n,l.innerHTML,r,o)),a.tmplName=n=n||i,"jsvTmpl"!==n&&(d[n]=a),l.setAttribute("data-jsv-tmpl",n),e.fn&&e.data(l,"jsvTmpl",a))),l=void 0}else a.fn||(a=void 0);return a}var l,c,f=a=a||"";p._html=u.html,0===o&&(o=void 0,f=s(f));(o=o||(a.markup?a.bnds?Z({},a):a:{})).tmplName=o.tmplName||n||"unnamed",r&&(o._parentTmpl=r);!f&&a.markup&&(f=s(a.markup))&&f.fn&&(f=f.markup);if(void 0!==f)return f.render||a.render?f.tmpls&&(c=f):(a=dt(f,o),yt(f.replace(j,"\\$&"),a)),c||function(t){var e,n,a;for(e in G)t[n=e+"s"]&&(a=t[n],t[n]={},i[n](a,t))}(c=Z((function(){return c.render.apply(c,arguments)}),a)),c}},tag:{compile:function(t,e,n){var a,r,o,i=new p._tg;function s(){this._={unlinked:!0},this.inline=!0,this.tagName=t}l(e)?e={depends:e.depends,render:e}:""+e===e&&(e={template:e});if(r=e.baseTag)for(o in e.flow=!!e.flow,(r=""+r===r?n&&n.tags[r]||m[r]:r)||ht('baseTag: "'+e.baseTag+'" not found'),i=Z(i,r),e)i[o]=J(r[o],e[o]);else i=Z(i,e);void 0!==(a=i.template)&&(i.template=""+a===a?d[a]||d(a):a);(s.prototype=i).constructor=i._ctr=s,n&&(i._parentTmpl=n);return i}},viewModel:{compile:function(t,n){var a,r,o,i=this,d=n.getters,u=n.extend,f=n.id,m=e.extend({_is:t||"unnamed",unmap:w,merge:A},u),p="",g="",h=d?d.length:0,v=e.observable,y={};function M(t){r.apply(this,t)}function b(){return new M(arguments)}function S(t,e){for(var n,a,r,o,s,l=0;l<h;l++)n=void 0,(r=d[l])+""!==r&&(r=(n=r).getter,s=n.parentRef),void 0===(o=t[r])&&n&&void 0!==(a=n.defaultVal)&&(o=lt(a,t)),e(o,n&&i[n.type],r,s)}function A(t,e,n){t=t+""===t?JSON.parse(t):t;var a,r,o,i,l,d,u,m,p,g,h=0,M=this;if(c(M)){for(u={},p=[],r=t.length,o=M.length;h<r;h++){for(m=t[h],d=!1,a=0;a<o&&!d;a++)u[a]||(l=M[a],f&&(u[a]=d=f+""===f?m[f]&&(y[f]?l[f]():l[f])===m[f]:f(l,m)));d?(l.merge(m),p.push(l)):(p.push(g=b.map(m)),n&&ct(g,n,e))}v?v(M).refresh(p,!0):M.splice.apply(M,[0,M.length].concat(p))}else for(i in S(t,(function(t,e,n,a){e?M[n]().merge(t,M,a):M[n]()!==t&&M[n](t)})),t)i===s||y[i]||(M[i]=t[i])}function w(){var t,e,n,a,r=0;function o(t){for(var e=[],n=0,a=t.length;n<a;n++)e.push(t[n].unmap());return e}if(c(this))return o(this);for(t={};r<h;r++)n=void 0,(e=d[r])+""!==e&&(e=(n=e).getter),a=this[e](),t[e]=n&&a&&i[n.type]?c(a)?o(a):a.unmap():a;for(e in this)!this.hasOwnProperty(e)||"_"===e.charAt(0)&&y[e.slice(1)]||e===s||l(this[e])||(t[e]=this[e]);return t}for(M.prototype=m,a=0;a<h;a++)!function(t){t=t.getter||t,y[t]=a+1;var e="_"+t;p+=(p?",":"")+t,g+="this."+e+" = "+t+";\n",m[t]=m[t]||function(n){if(!arguments.length)return this[e];v?v(this).setProperty(t,n):this[e]=n},v&&(m[t].set=m[t].set||function(t){this[e]=t})}(d[a]);return g=new Function(p,g),(r=function(){g.apply(this,arguments),(o=arguments[h+1])&&ct(this,arguments[h],o)}).prototype=m,m.constructor=r,b.map=function(e){e=e+""===e?JSON.parse(e):e;var n,a,r,o,i=0,l=e,u=[];if(c(e)){for(n=(e=e||[]).length;i<n;i++)u.push(this.map(e[i]));return u._is=t,u.unmap=w,u.merge=A,u}if(e){for(S(e,(function(t,e){e&&(t=e.map(t)),u.push(t)})),l=this.apply(this,u),i=h;i--;)if(r=u[i],(o=d[i].parentRef)&&r&&r.unmap)if(c(r))for(n=r.length;n--;)ct(r[n],o,l);else ct(r,o,l);for(a in e)a===s||y[a]||(l[a]=e[a])}return l},b.getters=d,b.extend=u,b.id=f,b}},helper:{},converter:{}};function Q(t,e){return function(){var n,a=this,r=a.base;return a.base=t,n=e.apply(a,arguments),a.base=r,n}}function J(t,e){return l(e)&&((e=Q(t?t._d?t:Q(Y,t):Y,e))._d=(t&&t._d||0)+1),e}function K(t,e){var n,a=e.props;for(n in a)!E.test(n)||t[n]&&t[n].fix||(t[n]="convert"!==n?J(t.constructor.prototype[n],a[n]):a[n])}function z(t){return t}function Y(){return""}function X(t){this.name=(e.link?"JsViews":"JsRender")+" Error",this.message=t||this.name}function Z(t,e){if(t){for(var n in e)t[n]=e[n];return t}}function tt(){var t=this.get("item");return t?t.index:void 0}function et(){return this.index}function nt(t,e,n,a){var r,o,i,s=0;if(1===n&&(a=1,n=void 0),e)for(i=(o=e.split(".")).length;t&&s<i;s++)r=t,t=o[s]?t[o[s]]:t;return n&&(n.lt=n.lt||s<i),void 0===t?a?Y:"":a?function(){return t.apply(r,arguments)}:t}function at(n,a,r){var o,i,s,c,d,u,m,g=this,h=!x&&arguments.length>1,v=g.ctx;if(n){if(g._||(d=g.index,g=g.tag),u=g,v&&v.hasOwnProperty(n)||(v=f).hasOwnProperty(n)){if(s=v[n],"tag"===n||"tagCtx"===n||"root"===n||"parentTags"===n)return s}else v=void 0;if((!x&&g.tagCtx||g.linked)&&(s&&s._cxp||(g=g.tagCtx||l(s)?g:!(g=g.scope||g).isTop&&g.ctx.tag||g,void 0!==s&&g.tagCtx&&(g=g.tagCtx.view.scope),v=g._ocps,(s=v&&v.hasOwnProperty(n)&&v[n]||s)&&s._cxp||!r&&!h||((v||(g._ocps=g._ocps||{}))[n]=s=[{_ocp:s,_vw:u,_key:n}],s._cxp={path:"_ocp",ind:0,updateValue:function(t,n){return e.observable(s[0]).setProperty("_ocp",t),this}})),c=s&&s._cxp)){if(arguments.length>2)return(i=s[1]?p._ceo(s[1].deps):["_ocp"]).unshift(s[0]),i._cxp=c,i;if(d=c.tagElse,m=s[1]?c.tag&&c.tag.cvtArgs?c.tag.cvtArgs(d,1)[c.ind]:s[1](s[0].data,s[0],p):s[0]._ocp,h)return p._ucp(n,a,g,c),g;s=m}return s&&l(s)&&Z(o=function(){return s.apply(this&&this!==t?this:u,arguments)},s),o||s}}function rt(t,e){var n,a,r,o,i,s,l,d=this;if(d.tagName){if(!(d=((s=d).tagCtxs||[d])[t||0]))return}else s=d.tag;if(i=s.bindFrom,o=d.args,(l=s.convert)&&""+l===l&&(l="true"===l?void 0:d.view.getRsc("converters",l)||ht("Unknown converter: '"+l+"'")),l&&!e&&(o=o.slice()),i){for(r=[],n=i.length;n--;)a=i[n],r.unshift(ot(d,a));e&&(o=r)}if(l){if(void 0===(l=l.apply(s,r||o)))return o;if(n=(i=i||[0]).length,c(l)&&l.length===n||(l=[l],i=[0],n=1),e)o=l;else for(;n--;)+(a=i[n])===a&&(o[a]=l[n])}return o}function ot(t,e){return(t=t[+e===e?"args":"props"])&&t[e]}function it(t){return this.cvtArgs(t,1)}function st(t,e,n,a,r,o,i,s){var l,c,d,u="array"===e;this.content=s,this.views=u?[]:{},this.data=a,this.tmpl=r,d=this._={key:0,useKey:u?0:1,id:""+L++,onRender:i,bnds:{}},this.linked=!!i,this.type=e||"top",n&&"top"!==n.type||((this.ctx=t||{}).root=this.data),(this.parent=n)?(this.root=n.root||this,l=n.views,c=n._,this.isTop=c.scp,this.scope=(!t.tag||t.tag===n.ctx.tag)&&!this.isTop&&n.scope||this,c.useKey?(l[d.key="_"+c.useKey++]=this,this.index=q,this.getIndex=tt):l.length===(d.key=this.index=o)?l.push(this):l.splice(o,0,this),this.ctx=t||n.ctx):e&&(this.root=this)}function lt(t,e){return l(t)?t.call(e):t}function ct(t,e,n){Object.defineProperty(t,e,{value:n,configurable:!0})}function dt(t,n){var a,r=h._wm||{},o={tmpls:[],links:{},bnds:[],_is:"template",render:pt};return n&&(o=Z(o,n)),o.markup=t,o.htmlTag||(a=R.exec(t),o.htmlTag=a?a[1].toLowerCase():""),(a=r[o.htmlTag])&&a!==r.div&&(o.markup=e.trim(o.markup)),o}function ut(t,e){var n=t+"s";i[n]=function a(r,o,s){var l,c,d,u=p.onStore[t];if(r&&"object"==typeof r&&!r.nodeType&&!r.markup&&!r.getTgt&&!("viewModel"===t&&r.getters||r.extend)){for(c in r)a(c,r[c],o);return o||i}return r&&""+r!==r&&(s=o,o=r,r=void 0),d=s?"viewModel"===t?s:s[n]=s[n]||{}:a,l=e.compile,void 0===o&&(o=l?r:d[r],r=void 0),null===o?r&&delete d[r]:(l&&((o=l.call(d,r,o,s,0)||{})._is=t),r&&(d[r]=o)),u&&u(r,o,s,l),o}}function ft(t){v[t]=v[t]||function(e){return arguments.length?(g[t]=e,v):g[t]}}function mt(t){function e(e,n){this.tgt=t.getTgt(e,n),n.map=this}return l(t)&&(t={getTgt:t}),t.baseMap&&(t=Z(Z({},t.baseMap),t)),t.map=function(t,n){return new e(t,n)},t}function pt(t,e,n,a,r,i){var s,d,u,f,m,g,v,y,M=a,b="";if(!0===e?(n=e,e=void 0):"object"!=typeof e&&(e=void 0),(u=this.tag)?(m=this,f=(M=M||m.view)._getTmpl(u.template||m.tmpl),arguments.length||(t=u.contentCtx&&l(u.contentCtx)?t=u.contentCtx(t):M)):f=this,f){if(!a&&t&&"view"===t._is&&(M=t),M&&t===M&&(t=M.data),g=!M,x=x||g,M||((e=e||{}).root=t),!x||h.useViews||f.useViews||M&&M!==o)b=gt(f,t,e,n,M,r,i,u);else{if(M?(v=M.data,y=M.index,M.index=q):(v=(M=o).data,M.data=t,M.ctx=e),c(t)&&!n)for(s=0,d=t.length;s<d;s++)M.index=s,M.data=t[s],b+=f.fn(t[s],M,p);else M.data=t,b+=f.fn(t,M,p);M.data=v,M.index=y}g&&(x=void 0)}return b}function gt(t,e,n,a,r,o,i,s){var l,d,u,f,m,g,h,v,y,M,b,S,A,w="";if(s&&(y=s.tagName,S=s.tagCtx,n=n?xt(n,s.ctx):s.ctx,t===r.content?h=t!==r.ctx._wrp?r.ctx._wrp:void 0:t!==S.content?t===s.template?(h=S.tmpl,n._wrp=S.content):h=S.content||r.content:h=r.content,!1===S.props.link&&((n=n||{}).link=!1)),r&&(i=i||r._.onRender,(A=n&&!1===n.link)&&r._.nl&&(i=void 0),n=xt(n,r.ctx),S=!s&&r.tag?r.tag.tagCtxs[r.tagElse]:S),(M=S&&S.props.itemVar)&&("~"!==M[0]&&vt("Use itemVar='~myItem'"),M=M.slice(1)),!0===o&&(g=!0,o=0),i&&s&&s._.noVws&&(i=void 0),v=i,!0===i&&(v=void 0,i=r._.onRender),b=n=t.helpers?xt(t.helpers,n):n,c(e)&&!a)for((u=g?r:void 0!==o&&r||new st(n,"array",r,e,t,o,i,h))._.nl=A,r&&r._.useKey&&(u._.bnd=!s||s._.bnd&&s,u.tag=s),l=0,d=e.length;l<d;l++)f=new st(b,"item",u,e[l],t,(o||0)+l,i,u.content),M&&((f.ctx=Z({},b))[M]=p._cp(e[l],"#data",f)),m=t.fn(e[l],f,p),w+=u._.onRender?u._.onRender(m,f):m;else u=g?r:new st(b,y||"data",r,e,t,o,i,h),M&&((u.ctx=Z({},b))[M]=p._cp(e,"#data",u)),u.tag=s,u._.nl=A,w+=t.fn(e,u,p);return s&&(u.tagElse=S.index,S.contentView=u),v?v(w,u):w}function ht(t){throw new p.Err(t)}function vt(t){ht("Syntax error\n"+t)}function yt(t,e,n,a,o){function i(e){(e-=h)&&A.push(t.substr(h,e).replace(k,"\\n"))}function s(e,n){e&&(e+="}}",vt((n?"{{"+n+"}} block has {{/"+e+" without {{"+e:"Unmatched or missing {{/"+e)+", in template:\n"+t))}var l,c,d,u,f,m=g.allowCode||e&&e.allowCode||!0===v.allowCode,p=[],h=0,M=[],A=p,w=[,,p];if(m&&e._is&&(e.allowCode=m),n&&(void 0!==a&&(t=t.slice(0,-a.length-2)+b),t=y+t+S),s(M[0]&&M[0][2].pop()[0]),t.replace(r,(function(r,l,c,f,p,g,v,y,b,S,x,C){(v&&l||b&&!c||y&&":"===y.slice(-1)||S)&&vt(r),g&&(p=":",f="html");var j,R,N,P=(l||n)&&[[]],F="",D="",I="",B="",L="",$="",U="",q="",V=!(b=b||n&&!o)&&!p;c=c||(y=y||"#data",p),i(C),h=C+r.length,v?m&&A.push(["*","\n"+y.replace(/^:/,"ret+= ").replace(T,"$1")+";\n"]):c?("else"===c&&(O.test(y)&&vt('For "{{else if expr}}" use "{{else expr}}"'),P=w[9]&&[[]],w[10]=t.substring(w[10],C),R=w[11]||w[0]||vt("Mismatched: "+r),w=M.pop(),A=w[2],V=!0),y&&At(y.replace(k," "),P,e,n).replace(_,(function(t,e,n,a,r,o,i,s){return"this:"===a&&(o="undefined"),s&&(N=N||"@"===s[0]),a="'"+r+"':",i?(D+=n+o+",",B+="'"+s+"',"):n?(I+=a+"j._cp("+o+',"'+s+'",view),',$+=a+"'"+s+"',"):e?U+=o:("trigger"===r&&(q+=o),"lateRender"===r&&(j="false"!==s),F+=a+o+",",L+=a+"'"+s+"',",u=u||E.test(r)),""})).slice(0,-1),P&&P[0]&&P.pop(),d=[c,f||!!a||u||"",V&&[],bt(B||(":"===c?"'#data',":""),L,$),bt(D||(":"===c?"data,":""),F,I),U,q,j,N,P||0],A.push(d),V&&(M.push(w),(w=d)[10]=h,w[11]=R)):x&&(s(x!==w[0]&&x!==w[11]&&x,w[0]),w[10]=t.substring(w[10],C),w=M.pop()),s(!w&&x),A=w[2]})),i(t.length),(h=p[p.length-1])&&s(""+h!==h&&+h[10]===h[10]&&h[0]),n){for(c=wt(p,t,n),f=[],l=p.length;l--;)f.unshift(p[l][9]);Mt(c,f)}else c=wt(p,e);return c}function Mt(t,e){var n,a,r=0,o=e.length;for(t.deps=[],t.paths=[];r<o;r++)for(n in t.paths.push(a=e[r]),a)"_jsvto"!==n&&a.hasOwnProperty(n)&&a[n].length&&!a[n].skp&&(t.deps=t.deps.concat(a[n]))}function bt(t,e,n){return[t.slice(0,-1),e.slice(0,-1),n.slice(0,-1)]}function St(t,e){return"\n\t"+(e?e+":{":"")+"args:["+t[0]+"],\n\tprops:{"+t[1]+"}"+(t[2]?",\n\tctx:{"+t[2]+"}":"")}function At(t,e,n,a){var r,i,s,l,c,d=e&&e[0],u={bd:d},f={0:u},m=0,g=(n?n.links:d&&(d.links=d.links||{}))||o.tmpl.links,h=0,v={},y={};return"@"===t[0]&&(t=t.replace(B,".")),c=(t+(n?" ":"")).replace(p.rPrm,(function(o,c,S,A,w,x,C,k,T,j,_,O,R,N,E,P,F,D,I,B,L){A&&!k&&(w=A+w),x=x||"",S=S||c||R,w=w||T,j&&(j=!/\)|]/.test(L[B-1]))&&(w=w.slice(1).split(".").join("^"));var $,U,q,V,H,W=")";if("["===(_=_||D||"")&&(_="[j._sq(",W=")]"),!C||l||s){if(d&&F&&!l&&!s&&h&&($=y[h-1],L.length-1>B-($||0))){if($=L.slice($,B+o.length),!0!==U)if(q=i||f[h-1].bd,(V=q[q.length-1])&&V.prm){for(;V.sb&&V.sb.prm;)V=V.sb;H=V.sb={path:V.sb,bnd:V.bnd}}else q.push(H={path:q.pop()});(U=g[F=M+":"+$+" onerror=''"+b])||(g[F]=!0,g[F]=U=yt(F,n,!0)),!0!==U&&H&&(H._cpfn=U,H.prm=u.bd,H.bnd=H.bnd||H.path&&H.path.indexOf("^")>=0)}return l?(l=!N)?o:R+'"':s?(s=!E)?o:R+'"':(S?(y[h]=B++,u=f[++h]={bd:[]},S):"")+(I?h?"":(m=L.slice(m,B),(r?(r=i=!1,"\b"):"\b,")+m+(m=B+o.length,d&&e.push(u.bd=[]),"\b")):k?(h&&vt(t),d&&e.pop(),r="_"+w,A,m=B+o.length,d&&((d=u.bd=e[r]=[]).skp=!A),w+":"):w?w.split("^").join(".").replace(p.rPath,(function(t,n,o,s,l,c,f,m){var p="."===o;if(o&&(w=w.slice(n.length),/^\.?constructor$/.test(m||w)&&vt(t),p||(t=(j?(a?"":"(ltOb.lt=ltOb.lt||")+"(ob=":"")+(s?'view.ctxPrm("'+s+'")':l?"view":"data")+(j?")===undefined"+(a?"":")")+'?"":view._getOb(ob,"':"")+(m?(c?"."+c:s||l?"":"."+o)+(f||""):(m=s?"":l?c||"":o,"")),t=n+("view.data"===(t+=m?"."+m:"").slice(0,9)?t.slice(5):t)+(j?(a?'"':'",ltOb')+(_?",1)":")"):"")),d)){if(q="_linkTo"===r?i=e._jsvto=e._jsvto||[]:u.bd,V=p&&q[q.length-1]){if(V._cpfn){for(;V.sb;)V=V.sb;V.bnd&&(w="^"+w.slice(1)),V.sb=w,V.bnd=V.bnd||"^"===w[0]}}else q.push(w);y[h]=B+(p?1:0)}return t}))+(_?(u=f[++h]={bd:[]},v[h]=W,_):x):x||(P?(P=v[h]||P,v[h]=!1,u=f[--h],P+(_?(u=f[++h],v[h]=W,_):"")):O?(v[h]||vt(t),","):c?"":(l=N,s=E,'"')))}vt(t)})),!h&&c||vt(t)}function wt(t,e,n){var a,r,o,i,s,l,c,d,u,f,p,v,y,M,b,S,A,w,x,C,j,_,O,R,N,E,P,F,D,I,B,L,$=0,U=h.useViews||e.useViews||e.tags||e.templates||e.helpers||e.converters,q="",V={},H=t.length;for(""+e===e?(A=n?'data-link="'+e.replace(k," ").slice(1,-1)+'"':e,e=0):(A=e.tmplName||"unnamed",e.allowCode&&(V.allowCode=!0),e.debug&&(V.debug=!0),f=e.bnds,S=e.tmpls),a=0;a<H;a++)if(""+(r=t[a])===r)q+='\n+"'+r+'"';else if("*"===(o=r[0]))q+=";\n"+r[1]+"\nret=ret";else{if(i=r[1],C=!n&&r[2],s=St(r[3],"params")+"},"+St(v=r[4]),D=r[6],I=r[7],r[8]?(B="\nvar ob,ltOb={},ctxs=",L=";\nctxs.lt=ltOb.lt;\nreturn ctxs;"):(B="\nreturn ",L=""),j=r[10]&&r[10].replace(T,"$1"),(R="else"===o)?p&&p.push(r[9]):(P=r[5]||!1!==g.debugMode&&"undefined",f&&(p=r[9])&&(p=[p],$=f.push(1))),U=U||v[1]||v[2]||p||/view.(?!index)/.test(v[0]),(N=":"===o)?i&&(o="html"===i?">":i+o):(C&&((w=dt(j,V)).tmplName=A+"/"+o,w.useViews=w.useViews||U,wt(C,w),U=w.useViews,S.push(w)),R||(x=o,U=U||o&&(!m[o]||!m[o].flow),O=q,q=""),_=(_=t[a+1])&&"else"===_[0]),F=P?";\ntry{\nret+=":"\n+",y="",M="",N&&(p||D||i&&"html"!==i||I)){if((E=new Function("data,view,j,u","// "+A+" "+ ++$+" "+o+B+"{"+s+"};"+L))._er=P,E._tag=o,E._bd=!!p,E._lr=I,n)return E;Mt(E,p),u=!0,y=(b='c("'+i+'",view,')+$+",",M=")"}if(q+=N?(n?(P?"try{\n":"")+"return ":F)+(u?(u=void 0,U=d=!0,b+(E?(f[$-1]=E,$):"{"+s+"}")+")"):">"===o?(c=!0,"h("+v[0]+")"):(!0,"((v="+v[0]+")!=null?v:"+(n?"null)":'"")'))):(l=!0,"\n{view:view,content:false,tmpl:"+(C?S.length:"false")+","+s+"},"),x&&!_){if(q="["+q.slice(0,-1)+"]",b='t("'+x+'",view,this,',n||p){if((q=new Function("data,view,j,u"," // "+A+" "+$+" "+x+B+q+L))._er=P,q._tag=x,p&&Mt(f[$-1]=q,p),q._lr=I,n)return q;y=b+$+",undefined,",M=")"}q=O+F+b+(p&&$||q)+")",p=0,x=0}P&&!_&&(U=!0,q+=";\n}catch(e){ret"+(n?"urn ":"+=")+y+"j._err(e,view,"+P+")"+M+";}"+(n?"":"ret=ret"))}q="// "+A+(V.debug?"\ndebugger;":"")+"\nvar v"+(l?",t=j._tag":"")+(d?",c=j._cnvt":"")+(c?",h=j._html":"")+(n?(r[8]?", ob":"")+";\n":',ret=""')+q+(n?"\n":";\nreturn ret;");try{q=new Function("data,view,j,u",q)}catch(t){vt("Compiled template code:\n\n"+q+'\n: "'+(t.message||t)+'"')}return e&&(e.fn=q,e.useViews=!!U),q}function xt(t,e){return t&&t!==e?e?Z(Z({},e),t):t:e&&Z({},e)}function Ct(t,n){var a,r,o,i=n.tag,s=n.props,d=n.params.props,u=s.filter,f=s.sort,m=!0===f,p=parseInt(s.step),g=s.reverse?-1:1;if(!c(t))return t;if(m||f&&""+f===f?((a=t.map((function(t,e){return{i:e,v:""+(t=m?t:nt(t,f))===t?t.toLowerCase():t}}))).sort((function(t,e){return t.v>e.v?g:t.v<e.v?-g:0})),t=a.map((function(e){return t[e.i]}))):(f||g<0)&&!i.dataMap&&(t=t.slice()),l(f)&&(t=t.sort((function(){return f.apply(n,arguments)}))),g<0&&(!f||l(f))&&(t=t.reverse()),t.filter&&u&&(t=t.filter(u,n),n.tag.onFilter&&n.tag.onFilter(n)),d.sorted&&(a=f||g<0?t:t.slice(),i.sorted?e.observable(i.sorted).refresh(a):n.map.sorted=a),r=s.start,o=s.end,(d.start&&void 0===r||d.end&&void 0===o)&&(r=o=0),isNaN(r)&&isNaN(o)||(r=+r||0,o=void 0===o||o>t.length?t.length:+o,t=t.slice(r,o)),p>1){for(r=0,o=t.length,a=[];r<o;r+=p)a.push(t[r]);t=a}return d.paged&&i.paged&&$observable(i.paged).refresh(t),t}function kt(t,n,a){var r=this.jquery&&(this[0]||ht("Unknown template")),o=r.getAttribute("data-jsv-tmpl");return pt.call(o&&e.data(r).jsvTmpl||d(r),t,n,a)}function Tt(t){return $[t]||($[t]="&#"+t.charCodeAt(0)+";")}function jt(t,e){return U[e]||""}function _t(t){return null!=t?N.test(t)&&(""+t).replace(F,Tt)||t:""}if(i={jsviews:C,sub:{rPath:/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rPrm:/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,View:st,Err:X,tmplFn:yt,parse:At,extend:Z,extendCtx:xt,syntaxErr:vt,onStore:{template:function(t,e){null===e?delete V[t]:t&&(V[t]=e)}},addSetting:ft,settings:{allowCode:!1},advSet:Y,_thp:K,_gm:J,_tg:function(){},_cnvt:function(t,e,n,a){var r,o,i,s,l,c="number"==typeof n&&e.tmpl.bnds[n-1];void 0===a&&c&&c._lr&&(a="");void 0!==a?n=a={props:{},args:[a]}:c&&(n=c(e.data,e,p));if(c=c._bd&&c,t||c){if(o=e._lc,r=o&&o.tag,n.view=e,!r){if(r=Z(new p._tg,{_:{bnd:c,unlinked:!0,lt:n.lt},inline:!o,tagName:":",convert:t,onArrayChange:!0,flow:!0,tagCtx:n,tagCtxs:[n],_is:"tag"}),(s=n.args.length)>1)for(l=r.bindTo=[];s--;)l.unshift(s);o&&(o.tag=r,r.linkCtx=o),n.ctx=xt(n.ctx,(o?o.view:e).ctx),K(r,n)}r._er=a&&i,r.ctx=n.ctx||r.ctx||{},n.ctx=void 0,i=r.cvtArgs()[0],r._er=a&&i}else i=n.args[0];return null!=(i=c&&e._.onRender?e._.onRender(i,e,r):i)?i:""},_tag:function(t,e,n,a,r,i){function s(t){var e=l[t];if(void 0!==e)for(e=c(e)?e:[e],v=e.length;v--;)D=e[v],isNaN(parseInt(D))||(e[v]=parseInt(D));return e||[0]}var l,d,f,m,g,h,v,y,M,b,S,A,w,x,C,k,T,j,_,O,R,N,E,F,D,I,B,L,$,U=0,q="",V=(e=e||o)._lc||!1,H=e.ctx,W=n||e.tmpl,G="number"==typeof a&&e.tmpl.bnds[a-1];"tag"===t._is?(t=(l=t).tagName,a=l.tagCtxs,l.template):(d=e.getRsc("tags",t)||ht("Unknown tag: {{"+t+"}} "),d.template);void 0===i&&G&&(G._lr=d.lateRender&&!1!==G._lr||G._lr)&&(i="");void 0!==i?(q+=i,a=i=[{props:{},args:[],params:{props:{}}}]):G&&(a=G(e.data,e,p));for(h=a.length;U<h;U++)b=a[U],k=b.tmpl,(!V||!V.tag||U&&!V.tag.inline||l._er||k&&+k===k)&&(k&&W.tmpls&&(b.tmpl=b.content=W.tmpls[k-1]),b.index=U,b.ctxPrm=at,b.render=pt,b.cvtArgs=rt,b.bndArgs=it,b.view=e,b.ctx=xt(xt(b.ctx,d&&d.ctx),H)),(n=b.props.tmpl)&&(b.tmpl=e._getTmpl(n),b.content=b.content||b.tmpl),l?V&&V.fn._lr&&(T=!!l.init):(l=new d._ctr,T=!!l.init,l.parent=g=H&&H.tag,l.tagCtxs=a,V&&(l.inline=!1,V.tag=l),l.linkCtx=V,(l._.bnd=G||V.fn)?(l._.ths=b.params.props.this,l._.lt=a.lt,l._.arrVws={}):l.dataBoundOnly&&ht(t+" must be data-bound:\n{^{"+t+"}}")),E=l.dataMap,b.tag=l,E&&a&&(b.map=a[U].map),l.flow||(S=b.ctx=b.ctx||{},f=l.parents=S.parentTags=H&&xt(S.parentTags,H.parentTags)||{},g&&(f[g.tagName]=g),f[l.tagName]=S.tag=l,S.tagCtx=b);if(!(l._er=i)){for(K(l,a[0]),l.rendering={rndr:l.rendering},U=0;U<h;U++){if(b=l.tagCtx=a[U],N=b.props,l.ctx=b.ctx,!U){if(T&&(l.init(b,V,l.ctx),T=void 0),b.args.length||!1===b.argDefault||!1===l.argDefault||(b.args=O=[b.view.data],b.params.args=["#data"]),w=s("bindTo"),void 0!==l.bindTo&&(l.bindTo=w),void 0!==l.bindFrom?l.bindFrom=s("bindFrom"):l.bindTo&&(l.bindFrom=l.bindTo=w),x=l.bindFrom||w,B=w.length,I=x.length,l._.bnd&&(L=l.linkedElement)&&(l.linkedElement=L=c(L)?L:[L],B!==L.length&&ht("linkedElement not same length as bindTo")),(L=l.linkedCtxParam)&&(l.linkedCtxParam=L=c(L)?L:[L],I!==L.length&&ht("linkedCtxParam not same length as bindFrom/bindTo")),x)for(l._.fromIndex={},l._.toIndex={},y=I;y--;)for(D=x[y],v=B;v--;)D===w[v]&&(l._.fromIndex[v]=y,l._.toIndex[y]=v);V&&(V.attr=l.attr=V.attr||l.attr||V._dfAt),m=l.attr,l._.noVws=m&&"html"!==m}if(O=l.cvtArgs(U),l.linkedCtxParam)for(R=l.cvtArgs(U,1),v=I,$=l.constructor.prototype.ctx;v--;)(A=l.linkedCtxParam[v])&&(D=x[v],C=R[v],b.ctx[A]=p._cp($&&void 0===C?$[A]:C,void 0!==C&&ot(b.params,D),b.view,l._.bnd&&{tag:l,cvt:l.convert,ind:v,tagElse:U}));(j=N.dataMap||E)&&(O.length||N.dataMap)&&((_=b.map)&&_.src===O[0]&&!r||(_&&_.src&&_.unmap(),j.map(O[0],b,_,!l._.bnd),_=b.map),O=[_.tgt]),M=void 0,l.render&&(M=l.render.apply(l,O),e.linked&&M&&!P.test(M)&&((n={links:[]}).render=n.fn=function(){return M},M=gt(n,e.data,void 0,!0,e,void 0,void 0,l))),O.length||(O=[e]),void 0===M&&(F=O[0],l.contentCtx&&(F=!0===l.contentCtx?e:l.contentCtx(F)),M=b.render(F,!0)||(r?void 0:"")),q=q?q+(M||""):void 0!==M?""+M:void 0}l.rendering=l.rendering.rndr}l.tagCtx=a[0],l.ctx=l.tagCtx.ctx,l._.noVws&&l.inline&&(q="text"===m?u.html(q):"");return G&&e._.onRender?e._.onRender(q,e,l):q},_er:ht,_err:function(t,e,n){var a=void 0!==n?l(n)?n.call(e.data,t,e):n||"":"{Error: "+(t.message||t)+"}";g.onError&&void 0!==(n=g.onError.call(e.data,t,n&&a,e))&&(a=n);return e&&!e._lc?u.html(a):a},_cp:z,_sq:function(t){return"constructor"===t&&vt(""),t}},settings:{delimiters:function t(e,n,a){if(!e)return g.delimiters;if(c(e))return t.apply(i,e);A=a?a[0]:A,/^(\W|_){5}$/.test(e+n+A)||ht("Invalid delimiters");return y=e[0],M=e[1],b=n[0],S=n[1],g.delimiters=[y+M,b+S,A],e="\\"+y+"(\\"+A+")?\\"+M,n="\\"+b+"\\"+S,r="(?:(\\w+(?=[\\/\\s\\"+b+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+b+"]|\\"+b+"(?!\\"+S+"))*?)",p.rTag="(?:"+r+")",r=new RegExp("(?:"+e+r+"(\\/)?|\\"+y+"(\\"+A+")?\\"+M+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+n,"g"),p.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+e+".*"+n),v},advanced:function(t){return t?(Z(h,t),p.advSet(),v):h}},map:mt},(X.prototype=new Error).constructor=X,tt.depends=function(){return[this.get("item"),"index"]},et.depends="index",st.prototype={get:function(t,e){e||!0===t||(e=t,t=void 0);var n,a,r,o,i=this,s="root"===e;if(t){if(!(o=e&&i.type===e&&i))if(n=i.views,i._.useKey){for(a in n)if(o=e?n[a].get(t,e):n[a])break}else for(a=0,r=n.length;!o&&a<r;a++)o=e?n[a].get(t,e):n[a]}else if(s)o=i.root;else if(e)for(;i&&!o;)o=i.type===e?i:void 0,i=i.parent;else o=i.parent;return o||void 0},getIndex:et,ctxPrm:at,getRsc:function(t,e){var n,a,r=this;if(""+e===e){for(;void 0===n&&r;)n=(a=r.tmpl&&r.tmpl[t])&&a[e],r=r.parent;return n||i[t][e]}},_getTmpl:function(t){return t&&(t.fn?t:this.getRsc("templates",t)||d(t))},_getOb:nt,_is:"view"},p=i.sub,v=i.settings,!(H||e&&e.render)){for(a in G)ut(a,G[a]);if(u=i.converters,f=i.helpers,m=i.tags,p._tg.prototype={baseApply:function(t){return this.base.apply(this,t)},cvtArgs:rt,bndArgs:it,ctxPrm:at},o=p.topView=new st,e){if(e.fn.render=kt,s=e.expando,e.observable){if(C!==(C=e.views.jsviews))throw"JsObservable requires JsRender "+C;Z(p,e.views.sub),i.map=e.views.map}}else e={},n&&(t.jsrender=e),e.renderFile=e.__express=e.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},e.isFunction=function(t){return"function"==typeof t},e.isArray=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},p._jq=function(t){t!==e&&(Z(t,e),(e=t).fn.render=kt,delete e.jsrender,s=e.expando)},e.jsrender=C;for(w in(g=p.settings).allowCode=!1,l=e.isFunction,e.render=V,e.views=i,e.templates=d=i.templates,g)ft(w);(v.debugMode=function(t){return void 0===t?g.debugMode:(g.debugMode=t,g.onError=t+""===t?function(){return t}:l(t)?t:void 0,v)})(!1),h=g.advanced={useViews:!1,_jsv:!1},m({if:{render:function(t){var e=this.tagCtx;return this.rendering.done||!t&&(e.args.length||!e.index)?"":(this.rendering.done=!0,void(this.selected=e.index))},contentCtx:!0,flow:!0},for:{sortDataMap:mt(Ct),init:function(t,e){this.setDataMap(this.tagCtxs)},render:function(t){var e,n,a,r,o,i=this.tagCtx,s=!1===i.argDefault,l=i.props,d=s||i.args.length,u="",f=0;if(!this.rendering.done){if(e=d?t:i.view.data,s)for(s=l.reverse?"unshift":"push",r=+l.end,o=+l.step||1,e=[],a=+l.start||0;(r-a)*o>0;a+=o)e[s](a);void 0!==e&&(n=c(e),u+=i.render(e,!d||l.noIteration),f+=n?e.length:1),(this.rendering.done=f)&&(this.selected=i.index)}return u},setDataMap:function(t){for(var e,n,a,r=t.length;r--;)n=(e=t[r]).props,a=e.params.props,e.argDefault=void 0===n.end||e.args.length>0,n.dataMap=!1!==e.argDefault&&c(e.args[0])&&(a.sort||a.start||a.end||a.step||a.filter||a.reverse||n.sort||n.start||n.end||n.step||n.filter||n.reverse)&&this.sortDataMap},flow:!0},props:{baseTag:"for",dataMap:mt((function(t,n){var a,r,o=n.map,i=o&&o.propsArr;if(!i){if(i=[],"object"==typeof t||l(t))for(a in t)r=t[a],a===s||!t.hasOwnProperty(a)||n.props.noFunctions&&e.isFunction(r)||i.push({key:a,prop:r});o&&(o.propsArr=o.options&&i)}return Ct(i,n)})),init:Y,flow:!0},include:{flow:!0},"*":{render:z,flow:!0},":*":{render:z,flow:!0},dbg:f.dbg=u.dbg=function(t){try{throw console.log("JsRender dbg breakpoint: "+t),"dbg breakpoint"}catch(t){}return this.base?this.baseApply(arguments):t}}),u({html:_t,attr:_t,encode:function(t){return""+t===t?t.replace(D,Tt):t},unencode:function(t){return""+t===t?t.replace(I,jt):t},url:function(t){return null!=t?encodeURI(""+t):null===t?t:""}})}return g=p.settings,c=(e||H).isArray,v.delimiters("{{","}}","^"),W&&H.views.sub._jq(e),e||H}),window)},function(t,e){var n=MyAMS.$,a=n.templates({markup:'\n\t<span class="custom-control custom-switch">\n\t\t<input type="checkbox"\n\t\t\t   id="{{: fieldId }}" name="{{: fieldName }}"\n\t\t\t   class="custom-control-input checker"\n\t\t\t   {{if checked}}checked{{/if}}\n\t\t\t   {{if readonly}}disabled{{/if}}\n\t\t\t   value="{{: value }}" />\n\t\t{{if prefix}}\n\t\t<input type="hidden" class="prefix"\n\t\t\t   id="{{: prefix}}{{: fieldName}}_prefix"\n\t\t\t   name="{{: prefix}}{{: fieldName}}"\n\t\t\t   value="{{if state===\'on\'}}{{: checkedValue}}{{else}}{{: uncheckedValue}}{{/if}}" />\n\t\t{{else marker}}\n\t\t<input type="hidden" class="marker"\n\t\t\t   name="{{: fieldName}}{{: marker}}"\n\t\t\t   value="1" />\n\t\t{{/if}}\n\t\t<label for="{{: fieldId }}"\n\t\t\t   class="custom-control-label">\n\t\t\t{{: legend }}\n\t\t</label>\n\t</span>\n'});var r=function(t){var e=[];t.parent().find("ul.select2-selection__rendered").children("li[title]").each((function(n,a){e.push(t.children('option[data-content="'.concat(a.title,'"]')).attr("value"))})),t.data("select2-target").val(e.join(t.data("ams-select2-separator")||","))};window.MyAMS&&(MyAMS.registry.register((function(t){n("legend.checker",t).each((function(t,e){var r=n(e),o=r.data();if(!o.amsChecker){var i=r.parent("fieldset"),s=i.hasClass("switched")||"on"===o.amsCheckerState,l=o.amsCheckerFieldname||"checker_".concat(MyAMS.core.generateId()),c=l.replace(/\./g,"_"),d=o.amsCheckerHiddenPrefix,u=o.amsCheckerMarker||!1,f=o.amsCheckerMode||"hide",m=o.amsCheckerValueOn||"true",p=o.amsCheckerValueOff||"false",g={legend:r.text(),fieldName:l,fieldId:c,value:o.amsCheckerValue||!0,checked:s,readonly:o.amsCheckerReadonly,prefix:d,state:o.amsCheckerState,checkedValue:m,uncheckedValue:p,marker:u};r.html(a.render(g)),n("input",r).change((function(t){var e=n(t.target),a=e.is(":checked"),s={veto:!1};if(r.trigger("before-switch.myams.checker",[r,s]),s.veto)e.prop("checked",!a);else if(MyAMS.core.executeFunctionByName(o.amsCheckerChangeHandler,document,r,a),!o.amsCheckerCancelDefault){var l=e.siblings(".prefix");"hide"===f?a?(i.removeClass("switched"),l.val(m),r.trigger("opened.myams.checker",[r])):(i.addClass("switched"),l.val(p),r.trigger("closed.myams.checker",[r])):(i.prop("disabled",!a),l.val(a?m:p))}})),r.closest("form").on("reset",(function(t){var e=n(".checker",r);e.prop("checked")!==s&&e.click()})),s||("hide"===f?i.addClass("switched"):i.prop("disabled",!0)),r.data("ams-checker",!0)}}))}),"checker"),MyAMS.registry.register((function(t){var e=n(".context-menu",t);e.length>0&&MyAMS.require("menu").then((function(){e.each((function(t,e){var a=n(e),r=a.data(),o={menuSelector:r.amsContextmenuSelector||r.amsMenuSelector},i=n.extend({},o,r.amsContextmenuOptions||r.amsOptions);i=MyAMS.core.executeFunctionByName(r.amsContextmenuinitCallback||r.amsInit,a,i)||i;var s=a.contextMenu(i);MyAMS.core.executeFunctionByName(r.amsContextmenuAfterInitCallback||r.amsAfterinit,a,s,i)}))}))}),"contextMenu"),MyAMS.registry.register((function(t){var e=n(".custom-file-input",t);e.length>0&&MyAMS.require("ajax").then((function(){MyAMS.ajax.check(window.bsCustomFileInput,"".concat(MyAMS.env.baseURL,"../ext/bs-custom-file-input").concat(MyAMS.env.extext,".js")).then((function(){n(e).each((function(t,e){var a=n(e),r=a.attr("id"),o=r?"#".concat(r):a.attr("name"),i=n(e.form),s=i.attr("id"),l=s?"#".concat(s):i.attr("name");bsCustomFileInput.init(o,l)}))}))}))}),"fileInput"),MyAMS.registry.register((function(t){var e=n(".select2",t);e.length>0&&MyAMS.require("ajax","helpers").then((function(){MyAMS.ajax.check(n.fn.select2,"".concat(MyAMS.env.baseURL,"../ext/select2/select2").concat(MyAMS.env.extext,".js")).then((function(t){var a=[];t&&(a.push(MyAMS.core.getScript("".concat(MyAMS.env.baseURL,"../ext/select2/i18n/").concat(MyAMS.i18n.language,".js"))),a.push(MyAMS.core.getCSS("".concat(MyAMS.env.baseURL,"../../css/ext/select2").concat(MyAMS.env.extext,".css"),"select2")),a.push(MyAMS.core.getCSS("".concat(MyAMS.env.baseURL,"../../css/ext/select2-bootstrap4").concat(MyAMS.env.extext,".css"),"select2_bs4"))),n.when.apply(n,a).then((function(){e.each((function(t,e){var a=n(e),o=a.data();if(!o.select2){var i={theme:"bootstrap4",language:MyAMS.i18n.language};if(a.hasClass("sortable")){var s=n('<input type="hidden" name="'.concat(a.attr("name"),'">')).insertAfter(a);s.val(n("option:selected",a).listattr("value").join(o.amsSelect2Separator||",")),a.data("select2-target",s).removeAttr("name"),i.templateSelection=function(t,e){var a=n(t.element);return a.attr("data-content",a.html()),t.text}}var l=n.extend({},i,o.amsSelect2Options||o.amsOptions);l=MyAMS.core.executeFunctionByName(o.amsSelect2InitCallback||o.amsInit,a,l)||l;var c=a.select2(l);a.on("select2:opening select2:selecting select2:unselecting select2:clearing",(function(t){if(n(t.target).is(":disabled"))return!1})),a.on("select2:opening",(function(t){var e=n(t.currentTarget).parents(".modal").first();if(e.exists()){var a=parseInt(e.css("z-index"));c.data("select2").$dropdown.css("z-index",a+1)}})),a.hasClass("sortable")&&MyAMS.ajax.check(n.fn.sortable,"".concat(MyAMS.env.baseURL,"../ext/jquery-ui").concat(MyAMS.env.extext,".js")).then((function(){a.parent().find("ul.select2-selection__rendered").sortable({containment:"parent",update:function(){r(a)}}),a.on("select2:select select2:unselect",(function(t){var e=t.params.data.id,a=n(t.currentTarget),o=a.children('option[value="'.concat(e,'"]'));MyAMS.helpers.moveElementToParentEnd(o),a.trigger("change"),r(a)}))})),MyAMS.core.executeFunctionByName(o.amsSelect2AfterInitCallback||o.amsAfterInit,a,c,l)}}))}))}))}))}),"select2"),MyAMS.registry.register((function(t){var e=n(".svg-container",t);e.length>0&&e.each((function(t,e){var a=n(e),r=n("svg",a),o=r.attr("width"),i=r.attr("height");o&&i&&e.setAttribute("viewBox","0 0 "+Math.round(parseFloat(o))+" "+Math.round(parseFloat(i))),r.attr("width","100%").attr("height","auto")}))}),"svg"),MyAMS.registry.register((function(t){n("legend.switcher",t).each((function(t,e){var a=n(e),r=a.parent("fieldset"),o=a.data(),i=o.amsSwitcherMinusClass||o.amsMinusClass||"minus",s=o.amsSwitcherPlusClass||o.amsPlusClass||"plus";o.amsSwitcher||(n('<i class="fa fa-'.concat("open"===o.amsSwitcherState?i:s,' mr-2"></i>')).prependTo(a),a.on("click",(function(t){t.preventDefault();var e={};if(a.trigger("before-switch.myams.switcher",[a,e]),!e.veto)if(r.hasClass("switched")){r.removeClass("switched"),MyAMS.core.switchIcon(n("i",a),s,i),a.trigger("opened.myams.switcher",[a]);var o=a.attr("id");o&&n('legend.swicther[data-ams-switcher-sync="'.concat(o,'"]'),r).each((function(t,e){var a=n(e);a.parents("fieldset").hasClass("switched")&&a.click()}))}else r.addClass("switched"),MyAMS.core.switchIcon(n("i",a),i,s),a.trigger("closed.myams.switcher",[a])})),"open"!==o.amsSwitcherState&&r.addClass("switched"),a.data("ams-switcher",!0))}))}),"switcher"),MyAMS.registry.register((function(t){var e=n("form:not([novalidate])",t);e.length>0&&MyAMS.require("ajax","i18n").then((function(){MyAMS.ajax.check(n.fn.validate,"".concat(MyAMS.env.baseURL,"../ext/validate/jquery-validate").concat(MyAMS.env.extext,".js")).then((function(t){t&&"en"!==MyAMS.i18n.language&&MyAMS.core.getScript("".concat(MyAMS.env.baseURL,"../ext/validate/i18n/messages_").concat(MyAMS.i18n.language).concat(MyAMS.env.extext,".js")).then((function(){})),e.each((function(t,e){var a=n(e),r=a.data(),o={ignore:null,invalidHandler:MyAMS.core.getFunctionByName(r.amsValidateInvalidHandler)||function(t,e){n("span.is-invalid",a).remove(),n(".is-invalid",a).removeClass("is-invalid");var r=!0,o=!1,i=void 0;try{for(var s,l=e.errorList[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value,d=n(c.element),u=d.parents(".tab-pane");d.parents("fieldset.switched").each((function(t,e){n("legend.switcher",e).click()})),u.each((function(t,e){var a=n(e),r=a.parents(".tab-content").siblings(".nav-tabs");n("li:nth-child(".concat(a.index()+1,")"),r).addClass("is-invalid"),n("li.is-invalid:first a",r).click()}))}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}},errorElement:r.amsValidateErrorElement||"span",errorClass:r.amsValidateErrorClass||"is-invalid",errorPlacement:MyAMS.core.getFunctionByName(r.amsvalidateErrorPlacement)||function(t,e){t.addClass("invalid-feedback"),e.closest(".form-widget").append(t)},submitHandler:MyAMS.core.getFunctionByName(r.amsValidateSubmitHandler)||(void 0!==a.attr("data-async")?function(){MyAMS.require("form").then((function(){MyAMS.form.submit(a)}))}:function(){a.get(0).submit()})};n("[data-ams-validate-rules]",a).each((function(t,e){0===t&&(o.rules={}),o.rules[n(e).attr("name")]=n(e).data("ams-validate-rules")})),n("[data-ams-validate-messages]",a).each((function(t,e){0===t&&(o.messages={}),o.messages[n(e).attr("name")]=n(e).data("ams-validate-messages")}));var i=n.extend({},o,r.amsValidateOptions||r.amsOptions);i=MyAMS.core.executeFunctionByName(r.amsValidateInitCallback||r.amsInit,a,i)||i;var s=a.validate(i);MyAMS.core.executeFunctionByName(r.amsValidateAfterInitCallback||r.amsAfterInit,a,s,i)}))}))}))}),"validate"),MyAMS.config.modules.push("plugins"),MyAMS.env.bundle||console.debug("MyAMS: plugins module loaded..."))},function(t,e,n){"use strict";function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.r(e);var l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(o(this,t),"object"===r(e)){if(a=n=e,!n.hasOwnProperty("name"))throw"Missing plug-in name!";e=n.name}this.name=e,this.src=n.src,this.css=n.css,this.callbacks=[],n.callback&&this.callbacks.push({callback:n.callback,context:n.context||"body"}),this.async=void 0===n.async||n.async,this.loaded=a}return s(t,[{key:"extend",value:function(t){return $.extend(this,t)}},{key:"load",value:function(){var t=this;return new Promise((function(e,n){if(t.loaded)e();else{var a=MyAMS.core.getScript(t.src);t.css&&(a=a.then((function(){MyAMS.core.getCSS(t.css,"".concat(t.name,"_css"))}))),a.then((function(){t.loaded=!0,e()}))}}))}},{key:"run",value:function(t){var e=!0,n=!1,a=void 0;try{for(var r,o=this.callbacks[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;"string"==typeof i.callback&&(console.debug("Resolving callback ".concat(i.callback)),i.callback=MyAMS.core.getFunctionByName(i.callback)||i.callback),i.callback(t,i.context)}}catch(t){n=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw a}}}}]),t}(),c=new(function(){function t(){o(this,t),this.plugins=new Map}return s(t,[{key:"register",value:function(t,e){!e&&t.hasOwnProperty("name")&&(e=t.name);var n=this.plugins;return n.has(e)?(window.console&&console.debug&&console.debug("Plug-in ".concat(e," is already registered!")),n.get(e)):("function"==typeof t?n.set(e,new l(e,{callback:t},!0)):"object"===r(t)&&n.set(e,new l(e,t,!Boolean(t.src))),n.get(e))}},{key:"load",value:function(t){var e=this,n=[],a=[];$("[data-ams-plugins]",t).each((function(t,r){var o,i,s=$(r),l=s.data("ams-plugins");if("string"==typeof l){var c=!0,d=!1,u=void 0;try{for(var f,m=l.split(/[\s,;]+/)[Symbol.iterator]();!(c=(f=m.next()).done);c=!0){var p=f.value;i={src:s.data("ams-plugin-".concat(p,"-src")),css:s.data("ams-plugin-".concat(p,"-css")),callback:s.data("ams-plugin-".concat(p,"-callback")),context:s,async:s.data("ams-plugin-".concat(p,"-async"))},(o=e.register(i,p)).loaded||(!1===i.async?a.push(o.load()):n.push(o.load()))}}catch(t){d=!0,u=t}finally{try{c||null==m.return||m.return()}finally{if(d)throw u}}}else{var g=!0,h=!1,v=void 0;try{for(var y,M=l[Symbol.iterator]();!(g=(y=M.next()).done);g=!0)i=y.value,$.extend(i,{context:s}),(o=e.register(i)).loaded||(!1===o.async?a.push(o.load()):n.push(o.load()))}catch(t){h=!0,v=t}finally{try{g||null==M.return||M.return()}finally{if(h)throw v}}}}));for(var r=$.when.apply($,n),o=0,i=a;o<i.length;o++){i[o];r=r.done((function(){}))}return r}},{key:"run",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Set;$("[data-ams-plugins-disabled]",t).each((function(t,e){var a=$(e).data("ams-plugins-disabled").split(/[\s,;]+/),r=!0,o=!1,i=void 0;try{for(var s,l=a[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;n.add(c)}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}));var r=this.plugins;if(e){var o=!0,i=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value;r.has(d)&&r.get(d).run(t)}}catch(t){i=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}}else{var u=!0,f=!1,m=void 0;try{for(var p,g=r.entries()[Symbol.iterator]();!(u=(p=g.next()).done);u=!0){var h=a(p.value,2),v=h[0],y=h[1];n.has(v)||y.run(t)}}catch(t){f=!0,m=t}finally{try{u||null==g.return||g.return()}finally{if(f)throw m}}}}}]),t}()),d={plugins:c,initElement:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#content";return MyAMS.registry.initData(t),c.load(t)},register:function(t,e,n){c.register(t,e,n)},initData:function(t){$("[data-ams-data]",t).each((function(t,e){var n=$(e),a=n.data("ams-data");if(a)for(var r in a)if(a.hasOwnProperty(r)){var o=a[r];"string"!=typeof o&&(o=JSON.stringify(o)),n.attr("data-".concat(r),o)}}))},run:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;c.run(t,e)}};function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(t){var e=[],n=t.data("ams-modules");if("string"==typeof n)e=e.concat(n.trim().split(/[\s,;]+/));else if(n)for(var a=0,r=Object.entries(n);a<r.length;a++){var o=f(r[a],2),i=o[0],s=o[1],l={};l[i]=s,e.push(l)}return $("[data-ams-modules]",t).each((function(t,n){var a=$(n).data("ams-modules");if("string"==typeof a)e=e.concat(a.trim().split(/[\s,;]+/));else if(a)for(var r=0,o=Object.entries(a);r<o.length;r++){var i=f(o[r],2),s=i[0],l=i[1],c={};c[s]=l,e.push(c)}})),u(new Set(e))}function p(t,e){if(t){if("string"!=typeof t)return t;var n=t.split(".");e=null==e?window:e;var a=!0,r=!1,o=void 0;try{for(var i,s=n[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var l=i.value;try{e=e[l]}catch(t){return}}}catch(t){r=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return e}}function g(t,e){if(null!=t){if("function"==typeof t)return t;if("string"==typeof t){var n=t.split("."),a=n.pop();e=null==e?window:e;var r=!0,o=!1,i=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;try{e=e[c]}catch(t){return}}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}try{return e[a]}catch(t){return}}}}function h(t,e){var n=g(t,window);if("function"==typeof n){var a=Array.prototype.slice.call(arguments,2);return n.apply(e,a)}}function v(t){return t.replace(/{[^{}]*}/g,(function(t){return p(t.substr(1,t.length-2))}))}window.jQuery||(window.$=window.jQuery=n(0));var y=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),M={modules:[],ajaxNav:!0,enableFastclick:!0,useSVGIcons:void 0!==window.FontAwesome&&"nest"===FontAwesome.config.autoReplaceSvg,menuSpeed:235,initPage:"MyAMS.core.initPage",initContent:"MyAMS.core.initContent",clearContent:"MyAMS.core.clearContent",alertsContainerClass:"toast-wrapper",safeMethods:["GET","HEAD","OPTIONS","TRACE"],csrfCookieName:"csrf_token",csrfHeaderName:"X-CSRF-Token",enableTooltips:!0,enableHtmlTooltips:!0,warnOnFormChange:!0,formChangeCallback:null,isMobile:y,device:y?"mobile":"desktop"},b={getObject:p,getFunctionByName:g,executeFunctionByName:h,getSource:v,getScript:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){var r={dataType:"script",url:v(t),cache:S.env.devmode,async:!0},o=$.extend({},r,e);$.ajax(o).then((function(){n(t)}),(function(t,e,n){a(n)}))}))},getCSS:function(t,e){return new Promise((function(n,a){var r=$("HEAD"),o=$('style[data-ams-id="'+e+'"]',r);if(0===o.length){o=$("<style>").attr("data-ams-id",e).text('@import "'.concat(v(t),'";')).appendTo(r);var i=setInterval((function(){try{o[0].sheet.cssRules;clearInterval(i),n(!0)}catch(t){}}),10)}else n(!1)}))},getQueryVar:function(t,e){if(!("string"!=typeof t||t.indexOf("?")<0)){t.endsWith("&")||(t+="&");var n=new RegExp(".*?[&\\?]"+e+"=(.*?)&.*"),a=t.replace(n,"$1");return a===t?null:a}},generateId:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+t()+t()},generateUUID:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))},switchIcon:function(t,e,n){if("string"==typeof t&&(t=$(t)),S.config.useSVGIcons){var a=FontAwesome.findIconDefinition({iconName:n});t.html(FontAwesome.icon(a).html)}else t.removeClass("fa-".concat(e)).addClass("fa-".concat(n))},initPage:function(){return S.require("i18n").then((function(){S.dom={page:$("html"),root:$("body"),nav:$("nav"),main:$("#main"),leftPanel:$("#left-panel"),shortcuts:$("#shortcuts")};var t=m(S.dom.root);S.require.apply(S,u(t)).then((function(){var t=!0,e=!1,n=void 0;try{for(var a,r=S.config.modules[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;h("MyAMS.".concat(o,".init"))}}catch(t){e=!0,n=t}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}S.core.executeFunctionByName(S.dom.page.data("ams-init-content")||S.config.initContent)}))}))},initContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===t&&(t=$("body"));var e=m(t=$(t));return S.require.apply(S,u(e)).then((function(){t.trigger("before-init.myams.content"),S.registry.initElement(t).then((function(){var e=!0,n=!1,a=void 0;try{for(var r,o=S.config.modules[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;h("MyAMS.".concat(i,".initElement"),document,t)}}catch(t){n=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw a}}})).then((function(){S.registry.run(t),t.trigger("after-init.myams.content")}))}))},clearContent:function(t){return"string"==typeof t&&(t=$(t)),new Promise((function(e,n){var a={veto:!1};t.trigger("clear.ams.content",[t,a]),e(!a.veto),a.veto||t.trigger("cleared.ams.content",[t])}))}},S={$:$,env:function(t){var e=t('script[src*="/myams.js"], script[src*="/myams-dev.js"], script[src*="/myams-core.js"], script[src*="/myams-core-dev.js"], script[src*="/myams-mini.js"], script[src*="/myams-mini-dev.js"]').attr("src"),n=!e||e.indexOf("-dev.js")>=0;return{bundle:!e||e.indexOf("-core")<0,devmode:n,devext:n?"-dev":"",extext:n?"":".min",baseURL:e?e.substring(0,e.lastIndexOf("/")+1):"/"}}(jQuery),config:M,core:b,registry:d};window.MyAMS=S;var A=S;function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x=MyAMS.$;function C(t){var e;return e=t.startsWith("http://")||t.startsWith("https://")||t.endsWith(".js")?t:"".concat(MyAMS.env.baseURL,"mod-").concat(t).concat(MyAMS.env.devext,".js"),MyAMS.core.getScript(e,{async:!0},console.error)}n(1);var k=MyAMS.$,T=k.templates({markup:'\n\t<div class="alert alert-{{:status}}" role="alert">\n\t\t<button type="button" class="close" data-dismiss="alert" \n\t\t\t\taria-label="{{*: MyAMS.i18n.BTN_CLODE }}">\n\t\t\t<i class="fa fa-times" aria-hidden="true"></i>\t\n\t\t</button>\n\t\t{{if header}}\n\t\t<h5 class="alert-heading">{{:header}}</h5>\n\t\t{{/if}}\n\t\t{{if message}}\n\t\t<p>{{:message}}</p>\n\t\t{{/if}}\n\t\t{{if messages}}\n\t\t<ul>\n\t\t{{for messages}}\n\t\t\t<li>\n\t\t\t\t{{if header}}<strong>{{:header}} :</strong>{{/if}}\n\t\t\t\t{{:message}}\n\t\t\t</li>\n\t\t{{/for}}\n\t\t</ul>\n\t\t{{/if}}\n\t\t{{if widgets}}\n\t\t<ul>\n\t\t{{for widgets}}\n\t\t\t<li>\n\t\t\t\t{{if header}}<strong>{{:header}} :</strong>{{/if}}\n\t\t\t\t{{:message}}\n\t\t\t</li>\n\t\t{{/for}}\n\t\t</ul>\n\t\t{{/if}}\n\t</div>',allowCode:!0}),j={showErrors:function(t,e){"string"==typeof e?MyAMS.require("i18n","alert").then((function(){MyAMS.alert.alert({parent:t,status:"danger",header:MyAMS.i18n.ERROR_OCCURED,message:e})})):k.isArray(e)?MyAMS.require("i18n","alert").then((function(){MyAMS.alert.alert({parent:t,status:"danger",header:MyAMS.i18n.ERRORS_OCCURED,message:e})})):MyAMS.require("i18n","alert","form").then((function(){MyAMS.form.clearAlerts(t);var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=(e.messages||[])[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var l=i.value;"string"==typeof l?n.push({header:null,message:l}):n.push(l)}}catch(t){r=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}var c=!0,d=!1,u=void 0;try{for(var f,m=(e.widgets||[])[Symbol.iterator]();!(c=(f=m.next()).done);c=!0){var p=f.value;n.push({header:p.label,message:p.message})}}catch(t){d=!0,u=t}finally{try{c||null==m.return||m.return()}finally{if(d)throw u}}var g={status:"danger",header:e.header||(n.length>1?MyAMS.i18n.ERRORS_OCCURED:MyAMS.i18n.ERROR_OCCURED),message:e.error||null,messages:n};k(T.render(g)).prependTo(t);var h=!0,v=!1,y=void 0;try{for(var M,b=(e.widgets||[])[Symbol.iterator]();!(h=(M=b.next()).done);h=!0){var S=M.value,A=void 0;(A=S.id?k("#".concat(S.id),t):k('[name="'.concat(S.name,'"]'),t)).exists()&&MyAMS.form.setInvalid(t,A,S.message)}}catch(t){v=!0,y=t}finally{try{h||null==b.return||b.return()}finally{if(v)throw y}}}))}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("error"):(MyAMS.error=j,console.debug("MyAMS: error module loaded...")));var _=MyAMS.$,O={check:function(t,e){return new Promise((function(n,a){var r=[];if(void 0===t){e instanceof Array||(e=[e]);var o=!0,i=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value;r.push(MyAMS.core.getScript(d))}}catch(t){i=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}}else{t instanceof Array||(t=[t]);for(var u=0;u<t.length;u++)void 0===t[u]&&r.push(MyAMS.core.getScript(e[u]))}_.when.apply(_,r).then((function(){n(r.length>0)}),a)}))},getAddr:function(t){var e=t||_("html head base").attr("href")||window.location.href;return e.substr(0,e.lastIndexOf("/")+1)},start:function(){_("#ajax-gear").show()},stop:function(){_("#ajax-gear").hide()},progress:function(t){t.lengthComputable&&(t.loaded>=t.total||console&&console.debug&&console.debug("".concat(Math.round(t.loaded/t.total*100),"%")))},get:function(t,e,n){return new Promise((function(a,r){var o={url:t.startsWith(window.location.protocol)?t:MyAMS.ajax.getAddr()+t,type:"get",cache:!1,data:_.param(e),datatype:"json",beforeSend:function(t,e){if(window.Cookies){var n=Cookies.get(MyAMS.config.csrfCookieName);n&&t.setRequestHeader(MyAMS.config.csrfHeaderName,n)}}},i=_.extend({},o,n);_.ajax(i).then((function(t,e,n){a(t,e,n)}),(function(t,e,n){r(n)}))}))},post:function(t,e,n){return new Promise((function(a,r){var o={url:t.startsWith(window.location.protocol)?t:MyAMS.ajax.getAddr()+t,type:"post",cache:!1,data:_.param(e),dataType:"json",beforeSend:function(t,e){if(window.Cookies){var n=Cookies.get(MyAMS.config.csrfCookieName);n&&t.setRequestHeader(MyAMS.config.csrfHeaderName,n)}}},i=_.extend({},o,n);_.ajax(i).then((function(t,e,n){a(t,e,n)}),(function(t,e,n){r(n)}))}))},getJSON:function(){return function(t){var e=t.url;return delete t.url,MyAMS.ajax.post(e,t).then(MyAMS.ajax.handleJSON)}},getResponse:function(t){var e,n,a=t.getResponseHeader("content-type");if(a)if(a.startsWith("application/javascript"))n=t.responseText,e="script";else if(a.startsWith("text/html"))n=t.responseText,e="html";else if(a.startsWith("text/xml"))n=t.responseText,e="xml";else if(n=t.responseJSON)e="json";else try{n=JSON.parse(t.responseText),e="json"}catch(a){n=t.responseText,e="text"}else n={status:"alert",alert:{title:MyAMS.i18n.ERROR_OCCURED,content:MyAMS.i18n.NO_SERVER_RESPONSE}},e="json";return{contentType:e,data:n}},handleJSON:function(t,e,n){function a(){void 0!==e&&(MyAMS.require("form",(function(){MyAMS.form.resetChanged(e)})),!1!==t.closeForm&&MyAMS.require("modal",(function(){MyAMS.modal.close(e)})))}var r=null,o=t.status;switch(o){case"alert":if(window.alert){var i=t.alert;window.alert("".concat(i.title,"\n\n").concat(i.content))}break;case"error":MyAMS.require("error").then((function(){MyAMS.error.showErrors(e,t)}));break;case"message":case"messagebox":case"smallbox":break;case"info":case"success":case"notify":case"callback":case"callbacks":a();break;case"modal":MyAMS.require("modal").then((function(){MyAMS.modal.open(t.location)}));break;case"reload":a(),(r=t.location||window.location.hash).startsWith("#")&&(r=r.substr(1));var s=_(t.target||n||"#content");MyAMS.require("skin").then((function(){MyAMS.skin.loadURL(r,s,{preLoadCallback:MyAMS.core.getFunctionByName(t.preReload||function(){_("[data-ams-pre-reload]",s).each((function(t,e){MyAMS.core.executeFunctionByName(_(e).data("ams-pre-reload"))}))}),preLoadCallbackOptions:t.preReloadOptions,afterLoadCallback:MyAMS.core.getFunctionByName(t.postReload||function(){_("[data-ams-post-reload]",s).each((function(t,e){MyAMS.core.executeFunctionByName(_(e).data("ams-post-reload"))}))}),afterLoadCallbackOptions:t.postReloadOptions})}));break;case"redirect":a(),(r=t.location||window.location.href).endsWith("##")&&(r=r.replace(/##/,window.location.hash)),t.window?window.open(r,t.window,t.options):window.location.href===r?window.location.reload():window.location.href=r;break;default:window.console&&console.warn&&console.warn("Unhandled JSON response status: ".concat(o))}if(t.content){var l=t.content,c=_(l.target||n||"#content");"string"==typeof l?c.html(l):(l.text?c.text(l.text):c.html(l.html),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,c),l.keepHidden||c.removeClass("hidden"))}if(t.contents){var d=!0,u=!1,f=void 0;try{for(var m,p=t.contents[Symbol.iterator]();!(d=(m=p.next()).done);d=!0){var g=m.value,h=_(g.target);g.text?h.text(g.text):h.html(g.html),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,h),g.keepHidden||h.removeClass("hidden")}}catch(t){u=!0,f=t}finally{try{d||null==p.return||p.return()}finally{if(u)throw f}}}if(t.message&&MyAMS.require("alert").then((function(){if("string"==typeof t.message)MyAMS.alert.smallBox({status:o,message:t.message,icon:"fa-info-circle",timeout:3e3});else{var n=t.message;MyAMS.alert.alert({parent:e,status:n.status||o,header:n.header,subtitle:n.subtitle,message:n.message})}})),t.messagebox&&MyAMS.require("alert").then((function(){if("string"==typeof t.messagebox)MyAMS.alert.messageBox({status:o,title:MyAMS.i18n.ERROR_OCCURED,icon:"fa-info-circle",message:t.messagebox,timeout:1e4});else{var e=t.messagebox;MyAMS.alert.messageBox({status:e.status||o,title:e.title||MyAMS.i18n.ERROR_OCCURED,icon:e.icon||"fa-info-circle",message:e.message,content:e.content,timeout:0===e.timeout?0:e.timeout||1e4})}})),t.smallbox&&MyAMS.require("alert").then((function(){if("string"==typeof t.smallbox)MyAMS.alert.smallBox({status:o,message:t.smallbox,icon:"fa-info-circle",timeout:3e3});else{var e=t.smallbox;MyAMS.alert.smallBox({status:e.status||o,message:e.message,content:e.content,icon:e.icon||"fa-info-circle",timeout:e.timeout})}})),t.event&&e.trigger(t.event,t.eventOptions),t.events){var v=!0,y=!1,M=void 0;try{for(var b,S=t.events[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var A=b.value;"string"==typeof A?e.trigger(A,t.eventOptions):e.trigger(A.event,A.options)}}catch(t){y=!0,M=t}finally{try{v||null==S.return||S.return()}finally{if(y)throw M}}}if(t.callback&&MyAMS.core.executeFunctionByName(t.callback,document,e,t.options),t.callbacks){var w=!0,x=!1,C=void 0;try{for(var k,T=t.callbacks[Symbol.iterator]();!(w=(k=T.next()).done);w=!0){var j=k.value;"string"==typeof j?MyAMS.core.executeFunctionByName(j,document,e,t.options):MyAMS.core.executeFunctionByName(j.callback,document,e,j.options)}}catch(t){x=!0,C=t}finally{try{w||null==T.return||T.return()}finally{if(x)throw C}}}},error:function(t,e,n,a){if(!("abort"===a||e&&e.statusText&&"OK"===e.statusText.toUpperCase())){var r=MyAMS.ajax.getResponse(e);r?"json"===r.contentType?MyAMS.ajax.handleJSON(r.data):MyAMS.require("i18n","alert").then((function(){var e=a||t.statusText||t.type,n=r.responseText;MyAMS.alert.messageBox({status:"error",title:MyAMS.i18n.ERROR_OCCURED,content:"<h4>".concat(e,"</h4><p>").concat(n||"","</p>"),icon:"fa-exclamation-triangle",timeout:5e3})}),(function(){window.console&&(console.error&&console.error(t),console.debug&&console.debug(r))})):window.console&&(console.error&&console.error("ERROR: Can't parse response!"),console.debug&&console.debug(e))}}};O.check(window.Cookies,"".concat(MyAMS.env.baseURL,"../ext/js-cookie").concat(MyAMS.env.devmode?".min":"",".js")).then((function(){var t=_.ajaxSettings.xhr;_.ajaxSetup({beforeSend:function(t,e){if(MyAMS.config.safeMethods.indexOf(e.type)<0&&void 0!==window.Cookies){var n=Cookies.get(MyAMS.config.csrfCookieName);n&&t.setRequestHeader(MyAMS.config.csrfHeaderName,n)}},progress:O.progress,progressUpload:O.progress,xhr:function(){var e=t();return e&&"function"==typeof e.addEventListener&&O.progress&&e.addEventListener("progress",(function(t){MyAMS.ajax.progress(t)}),!1),e}})})),_(document).ajaxStart(O.start),_(document).ajaxStop(O.stop),_(document).ajaxError(O.error),MyAMS.env.bundle?MyAMS.config.modules.push("ajax"):(MyAMS.ajax=O,console.debug("MyAMS: AJAX module loaded..."));var R=MyAMS.$,N=!1,E={language:"en",INFO:"Information",WARNING:"!! WARNING !!",ERROR:"ERROR: ",LOADING:"Loading...",PROGRESS:"Processing",WAIT:"Please wait!",FORM_SUBMITTED:"This form was already submitted...",NO_SERVER_RESPONSE:"No response from server!",ERROR_OCCURED:"An error occured!",ERRORS_OCCURED:"Some errors occured!",BAD_LOGIN_TITLE:"Bad login!",BAD_LOGIN_MESSAGE:"Your anthentication credentials didn't allow you to open a session; please check your credentials or contact administrator.",CONFIRM:"Confirm",CONFIRM_REMOVE:"Removing this content can't be undone. Do you confirm?",BTN_OK:"OK",BTN_CANCEL:"Cancel",BTN_YES:"Yes",BTN_NO:"No",BTN_CLOSE:"Close",CLIPBOARD_COPY:"Copy to clipboard with Ctrl+C, and Enter",CLIPBOARD_CHARACTER_COPY_OK:"Character copied to clipboard",CLIPBOARD_TEXT_COPY_OK:"Text copied to clipboard",FORM_CHANGED_WARNING:"Some changes were not saved. These updates will be lost if you leave this page.",DELETE_WARNING:"This change can't be undone. Are you sure that you want to delete this element?",NO_UPDATE:"No changes were applied.",DATA_UPDATED:"Data successfully updated.",HOME:"Home",LOGOUT:"Logout?",LOGOUT_COMMENT:"You can improve your security further after logging out by closing this opened browser",LAST_UPDATE:"Last update: ",DT_COLUMNS:"Columns",init:function(){return new Promise((function(t,e){if(N)t();else{N=!0;var n=R("html"),a=n.attr("lang")||n.attr("xml:lang");a&&!a.startsWith("en")?(E.language=a,MyAMS.core.getScript("".concat(MyAMS.env.baseURL,"i18n/myams-").concat(a.substr(0,2),".js")).then(t,e)):t()}}))}};function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function I(t,e,n){return e&&D(t.prototype,e),n&&D(t,n),t}MyAMS.env.bundle?MyAMS.config.modules.push("i18n"):(MyAMS.i18n=E,console.debug("MyAMS: I18n module loaded..."));var B=MyAMS.$,L=function(){function t(e){F(this,t),this.props=e}return I(t,[{key:"render",value:function(){return B('<li class="header"></li>').text(this.props.header||"")}}]),t}(),U=function(){function t(){F(this,t)}return I(t,[{key:"render",value:function(){return B('<li class="divider"></li>')}}]),t}(),q=function(){function t(e){F(this,t),this.items=e}return I(t,[{key:"render",value:function(){var e=B("<div></div>"),n=!0,a=!1,r=void 0;try{for(var o,i=this.items[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;if(s.label){for(var l=B("<li></li>"),c=B("<a></a>").attr("href",s.href||"#").attr("title",s.label),d=0,u=Object.entries(s.attrs||{});d<u.length;d++){var f=P(u[d],2),m=f[0],p=f[1];c.attr(m,p)}s.icon&&B('<i class="fa-lg fa-fw mr-1"></i>').addClass(s.icon).appendTo(c),B('<span class="menu-item-parent"></span>').text(s.label).appendTo(c),s.badge&&B('<span class="badge ml-1 mr-3 float-right"></span>').addClass("bg-".concat(s.badge.status)).text(s.badge.value).appendTo(c),c.appendTo(l),s.items&&B("<ul></ul>").append(new t(s.items).render()).appendTo(l),l.appendTo(e)}else(new U).render().appendTo(e)}}catch(t){a=!0,r=t}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return e.children()}}]),t}(),V=function(){function t(e,n,a){F(this,t),this.menus=e,this.parent=n,this.settings=a}return I(t,[{key:"getMenus",value:function(){var t=B("<ul></ul>"),e=!0,n=!1,a=void 0;try{for(var r,o=this.menus[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;void 0!==i.header&&t.append(new L(i).render()),t.append(new q(i.items).render())}}catch(t){n=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw a}}return t}},{key:"render",value:function(){var t=this.getMenus();this.init(t),this.parent.append(t)}},{key:"init",value:function(t){var e=this.settings;t.find("li").each((function(t,n){var a=B(n);if(a.find("ul").length>0){var r=a.find("a:first");r.append('<b class="collapse-sign">'.concat(e.closedSign,"</b>")),"#"===r.attr("href")&&r.click((function(){return!1}))}})),t.find("li.active").each((function(t,n){var a=B(n).parents("ul"),r=a.parent("li");a.slideDown(e.speed),r.find("b:first").html(e.openedSign),r.addClass("open")})),t.find("li a").on("click",(function(n){var a=B(n.currentTarget);if(!a.hasClass("active")){a.parents("li").removeClass("active");var r=a.attr("href").replace(/^#/,""),o=a.parent().find("ul");if(e.accordion){var i=a.parent().parents("ul");t.find("ul:visible").each((function(t,n){var a=!0;if(i.each((function(t,e){if(e===n)return a=!1,!1})),a&&o!==n){var s=B(n);!r&&s.hasClass("active")||s.slideUp(e.speed,(function(t){s.parent("li").removeClass("open").find("b:first").delay(e.speed).html(e.closedSign)}))}}))}var s=a.parent().find("ul:first");r||!s.is(":visible")||s.hasClass("active")?s.slideDown(e.speed,(function(){a.parent("li").addClass("open").find("b:first").delay(e.speed).html(e.openedSign)})):s.slideUp(e.speed,(function(){a.parent("li").removeClass("open").find("b:first").delay(e.speed).html(e.closedSign)}))}}))}}]),t}(),H=!1;function W(t){t.startsWith("#")?t!==location.hash&&(MyAMS.dom.root.hasClass("mobile-view-activated")?(MyAMS.dom.root.removeClass("hidden-menu"),setTimeout((function(){window.location.hash=t}),50)):window.location.hash=t):window.location=t}var G={init:function(){H||(H=!0,B.fn.extend({navigationMenu:function(t){var e=this;if(0!==this.length){var n=this.data(),a={accordion:!1!==n.amsMenuAccordion,speed:200};if(MyAMS.config.useSVGIcons){var r=FontAwesome.findIconDefinition({iconName:"angle-down"}),o=FontAwesome.findIconDefinition({iconName:"angle-up"});B.extend(a,{closedSign:"<em data-fa-i2svg>".concat(FontAwesome.icon(r).html,"</em>"),openedSign:"<em data-fa-i2svg>".concat(FontAwesome.icon(o).html,"</em>")})}else B.extend(a,{closedSign:'<em class="fa fa-angle-down"></em>',openedSign:'<em class="fa fa-angle-up"></em>'});var i=B.extend({},a,t);if(n.amsMenuConfig)MyAMS.require("ajax").then((function(){MyAMS.ajax.get(n.amsMenuConfig).then((function(t){new(MyAMS.core.getObject(n.amsMenuFactory)||V)(t,B(e),i).render(),MyAMS.require("skin").then((function(){MyAMS.skin.checkURL()}))}))}));else{var s=B("ul",this);new V(null,B(this),i).init(s)}}}}),MyAMS.config.ajaxNav&&(B(document).on("click",'a[href="#"]',(function(t){t.preventDefault()})),B(document).on("click",'a[href!="#"]:not([data-toggle]), [data-ams-url]:not([data-toggle])',(function(t){var e=B(t.currentTarget),n=e.data("ams-disabled-handlers");if(!0!==n&&"click"!==n&&"all"!==n){var a=e.attr("href")||e.data("ams-url");if(a&&!a.startsWith("javascript:")&&!e.attr("target")&&!0!==e.data("ams-context-menu")){var r,o,i;t.preventDefault(),t.stopPropagation(),a.indexOf("?")>=0?(o=(r=a.split("?"))[0],i=r[1].unserialize()):(o=a,i=void 0);var s=MyAMS.core.getFunctionByName(o);if("function"==typeof s&&(a=s.call(e,i)),"function"==typeof a)a.call(e,i);else if(a=a.replace(/%23/,"#"),t.ctrlKey)window.open(a);else{var l=e.data("ams-target")||e.attr("target");l?"_blank"===l?window.open(a):MyAMS.form?MyAMS.form.confirmChangedForm().then((function(t){"success"===t&&MyAMS.skin&&MyAMS.skin.loadURL(a,l,e.data("ams-link-options"),e.data("ams-link-callback"))})):MyAMS.skin&&MyAMS.skin.loadURL(a,l,e.data("ams-link-options"),e.data("ams-link-callback")):MyAMS.form?MyAMS.form.confirmChangedForm().then((function(t){"success"===t&&W(a)})):W(a)}}}})),B(document).on("click",'a[target="_blank"]',(function(t){t.preventDefault();var e=B(t.currentTarget);window.open(e.attr("href")),MyAMS.stats&&MyAMS.stats.logEvent(e.data("ams-stats-category")||"Navigation",e.data("ams-stats-action")||"External",e.data("ams-stats-label")||e.attr("href"))})),B(document).on("click",'a[target="_top"]',(function(t){t.preventDefault(),MyAMS.form&&MyAMS.form.confirmChangedForm().then((function(e){"success"===e&&(window.location=B(t.currentTarget).attr("href"))}))})),B(document).on("click",".nav-tabs a[data-toggle=tab]",(function(t){if(B(t.currentTarget).parent("li").hasClass("disabled"))return t.stopPropagation(),t.preventDefault(),!1})),B(document).on("show.bs.tab",(function(t){var e=B(t.target);e.exists()&&"A"!==e.get(0).tagName&&(e=B("a[href]",e));var n=e.data();if(n&&n.amsUrl){if(n.amsTabLoaded)return;e.append('<i class="fa fa-spin fa-cog ml-1"></i>'),MyAMS.require("skin").then((function(){MyAMS.skin.loadURL(n.amsUrl,e.attr("href")).then((function(){n.amsTabLoadOnce&&(n.amsTabLoaded=!0),B("i",e).remove()}),(function(){B("i",e).remove()}))}))}})),MyAMS.config.isMobile?(MyAMS.dom.root.addClass("mobile-detected"),MyAMS.config.enableFastclick&&MyAMS.require("ajax").then((function(){MyAMS.ajax.check(B.fn.noClickDelay,"".concat(MyAMS.env.baseURL,"../ext/js-smartclick").concat(MyAMS.env.extext,".js")).then((function(){B("a",MyAMS.dom.nav).noClickDelay(),B("a","#hide-menu").noClickDelay()}))}))):MyAMS.dom.root.addClass("desktop-detected")),G.restoreState())},initElement:function(t){B("nav",t).navigationMenu({speed:MyAMS.config.menuSpeed})},setActiveMenu:function(t){var e=MyAMS.dom.nav;if(B(".active",e).removeClass("active"),t.addClass("open").addClass("active"),t.parents("li").addClass("open active").children("ul").addClass("active").show(),t.parents("li:first").removeClass("open"),t.parents("ul").addClass(t.attr("href").replace(/^#/,"")?"active":"").show(),t.exists()){var n=e.scrollTop(),a=B(t).parents("li:last").position();(a.top<n||a.top>e.height()+n)&&e.scrollTop(a.top)}},drawBreadcrumbs:function(){var t=B("ol.breadcrumb","#ribbon");if(B("li",t).not(".parent").remove(),!B("li",t).exists()){var e='<li class="breadcrumb-item">\n\t\t\t\t\t<a class="p-r-1" href="'.concat(B('a[href!="#"]:first',MyAMS.dom.nav).attr("href"),'">').concat(MyAMS.i18n.HOME,"</a></li>");t.append(B(e))}B("li.active >a",MyAMS.dom.nav).each((function(e,n){var a=B(n),r=B.trim(a.clone().children(".badge").remove().end().text()),o=a.attr("href"),i=B('<li class="breadcrumb-item"></li>').append(o.replace(/^#/,"")?B("<a></a>").html(r).attr("href",o):r);t.append(i)}))},minifyMenu:function(t){t&&t.preventDefault(),MyAMS.dom.root.toggleClass("minified"),MyAMS.dom.root.hasClass("minified")?MyAMS.core.switchIcon(B("i",t.currentTarget),"arrow-circle-left","arrow-circle-right"):MyAMS.core.switchIcon(B("i",t.currentTarget),"arrow-circle-right","arrow-circle-left"),window.localStorage&&(MyAMS.dom.root.hasClass("minified")?localStorage.setItem("window-state","minified"):localStorage.setItem("window-state",""))},hideMenu:function(t){t&&t.preventDefault(),MyAMS.dom.root.toggleClass("hidden-menu"),window.localStorage&&(MyAMS.dom.root.hasClass("hidden-menu")?localStorage.setItem("window-state","hidden-menu"):localStorage.setItem("window-state",""))},restoreState:function(){if(window.localStorage){var t=localStorage.getItem("window-state");"minified"===t?B("#minifyme").click():MyAMS.dom.root.addClass(t)}}};MyAMS.env.bundle?MyAMS.config.modules.push("nav"):(MyAMS.nav=G,console.debug("MyAMS: nav module loaded..."));var Q=MyAMS.$,J=!1,K={init:function(){J||(J=!0,MyAMS.config.enableTooltips&&MyAMS.dom.root.tooltip({selector:".hint",html:MyAMS.config.enableHtmlTooltips}),Q(".hint").mousedown((function(t){Q(t.currentTarget).tooltip("hide")})),K.checkURL(),Q(window).on("hashchange",K.checkURL))},initElement:function(t){MyAMS.config.enableTooltips||Q(".hint",t).tooltip({html:MyAMS.config.enableHtmlTooltips})},checkURL:function(t){var e,n=MyAMS.dom.nav,a=location.hash,r=a.replace(/^#/,""),o=null,i=r.indexOf("!");if(i>0&&(a=a.substring(0,i+1),o=r.substring(i+1),r=r.substring(0,i)),r){var s=Q("#content");s.exists()||(s=MyAMS.dom.root),(e=Q('a[href="'.concat(a,'"]'),n)).exists()&&MyAMS.require("nav").then((function(){MyAMS.nav.setActiveMenu(e)})),K.loadURL(r,s).then((function(){var t=Q("html head title").data("ams-title-prefix");if(document.title="".concat(t?"".concat(t," > "):"")+(Q("[data-ams-page-title]:first",s).data("ams-page-title")||e.attr("title")||document.title),o){var n=Q("#".concat(o));n.exists()&&MyAMS.require("ajax").then((function(){MyAMS.ajax.check(Q.fn.scrollTo,"".concat(MyAMS.env.baseURL,"../ext/jquery-scrollto").concat(MyAMS.env.extext,".js")).then((function(){Q("#main").scrollTo(n,{offset:-15})}))}))}}),(function(){}))}else{var l=Q("[data-ams-active-menu]").data("ams-active-menu");(e=l?Q('a[href="'.concat(l,'"]'),n):Q('>ul >li >a[href!="#"]',n).first()).exists()&&MyAMS.require("nav").then((function(){MyAMS.nav.setActiveMenu(e),l?MyAMS.nav.drawBreadcrumbs():window.location.replace(window.location.href+e.attr("href"))}))}},loadURL:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(a,r){t.startsWith("#")&&(t=t.substr(1)),e=Q(e),MyAMS.core.clearContent(e).then((function(o){if(o){var i={type:"GET",url:t,dataType:"html",cache:!1,beforeSend:function(){e.html('<h1 class="loading"><i class="fa fa-cog fa-spin"></i> '.concat(MyAMS.i18n.LOADING,"</h1>")),n&&n.preLoadCallback&&MyAMS.core.executeFunctionByName(n.preLoadCallback,void 0,n.preLoadCallbackOptions),e[0]===Q("#content")[0]&&MyAMS.require("nav").then((function(){MyAMS.nav.drawBreadcrumbs();var t=Q("html head title").data("ams-title-prefix");document.title="".concat(t?"".concat(t," > "):"").concat(Q(".breadcrumb li:last-child").text()),MyAMS.dom.root.animate({scrollTop:0},"fast")}))}},s=Q.extend({},i,n),l={veto:!1};e.trigger("before-load.myams.content",[s,l]),l.veto||Q.ajax(s).then((function(t,n,r){MyAMS.require("ajax").then((function(){var t=MyAMS.ajax.getResponse(r);if(t){var o=t.contentType,i=t.data;switch(Q(".loading",e).remove(),o){case"json":MyAMS.ajax.handleJSON(i,e),a(i,n,r);break;case"script":case"xml":a(i,n,r);break;case"html":case"text":default:e.parents(".hidden").removeClass("hidden"),Q(".alert",e.parents(".alerts")).remove(),e.css({opacity:"0.0"}).html(i).removeClass("hidden").delay(30).animate({opacity:"1.0"},300),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,window,e).then((function(){MyAMS.form&&MyAMS.form.setFocus(e),e.trigger("after-load.myams.content"),a(i,n,r)}))}MyAMS.stats&&MyAMS.stats.logPageview()}}))}),(function(t,n,a){e.html('<h3 class="error"><i class="fa fa-exclamation-triangle text-danger"></i> \n\t\t\t\t\t\t\t\t'.concat(MyAMS.i18n.ERROR," ").concat(a,"</h3>").concat(t.responseText)),r(a)}))}}))}))}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("skin"):(MyAMS.skin=K,console.debug("MyAMS: skin module loaded...")));var z=MyAMS.$,Y=z.templates({markup:'\n\t<div class="alert alert-{{:status}}" role="alert">\n\t\t<button type="button" class="close" data-dismiss="alert" \n\t\t\t\taria-label="{{*: MyAMS.i18n.BTN_CLODE }}">\n\t\t\t<i class="fa fa-times" aria-hidden="true"></i>\t\n\t\t</button>\n\t\t{{if header}}\n\t\t<h5 class="alert-heading">{{:header}}</h5>\n\t\t{{/if}}\n\t\t{{* if (typeof message === \'string\') { }}\n\t\t<ul>\n\t\t\t<li>{{:message}}</li>\n\t\t</ul>\n\t\t{{* } else { }}\n\t\t<ul>\n\t\t{{for message}}\n\t\t\t<li>{{:}}</li>\n\t\t{{/for}}\n\t\t</ul>\n\t\t{{* } }}\n\t</div>',allowCode:!0}),X=z.templates({markup:'\n\t<div role="alert" class="toast toast-{{:status}} fade hide"\n\t\t data-autohide="{{*: Boolean(data.timeout !== 0).toString() }}"\n\t\t data-delay="{{: timeout || 5000}}">\n\t\t<div class="toast-header">\n\t\t{{if icon}}\n\t\t\t<i class="fa {{:icon}} mr-2"></i>\n\t\t{{/if}}\n\t\t\t<strong class="mr-auto">{{:title}}</strong>\n\t\t{{if !hideTimestamp}}\n\t\t\t<small>{{*: new Date().toLocaleTimeString() }}</small>\n\t\t{{/if}}\n\t\t\t<button type="button" class="ml-2 mb-1 close" data-dismiss="toast">\n\t\t\t\t<i class="fa fa-times text-white"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="toast-body">\n\t\t\t<div>\n\t\t\t{{if content}}\n\t\t\t\t{{:content}}\n\t\t\t{{else}}\n\t\t\t\t<p>{{:message}}</p>\n\t\t\t{{/if}}\n\t\t\t</div>\n\t\t</div>\n\t</div>',allowCode:!0}),Z=z.templates({markup:'\n\t<div role="alert" class="toast toast-{{:status}} fade hide"\n\t\t data-autohide="true"\n\t\t data-delay="{{: timeout || 5000}}">\n\t\t<div class="toast-body">\n\t\t\t<div>\n\t\t\t{{if content}}\n\t\t\t\t{{:content}}\n\t\t\t{{else}}\n\t\t\t\t<span>\n\t\t\t\t\t{{if icon}}\n\t\t\t\t\t<i class="fa {{:icon}} mr-2"></i>\n\t\t\t\t\t{{/if}}\n\t\t\t\t\t{{:message}}\n\t\t\t\t</span>\n\t\t\t{{/if}}\n\t\t\t</div>\n\t\t</div>\n\t</div>',allowCode:!0}),tt=z.templates({markup:'\n\t<div class="modal fade" data-backdrop="static" role="dialog">\n\t\t<div class="modal-dialog">\n\t\t\t<div class="modal-content">\n\t\t\t\t<div class="modal-header alert-{{:status}}">\n\t\t\t\t\t<h5 class="modal-title">\n\t\t\t\t\t{{if icon}}\n\t\t\t\t\t\t<i class="fa {{:icon}} mr-2"></i>\n\t\t\t\t\t{{/if}}\n\t\t\t\t\t{{:title}}\n\t\t\t\t\t</h5>\n\t\t\t\t\t<button type="button" class="close" \n\t\t\t\t\t\t\tdata-dismiss="modal" data-modal-dismiss-value="cancel">\n\t\t\t\t\t\t<i class="fa fa-times"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal-body">\n\t\t\t\t\t<p>{{:message}}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t<button type="button" class="btn btn-secondary" \n\t\t\t\t\t\t\tdata-dismiss="modal" data-modal-dismiss-value="cancel">\n\t\t\t\t\t\t{{*: data.cancelLabel || MyAMS.i18n.BTN_CANCEL }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type="button" class="btn btn-primary" \n\t\t\t\t\t\t\tdata-dismiss="modal" data-modal-dismiss-value="success">\n\t\t\t\t\t\t{{*: data.successLabel || MyAMS.i18n.BTN_OK }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>',allowCode:!0}),et={alert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.status||"info";"error"===e&&(e="danger"),t.status=e,z(".alert-".concat(e),t.parent).not(".persistent").remove(),z(Y.render(t)).prependTo(t.parent)},messageBox:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.status||"info";"error"===e&&(e="danger"),t.status=e;var n=z(".".concat(MyAMS.config.alertsContainerClass));0===n.length&&(n=z("<div></div>").addClass(MyAMS.config.alertsContainerClass).appendTo(MyAMS.dom.root)),z(X.render(t)).appendTo(n).toast("show").on("hidden.bs.toast",(function(t){z(t.currentTarget).remove()}))},smallBox:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.status||"info";"error"===e&&(e="danger"),t.status=e;var n=z(".".concat(MyAMS.config.alertsContainerClass));0===n.length&&(n=z("<div></div>").addClass(MyAMS.config.alertsContainerClass).appendTo(MyAMS.dom.root)),z(Z.render(t)).appendTo(n).toast("show").on("hidden.bs.toast",(function(t){z(t.currentTarget).remove()}))},bigBox:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,n){var a=t.status||"info";"error"===a&&(a="danger"),t.status=a,MyAMS.require("modal").then((function(){var n=z(tt.render(t)).appendTo(MyAMS.dom.root);n.on("hidden.bs.modal",(function(t){e(n.data("modal-result")),n.remove()})),n.modal("show")}),(function(){n("Missing 'modal' module!")}))}))}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("alert"):(MyAMS.alert=et,console.debug("MyAMS: alert module loaded...")));var nt=MyAMS.$,at=!1,rt={init:function(){if(!at){at=!0,MyAMS.config.ajaxNav&&nt(document).on("click",'[data-toggle="modal"]',(function(t){var e=nt(t.currentTarget),n=e.data("ams-disabled-handlers");!0!==n&&"click"!==n&&"all"!==n&&!0!==e.data("ams-context-menu")&&(!0===e.data("ams-stop-propagation")&&t.stopPropagation(),t.preventDefault(),MyAMS.require("modal").then((function(){MyAMS.modal.open(e)})))}));nt(document).on("shown.bs.modal",".modal",(function(t){var e=nt(t.target),n=1100+100*nt(".modal:visible").length;e.css("z-index",n),setTimeout((function(){nt(".modal-backdrop").not(".modal-stack").first().css("z-index",n-10).addClass("modal-stack")}),0),nt(e).off("click",'[data-dismiss="modal"]').on("click",'[data-dismiss="modal"]',(function(t){var e=nt(t.currentTarget).parents(".modal").first();e.data("modal-result",nt(t.currentTarget).data("modal-dismiss-value")),MyAMS.form?MyAMS.form.confirmChangedForm(e).then((function(t){"success"===t&&e.modal("hide")})):e.modal("hide")}))})),nt(document).on("hidden.bs.modal",".modal",(function(){nt(".modal:visible").length>0&&(nt.fn.modal.Constructor.prototype._checkScrollbar(),nt.fn.modal.Constructor.prototype._setScrollbar(),nt("body").addClass("modal-open"))}))}},initElement:function(t){},open:function(t,e){return new Promise((function(n,a){var r={},o=t;if("string"!=typeof t){r=t.data(),o=t.attr("href")||r.amsUrl;var i=MyAMS.core.getFunctionByName(o);"function"==typeof i&&(o=i.call(t))}o||a("No provided URL!"),o.startsWith("#")?(nt(o).modal("show"),n()):nt.ajax({type:"get",url:o,cache:void 0!==r.amsAllowCache&&r.amsAllowCache,data:e}).then((function(e,a,i){MyAMS.require("ajax").then((function(){var e=MyAMS.ajax.getResponse(i),n=e.contentType,a=e.data;switch(n){case"json":MyAMS.ajax.handleJSON(a,nt(nt(t).data("ams-json-target")||"#content"));break;case"script":case"xml":break;case"html":case"text":default:var s=nt(a),l=nt(".modal-dialog",s.wrap("<div></div>").parent()),c=l.data()||{},d={backdrop:void 0===c.backdrop?"static":c.backdrop},u=nt.extend({},d,c.amsOptions);u=MyAMS.core.executeFunctionByName(c.amsInit,l,u)||u,nt("<div>").addClass("modal fade").data("dynamic",!0).append(s).on("show.bs.modal",rt.show).on("hidden.bs.modal",rt.hidden).modal(u),MyAMS.stats&&!1!==r.amsLogEvent&&!1!==c.amsLogEvent&&MyAMS.stats.logPageview(o)}})).then((function(){n()}))}))}))},show:function(t){var e=nt(t.target);MyAMS.core.initContent(e)},close:function(t){"string"==typeof t?t=nt(t):void 0===t&&(t=nt(".modal-dialog:last"));var e=t.objectOrParentWithClass("modal");e.length>0&&e.modal("hide")},hidden:function(t){var e=nt(t.target);MyAMS.core.clearContent(e),!0===e.data("dynamic")&&e.remove()}};function ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}MyAMS.env.bundle?MyAMS.config.modules.push("modal"):(MyAMS.modal=rt,console.debug("MyAMS: modal module loaded..."));var st=MyAMS.$,lt=!1,ct={init:function(){lt||(lt=!0,st(document).on("click",'[type="submit"], .submit',(function(t){var e=st(t.currentTarget);e.exists()&&st(e).closest("form").data("ams-submit-button",e)})),st(window).on("beforeunload",MyAMS.form.checkBeforeUnload))},initElement:function(t){st(t).on("click",'button[type="submit"], button.submit',(function(t){var e=st(t.currentTarget);st(e.get(0).form).data("ams-submit-button",e)})),st(t).on("keydown","textarea",(function(t){10!==t.keyCode&&13!==t.keyCode||!t.ctrlKey&&!t.metaKey||st(t.currentTarget).closest("form").submit()})),st(t).on("focus",'input[readonly="readonly"]',(function(t){st(t.currentTarget).blur()})),st(t).on("focusin",(function(t){st(t.target).closest(".mce-window").length>=0&&t.stopImmediatePropagation()})),(MyAMS.config.warnOnFormChange?st('form[data-ams-warn-on-change!="false"]',t):st('form[data-ams-warn-on-change="true"]',t)).each((function(t,e){var n=st(e),a=n.data().amsChangedCallback||MyAMS.config.formChangeCallback;st("input, select, textarea, [data-ams-changed-event]",n).each((function(t,e){var r=st(e),o=r.data();if(!0!==o.amsIgnoreChange){var i=o.amsChangedEvent||"change";r.on(i,(function(){MyAMS.form.setChanged(n),MyAMS.core.executeFunctionByName(o.amsChangedCallback||a,n,r)}))}})),n.on("reset",(function(t){var e=st(t.currentTarget);MyAMS.form.clearAlerts(e),MyAMS.form.resetChanged(e)}))})),MyAMS.form.setFocus(t)},setFocus:function(t){var e=st("[data-ams-focus-target]",t).first();e.exists()||(e=st("input, select, textarea",t).first()),e.exists()&&e.focus()},checkBeforeUnload:function(){if(MyAMS.i18n&&st('form[data-ams-form-changed="true"]').exists())return MyAMS.i18n.FORM_CHANGED_WARNING},confirmChangedForm:function(t){return new Promise((function(e,n){var a=st('form[data-ams-form-changed="true"]',t);a.exists()?MyAMS.require("alert").then((function(){MyAMS.alert.bigBox({status:"danger",title:MyAMS.i18n.WARNING,icon:"text-danger fa-bell",message:MyAMS.i18n.FORM_CHANGED_WARNING}).then((function(t){"success"===t&&ct.resetChanged(a),e(t)}))}),(function(){n("Missing 'alert' module!")})):(ct.resetChanged(a),e("success"))}))},setChanged:function(t){t.attr("data-ams-form-changed",!0)},resetChanged:function(t){void 0!==t&&st(t).removeAttr("data-ams-form-changed")},setInvalid:function(t,e,n){if("string"==typeof e&&(e=st('[name="'.concat(e,'"]'),t)),e.exists()){var a=e.closest(".form-widget");st(".invalid-feedback",a).remove(),st("<span>").text(n).addClass("is-invalid invalid-feedback").appendTo(a),e.removeClass("valid").addClass("is-invalid")}},clearAlerts:function(t){st(".alert-danger, SPAN.state-error",t).not(".persistent").remove(),st(".state-error",t).removeClassPrefix("state-"),st(".invalid-feedback",t).remove(),st(".is-invalid",t).removeClass("is-invalid")},submit:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(t=st(t)).exists())return!1;"object"===it(e)&&(n=e,e=void 0);var a=t.data(),r=st(a.amsSubmitButton),o=r.data()||{},i={submitWarning:dt,getValidators:ut,checkValidators:ft,clearAlerts:MyAMS.form.clearAlerts,initSubmitButton:mt,resetSubmitButton:pt,getData:gt,initData:ht,initDataCallback:null,getTarget:vt,initTarget:Mt,getAction:bt,getAjaxSettings:St,getProgressSettings:At,getProgressState:wt,submit:xt,datatype:null,submitOptions:null,submitHandler:t.attr("action").replace(/#/,""),submitTarget:t.attr("target"),submitMessage:null,submitCallback:Ct,progressHandler:null,progressFieldName:"progressId",progressInterval:1e3,progressCallback:null,progressEndCallback:null,resetBeforeSubmit:!1,keepModalOpen:!1,resetAfterSubmit:kt,resetTimeout:1e3,resetAfterError:Tt,downloadTarget:null,getDownloadTarget:jt,initDownloadTarget:_t,resetDownloadTarget:Ot},s=st.extend({},i);return st.extendPrefix(s,"amsForm",(function(t){return MyAMS.core.getFunctionByName(t)||t}),a,o),st.extendOnly(s,n),a.submitted?(s.submitWarning(t,s),!1):(s.checkValidators(t,s).then((function(i){"success"===i&&MyAMS.require("ajax","i18n").then((function(){MyAMS.ajax.check(st.fn.ajaxSubmit,"".concat(MyAMS.env.baseURL,"../ext/jquery-form").concat(MyAMS.env.extext,".js")).then((function(){s.clearAlerts(t,s),s.initSubmitButton(t,s,r);var i=s.getData(t,s,a,r,o,n),l={veto:!1};if(s.initData(t,s,r,i,n,l),l.veto)s.resetSubmitButton(t,s,r);else{var c=s.getTarget(t,s,a,o);c&&c.exists()&&s.initTarget(t,s,c);var d=s.getAction(t,s,e),u=s.getAjaxSettings(t,s,r,i,d,c),f=s.getDownloadTarget(t,s);f&&s.initDownloadTarget(t,s,f,u),u.progress=s.getProgressSettings(t,s,i),s.submit(t,s,r,i,u),f&&s.resetDownloadTarget(t,s,f,u)}}))}))})),!1)}};function dt(t,e){t.data("ams-form-hide-submitted")||MyAMS.require("i18n","alert").then((function(){MyAMS.alert.messageBox({status:"warning",title:MyAMS.i18n.WAIT,message:MyAMS.i18n.FORM_SUBMITTED,icon:"fa-save",timeout:t.data("ams-form-alert-timeout")||5e3})}))}function ut(t,e){var n=new Map,a=(t.data("ams-form-validator")||"").trim().split(/[\s,;]+/),r=[];return st(a).each((function(t,e){e&&r.push(e)})),r.length>0&&n.set(t,r),st("[data-ams-form-validator]",t).each((function(t,e){var a=st(e),o=(a.data("ams-form-validator")||"").trim().split(/[\s,;]+/);r=[],st(o).each((function(t,e){e&&r.push(e)})),r.length>0&&n.set(a,r)})),n}function ft(t,e){return new Promise((function(n,a){var r=e.getValidators(t,e);if(r.size){var o=[],i=!0,s=!1,l=void 0;try{for(var c,d=r.entries()[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=ot(c.value,2),f=u[0],m=u[1],p=!0,g=!1,h=void 0;try{for(var v,y=m[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var M=v.value;o.push(MyAMS.core.executeFunctionByName(M,document,t,f))}}catch(t){g=!0,h=t}finally{try{p||null==y.return||y.return()}finally{if(g)throw h}}}}catch(t){s=!0,l=t}finally{try{i||null==d.return||d.return()}finally{if(s)throw l}}st.when.apply(st,o).then((function(){for(var e="success",a=[],r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];for(var s=0,l=o;s<l.length;s++){var c=l[s];!0!==c&&(e="error","string"==typeof c?a.push(c):st.isArray(c)&&c.length>0&&(a=a.concat(c)))}a.length>0&&MyAMS.require("i18n","alert").then((function(){var e=1===a.length?MyAMS.i18n.ERROR_OCCURED:MyAMS.i18n.ERRORS_OCCURED;MyAMS.alert.alert({parent:t,status:"danger",header:e,message:a})})),n(e)}),(function(){a("error")}))}else n("success")}))}function mt(t,e,n){var a=n.data("ams-loading-text")||n.text().trim();a?(n.data("original-text",n.text()).prop("disabled",!0).text("".concat(a,"...")),st("<div>").addClass("progress").appendTo(n)):n.data("original-html",n.html()).prop("disabled",!0).html('<i class="fa fa-cog fa-spin"></i>')}function pt(t,e,n){st(".progress",n).remove();var a=n.data("original-text");if(a)n.text(a);else{var r=n.data("original-html");r&&n.html(r)}n.prop("disabled",!1)}function gt(t,e,n,a,r,o){var i=st.extend({},n.amsFormData,r.amsFormData,o.data),s=a.attr("name");return s&&(i[s]=a.val()),i}function ht(t,e,n,a,r,o){var i=e.initDataCallback;i&&st.extend(a,i(t,e,n,a,r,o)),t.trigger("init-data.myams.form",[a,o])}function vt(t,e,n,a){return st(e.submitTarget)}var yt=st.templates({markup:'\n\t<div class="row m-3">\n\t\t<div class="text-center w-100">\n\t\t\t<i class="fa fa-3x fa-cog fa-spin"></i>\n\t\t\t{{if message}}\n\t\t\t<strong>{{:message}}</strong>\n\t\t\t{{/if}}\n\t\t</div>\n\t</div>'});function Mt(t,e,n){n.html(yt.render({message:e.submitMessage})),n.parents(".hidden").removeClass("hidden")}function bt(t,e,n){var a=n||e.submitHandler;return a.startsWith(window.location.protocol)?a:MyAMS.ajax.getAddr()+a}function St(t,e,n,a,r,o){var i={url:r,type:"post",cache:!1,data:a,dataType:e.datatype,beforeSerialize:function(){var e={veto:!1};if(t.trigger("before-serialize.myams.form",[e]),e.veto)return!1;void 0!==window.tinyMCE&&tinyMCE.triggerSave()},beforeSubmit:function(t,a){var r={veto:!1};if(a.trigger("before-submit.myams.form",[t,r]),r.veto)return!1;a.data("submitted",!0),e.resetBeforeSubmit&&setTimeout((function(){e.resetSubmitButton(a,e,n)}),250)},uploadProgress:function(t,e,a,r){st(".progress",n).css("background-image","linear-gradient(to right, white -45%, green ".concat(r,"%, red ").concat(r,"%, red)"))},complete:function(e){t.trigger("complete.myams.form",[e])},success:function(t,a,r,i){var s={veto:!1};if(i.trigger("submit-success.myams.form",[t,a,r,s]),!s.veto){var l=i.closest(".modal-dialog");l.exists()&&!e.keepModalOpen&&MyAMS.modal&&MyAMS.modal.close(l);try{e.submitCallback(i,e,o,t,a,r)}finally{e.resetAfterSubmit(i,e,n),MyAMS.form.resetChanged(i)}}},error:function(t,a,r,i){i.trigger("submit-error.myams.form",[t,a,r,o]),o&&e.resetAfterError(i,e,n,o),e.resetAfterSubmit(i,e,n)},iframe:!1};return st.extend({},i,e.submitOptions)}function At(t,e,n){var a=e.progressHandler;if(a){var r=e.progressFieldName;return n[r]=MyAMS.core.generateUUID(),{handler:a,interval:e.progressInterval,fieldname:r,callback:e.progressCallback,endCallback:e.progressEndCallback}}}function wt(t,e,n,a){var r=setTimeout((function t(){var e={};e[a.fieldname]=n[a.fieldname],MyAMS.ajax.post(a.handler,e).then(MyAMS.core.getFunctionByName(a.callback||function(e,n){if("success"===n)if("running"===e.status){if(e.message)target.text(e.message);else{var i=e.progress||target.data("ams-progress-text")||MyAMS.i18n.PROGRESS;e.current?i+=": ".concat(e.current," / ").concat(e.length||100):i+="...",target.text(i)}r=setTimeout(t,a.interval)}else"finished"===e.status&&o();else o()}),o)}),a.interval);function o(){clearTimeout(r),e.resetSubmitButton(t,e,target),MyAMS.core.executeFunctionByName(a.endCallback,document,t,e,target),MyAMS.form.resetChanged(t)}}function xt(t,e,n,a,r){r.progress&&e.getProgressState(t,e,a,r.progress),t.ajaxSubmit(r)}function Ct(t,e,n,a,r,o){var i=e.datatype;if(!i){var s=MyAMS.ajax.getResponse(o);s&&(i=s.contentType,a=s.data)}switch(i){case"json":MyAMS.ajax.handleJSON(a,t,n);break;case"script":case"xml":break;default:MyAMS.form.resetChanged(t),n.css({opacity:"0.0"}),n.removeClass("hidden").parents(".hidden").removeClass(".hidden"),n.html(a).delay(50).animate({opacity:"1.0"},250),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,n)}var l=o.getResponseHeader("X-AMS-Callback");if(l){var c=o.getResponseHeader("X-AMS-Callback-Options")||"{}";MyAMS.core.executeFunctionByName(l,document,t,e,c,a,r,o)}t.trigger("after-submit.myams.form",[a])}function kt(t,e,n){t.data("submitted")&&(e.resetSubmitButton(t,e,n),t.data("submitted",!1),t.removeData("ams-submit-button"),t.trigger("after-reset.myams.form"))}function Tt(t,e,n){st("i",n).removeClass("fa-spin").removeClass("fa-cog").addClass("fa-ambulance")}function jt(t,e){return e.downloadTarget}function _t(t,e,n,a){var r=st('iframe[name="'.concat(n,'"]'));r.exists()||(r=st("<iframe>").attr("name",n).hide().appendTo(MyAMS.core.root)),st.extend(a,{iframe:!0,iframeTarget:r})}function Ot(t,e,n,a){var r=t.closest(".modal-dialog"),o=e.keepModalOpen;r.exists()&&!0!==o&&MyAMS.require("modal").then((function(){MyAMS.modal.close(r)})),a.progress||setTimeout((function(){e.resetAfterSubmit(t,e,button),MyAMS.form.resetChanged(t)}),e.resetTimeout)}function Rt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("form"):(MyAMS.form=ct,console.debug("MyAMS: form module loaded...")));var Nt=MyAMS.$,Et=!1,Pt={init:function(){Et||(Et=!0)},initElement:function(t){Nt("[data-ams-events-handlers]",t).each((function(t,e){var n=Nt(e),a=n.data("ams-events-handlers");if(a)for(var r=0,o=Object.entries(a);r<o.length;r++){var i=Rt(o[r],2),s=i[0],l=i[1];n.on(s,n.data("ams-events-options")||{},MyAMS.core.getFunctionByName(l))}}))}};MyAMS.env.bundle?MyAMS.config.modules.push("events"):(MyAMS.events=Pt,console.debug("MyAMS: events module loaded..."));var Ft=MyAMS.$,Dt=!1,It={init:function(){Dt||(Dt=!0,Ft(document).on("click","[data-ams-click-handler]",(function(t){var e=Ft(t.currentTarget),n=e.data("ams-disabled-handlers");if(!0!==n&&"click"!==n&&"all"!==n){var a=e.data();if(a.amsClickHandler){!1!==a.amsPreventDefault&&!1!==a.amsClickPreventDefault&&t.preventDefault(),!1!==a.amsStopPropagation&&!1!==a.amsClickStopPropagation&&t.stopPropagation();var r=!0,o=!1,i=void 0;try{for(var s,l=a.amsClickHandler.split(/[\s,;]+/)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value,d=MyAMS.core.getFunctionByName(c);void 0!==d&&d.call(e,t,a.amsClickHandlerOptions)}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}}})),Ft(document).on("change","[data-ams-change-handler]",(function(t){var e=Ft(t.currentTarget);if(!e.prop("readonly")){var n=e.data("ams-disabled-handlers");if(!0!==n&&"change"!==n&&"all"!==n){var a=e.data();if(a.amsChangeHandler){!1!==a.amsKeepDefault&&!1!==a.amsChangeKeepDefault&&t.preventDefault(),!1!==a.amsStopPropagation&&!1!==a.amsChangeStopPropagation&&t.stopPropagation();var r=!0,o=!1,i=void 0;try{for(var s,l=a.amsChangeHandler.split(/[\s,;]+/)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value,d=MyAMS.core.getFunctionByName(c);void 0!==d&&d.call(e,t,a.amsChangeHandlerOptions)}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}}}})),Ft(document).on("reset","form",(function(t){var e=Ft(t.currentTarget);setTimeout((function(){Ft(".alert-danger, SPAN.state-error",e).not(".persistent").remove(),Ft("LABEL.state-error",e).removeClass("state-error"),e.find(".select2").trigger("change"),Ft("[data-ams-reset-callback]",e).each((function(t,n){var a=Ft(n),r=a.data(),o=MyAMS.core.getFunctionByName(r.amsResetCallback);void 0!==o&&o.call(e,a,r.amsResetCallbackOptions)}))}),10),MyAMS.form&&MyAMS.form.setFocus(e)})),Ft(document).on("reset","[data-ams-reset-handler]",(function(t){var e=Ft(t.currentTarget),n=e.data();if(n.amsResetHandler){!0!==n.amsKeepDefault&&!0!==n.amsResetKeepDefault&&t.preventDefault();var a=MyAMS.core.getFunctionByName(n.amsResetHandler);void 0!==a&&a.call(e,n.amsResetHandlerOptions)}})),Ft(document).on("click","[data-ams-click-event]",(function(t){var e=Ft(t.currentTarget);Ft(t.target).trigger(e.data("ams-click-event"),e.data("ams-click-event-options"))})),Ft(document).on("click",'input[type="checkbox"][readonly]',(function(){return!1})))},initElement:function(t){}};MyAMS.env.bundle?MyAMS.config.modules.push("handlers"):(MyAMS.handlers=It,console.debug("MyAMS: handlers module loaded..."));var Bt=MyAMS.$,Lt=!1,$t={init:function(){Lt||(Lt=!0)},initElement:function(t){Bt("[data-ams-callback]",t).each((function(t,e){var n=Bt(e).data(),a=n.amsCallback;if("string"==typeof a)try{a=JSON.parse(n.amsCallback)}catch(t){a=n.amsCallback.split(/[\s,;]+/)}Bt.isArray(a)||(a=[a]);var r=!0,o=!1,i=void 0;try{for(var s,l=function(){var t=s.value,a=void 0,r=void 0,o=void 0,i=void 0;"string"==typeof t?(a=t,r=MyAMS.core.getFunctionByName(a),o=n.amsCallbackOptions,"string"==typeof(i=n.amsCallbackOptions)&&(i=i.unserialize())):(a=t.callback,r=MyAMS.core.getFunctionByName(a),o=t.source,i=t.options),void 0===r?o?MyAMS.core.getScript(o).then((function(){void 0===(r=MyAMS.core.getFunctionByName(a))?console.warn("Missing callback ".concat(a,"!")):r.call(e,i)})):console.warn("Missing source for undefined callback ".concat(t,"!")):Promise.resolve().then((function(){r.call(e,i)}))},c=a[Symbol.iterator]();!(r=(s=c.next()).done);r=!0)l()}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}}))}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("callbacks"):(MyAMS.callbacks=$t,console.debug("MyAMS: callbacks module loaded..."))),window.jQuery||(window.$=window.jQuery=n(0));var Ut={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("clipboard"):(MyAMS.clipboard=Ut,console.debug("MyAMS: clipboard module loaded..."))),window.jQuery||(window.$=window.jQuery=n(0));var qt={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("container"):(MyAMS.container=qt,console.debug("MyAMS: container module loaded..."))),window.jQuery||(window.$=window.jQuery=n(0));var Vt={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("datatable"):(MyAMS.datatable=Vt,console.debug("MyAMS: datatable module loaded..."))),window.jQuery||(window.$=window.jQuery=n(0));var Ht={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("graph"):(MyAMS.graph=Ht,console.debug("MyAMS: graph module loaded...")));var Wt=MyAMS.$,Gt={moveElementToParentEnd:function(t){var e=t.parent();return t.detach().appendTo(e)},hideDropdown:function(t){Wt(t.target).closest(".dropdown-menu").dropdown("hide")}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("helpers"):(MyAMS.helpers=Gt,console.debug("MyAMS: helpers module loaded...")));var Qt=MyAMS.$;var Jt=!1,Kt={init:function(){Jt||(Jt=!0,Qt.fn.extend({contextMenu:function(t){function e(e,n){var a=Qt(window)[n](),r=Qt(t.menuSelector)[n](),o=e;return e+r>a&&r<e&&(o-=r),o}return this.each((function(n,a){var r=Qt(a),o=Qt(t.menuSelector);Qt("a",o).each((function(t,e){Qt(e).data("ams-context-menu",!0)})),r.on("contextmenu",(function(t){if(!t.ctrlKey)return o.dropdown("show").css({position:"fixed",left:e(t.clientX,"width")-10,top:e(t.clientY,"height")-10}).off("click").on("click",(function(t){t.stopPropagation(),t.preventDefault(),o.dropdown("hide"),function(t){"A"!==t.get(0).tagName&&(t=t.parents("a").first());var e=t.data();if("modal"===e.toggle)MyAMS.require("modal").then((function(){MyAMS.modal.open(t)}));else{var n=t.attr("href")||e.amsUrl;if(!n||n.startsWith("javascript:")||t.attr("target"))return;var a=MyAMS.core.getFunctionByName(n);if("function"==typeof a&&(n=a(t)),void 0===n)return;"function"==typeof n?n(t):MyAMS.require("form","skin").then((function(){n=n.replace(/%23/,"#");var e=t.data("ams-target");e?MyAMS.form.confirmChangedForm(e).then((function(a){MyAMS.skin.loadURL(n,e,t.data("ams-link-options"),t.data("ams-link-callback"))})):MyAMS.form.confirmChangedForm().then((function(t){"success"===t&&(n.startsWith("#")?n!==location.hash&&(MyAMS.dom.root.hasClass("mobile-view-activated")?(MyAMS.dom.root.removeClass("hidden-menu"),setTimeout((function(){window.location.hash=n}),50)):window.location.hash=n):window.location=n)}))}))}}(Qt(t.target))})),!1})),Qt(document).click((function(){o.dropdown("hide")}))}))}}),Qt(document).on("show.bs.dropdown",".btn-group",(function(t){var e=Qt(t.currentTarget),n=e.children(".dropdown-menu"),a=e.get(0).getBoundingClientRect(),r=a.top,o=a.height,i=n.outerHeight();r>i&&Qt(window).height()-r<o+i&&e.addClass("dropup"),Qt("input, select, textarea",n).first().focus()})).on("hidden.bs.dropdown",".btn-group",(function(t){Qt(t.currentTarget).removeClass("dropup")})),Qt(document).on("hide.bs.dropdown",(function(t){if(t.clickEvent&&!1===Qt(t.clickEvent.target).parents(".dropdown-menu").data("ams-click-dismiss"))return t.preventDefault(),!1})))},initElement:function(t){}};function zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("menu"):(MyAMS.menu=Kt,console.debug("MyAMS: menu module loaded...")));var Xt=MyAMS.$,Zt=Xt.templates({markup:'\n\t<li class="p-1">\n\t\t<a class="d-flex flex-row"{{if url}} href="{{:url}}"{{/if}}>\n\t\t\t{{if source.avatar}}\n\t\t\t<img class="avatar mx-1 mt-1" src="{{:source.avatar}}" />\n\t\t\t{{else}}\n\t\t\t<i class="avatar fa fa-fw fa-2x fa-user mx-1 mt-1"></i>\n\t\t\t{{/if}}\n\t\t\t<div class="flex-grow-1 ml-2">\n\t\t\t\t<small class="timestamp float-right text-muted">\n\t\t\t\t\t{{*: new Date(data.timestamp).toLocaleString()}}\n\t\t\t\t</small>\n\t\t\t\t<strong class="title d-block">\n\t\t\t\t\t{{:source.title}}\n\t\t\t\t</strong>\n\t\t\t\t<p class="text-muted mb-2">{{:message}}</p>\n\t\t\t</div>\n\t\t</a>\n\t</li>',allowCode:!0}),te=Xt.templates({markup:'\n\t<ul class="list-style-none flex-grow-1 overflow-auto m-0 p-0">\n\t\t{{for notifications tmpl=~itemTemplate /}}\n\t</ul>\n\t{{if !~options.hideTimestamp}}\n\t<div class="timestamp border-top pt-1">\n\t\t<span>{{*: MyAMS.i18n.LAST_UPDATE }}{{: ~timestamp.toLocaleString() }}</span>\n\t\t<i class="fa fa-fw fa-sync float-right"\n\t\t   data-ams-click-handler="MyAMS.notifications.getNotifications"\n\t\t   data-ams-click-handler-options=\'{"localTimestamp": "{{: ~useLocalTime }}"}\'></i>\n\t</div>\n\t{{/if}}',allowCode:!0}),ee=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zt(this,t),this.values=e,this.options=n}var e,n,a;return e=t,(n=[{key:"render",value:function(t){Xt(t).html(te.render(this.values,{itemTemplate:Zt,timestamp:this.options.localTimestamp?new Date:new Date(this.values.timestamp),useLocalTime:this.options.localTimestamp?"true":"false",options:this.options}))}}])&&Yt(e.prototype,n),a&&Yt(e,a),t}(),ne={getNotifications:function(t,e){var n=e||t.data,a=Xt(t.target),r=Xt(t.currentTarget),o=r.data("ams-notifications-source")||r.parents("[data-ams-notifications-source]").data("ams-notifications-source");MyAMS.require("ajax").then((function(){MyAMS.ajax.get(o,r.data("ams-notifications-params")||"",r.data("ams-notifications-options")||{}).then((function(t,e,o){var i=Xt(a.data("ams-notifications-target")||a.parents("[data-ams-notifications-target]").data("ams-notifications-target")||r.attr("href"));new ee(t,n).render(i)}))}))}};MyAMS.env.bundle?MyAMS.config.modules.push("notifications"):(MyAMS.notifications=ne,console.debug("MyAMS: notifications module loaded...")),window.jQuery||(window.$=window.jQuery=n(0));var ae={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("tree"):(MyAMS.tree=ae,console.debug("MyAMS: tree module loaded..."))),window.jQuery||(window.$=window.jQuery=n(0));var re={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("jsonrpc"):(MyAMS.jsonrpc=re,console.debug("MyAMS: jsonrpc module loaded..."))),window.jQuery||(window.$=window.jQuery=n(0));var oe={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("xmlrpc"):(MyAMS.xmlrpc=oe,console.debug("MyAMS: xmlrpc module loaded..."))),window.jQuery||(window.$=window.jQuery=n(0));var ie={logPageview:function(){},logEvent:function(){}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("stats"):(MyAMS.stats=ie,console.debug("MyAMS: stats module loaded...")));n(2);A.$.extend(A,{require:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Promise((function(t,n){var a=[],r=[],o=MyAMS.config.modules,i=!0,s=!1,l=void 0;try{for(var c,d=e[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=c.value;if("string"==typeof u)o.indexOf(u)<0&&(a.push(u),r.push(C(u)));else if(x.isArray(u)){var f=!0,m=!1,p=void 0;try{for(var g,h=u[Symbol.iterator]();!(f=(g=h.next()).done);f=!0){var v=g.value;o.indexOf(v)<0&&(a.push(v),r.push(C(v)))}}catch(t){m=!0,p=t}finally{try{f||null==h.return||h.return()}finally{if(m)throw p}}}else for(var y=0,M=Object.entries(u);y<M.length;y++){var b=w(M[y],2),S=b[0],A=b[1];o.indexOf(S)<0&&(a.push(S),r.push(C(A)))}}}catch(t){s=!0,l=t}finally{try{i||null==d.return||d.return()}finally{if(s)throw l}}x.when.apply(x,r).then((function(){var e=!0,n=!1,r=void 0;try{for(var i,s=a[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var l=i.value;o.indexOf(l)<0&&(o.push(l),MyAMS.core.executeFunctionByName("MyAMS.".concat(l,".init")))}}catch(t){n=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}t()}),(function(){n("Can't load requested modules!")}))}))},ajax:O,alert:et,callbacks:$t,clipboard:Ut,container:qt,datatable:Vt,error:j,events:Pt,form:ct,graph:Ht,handlers:It,helpers:Gt,i18n:E,jsonrpc:re,menu:Kt,modal:rt,nav:G,notifications:ne,skin:K,stats:ie,tree:ae,xmlrpc:oe}),!1!==$("html").data("ams-init")&&function(t){t.extend(String.prototype,{camelCase:function(){return this?this.replace(/-(.)/g,(function(t,e){return e.toUpperCase()})):this},deCase:function(){return this?this.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})):this},initLowerCase:function(){return this?this.charAt(0).toLowerCase()+this.slice(1):this},unserialize:function(){if(!this)return this;var t=decodeURIComponent(this).split("&"),e={},n=!0,a=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=f(o.value.split("=",2),2),l=s[0],c=s[1];e[l]=c}}catch(t){a=!0,r=t}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return e}}),t.extend(t,{extendPrefix:function(t,e,n){for(var a=arguments.length,r=new Array(a>3?a-3:0),o=3;o<a;o++)r[o-3]=arguments[o];for(var i=0,s=r;i<s.length;i++)for(var l=s[i],c=0,d=Object.entries(l);c<d.length;c++){var u=f(d[c],2),m=u[0],p=u[1];m.startsWith(e)&&(t[m.substring(e.length).initLowerCase()]=null===n?p:n(p))}return t},extendOnly:function(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];for(var o=0,i=a;o<i.length;o++)for(var s=i[o],l=0,c=Object.entries(s);l<c.length;l++){var d=f(c[l],2),u=d[0],m=d[1];t.hasOwnProperty(u)&&(t[u]=null===e?m:e(m))}return t}}),t.fn.extend({exists:function(){return t(this).length>0},objectOrParentWithClass:function(t){return this.hasClass(t)?this:this.parents("."+t)},listattr:function(e){var n=[];return this.each((function(a,r){n.push(t(r).attr(e))})),n},style:function(t,e,n){var a=this;return this.each((function(r,o){if(void 0===o)return!1;var i=o.style;return void 0===t?(a=i,!1):void 0===e?(a=i.getPropertyValue(t),!1):(n=void 0!==n?n:"",void i.setProperty(t,e,n))})),a},removeClassPrefix:function(e){return this.each((function(n,a){var r=a.className.split(/\s+/).map((function(t){return t.startsWith(e)?"":t}));a.className=t.trim(r.join(" "))})),this}}),t(document).ready((function(){var e=t("html");e.removeClass("no-js").addClass("js"),S.core.executeFunctionByName(e.data("ams-init-page")||S.config.initPage)}))}(A.$)}]);