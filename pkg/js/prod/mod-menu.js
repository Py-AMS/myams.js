!function(e,n){if("function"==typeof define&&define.amd)define(["exports"],n);else if("undefined"!=typeof exports)n(exports);else{var t={};n(t),e.modMenu=t}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.menu=void 0;var d=MyAMS.$;var n=!1,t={init:function(){n||(n=!0,d.fn.extend({contextMenu:function(r){function i(e,n){var t=d(window)[n](),o=d(r.menuSelector)[n](),i=e;return t<e+o&&o<e&&(i-=o),i}return this.each(function(e,n){var t=d(n),o=d(r.menuSelector);d("a",o).each(function(e,n){d(n).data("ams-context-menu",!0)}),t.on("contextmenu",function(e){if(!e.ctrlKey)return o.dropdown("show").css({position:"fixed",left:i(e.clientX,"width")-10,top:i(e.clientY,"height")-10}).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),o.dropdown("hide"),function(t){"A"!==t.get(0).tagName&&(t=t.parents("a").first());var e=t.data();if("modal"===e.toggle)MyAMS.require("modal").then(function(){MyAMS.modal.open(t)});else{var o=t.attr("href")||e.amsUrl;if(!o||o.startsWith("javascript:")||t.attr("target"))return;var n=MyAMS.core.getFunctionByName(o);if("function"==typeof n&&(o=n(t)),void 0===o)return;"function"==typeof o?o(t):MyAMS.require("form","skin").then(function(){o=o.replace(/%23/,"#");var n=t.data("ams-target");n?MyAMS.form.confirmChangedForm(n).then(function(e){"success"===e&&MyAMS.skin.loadURL(o,n,t.data("ams-link-options"),t.data("ams-link-callback"))}):MyAMS.form.confirmChangedForm().then(function(e){"success"===e&&(o.startsWith("#")?o!==location.hash&&(MyAMS.dom.root.hasClass("mobile-view-activated")?(MyAMS.dom.root.removeClass("hidden-menu"),setTimeout(function(){window.location.hash=o},50)):window.location.hash=o):window.location=o)})})}}(d(e.target))}),!1}),d(document).click(function(){o.dropdown("hide")})})}}),d(document).on("show.bs.dropdown",".btn-group",function(e){var n=d(e.currentTarget),t=n.children(".dropdown-menu"),o=n.get(0).getBoundingClientRect(),i=o.top,r=o.height,a=t.outerHeight();a<i&&d(window).height()-i<r+a&&n.addClass("dropup"),d("input, select, textarea",t).first().focus()}).on("hidden.bs.dropdown",".btn-group",function(e){d(e.currentTarget).removeClass("dropup")}),d(document).on("hide.bs.dropdown",function(e){if(e.clickEvent&&!1===d(e.clickEvent.target).parents(".dropdown-menu").data("ams-click-dismiss"))return e.preventDefault(),!1}))}};e.menu=t,window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("menu"):(MyAMS.menu=t,console.debug("MyAMS: menu module loaded...")))});