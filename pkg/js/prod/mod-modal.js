!function(a,e){var t;"function"==typeof define&&define.amd?define(["exports"],e):"undefined"!=typeof exports?e(exports):(e(t={}),a.modModal=t)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.modalToggleEventHandler=t,a.modalShownEventHandler=n,a.dynamicModalShownEventHandler=f,a.modalDismissEventHandler=o,a.modalHiddenEventHandler=d,a.dynamicModalHiddenEventHandler=M,a.modal=void 0;var u=MyAMS.$,e=!1;function t(o){return new Promise(function(a,e){var t=u(o.currentTarget),n=t.data("ams-disabled-handlers");!t.attr("disabled")&&!t.hasClass("disabled")&&!0!==n&&"click"!==n&&"all"!==n&&!0!==t.data("ams-context-menu")?(!0===t.data("ams-stop-propagation")&&o.stopPropagation(),o.preventDefault(),MyAMS.modal.open(t).then(function(){a(!0)},e)):a(!1)})}function n(a){var e=u(a.target),t=1100+100*u(".modal:visible").length;e.css("z-index",t),setTimeout(function(){u(".modal-backdrop").not(".modal-stack").first().css("z-index",t-10).addClass("modal-stack")},0),u(e).off("click",'[data-dismiss="modal"]').on("click",'[data-dismiss="modal"]',function(a){var e=u(a.currentTarget).data("ams-dismiss-handler")||o;return MyAMS.core.executeFunctionByName(e,document,a)})}function f(a){var e=u(a.target);return MyAMS.core.executeFunctionByName(e.data("ams-init-content")||MyAMS.config.initContent,document,e)}function o(n){return new Promise(function(a,e){var t=u(n.currentTarget).parents(".modal").first();t.data("modal-result",u(n.currentTarget).data("modal-dismiss-value")),MyAMS.form?MyAMS.form.confirmChangedForm(t).then(function(a){"success"===a&&t.modal("hide")}).then(a,e):(t.modal("hide"),a())})}function d(){0<u(".modal:visible").length&&(u.fn.modal.Constructor.prototype._checkScrollbar(),u.fn.modal.Constructor.prototype._setScrollbar(),u("body").addClass("modal-open"))}function M(a){var e=u(a.target);MyAMS.core.executeFunctionByName(e.data("ams-clear-content")||MyAMS.config.clearContent,document,e),!0===e.data("dynamic")&&e.remove()}var r={init:function(){e||(e=!0,MyAMS.config.ajaxNav&&u(document).off("click",'[data-toggle="modal"]').on("click",'[data-toggle="modal"]',function(a){var e=u(a.currentTarget).data("ams-modal-handler")||t;MyAMS.core.executeFunctionByName(e,document,a)}),u(document).on("shown.bs.modal",".modal",function(a){var e=u(a.currentTarget).data("ams-shown-handler")||n;MyAMS.core.executeFunctionByName(e,document,a)}),u(document).on("hidden.bs.modal",".modal",function(a){var e=u(a.currentTarget).data("ams-hidden-handler")||d;MyAMS.core.executeFunctionByName(e,document,a)}))},open:function(m,n){return new Promise(function(t,a){var s={},l=m;"string"!=typeof m&&(s=m.data(),l=m.attr("href")||s.amsUrl);var e=MyAMS.core.getFunctionByName(l);"function"==typeof e&&(l=e(m)),l||a("No provided URL!"),l.startsWith("#")?(u(l).modal("show"),t()):u.ajax({type:"get",url:l,cache:void 0!==s.amsAllowCache&&s.amsAllowCache,data:n}).then(function(a,e,i){MyAMS.require("ajax").then(function(){var a,e,t,n,o,d=MyAMS.ajax.getResponse(i),r=d.contentType,c=d.data;switch(r){case"json":MyAMS.ajax.handleJSON(c,u(u(m).data("ams-json-target")||"#content"));break;case"script":case"xml":break;case"html":case"text":default:a=u(c),n={backdrop:void 0===(t=(e=u(".modal-dialog",a.wrap("<div></div>").parent())).data()||{}).backdrop?"static":t.backdrop},o=u.extend({},n,t.amsOptions),o=MyAMS.core.executeFunctionByName(t.amsInit,e,o)||o,u("<div>").addClass("modal fade").data("dynamic",!0).append(a).on("show.bs.modal",f).on("hidden.bs.modal",M).modal(o),MyAMS.stats&&!1!==s.amsLogEvent&&!1!==t.amsLogEvent&&MyAMS.stats.logPageview(l)}}).then(t)})})},close:function(a){"string"==typeof a?a=u(a):void 0===a&&(a=u(".modal-dialog:last"));var e=a.objectOrParentWithClass("modal");0<e.length&&e.modal("hide")}};a.modal=r,MyAMS.env.bundle?MyAMS.config.modules.push("modal"):(MyAMS.modal=r,console.debug("MyAMS: modal module loaded..."))});