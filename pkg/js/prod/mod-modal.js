!function(a,o){if("function"==typeof define&&define.amd)define(["exports"],o);else if("undefined"!=typeof exports)o(exports);else{var e={};o(e),a.modModal=e}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.modal=void 0;var f=MyAMS.$,o=!1,u={init:function(){if(!o){o=!0,MyAMS.config.ajaxNav&&f(document).on("click",'[data-toggle="modal"]',function(a){var o=f(a.currentTarget),e=o.data("ams-disabled-handlers");!0!==e&&"click"!==e&&"all"!==e&&!0!==o.data("ams-context-menu")&&(!0===o.data("ams-stop-propagation")&&a.stopPropagation(),a.preventDefault(),MyAMS.require("modal").then(function(){MyAMS.modal.open(o)}))});f(document).on("shown.bs.modal",".modal",function(a){var o=f(a.target),e=1100+100*f(".modal:visible").length;o.css("z-index",e),setTimeout(function(){f(".modal-backdrop").not(".modal-stack").first().css("z-index",e-10).addClass("modal-stack")},0),f(o).off("click",'[data-dismiss="modal"]').on("click",'[data-dismiss="modal"]',function(a){var o=f(a.currentTarget).parents(".modal").first();o.data("modal-result",f(a.currentTarget).data("modal-dismiss-value")),MyAMS.form?MyAMS.form.confirmChangedForm(o).then(function(a){"success"===a&&o.modal("hide")}):o.modal("hide")})}),f(document).on("hidden.bs.modal",".modal",function(){0<f(".modal:visible").length&&(f.fn.modal.Constructor.prototype._checkScrollbar(),f.fn.modal.Constructor.prototype._setScrollbar(),f("body").addClass("modal-open"))})}},initElement:function(){},open:function(m,t){return new Promise(function(e,a){var c={},r=m;if("string"!=typeof m){c=m.data(),r=m.attr("href")||c.amsUrl;var o=MyAMS.core.getFunctionByName(r);"function"==typeof o&&(r=o.call(m))}r||a("No provided URL!"),r.startsWith("#")?(f(r).modal("show"),e()):f.ajax({type:"get",url:r,cache:void 0!==c.amsAllowCache&&c.amsAllowCache,data:t}).then(function(a,o,l){MyAMS.require("ajax").then(function(){var a=MyAMS.ajax.getResponse(l),o=a.contentType,e=a.data;switch(o){case"json":MyAMS.ajax.handleJSON(e,f(f(m).data("ams-json-target")||"#content"));break;case"script":case"xml":break;case"html":case"text":default:var t=f(e),n=f(".modal-dialog",t.wrap("<div></div>").parent()),d=n.data()||{},i={backdrop:void 0===d.backdrop?"static":d.backdrop},s=f.extend({},i,d.amsOptions);s=MyAMS.core.executeFunctionByName(d.amsInit,n,s)||s,f("<div>").addClass("modal fade").data("dynamic",!0).append(t).on("show.bs.modal",u.show).on("hidden.bs.modal",u.hidden).modal(s),MyAMS.stats&&!1!==c.amsLogEvent&&!1!==d.amsLogEvent&&MyAMS.stats.logPageview(r)}}).then(function(){e()})})})},show:function(a){var o=f(a.target);MyAMS.core.initContent(o)},close:function(a){"string"==typeof a?a=f(a):void 0===a&&(a=f(".modal-dialog:last"));var o=a.objectOrParentWithClass("modal");0<o.length&&o.modal("hide")},hidden:function(a){var o=f(a.target);MyAMS.core.clearContent(o),!0===o.data("dynamic")&&o.remove()}};a.modal=u,MyAMS.env.bundle?MyAMS.config.modules.push("modal"):(MyAMS.modal=u,console.debug("MyAMS: modal module loaded..."))});