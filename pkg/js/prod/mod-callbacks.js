!function(e,a){if("function"==typeof define&&define.amd)define(["exports"],a);else if("undefined"!=typeof exports)a(exports);else{var n={};a(n),e.modCallbacks=n}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.callbacks=void 0;var f=MyAMS.$,a={init:function(){0},initElement:function(e){f("[data-ams-callback]",e).each(function(e,l){var a,c=f(l).data();try{a=JSON.parse(c.amsCallback),f.isArray(a)||(a=[a])}catch(e){a=c.amsCallback.split(/[\s,;]+/)}var n=!0,o=!1,i=void 0;try{for(var t,s=function(){var e=t.value,a=void 0,n=void 0,o=void 0;"string"==typeof e?(a=MyAMS.core.getFunctionByName(e),n=c.amsCallbackOptions,"string"==typeof(o=c.amsCallbackOptions)&&(o=o.unserialize())):(a=MyAMS.core.getFunctionByName(e.callback),n=e.source,o=a.options),void 0===a?n?MyAMS.core.getScript(n).then(function(){void 0===(a=MyAMS.core.getFunctionByName(e))?console.warn("Missing callback ".concat(e,"!")):a.call(l,o)}):console.warn("Missing source for undefined callback ".concat(e,"!")):Promise.resolve().then(function(){a.call(l,o)})},r=a[Symbol.iterator]();!(n=(t=r.next()).done);n=!0)s()}catch(e){o=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}})}};e.callbacks=a,window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("callbacks"):(MyAMS.callbacks=a,console.debug("MyAMS: callbacks module loaded...")))});