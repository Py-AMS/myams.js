!function(e,n){if("function"==typeof define&&define.amd)define(["exports"],n);else if("undefined"!=typeof exports)n(exports);else{var a={};n(a),e.modCallbacks=a}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.callbacks=void 0;var f=MyAMS.$,n={init:function(){0},initElement:function(a){return new Promise(function(e,n){var u=[];f("[data-ams-callback]",a).each(function(e,c){var i=f(c).data(),n=i.amsCallback;if("string"==typeof n)try{n=JSON.parse(i.amsCallback)}catch(e){n=i.amsCallback.split(/[\s,;]+/)}f.isArray(n)||(n=[n]);var a=!0,o=!1,l=void 0;try{for(var t,s=function(){var e=t.value,n=void 0,a=void 0,o=void 0,l=void 0;"string"==typeof e?(n=e,a=MyAMS.core.getFunctionByName(n),o=i.amsCallbackOptions,"string"==typeof(l=i.amsCallbackOptions)&&(l=l.unserialize())):(n=e.callback,a=MyAMS.core.getFunctionByName(n),o=e.source,l=e.options),void 0===a?o?u.push(MyAMS.core.getScript(o).then(function(){void 0===(a=MyAMS.core.getFunctionByName(n))?console.warn("Missing callback ".concat(n,"!")):a.call(document,c,l)})):console.warn("Missing source for undefined callback ".concat(e,"!")):u.push(Promise.resolve(a.call(document,c,l)))},r=n[Symbol.iterator]();!(a=(t=r.next()).done);a=!0)s()}catch(e){o=!0,l=e}finally{try{a||null==r.return||r.return()}finally{if(o)throw l}}}),f.when.apply(f,u).then(function(){e()})})}};e.callbacks=n,window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("callbacks"):(MyAMS.callbacks=n,console.debug("MyAMS: callbacks module loaded...")))});