/*! For license information please see myams-mini.js.LICENSE.txt */
!function(){var e={495:function(e){!function(t,a){var n=a.jQuery;e.exports=n?t(a,n):function(e){if(e&&!e.fn)throw"Provide jQuery or null";return t(a,e)}}((function(e,t){"use strict";var a=!1===t;t=t&&t.fn?t:e.jQuery;var n,s,o,r,i,c,l,d,m,u,p,g,M,f,h,y,S,b,A,v,x="v1.0.16",w="_ocp",C=function(e){return"function"==typeof e},k=Array.isArray,T=/[ \t]*(\r\n|\n|\r)/g,$=/\\(['"\\])/g,j=/['"\\]/g,N=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,_=/^if\s/,R=/<(\w+)[>\s]/,P=/[\x00`><\"'&=]/,F=/^on[A-Z]|^convert(Back)?$/,O=/^\#\d+_`[\s\S]*\/\d+_`$/,B=/[\x00`><"'&=]/g,I=/[&<>]/g,D=/&(amp|gt|lt);/g,E=/\[['"]?|['"]?\]/g,L=0,U={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},H={amp:"&",gt:">",lt:"<"},q="html",W="string",z="object",V="data-jsv-tmpl",G="jsvTmpl",J="For #index in nested block use #getIndex().",K={},Y={},X=e.jsrender,Q=X&&t&&!t.render,Z={template:{compile:function e(a,n,s,o){function i(n){var r,i;if(typeof n===W||n.nodeType>0&&(d=n)){if(!d&&(/^\.?\/[^\\:*?"<>]*$/.test(n)?(i=c[a=a||n])?n=i:d=document.getElementById(n):"#"===n.charAt(0)&&(d=document.getElementById(n.slice(1))),!d&&t.fn&&!u.rTmpl.test(n)))try{d=t(n,document)[0]}catch(e){}d&&("SCRIPT"!==d.tagName&&xe(n+": Use script block, not "+d.tagName),o?n=d.innerHTML:((r=d.getAttribute(V))&&(r!==G?(n=c[r],delete c[r]):t.fn&&(n=t.data(d)[G])),r&&n||(a=a||(t.fn?G:n),n=e(a,d.innerHTML,s,o)),n.tmplName=a=a||r,a!==G&&(c[a]=n),d.setAttribute(V,a),t.fn&&t.data(d,G,n))),d=void 0}else n.fn||(n=void 0);return n}var d,m,p=n=n||"";if(u._html=l.html,0===o&&(o=void 0,p=i(p)),(o=o||(n.markup?n.bnds?re({},n):n:{})).tmplName=o.tmplName||a||"unnamed",s&&(o._parentTmpl=s),!p&&n.markup&&(p=i(n.markup))&&p.fn&&(p=p.markup),void 0!==p)return p.render||n.render?p.tmpls&&(m=p):(n=he(p,o),Ce(p.replace(j,"\\$&"),n)),m||(m=re((function(){return m.render.apply(m,arguments)}),n),function(e){var t,a,n;for(t in Z)e[a=t+"s"]&&(n=e[a],e[a]={},r[a](n,e))}(m)),m}},tag:{compile:function(e,t,a){var n,s,o,r=new u._tg;function i(){var t=this;t._={unlinked:!0},t.inline=!0,t.tagName=e}if(C(t)?t={depends:t.depends,render:t}:typeof t===W&&(t={template:t}),s=t.baseTag)for(o in t.flow=!!t.flow,(s=typeof s===W?a&&a.tags[s]||m[s]:s)||xe('baseTag: "'+t.baseTag+'" not found'),r=re(r,s),t)r[o]=te(s[o],t[o]);else r=re(r,t);return void 0!==(n=r.template)&&(r.template=typeof n===W?c[n]||c(n):n),(i.prototype=r).constructor=r._ctr=i,a&&(r._parentTmpl=a),r}},viewModel:{compile:function(e,a){var n,s,o,r=this,c=a.getters,l=a.extend,d=a.id,m=t.extend({_is:e||"unnamed",unmap:A,merge:b},l),u="",p="",g=c?c.length:0,M=t.observable,f={};function h(e){s.apply(this,e)}function y(){return new h(arguments)}function S(e,t){for(var a,n,s,o,i,l=0;l<g;l++)a=void 0,typeof(s=c[l])!==W&&(s=(a=s).getter,i=a.parentRef),void 0===(o=e[s])&&a&&void 0!==(n=a.defaultVal)&&(o=Me(n,e)),t(o,a&&r[a.type],s,i)}function b(e,t,a){e=typeof e===W?JSON.parse(e):e;var n,s,o,r,c,l,m,u,p,g,h=0,b=this;if(k(b)){for(m={},p=[],s=e.length,o=b.length;h<s;h++){for(u=e[h],l=!1,n=0;n<o&&!l;n++)m[n]||(c=b[n],d&&(m[n]=l=typeof d===W?u[d]&&(f[d]?c[d]():c[d])===u[d]:d(c,u)));l?(c.merge(u),p.push(c)):(p.push(g=y.map(u)),a&&fe(g,a,t))}M?M(b).refresh(p,!0):b.splice.apply(b,[0,b.length].concat(p))}else for(r in S(e,(function(e,t,a,n){t?b[a]().merge(e,b,n):b[a]()!==e&&(typeof e===W&&("{"===e[0]&&"}"===e[e.length-1]||"["===e[0]&&"]"===e[e.length-1])&&(e=JSON.parse(e)),b[a](e))})),e)r===i||f[r]||(b[r]=e[r])}function A(){var e,t,a,n,s=0,o=this;function l(e){for(var t=[],a=0,n=e.length;a<n;a++)t.push(e[a].unmap());return t}if(k(o))return l(o);for(e={};s<g;s++)a=void 0,typeof(t=c[s])!==W&&(t=(a=t).getter),n=o[t](),e[t]=a&&n&&r[a.type]?k(n)?l(n):n.unmap():n;for(t in o)!o.hasOwnProperty(t)||"_"===t.charAt(0)&&f[t.slice(1)]||t===i||C(o[t])||(e[t]=o[t]);return e}for(h.prototype=m,n=0;n<g;n++)!function(e){e=e.getter||e,f[e]=n+1;var t="_"+e;u+=(u?",":"")+e,p+="this."+t+" = "+e+";\n",m[e]=m[e]||function(a){if(!arguments.length)return this[t];M?M(this).setProperty(e,a):this[t]=a},M&&(m[e].set=m[e].set||function(e){this[t]=e})}(c[n]);return p=new Function(u,p),s=function(){p.apply(this,arguments),(o=arguments[g+1])&&fe(this,arguments[g],o)},s.prototype=m,m.constructor=s,y.map=function(t){var a,n,s,o,r=0,l=t=typeof t===W?JSON.parse(t):t,d=[];if(k(t)){for(a=(t=t||[]).length;r<a;r++)d.push(this.map(t[r]));return d._is=e,d.unmap=A,d.merge=b,d}if(t){for(S(t,(function(e,t){t?e=t.map(e):typeof e===W&&("{"===e[0]&&"}"===e[e.length-1]||"["===e[0]&&"]"===e[e.length-1])&&(e=JSON.parse(e)),d.push(e)})),l=this.apply(this,d),r=g;r--;)if(s=d[r],(o=c[r].parentRef)&&s&&s.unmap)if(k(s))for(a=s.length;a--;)fe(s[a],o,l);else fe(s,o,l);for(n in t)n===i||f[n]||(l[n]=t[n])}return l},y.getters=c,y.extend=l,y.id=d,y}},helper:{},converter:{}};function ee(e,t){return function(){var a,n=this,s=n.base;return n.base=e,a=t.apply(n,arguments),n.base=s,a}}function te(e,t){return C(t)&&((t=ee(e?e._d?e:ee(se,e):se,t))._d=(e&&e._d||0)+1),t}function ae(e,t){var a,n=t.props;for(a in n)!F.test(a)||e[a]&&e[a].fix||(e[a]="convert"!==a?te(e.constructor.prototype[a],n[a]):n[a])}function ne(e){return e}function se(){return""}function oe(e){this.name=(t.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function re(e,t){if(e){for(var a in t)"__proto__"!==a&&(e[a]=t[a]);return e}}function ie(){var e=this.get("item");return e?e.index:void 0}function ce(){return this.index}function le(e,t,a,n){var s,o,r,i=0;if(1===a&&(n=1,a=void 0),t)for(r=(o=t.split(".")).length;e&&i<r;i++)s=e,e=o[i]?e[o[i]]:e,C(e)&&(e=e.call(s));return a&&(a.lt=a.lt||i<r),void 0===e?n?se:"":n?function(){return e.apply(s,arguments)}:e}function de(a,n,s){var o,r,i,c,l,m,p,g=this,M=!v&&arguments.length>1,f=g.ctx;if(a){if(g._||(l=g.index,g=g.tag),m=g,f&&f.hasOwnProperty(a)||(f=d).hasOwnProperty(a)){if(i=f[a],"tag"===a||"tagCtx"===a||"root"===a||"parentTags"===a)return i}else f=void 0;if((!v&&g.tagCtx||g.linked)&&(i&&i._cxp||(g=g.tagCtx||C(i)?g:!(g=g.scope||g).isTop&&g.ctx.tag||g,void 0!==i&&g.tagCtx&&(g=g.tagCtx.view.scope),f=g._ocps,(i=f&&f.hasOwnProperty(a)&&f[a]||i)&&i._cxp||!s&&!M||((f||(g._ocps=g._ocps||{}))[a]=i=[{_ocp:i,_vw:m,_key:a}],i._cxp={path:w,ind:0,updateValue:function(e,a){return t.observable(i[0]).setProperty(w,e),this}})),c=i&&i._cxp)){if(arguments.length>2)return(r=i[1]?u._ceo(i[1].deps):[w]).unshift(i[0]),r._cxp=c,r;if(l=c.tagElse,p=i[1]?c.tag&&c.tag.cvtArgs?c.tag.cvtArgs(l,1)[c.ind]:i[1](i[0].data,i[0],u):i[0]._ocp,M)return u._ucp(a,n,g,c),g;i=p}return i&&C(i)&&(o=function(){return i.apply(this&&this!==e?this:m,arguments)},re(o,i)),o||i}}function me(e,t){var a,n,s,o,r,i,c,l=this;if(l.tagName){if(!(l=((i=l).tagCtxs||[l])[e||0]))return}else i=l.tag;if(r=i.bindFrom,o=l.args,(c=i.convert)&&typeof c===W&&(c="true"===c?void 0:l.view.getRsc("converters",c)||xe("Unknown converter: '"+c+"'")),c&&!t&&(o=o.slice()),r){for(s=[],a=r.length;a--;)n=r[a],s.unshift(ue(l,n));t&&(o=s)}if(c){if(void 0===(c=c.apply(i,s||o)))return o;if(a=(r=r||[0]).length,k(c)&&(!1===c.arg0||1!==a&&c.length===a&&!c.arg0)||(c=[c],r=[0],a=1),t)o=c;else for(;a--;)+(n=r[a])===n&&(o[n]=c[a])}return o}function ue(e,t){return(e=e[+t===t?"args":"props"])&&e[t]}function pe(e){return this.cvtArgs(e,1)}function ge(e,t,a,n,s,o,r,i){var c,l,d,m=this,u="array"===t;m.content=i,m.views=u?[]:{},m.data=n,m.tmpl=s,d=m._={key:0,useKey:u?0:1,id:""+L++,onRender:r,bnds:{}},m.linked=!!r,m.type=t||"top",t&&(m.cache={_ct:p._cchCt}),a&&"top"!==a.type||((m.ctx=e||{}).root=m.data),(m.parent=a)?(m.root=a.root||m,c=a.views,l=a._,m.isTop=l.scp,m.scope=(!e.tag||e.tag===a.ctx.tag)&&!m.isTop&&a.scope||m,l.useKey?(c[d.key="_"+l.useKey++]=m,m.index=J,m.getIndex=ie):c.length===(d.key=m.index=o)?c.push(m):c.splice(o,0,m),m.ctx=e||a.ctx):t&&(m.root=m)}function Me(e,t){return C(e)?e.call(t):e}function fe(e,t,a){Object.defineProperty(e,t,{value:a,configurable:!0})}function he(e,a){var n,s=g._wm||{},o={tmpls:[],links:{},bnds:[],_is:"template",render:Ae};return a&&(o=re(o,a)),o.markup=e,o.htmlTag||(n=R.exec(e),o.htmlTag=n?n[1].toLowerCase():""),(n=s[o.htmlTag])&&n!==s.div&&(o.markup=t.trim(o.markup)),o}function ye(e,t){var a=e+"s";r[a]=function n(s,o,i){var c,l,d,m=u.onStore[e];if(s&&typeof s===z&&!s.nodeType&&!s.markup&&!s.getTgt&&!("viewModel"===e&&s.getters||s.extend)){for(l in s)n(l,s[l],o);return o||r}return s&&typeof s!==W&&(i=o,o=s,s=void 0),d=i?"viewModel"===e?i:i[a]=i[a]||{}:n,c=t.compile,void 0===o&&(o=c?s:d[s],s=void 0),null===o?s&&delete d[s]:(c&&((o=c.call(d,s,o,i,0)||{})._is=e),s&&(d[s]=o)),m&&m(s,o,i,c),o}}function Se(e){M[e]=M[e]||function(t){return arguments.length?(p[e]=t,M):p[e]}}function be(e){function t(t,a){this.tgt=e.getTgt(t,a),a.map=this}return C(e)&&(e={getTgt:e}),e.baseMap&&(e=re(re({},e.baseMap),e)),e.map=function(e,a){return new t(e,a)},e}function Ae(e,t,a,n,s,r){var i,c,l,d,m,p,M,f=n,h="";if(!0===t?(a=t,t=void 0):typeof t!==z&&(t=void 0),(l=this.tag)?(d=(f=f||this.view)._getTmpl(l.template||this.tmpl),arguments.length||(e=l.contentCtx&&C(l.contentCtx)?e=l.contentCtx(e):f)):d=this,d){if(!n&&e&&"view"===e._is&&(f=e),f&&e===f&&(e=f.data),m=!f,v=v||m,m&&((t=t||{}).root=e),!v||g.useViews||d.useViews||f&&f!==o)h=ve(d,e,t,a,f,s,r,l);else{if(f?(p=f.data,M=f.index,f.index=J):(p=(f=o).data,f.data=e,f.ctx=t),k(e)&&!a)for(i=0,c=e.length;i<c;i++)f.index=i,f.data=e[i],h+=d.fn(e[i],f,u);else f.data=e,h+=d.fn(e,f,u);f.data=p,f.index=M}m&&(v=void 0)}return h}function ve(e,t,a,n,s,o,r,i){var c,l,d,m,p,g,M,f,h,y,S,b,A,v="";if(i&&(h=i.tagName,b=i.tagCtx,a=a?Ne(a,i.ctx):i.ctx,e===s.content?M=e!==s.ctx._wrp?s.ctx._wrp:void 0:e!==b.content?e===i.template?(M=b.tmpl,a._wrp=b.content):M=b.content||s.content:M=s.content,!1===b.props.link&&((a=a||{}).link=!1)),s&&(r=r||s._.onRender,(A=a&&!1===a.link)&&s._.nl&&(r=void 0),a=Ne(a,s.ctx),b=!i&&s.tag?s.tag.tagCtxs[s.tagElse]:b),(y=b&&b.props.itemVar)&&("~"!==y[0]&&we("Use itemVar='~myItem'"),y=y.slice(1)),!0===o&&(g=!0,o=0),r&&i&&i._.noVws&&(r=void 0),f=r,!0===r&&(f=void 0,r=s._.onRender),S=a=e.helpers?Ne(e.helpers,a):a,k(t)&&!n)for((d=g?s:void 0!==o&&s||new ge(a,"array",s,t,e,o,r,M))._.nl=A,s&&s._.useKey&&(d._.bnd=!i||i._.bnd&&i,d.tag=i),c=0,l=t.length;c<l;c++)m=new ge(S,"item",d,t[c],e,(o||0)+c,r,d.content),y&&((m.ctx=re({},S))[y]=u._cp(t[c],"#data",m)),p=e.fn(t[c],m,u),v+=d._.onRender?d._.onRender(p,m):p;else d=g?s:new ge(S,h||"data",s,t,e,o,r,M),y&&((d.ctx=re({},S))[y]=u._cp(t,"#data",d)),d.tag=i,d._.nl=A,v+=e.fn(t,d,u);return i&&(d.tagElse=b.index,b.contentView=d),f?f(v,d):v}function xe(e){throw new u.Err(e)}function we(e){xe("Syntax error\n"+e)}function Ce(e,t,a,n,o){function r(t){(t-=b)&&v.push(e.substr(b,t).replace(T,"\\n"))}function i(t,a){t&&(t+="}}",we((a?"{{"+a+"}} block has {{/"+t+" without {{"+t:"Unmatched or missing {{/"+t)+", in template:\n"+e))}var c,l,d,m,u,g=p.allowCode||t&&t.allowCode||!0===M.allowCode,h=[],b=0,A=[],v=h,x=[,,h];if(g&&t._is&&(t.allowCode=g),a&&(void 0!==n&&(e=e.slice(0,-n.length-2)+y),e=f+e+S),i(A[0]&&A[0][2].pop()[0]),e.replace(s,(function(s,c,l,u,p,M,f,h,y,S,w,C){(f&&c||y&&!l||h&&":"===h.slice(-1)||S)&&we(s),M&&(p=":",u=q);var k,j,R,P=(c||a)&&[[]],O="",B="",I="",D="",E="",L="",U="",H="",W=!(y=y||a&&!o)&&!p;l=l||(h=h||"#data",p),r(C),b=C+s.length,f?g&&v.push(["*","\n"+h.replace(/^:/,"ret+= ").replace($,"$1")+";\n"]):l?("else"===l&&(_.test(h)&&we('For "{{else if expr}}" use "{{else expr}}"'),P=x[9]&&[[]],x[10]=e.substring(x[10],C),j=x[11]||x[0]||we("Mismatched: "+s),x=A.pop(),v=x[2],W=!0),h&&$e(h.replace(T," "),P,t,a).replace(N,(function(e,t,a,n,s,o,r,i){return"this:"===n&&(o="undefined"),i&&(R=R||"@"===i[0]),n="'"+s+"':",r?(B+=a+o+",",D+="'"+i+"',"):a?(I+=n+"j._cp("+o+',"'+i+'",view),',L+=n+"'"+i+"',"):t?U+=o:("trigger"===s&&(H+=o),"lateRender"===s&&(k="false"!==i),O+=n+o+",",E+=n+"'"+i+"',",m=m||F.test(s)),""})).slice(0,-1),P&&P[0]&&P.pop(),d=[l,u||!!n||m||"",W&&[],Te(D||(":"===l?"'#data',":""),E,L),Te(B||(":"===l?"data,":""),O,I),U,H,k,R,P||0],v.push(d),W&&(A.push(x),(x=d)[10]=b,x[11]=j)):w&&(i(w!==x[0]&&w!==x[11]&&w,x[0]),x[10]=e.substring(x[10],C),x=A.pop()),i(!x&&w),v=x[2]})),r(e.length),(b=h[h.length-1])&&i(typeof b!==W&&+b[10]===b[10]&&b[0]),a){for(l=je(h,e,a),u=[],c=h.length;c--;)u.unshift(h[c][9]);ke(l,u)}else l=je(h,t);return l}function ke(e,t){var a,n,s=0,o=t.length;for(e.deps=[],e.paths=[];s<o;s++)for(a in e.paths.push(n=t[s]),n)"_jsvto"!==a&&n.hasOwnProperty(a)&&n[a].length&&!n[a].skp&&(e.deps=e.deps.concat(n[a]))}function Te(e,t,a){return[e.slice(0,-1),t.slice(0,-1),a.slice(0,-1)]}function $e(e,a,n,s){var o,r,i,c,l,d=a&&a[0],m={bd:d},p={0:m},M=0,f=0,h=0,y={},S=0,b={},A={},v={},x={0:0},w={0:""},C=0;return"@"===e[0]&&(e=e.replace(E,".")),i=(e+(n?" ":"")).replace(u.rPrm,(function(n,i,k,T,$,N,_,R,P,F,O,B,I,D,E,L,U,H,q,W,z){T&&!R&&($=T+$),N=N||"",I=I||"",k=k||i||I,$=$||P,F&&(F=!/\)|]/.test(z[W-1]))&&($=$.slice(1).split(".").join("^")),O=O||H||"";var V,G,J,Y,X,Q,Z,ee=W;if(!l&&!c){if(_&&we(e),U&&d){if(V=v[h-1],z.length-1>ee-(V||0)){if(V=t.trim(z.slice(V,ee+n.length)),G=r||p[h-1].bd,(J=G[G.length-1])&&J.prm){for(;J.sb&&J.sb.prm;)J=J.sb;!(Y=J.sb={path:J.sb,bnd:J.bnd}).path&&J.path&&(J.bnd=!0)}else G.push(Y={path:G.pop()});J&&J.sb===Y&&(w[h]=w[h-1].slice(J._cpPthSt)+w[h],w[h-1]=w[h-1].slice(0,J._cpPthSt)),Y._cpPthSt=x[h-1],Y._cpKey=V,w[h]+=z.slice(C,W),C=W,Y._cpfn=K[V]=K[V]||new Function("data,view,j","//"+V+"\nvar v;\nreturn ((v="+w[h]+("]"===L?")]":L)+")!=null?v:null);"),w[h-1]+=A[f]&&g.cache?'view.getCache("'+V.replace(j,"\\$&")+'"':w[h],Y.prm=m.bd,Y.bnd=Y.bnd||Y.path&&Y.path.indexOf("^")>=0}w[h]=""}"["===O&&(O="[j._sq("),"["===k&&(k="[j._sq(")}return Z=l?(l=!D)?n:I+'"':c?(c=!E)?n:I+'"':(k?(b[++f]=!0,y[f]=0,d&&(v[h++]=ee++,m=p[h]={bd:[]},w[h]="",x[h]=1),k):"")+(q?f?"":(M=z.slice(M,ee),(o?(o=r=!1,"\b"):"\b,")+M+(M=ee+n.length,d&&a.push(m.bd=[]),"\b")):R?(h&&we(e),d&&a.pop(),o="_"+$,M=ee+n.length,d&&((d=m.bd=a[o]=[]).skp=!T),$+":"):$?$.split("^").join(".").replace(u.rPath,(function(e,t,n,i,c,l,u,p){if(X="."===n,n&&($=$.slice(t.length),/^\.?constructor$/.test(p||$)&&we(e),X||(e=(F?(s?"":"(ltOb.lt=ltOb.lt||")+"(ob=":"")+(i?'view.ctxPrm("'+i+'")':c?"view":"data")+(F?")===undefined"+(s?"":")")+'?"":view._getOb(ob,"':"")+(p?(l?"."+l:i||c?"":"."+n)+(u||""):(p=i?"":c?l||"":n,"")),e=t+("view.data"===(e+=p?"."+p:"").slice(0,9)?e.slice(5):e)+(F?(s?'"':'",ltOb')+(O?",1)":")"):"")),d)){if(G="_linkTo"===o?r=a._jsvto=a._jsvto||[]:m.bd,J=X&&G[G.length-1]){if(J._cpfn){for(;J.sb;)J=J.sb;J.prm&&(J.bnd&&($="^"+$.slice(1)),J.sb=$,J.bnd=J.bnd||"^"===$[0])}}else G.push($);O&&!X&&(v[h]=ee,x[h]=w[h].length)}return e}))+(O||N):N||(L?"]"===L?")]":")":B?(A[f]||we(e),","):i?"":(l=D,c=E,'"'))),l||c||L&&(A[f]=!1,f--),d&&(l||c||(L&&(b[f+1]&&(m=p[--h],b[f+1]=!1),S=y[f+1]),O&&(y[f+1]=w[h].length+(k?1:0),($||L)&&(m=p[++h]={bd:[]},b[f+1]=!0))),w[h]=(w[h]||"")+z.slice(C,W),C=W+n.length,l||c||((Q=k&&b[f+1])&&(w[h-1]+=k,x[h-1]++),"("===O&&X&&!Y&&(w[h]=w[h-1].slice(S)+w[h],w[h-1]=w[h-1].slice(0,S))),w[h]+=Q?Z.slice(1):Z),l||c||!O||(f++,$&&"("===O&&(A[f]=!0)),l||c||!H||(d&&(w[h]+=O),Z+=O),Z})),d&&(i=w[0]),!f&&i||we(e)}function je(e,t,a){var n,s,o,r,i,c,l,d,u,M,f,h,y,S,b,A,v,x,w,C,k,j,N,_,R,P,F,O,B,I,D,E,L,U,H=0,z=g.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,V="",G={},J=e.length;for(typeof t===W?(v=a?'data-link="'+t.replace(T," ").slice(1,-1)+'"':t,t=0):(v=t.tmplName||"unnamed",t.allowCode&&(G.allowCode=!0),t.debug&&(G.debug=!0),M=t.bnds,A=t.tmpls),n=0;n<J;n++)if(typeof(s=e[n])===W)V+='+"'+s+'"';else if("*"===(o=s[0]))V+=";\n"+s[1]+"\nret=ret";else{if(r=s[1],C=!a&&s[2],L=s[3],U=h=s[4],i="\n\tparams:{args:["+L[0]+"],\n\tprops:{"+L[1]+"}"+(L[2]?",\n\tctx:{"+L[2]+"}":"")+"},\n\targs:["+U[0]+"],\n\tprops:{"+U[1]+"}"+(U[2]?",\n\tctx:{"+U[2]+"}":""),B=s[6],I=s[7],s[8]?(D="\nvar ob,ltOb={},ctxs=",E=";\nctxs.lt=ltOb.lt;\nreturn ctxs;"):(D="\nreturn ",E=""),k=s[10]&&s[10].replace($,"$1"),(_="else"===o)?f&&f.push(s[9]):(F=s[5]||!1!==p.debugMode&&"undefined",M&&(f=s[9])&&(f=[f],H=M.push(1))),z=z||h[1]||h[2]||f||/view.(?!index)/.test(h[0]),(R=":"===o)?r&&(o=r===q?">":r+o):(C&&((x=he(k,G)).tmplName=v+"/"+o,x.useViews=x.useViews||z,je(C,x),z=x.useViews,A.push(x)),_||(w=o,z=z||o&&(!m[o]||!m[o].flow),N=V,V=""),j=(j=e[n+1])&&"else"===j[0]),O=F?";\ntry{\nret+=":"\n+",y="",S="",R&&(f||B||r&&r!==q||I)){if((P=new Function("data,view,j","// "+v+" "+ ++H+" "+o+D+"{"+i+"};"+E))._er=F,P._tag=o,P._bd=!!f,P._lr=I,a)return P;ke(P,f),u=!0,y=(b='c("'+r+'",view,')+H+",",S=")"}if(V+=R?(a?(F?"try{\n":"")+"return ":O)+(u?(u=void 0,z=d=!0,b+(P?(M[H-1]=P,H):"{"+i+"}")+")"):">"===o?(l=!0,"h("+h[0]+")"):"((v="+h[0]+")!=null?v:"+(a?"null)":'"")')):(c=!0,"\n{view:view,content:false,tmpl:"+(C?A.length:"false")+","+i+"},"),w&&!j){if(V="["+V.slice(0,-1)+"]",b='t("'+w+'",view,this,',a||f){if((V=new Function("data,view,j"," // "+v+" "+H+" "+w+D+V+E))._er=F,V._tag=w,f&&ke(M[H-1]=V,f),V._lr=I,a)return V;y=b+H+",undefined,",S=")"}V=N+O+b+(f&&H||V)+")",f=0,w=0}F&&!j&&(z=!0,V+=";\n}catch(e){ret"+(a?"urn ":"+=")+y+"j._err(e,view,"+F+")"+S+";}"+(a?"":"\nret=ret"))}V="// "+v+(G.debug?"\ndebugger;":"")+"\nvar v"+(c?",t=j._tag":"")+(d?",c=j._cnvt":"")+(l?",h=j._html":"")+(a?(s[8]?", ob":"")+";\n":',ret=""')+V+(a?"\n":";\nreturn ret;");try{V=new Function("data,view,j",V)}catch(e){we("Compiled template code:\n\n"+V+'\n: "'+(e.message||e)+'"')}return t&&(t.fn=V,t.useViews=!!z),V}function Ne(e,t){return e&&e!==t?t?re(re({},t),e):e:t&&re({},t)}function _e(e,a){var n,s,o,r=a.tag,i=a.props,c=a.params.props,l=i.filter,d=i.sort,m=!0===d,u=parseInt(i.step),p=i.reverse?-1:1;if(!k(e))return e;if(m||d&&typeof d===W?((n=e.map((function(e,t){return{i:t,v:typeof(e=m?e:le(e,d))===W?e.toLowerCase():e}}))).sort((function(e,t){return e.v>t.v?p:e.v<t.v?-p:0})),e=n.map((function(t){return e[t.i]}))):(d||p<0)&&!r.dataMap&&(e=e.slice()),C(d)&&(e=e.sort((function(){return d.apply(a,arguments)}))),p<0&&(!d||C(d))&&(e=e.reverse()),e.filter&&l&&(e=e.filter(l,a),a.tag.onFilter&&a.tag.onFilter(a)),c.sorted&&(n=d||p<0?e:e.slice(),r.sorted?t.observable(r.sorted).refresh(n):a.map.sorted=n),s=i.start,o=i.end,(c.start&&void 0===s||c.end&&void 0===o)&&(s=o=0),isNaN(s)&&isNaN(o)||(s=+s||0,o=void 0===o||o>e.length?e.length:+o,e=e.slice(s,o)),u>1){for(s=0,o=e.length,n=[];s<o;s+=u)n.push(e[s]);e=n}return c.paged&&r.paged&&$observable(r.paged).refresh(e),e}function Re(e,a,n){var s=this.jquery&&(this[0]||xe("Unknown template")),o=s.getAttribute(V);return Ae.call(o&&t.data(s)[G]||c(s),e,a,n)}function Pe(e){return U[e]||(U[e]="&#"+e.charCodeAt(0)+";")}function Fe(e,t){return H[t]||""}function Oe(e){return null!=e?P.test(e)&&(""+e).replace(B,Pe)||e:""}if(r={jsviews:x,sub:{rPath:/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rPrm:/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(?:(\()\s*)?\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,View:ge,Err:oe,tmplFn:Ce,parse:$e,extend:re,extendCtx:Ne,syntaxErr:we,onStore:{template:function(e,t){null===t?delete Y[e]:e&&(Y[e]=t)}},addSetting:Se,settings:{allowCode:!1},advSet:se,_thp:ae,_gm:te,_tg:function(){},_cnvt:function(e,t,a,n){var s,o,r,i,c,l="number"==typeof a&&t.tmpl.bnds[a-1];if(void 0===n&&l&&l._lr&&(n=""),void 0!==n?a=n={props:{},args:[n]}:l&&(a=l(t.data,t,u)),l=l._bd&&l,e||l){if(s=(o=t._lc)&&o.tag,a.view=t,!s){if(s=re(new u._tg,{_:{bnd:l,unlinked:!0,lt:a.lt},inline:!o,tagName:":",convert:e,onArrayChange:!0,flow:!0,tagCtx:a,tagCtxs:[a],_is:"tag"}),(i=a.args.length)>1)for(c=s.bindTo=[];i--;)c.unshift(i);o&&(o.tag=s,s.linkCtx=o),a.ctx=Ne(a.ctx,(o?o.view:t).ctx),ae(s,a)}s._er=n&&r,s.ctx=a.ctx||s.ctx||{},a.ctx=void 0,r=s.cvtArgs()[0],s._er=n&&r}else r=a.args[0];return null!=(r=l&&t._.onRender?t._.onRender(r,t,s):r)?r:""},_tag:function(e,t,a,n,s,r){function i(e){var t=c[e];if(void 0!==t)for(t=k(t)?t:[t],f=t.length;f--;)B=t[f],isNaN(parseInt(B))||(t[f]=parseInt(B));return t||[0]}var c,d,m,p,g,M,f,h,y,S,b,A,v,x,w,C,T,$,j,N,_,R,P,F,B,I,D,E,L,U=0,H="",W=(t=t||o)._lc||!1,z=t.ctx,V=a||t.tmpl,G="number"==typeof n&&t.tmpl.bnds[n-1];for("tag"===e._is?(e=(c=e).tagName,n=c.tagCtxs,c.template):(d=t.getRsc("tags",e)||xe("Unknown tag: {{"+e+"}} ")).template,void 0===r&&G&&(G._lr=d.lateRender&&!1!==G._lr||G._lr)&&(r=""),void 0!==r?(H+=r,n=r=[{props:{},args:[],params:{props:{}}}]):G&&(n=G(t.data,t,u)),M=n.length;U<M;U++)C=(S=n[U]).tmpl,(!W||!W.tag||U&&!W.tag.inline||c._er||C&&+C===C)&&(C&&V.tmpls&&(S.tmpl=S.content=V.tmpls[C-1]),S.index=U,S.ctxPrm=de,S.render=Ae,S.cvtArgs=me,S.bndArgs=pe,S.view=t,S.ctx=Ne(Ne(S.ctx,d&&d.ctx),z)),(a=S.props.tmpl)&&(S.tmpl=t._getTmpl(a),S.content=S.content||S.tmpl),c?W&&W.fn._lr&&(T=!!c.init):(T=!!(c=new d._ctr).init,c.parent=g=z&&z.tag,c.tagCtxs=n,W&&(c.inline=!1,W.tag=c),c.linkCtx=W,(c._.bnd=G||W.fn)?(c._.ths=S.params.props.this,c._.lt=n.lt,c._.arrVws={}):c.dataBoundOnly&&xe(e+" must be data-bound:\n{^{"+e+"}}")),P=c.dataMap,S.tag=c,P&&n&&(S.map=n[U].map),c.flow||(b=S.ctx=S.ctx||{},m=c.parents=b.parentTags=z&&Ne(b.parentTags,z.parentTags)||{},g&&(m[g.tagName]=g),m[c.tagName]=b.tag=c,b.tagCtx=S);if(!(c._er=r)){for(ae(c,n[0]),c.rendering={rndr:c.rendering},U=0;U<M;U++){if(R=(S=c.tagCtx=n[U]).props,c.ctx=S.ctx,!U){if(T&&(c.init(S,W,c.ctx),T=void 0),S.args.length||!1===S.argDefault||!1===c.argDefault||(S.args=N=[S.view.data],S.params.args=["#data"]),v=i("bindTo"),void 0!==c.bindTo&&(c.bindTo=v),void 0!==c.bindFrom?c.bindFrom=i("bindFrom"):c.bindTo&&(c.bindFrom=c.bindTo=v),x=c.bindFrom||v,D=v.length,I=x.length,c._.bnd&&(E=c.linkedElement)&&(c.linkedElement=E=k(E)?E:[E],D!==E.length&&xe("linkedElement not same length as bindTo")),(E=c.linkedCtxParam)&&(c.linkedCtxParam=E=k(E)?E:[E],I!==E.length&&xe("linkedCtxParam not same length as bindFrom/bindTo")),x)for(c._.fromIndex={},c._.toIndex={},h=I;h--;)for(B=x[h],f=D;f--;)B===v[f]&&(c._.fromIndex[f]=h,c._.toIndex[h]=f);W&&(W.attr=c.attr=W.attr||c.attr||W._dfAt),p=c.attr,c._.noVws=p&&p!==q}if(N=c.cvtArgs(U),c.linkedCtxParam)for(_=c.cvtArgs(U,1),f=I,L=c.constructor.prototype.ctx;f--;)(A=c.linkedCtxParam[f])&&(B=x[f],w=_[f],S.ctx[A]=u._cp(L&&void 0===w?L[A]:w,void 0!==w&&ue(S.params,B),S.view,c._.bnd&&{tag:c,cvt:c.convert,ind:f,tagElse:U}));($=R.dataMap||P)&&(N.length||R.dataMap)&&((j=S.map)&&j.src===N[0]&&!s||(j&&j.src&&j.unmap(),$.map(N[0],S,j,!c._.bnd),j=S.map),N=[j.tgt]),y=void 0,c.render&&(y=c.render.apply(c,N),t.linked&&y&&!O.test(y)&&((a={links:[]}).render=a.fn=function(){return y},y=ve(a,t.data,void 0,!0,t,void 0,void 0,c))),N.length||(N=[t]),void 0===y&&(F=N[0],c.contentCtx&&(F=!0===c.contentCtx?t:c.contentCtx(F)),y=S.render(F,!0)||(s?void 0:"")),H=H?H+(y||""):void 0!==y?""+y:void 0}c.rendering=c.rendering.rndr}return c.tagCtx=n[0],c.ctx=c.tagCtx.ctx,c._.noVws&&c.inline&&(H="text"===p?l.html(H):""),G&&t._.onRender?t._.onRender(H,t,c):H},_er:xe,_err:function(e,t,a){var n=void 0!==a?C(a)?a.call(t.data,e,t):a||"":"{Error: "+(e.message||e)+"}";return p.onError&&void 0!==(a=p.onError.call(t.data,e,a&&n,t))&&(n=a),t&&!t._lc?l.html(n):n},_cp:ne,_sq:function(e){return"constructor"===e&&we(""),e}},settings:{delimiters:function e(t,a,n){return t?Array.isArray(t)?e.apply(r,t):(b=n?n[0]:b,/^(\W|_){5}$/.test(t+a+b)||xe("Invalid delimiters"),f=t[0],h=t[1],y=a[0],S=a[1],p.delimiters=[f+h,y+S,b],t="\\"+f+"(\\"+b+")?\\"+h,a="\\"+y+"\\"+S,s="(?:(\\w+(?=[\\/\\s\\"+y+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+y+"]|\\"+y+"(?!\\"+S+"))*?)",u.rTag="(?:"+s+")",s=new RegExp("(?:"+t+s+"(\\/)?|\\"+f+"(\\"+b+")?\\"+h+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+a,"g"),u.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+t+".*"+a),M):p.delimiters},advanced:function(e){return e?(re(g,e),u.advSet(),M):g}},map:be},(oe.prototype=new Error).constructor=oe,ie.depends=function(){return[this.get("item"),"index"]},ce.depends="index",ge.prototype={get:function(e,t){t||!0===e||(t=e,e=void 0);var a,n,s,o,r=this,i="root"===t;if(e){if(!(o=t&&r.type===t&&r))if(a=r.views,r._.useKey){for(n in a)if(o=t?a[n].get(e,t):a[n])break}else for(n=0,s=a.length;!o&&n<s;n++)o=t?a[n].get(e,t):a[n]}else if(i)o=r.root;else if(t)for(;r&&!o;)o=r.type===t?r:void 0,r=r.parent;else o=r.parent;return o||void 0},getIndex:ce,ctxPrm:de,getRsc:function(e,t){var a,n,s=this;if(typeof t===W){for(;void 0===a&&s;)a=(n=s.tmpl&&s.tmpl[e])&&n[t],s=s.parent;return a||r[e][t]}},_getTmpl:function(e){return e&&(e.fn?e:this.getRsc("templates",e)||c(e))},_getOb:le,getCache:function(e){return p._cchCt>this.cache._ct&&(this.cache={_ct:p._cchCt}),void 0!==this.cache[e]?this.cache[e]:this.cache[e]=K[e](this.data,this,u)},_is:"view"},u=r.sub,M=r.settings,!(X||t&&t.render)){for(n in Z)ye(n,Z[n]);if(l=r.converters,d=r.helpers,m=r.tags,u._tg.prototype={baseApply:function(e){return this.base.apply(this,e)},cvtArgs:me,bndArgs:pe,ctxPrm:de},o=u.topView=new ge,t){if(t.fn.render=Re,i=t.expando,t.observable){if(x!==(x=t.views.jsviews))throw"jquery.observable.js requires jsrender.js "+x;re(u,t.views.sub),r.map=t.views.map}}else t={jsrender:x},a&&(e.jsrender=t),t.renderFile=t.__express=t.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},u._jq=function(e){e!==t&&(re(e,t),(t=e).fn.render=Re,delete t.jsrender,i=t.expando)};for(A in(p=u.settings).allowCode=!1,t.render=Y,t.views=r,t.templates=c=r.templates,p)Se(A);(M.debugMode=function(e){return void 0===e?p.debugMode:(p._clFns&&p._clFns(),p.debugMode=e,p.onError=typeof e===W?function(){return e}:C(e)?e:void 0,M)})(!1),g=p.advanced={cache:!0,useViews:!1,_jsv:!1},m({if:{render:function(e){var t=this,a=t.tagCtx;return t.rendering.done||!e&&(a.args.length||!a.index)?"":(t.rendering.done=!0,void(t.selected=a.index))},contentCtx:!0,flow:!0},for:{sortDataMap:be(_e),init:function(e,t){this.setDataMap(this.tagCtxs)},render:function(e){var t,a,n,s,o,r=this,i=r.tagCtx,c=!1===i.argDefault,l=i.props,d=c||i.args.length,m="",u=0;if(!r.rendering.done){if(t=d?e:i.view.data,c)for(c=l.reverse?"unshift":"push",s=+l.end,o=+l.step||1,t=[],n=+l.start||0;(s-n)*o>0;n+=o)t[c](n);void 0!==t&&(a=k(t),m+=i.render(t,!d||l.noIteration),u+=a?t.length:1),(r.rendering.done=u)&&(r.selected=i.index)}return m},setDataMap:function(e){for(var t,a,n,s=e.length;s--;)a=(t=e[s]).props,n=t.params.props,t.argDefault=void 0===a.end||t.args.length>0,a.dataMap=!1!==t.argDefault&&k(t.args[0])&&(n.sort||n.start||n.end||n.step||n.filter||n.reverse||a.sort||a.start||a.end||a.step||a.filter||a.reverse)&&this.sortDataMap},flow:!0},props:{baseTag:"for",dataMap:be((function(e,a){var n,s,o=a.map,r=o&&o.propsArr;if(!r){if(r=[],typeof e===z||C(e))for(n in e)s=e[n],n===i||!e.hasOwnProperty(n)||a.props.noFunctions&&t.isFunction(s)||r.push({key:n,prop:s});o&&(o.propsArr=o.options&&r)}return _e(r,a)})),init:se,flow:!0},include:{flow:!0},"*":{render:ne,flow:!0},":*":{render:ne,flow:!0},dbg:d.dbg=l.dbg=function(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}}),l({html:Oe,attr:Oe,encode:function(e){return typeof e===W?e.replace(I,Pe):e},unencode:function(e){return typeof e===W?e.replace(D,Fe):e},url:function(e){return null!=e?encodeURI(""+e):null===e?e:""}})}return p=u.settings,M.delimiters("{{","}}","^"),Q&&X.views.sub._jq(t),t||X}),window)},557:function(e){"use strict";e.exports=jquery}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}!function(){"use strict";class e{constructor(e,t={},a=!1){this.name=e,this.src=t.src,this.css=t.css,this.callbacks=[],t.callback&&this.callbacks.push({callback:t.callback,context:t.context||"body"}),this.async=void 0===t.async||t.async,this.loaded=a}load(){return new Promise(((e,t)=>{if(this.loaded)e();else{const a=[];this.src&&a.push(MyAMS.core.getScript(this.src)),this.css&&a.push(MyAMS.core.getCSS(this.css,`${this.name}_css`)),$.when.apply($,a).then((()=>{this.loaded=!0,e()}),t)}}))}run(e){const t=[];for(const a of this.callbacks)"string"==typeof a.callback&&(console.debug(`Resolving callback ${a.callback}`),a.callback=MyAMS.core.getFunctionByName(a.callback)||a.callback),t.push(a.callback(e,a.context));return Promise.all(t)}}const t=new class{constructor(){this.plugins=new Map}register(t,a){!a&&Object.prototype.hasOwnProperty.call(t,"name")&&(a=t.name);const n=this.plugins;if(n.has(a)){window.console&&console.debug&&console.debug(`Plug-in ${a} is already registered!`);const e=n.get(a);let s=!0;for(const a of e.callbacks)if(a.callback===t.callback&&a.context===t.context){s=!1;break}return s&&e.callbacks.push({callback:t.callback,context:t.context||"body"}),e}return"string"==typeof t&&(t=MyAMS.core.getFunctionByName(t)),"function"==typeof t?n.set(a,new e(a,{callback:t},!0)):"object"==typeof t&&n.set(a,new e(a,t,!(t.src||t.css))),n.get(a)}load(e){const t=[],a=[];$("[data-ams-plugins]",e).each(((e,n)=>{const s=$(n),o=s.data("ams-plugins");let r,i;if("string"==typeof o)for(const e of o.split(/[\s,;]+/)){const n=e.toLowerCase();i={src:s.data(`ams-plugin-${n}-src`),css:s.data(`ams-plugin-${n}-css`),callback:s.data(`ams-plugin-${n}-callback`),context:s,async:s.data(`ams-plugin-${n}-async`)},r=this.register(i,e),r.loaded||(!1===i.async?a.push(r.load()):t.push(r.load()))}else for(i of $.isArray(o)?o:[o])$.extend(i,{context:s}),r=this.register(i),r.loaded||(!1===r.async?a.push(r.load()):t.push(r.load()))}));let n=$.when.apply($,t);for(const e of a)n=n.done((()=>{}));return n}run(e,t=null){const a=new Set;$("[data-ams-plugins-disabled]",e).each(((e,t)=>{const n=$(t).data("ams-plugins-disabled").split(/[\s,;]+/);for(const e of n)a.add(e)}));const n=this.plugins;if(t)for(const a of t)n.has(a)&&n.get(a).run(e);else for(const[t,s]of n.entries())a.has(t)||s.run(e)}},n={plugins:t,initElement:function(e="#content"){return MyAMS.core.executeFunctionByName(MyAMS.config.initData,window,e),t.load(e)},register:function(e,a,n){return t.register(e,a,n)},run:function(e,a=null){return t.run(e,a)}};function s(e){let t=[];const a=e.data("ams-modules");if("string"==typeof a)t=t.concat(a.trim().split(/[\s,;]+/));else if(a)for(const[e,n]of Object.entries(a))if(void 0===t.find((t=>t===e||t[e]))){const a={};a[e]=n,t.push(a)}return $("[data-ams-modules]",e).each(((e,a)=>{const n=$(a).data("ams-modules");if("string"==typeof n)t=t.concat(n.trim().split(/[\s,;]+/));else if(n)for(const[e,a]of Object.entries(n))if(void 0===t.find((t=>t===e||t[e]))){const n={};n[e]=a,t.push(n)}})),[...new Set(t)]}function o(e,t){if(!e)return;if("string"!=typeof e)return e;const a=e.split(".");t=null==t?window:t;for(const e of a)try{t=t[e]}catch(e){return}return t}function r(e,t){if(null==e)return;if("function"==typeof e)return e;if("string"!=typeof e)return;const a=e.split("."),n=a.pop();t=null==t?window:t;for(const e of a)try{t=t[e]}catch(e){return}try{return t[n]}catch(e){return}}function i(e,t){const a=r(e,window);if("function"==typeof a){const e=Array.prototype.slice.call(arguments,2);return a.apply(t,e)}}function c(e){return e.replace(/{[^{}]*}/g,(e=>o(e.substr(1,e.length-2))))}window.jQuery||(window.$=window.jQuery=a(557));const l=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),d={modules:[],ajaxNav:!0,enableFastclick:!0,useSVGIcons:void 0!==window.FontAwesome&&"nest"===FontAwesome.config.autoReplaceSvg,menuSpeed:235,initPage:"MyAMS.core.initPage",initData:"MyAMS.core.initData",initContent:"MyAMS.core.initContent",clearContent:"MyAMS.core.clearContent",useRegistry:!0,alertsContainerClass:"toast-wrapper",safeMethods:["GET","HEAD","OPTIONS","TRACE"],csrfCookieName:"csrf_token",csrfHeaderName:"X-CSRF-Token",enableTooltips:!0,enableHtmlTooltips:!0,warnOnFormChange:!0,formChangeCallback:null,isMobile:l,device:l?"mobile":"desktop"},m={getObject:o,getFunctionByName:r,executeFunctionByName:i,getSource:c,getScript:function(e,t={}){return new Promise(((a,n)=>{const s={dataType:"script",url:u.core.getSource(e),cache:!u.env.devmode,async:!0},o=$.extend({},s,t);$.ajax(o).then((()=>{a(e)}),((e,t,a)=>{n(a)}))}))},getCSS:function(e,t){return new Promise((a=>{const n=$("HEAD");let s=$(`style[data-ams-id="${t}"]`,n);if(0===s.length){s=$("<style>").attr("data-ams-id",t).text(`@import "${c(e)}";`).appendTo(n);const o=setInterval((()=>{try{s[0].sheet.cssRules,clearInterval(o),a(!0)}catch(e){}}),10)}else a(!1)}))},getQueryVar:function(e,t){if("string"!=typeof e||e.indexOf("?")<0)return;e.endsWith("&")||(e+="&");const a=new RegExp(`.*?[&\\?]${t}=(.*?)&.*`),n=e.replace(a,"$1");return n===e?null:n},generateId:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()},generateUUID:function(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)}))},switchIcon:function(e,t,a,n="fa"){if("string"==typeof e&&(e=$(e)),u.config.useSVGIcons){const t=FontAwesome.findIconDefinition({iconName:a,prefix:n});t&&e.html(FontAwesome.icon(t).html)}else e.removeClass(`fa-${t}`).addClass(`fa-${a}`)},initPage:function(){return u.require("i18n").then((()=>{u.dom={page:$("html"),root:$("body"),nav:$("nav"),main:$("#main"),leftPanel:$("#left-panel"),shortcuts:$("#shortcuts")},u.theme=function(){let e=u.theme;if(!e){const t=$('link[href*="/myams.css"], link[href*="/emerald.css"], link[href*="/darkmode.css"], link[href*="/lightmode.css"]');e=t.length>0?/.*\/([a-z]+).css/.exec(t.attr("href"))[1]:"unknown"}return e}(),i(u.config.initData,window,u.dom.root);const e=s(u.dom.root);u.require(...e).then((()=>{for(const e of u.config.modules)i(`MyAMS.${e}.init`);i(u.dom.page.data("ams-init-content")||u.config.initContent)}))}))},initData:function(e){$("[data-ams-data]",e).each(((e,t)=>{const a=$(t),n=a.data("ams-data");if(n)for(const e in n){if(!Object.prototype.hasOwnProperty.call(n,e))continue;let t=n[e];"string"!=typeof t&&(t=JSON.stringify(t)),a.attr(`data-${e}`,t)}a.removeAttr("data-ams-data")}))},initContent:function(e=null){function t(){for(const t of u.config.modules)i(`MyAMS.${t}.initElement`,document,e)}return null===e&&(e=$("body")),e=$(e),new Promise(((a,n)=>{i(u.config.initData,window,e);const o=s(e);return u.require(...o).then((()=>{e.trigger("before-init.ams.content"),u.config.useRegistry&&!e.data("ams-disable-registry")?u.registry.initElement(e).then((()=>{t()})).then((()=>{u.registry.run(e),e.trigger("after-init.ams.content")})).then(a):(t(),a())}),(()=>{n("Missing MyAMS modules!")}))}))},clearContent:function(e){return"string"==typeof e&&(e=$(e)),new Promise(((t,a)=>{const n={veto:!1};$(document).trigger("clear.ams.content",[n,e]),n.veto?t(!n.veto):u.require("events").then((()=>{$(u.events.getHandlers(e,"clear.ams.content")).each(((e,t)=>{if($(t).trigger("clear.ams.content",[n]),n.veto)return!1})),n.veto||($(u.events.getHandlers(e,"cleared.ams.content")).each(((e,t)=>{$(t).trigger("cleared.ams.content")})),$(document).trigger("cleared.ams.content",[e])),t(!n.veto)}),(()=>{a("Missing MyAMS.events module!")}))}))}},u={$:$,env:function(e){const t=e('script[src*="/myams.js"], script[src*="/myams-dev.js"], script[src*="/emerald.js"], script[src*="/emerald-dev.js"], script[src*="/darkmode.js"], script[src*="/darkmode-dev.js"], script[src*="/lightmode.js"], script[src*="/lightmode-dev.js"], script[src*="/myams-core.js"], script[src*="/myams-core-dev.js"], script[src*="/myams-mini.js"], script[src*="/myams-mini-dev.js"]').attr("src"),a=!t||t.indexOf("-dev.js")>=0;return{bundle:!t||t.indexOf("-core")<0,devmode:a,devext:a?"-dev":"",extext:a?"":".min",baseURL:t?t.substring(0,t.lastIndexOf("/")+1):"/"}}($),config:d,core:m,registry:n};window.MyAMS=u;var p=u;const g=MyAMS.$;function M(e,t){let a,n;"object"==typeof e?(a=e.src,n=e.css):a=e.startsWith("http://")||e.startsWith("https://")||e.endsWith(".js")?e:`${MyAMS.env.baseURL}mod-${e}${MyAMS.env.devext}.js`;const s=[MyAMS.core.getScript(a,{async:!0},console.error)];return n&&s.push(MyAMS.core.getCSS(n,`${t}_css`)),s}a(495);const f=MyAMS.$,h=f.templates({markup:'\n\t<div class="alert alert-{{:status}}" role="alert">\n\t\t<button type="button" class="close" data-dismiss="alert" \n\t\t\t\taria-label="{{*: MyAMS.i18n.BTN_CLOSE }}">\n\t\t\t<i class="fa fa-times" aria-hidden="true"></i>\t\n\t\t</button>\n\t\t{{if header}}\n\t\t<h5 class="alert-heading">{{:header}}</h5>\n\t\t{{/if}}\n\t\t{{if message}}\n\t\t<p>{{:message}}</p>\n\t\t{{/if}}\n\t\t{{if messages}}\n\t\t<ul>\n\t\t{{for messages}}\n\t\t\t<li>\n\t\t\t\t{{if header}}<strong>{{:header}} :</strong>{{/if}}\n\t\t\t\t{{:message}}\n\t\t\t</li>\n\t\t{{/for}}\n\t\t</ul>\n\t\t{{/if}}\n\t\t{{if widgets}}\n\t\t<ul>\n\t\t{{for widgets}}\n\t\t\t<li>\n\t\t\t\t{{if header}}<strong>{{:header}} :</strong>{{/if}}\n\t\t\t\t{{:message}}\n\t\t\t</li>\n\t\t{{/for}}\n\t\t</ul>\n\t\t{{/if}}\n\t</div>',allowCode:!0}),y={showErrors:(e,t)=>new Promise(((a,n)=>{e||(e=f("#content >section:first-child >div:first-child")),"string"==typeof t?MyAMS.require("i18n","alert").then((()=>{MyAMS.alert.alert({parent:e,status:"danger",header:MyAMS.i18n.ERROR_OCCURED,message:t})})).then(a,n):f.isArray(t)?MyAMS.require("i18n","alert").then((()=>{MyAMS.alert.alert({parent:e,status:"danger",header:MyAMS.i18n.ERRORS_OCCURED,message:t})})).then(a,n):MyAMS.require("i18n","ajax","alert","form").then((()=>{MyAMS.form.clearAlerts(e);const a=[];for(const e of t.messages||[])"string"==typeof e?a.push({header:null,message:e}):a.push(e);for(const e of t.widgets||[])a.push({header:e.label,message:e.message});const n={status:"danger",header:t.header||(a.length>1?MyAMS.i18n.ERRORS_OCCURED:MyAMS.i18n.ERROR_OCCURED),message:t.error||null,messages:a};f(h.render(n)).prependTo(e);for(const a of t.widgets||[]){let t;t=a.id?f(`#${a.id}`,e):f(`[name="${a.name}"]`,e),t.exists()&&MyAMS.form.setInvalid(e,t,a.message),t.parents("fieldset.switched").each(((e,t)=>{f("legend.switcher",t).click()})),t.parents(".tab-pane").each(((e,t)=>{const a=f(t),n=a.parents(".tab-content").siblings(".nav-tabs");f(`li:nth-child(${a.index()+1})`,n).addClass("is-invalid"),f("li.is-invalid:first a",n).click()}))}MyAMS.require("helpers").then((()=>{let t=e.parents(".modal-body");t.exists()||(t=f("#main")),MyAMS.helpers.scrollTo(t,e,{offset:-15})}))})).then(a,n)})),showHTTPError:e=>new Promise(((t,a)=>{MyAMS.require("alert").then((()=>{MyAMS.alert.messageBox({status:"error",title:e.title,message:e.message,hideTimestamp:!1,timeout:0})})).then(t,a)}))};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("error"):(MyAMS.error=y,console.debug("MyAMS: error module loaded...")));const S=MyAMS.$;function b(e){if(window.Cookies){const t=Cookies.get(MyAMS.config.csrfCookieName);t&&e.setRequestHeader(MyAMS.config.csrfHeaderName,t)}}const A={check:(e,t)=>new Promise(((a,n)=>{const s=[];if(void 0===e){t instanceof Array||(t=[t]);for(const e of t)s.push(MyAMS.core.getScript(e))}else e instanceof Array||(e=[e]),e.forEach(((e,a)=>{void 0===e&&s.push(MyAMS.core.getScript(t[a]))}));S.when.apply(S,s).then((()=>{a(s.length>0)}),n)})),getAddr:e=>{const t=e||S("html head base").attr("href")||window.location.href;return t.substring(0,t.lastIndexOf("/")+1)},start:()=>{S("#ajax-gear").show()},stop:()=>{S("#ajax-gear").hide()},progress:e=>{e.lengthComputable&&(e.loaded>=e.total||console&&console.debug&&console.debug(`${Math.round(e.loaded/e.total*100)}%`))},get:(e,t,a)=>new Promise(((n,s)=>{let o;o=e.startsWith(window.location.protocol)?e:MyAMS.ajax.getAddr()+e;const r={url:o,type:"get",cache:!1,data:S.param(t||null),dataType:"json",beforeSend:b},i=S.extend({},r,a);S.ajax(i).then(((e,t,a)=>{n(e,t,a)}),((e,t,a)=>{s(a)}))})),post:(e,t,a)=>new Promise(((n,s)=>{let o,r;o=e.startsWith(window.location.protocol)?e:MyAMS.ajax.getAddr()+e,r=t&&a&&a.contentType&&a.contentType.startsWith("application/json")?JSON.stringify(t):S.param(t||null);const i={url:o,type:"post",cache:!1,data:r,dataType:"json",beforeSend:b},c=S.extend({},i,a);S.ajax(c).then(((e,t,a)=>{n(e,t,a)}),((e,t,a)=>{s(a)}))})),getJSON:()=>(e,t)=>{const a=t.url;return delete t.url,MyAMS.ajax.post(a,t).then(MyAMS.ajax.handleJSON)},getResponse:e=>{let t,a="unknown";if(e){let n=e.getResponseHeader("content-type");if(!n)try{n=e.responseXML.contentType}catch(e){n=null}if(n)if(n.startsWith("application/javascript"))t=e.responseText,a="script";else if(n.startsWith("text/html"))t=e.responseText,a="html";else if(n.startsWith("text/xml"))t=e.responseText,a="xml";else if(t=e.responseJSON,t)a="json";else try{t=JSON.parse(e.responseText),a="json"}catch(n){t=e.responseText,a="binary"}else t={status:"alert",alert:{title:MyAMS.i18n.ERROR_OCCURED,content:MyAMS.i18n.NO_SERVER_RESPONSE}},a="json"}return{contentType:a,data:t}},handleJSON:(e,t,a)=>{function n(){return new Promise(((a,n)=>{void 0!==t?MyAMS.require("form").then((()=>{MyAMS.form.resetChanged(t)})).then((()=>{!1!==e.closeForm?MyAMS.require("modal").then((()=>{MyAMS.modal.close(t)})).then(a,n):a()})):a()}))}let s=null,o=null;const r=e.status,i=[];switch(a instanceof jQuery&&!a.length&&(a=null),r){case"alert":if(window.alert){const t=e.alert;window.alert(`${t.title}\n\n${t.content}`)}break;case"error":i.push(MyAMS.require("error").then((()=>{MyAMS.error.showErrors(t,e)})));break;case"message":case"messagebox":case"smallbox":break;case"info":case"success":case"notify":case"callback":case"callbacks":i.push(n());break;case"modal":i.push(MyAMS.require("modal").then((()=>{MyAMS.modal.open(e.location)})));break;case"reload":n(),s=e.location||window.location.hash,s.startsWith("#")&&(s=s.substring(1)),o=S(e.target||a||"#content"),i.push(MyAMS.require("skin").then((()=>{MyAMS.skin.loadURL(s,o,{preLoadCallback:MyAMS.core.getFunctionByName(e.preReload||function(){S("[data-ams-pre-reload]",o).each(((e,t)=>{MyAMS.core.executeFunctionByName(S(t).data("ams-pre-reload"))}))}),preLoadCallbackOptions:e.preReloadOptions,afterLoadCallback:MyAMS.core.getFunctionByName(e.postReload||function(){S("[data-ams-post-reload]",o).each(((e,t)=>{MyAMS.core.executeFunctionByName(S(t).data("ams-post-reload"))}))}),afterLoadCallbackOptions:e.postReloadOptions})})));break;case"redirect":n(),s=e.location||window.location.href,s.endsWith("##")&&(s=s.replace(/##/,window.location.hash)),e.window?window.open(s,e.window,e.options):(S(window).off("beforeunload"),window.location.href===s?window.location.reload():window.location.replace(s));break;default:e.code?i.push(MyAMS.require("error").then((()=>{MyAMS.error.showHTTPError(e)}))):window.console&&console.warn&&console.warn(`Unhandled JSON response status: ${r}`)}if(e.content){const t=e.content,n=S(t.target||a||"#content");"string"==typeof t?n.html(t):(t.text?n.text(t.text):n.html(t.html),i.push(MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,n).then((()=>{t.keepHidden||n.removeClass("hidden")}))))}if(e.contents)for(const t of e.contents){const e=S(t.target);t.text?e.text(t.text):e.html(t.html),i.push(MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,e).then((()=>{t.keepHidden||e.removeClass("hidden")})))}if(e.message&&!e.code&&i.push(MyAMS.require("alert").then((()=>{if("string"==typeof e.message)MyAMS.alert.smallBox({status:r,message:e.message,icon:"fa-info-circle",timeout:3e3});else{const a=e.message;MyAMS.alert.alert({parent:t,status:a.status||r,header:a.header,subtitle:a.subtitle,message:a.message})}}))),e.messagebox&&i.push(MyAMS.require("alert").then((()=>{if("string"==typeof e.messagebox)MyAMS.alert.messageBox({status:r,title:MyAMS.i18n.ERROR_OCCURED,icon:"fa-info-circle",message:e.messagebox,timeout:1e4});else{const t=e.messagebox;MyAMS.alert.messageBox({status:t.status||r,title:t.title||MyAMS.i18n.ERROR_OCCURED,icon:t.icon||"fa-info-circle",message:t.message,content:t.content,timeout:0===t.timeout?0:t.timeout||1e4})}}))),e.smallbox&&i.push(MyAMS.require("alert").then((()=>{if("string"==typeof e.smallbox)MyAMS.alert.smallBox({status:r,message:e.smallbox,icon:"fa-info-circle",timeout:3e3});else{const t=e.smallbox;MyAMS.alert.smallBox({status:t.status||r,message:t.message,content:t.content,icon:t.icon||"fa-info-circle",timeout:t.timeout})}}))),e.event&&t.trigger(e.event,e.eventOptions),e.events)for(const a of e.events)"string"==typeof a?t.trigger(a,e.eventOptions):t.trigger(a.event,a.options);if(e.callback&&i.push(MyAMS.core.executeFunctionByName(e.callback,document,t,e.options)),e.callbacks)for(const a of e.callbacks)"string"==typeof a?i.push(MyAMS.core.executeFunctionByName(a,document,t,e.options)):i.push(MyAMS.require(a.module||[]).then((()=>{MyAMS.core.executeFunctionByName(a.callback,document,t,a.options)})));return Promise.all(i)},error:(e,t,a,n)=>{if("abort"===n)return;if(t&&t.statusText&&"OK"===t.statusText.toUpperCase())return;if(!0===t.x_ams_handled)return;const s=MyAMS.ajax.getResponse(t);s?"json"===s.contentType?(MyAMS.ajax.handleJSON(s.data),t.x_ams_handled=!0):MyAMS.require("i18n","alert").then((()=>{const t=n||e.statusText||e.type,a=s.responseText;MyAMS.alert.messageBox({status:"error",title:MyAMS.i18n.ERROR_OCCURED,content:`<h4>${t}</h4><p>${a||""}</p>`,icon:"fa-exclamation-triangle",timeout:5e3})}),(()=>{window.console&&(console.error&&console.error(e),console.debug&&console.debug(s))})):window.console&&(console.error&&console.error("ERROR: Can't parse response!"),console.debug&&console.debug(t))}};"undefined"==typeof jest&&A.check(window.Cookies,`${MyAMS.env.baseURL}../ext/js-cookie${MyAMS.env.extext}.js`).then((()=>{const e=S.ajaxSettings.xhr;S.ajaxSetup({beforeSend:(e,t)=>{if(MyAMS.config.safeMethods.indexOf(t.type)<0&&void 0!==window.Cookies){const t=Cookies.get(MyAMS.config.csrfCookieName);t&&e.setRequestHeader(MyAMS.config.csrfHeaderName,t)}},progress:A.progress,progressUpload:A.progress,xhr:function(){const t=e();return t&&"function"==typeof t.addEventListener&&A.progress&&t.addEventListener("progress",(e=>{MyAMS.ajax.progress(e)}),!1),t}})})),S(document).ajaxStart(A.start),S(document).ajaxStop(A.stop),S(document).ajaxError(A.error),MyAMS.env.bundle?MyAMS.config.modules.push("ajax"):(MyAMS.ajax=A,console.debug("MyAMS: AJAX module loaded..."));const v=MyAMS.$;let x=!1;const w={language:"en",INFO:"Information",WARNING:"!! WARNING !!",ERROR:"ERROR: ",LOADING:"Loading...",PROGRESS:"Processing",WAIT:"Please wait!",FORM_SUBMITTED:"This form was already submitted...",NO_SERVER_RESPONSE:"No response from server!",ERROR_OCCURED:"An error occured!",ERRORS_OCCURED:"Some errors occured!",BAD_LOGIN_TITLE:"Bad login!",BAD_LOGIN_MESSAGE:"Your anthentication credentials didn't allow you to open a session; please check your credentials or contact administrator.",CONFIRM:"Confirm",CONFIRM_REMOVE:"Removing this content can't be undone. Do you confirm?",BTN_OK:"OK",BTN_CANCEL:"Cancel",BTN_YES:"Yes",BTN_NO:"No",BTN_CLOSE:"Close",CLIPBOARD_COPY:"Copy to clipboard with Ctrl+C, and Enter",CLIPBOARD_CHARACTER_COPY_OK:"Character copied to clipboard.",CLIPBOARD_TEXT_COPY_OK:"Text copied to clipboard.",FORM_CHANGED_WARNING:"Some changes were not saved. These updates will be lost if you leave this page.",DELETE_WARNING:"This change can't be undone. Are you sure that you want to delete this element?",NO_UPDATE:"No changes were applied.",DATA_UPDATED:"Data successfully updated.",HOME:"Home",LOGOUT:"Logout?",LOGOUT_COMMENT:"You can improve your security further after logging out by closing this opened browser",LAST_UPDATE:"Last update: ",DT_COLUMNS:"Columns",NO_SELECTED_VALUE:"No selected value",plugins:{datatables:{search:"",searchPlaceholder:"Search..."}},init:(e=!1)=>new Promise(((t,a)=>{if(x&&!e)return void t();x=!0;const n=v("html"),s=n.attr("lang")||n.attr("xml:lang");s&&!s.startsWith("en")?MyAMS.core.getScript(`${MyAMS.env.baseURL}i18n/myams-${s.substr(0,2)}.js`).then(t,a):t()}))};MyAMS.env.bundle?MyAMS.config.modules.push("i18n"):(MyAMS.i18n=w,console.debug("MyAMS: I18n module loaded..."));const C=MyAMS.$;class k{constructor(e){this.props=e}render(){return C('<li class="header"></li>').text(this.props.header||"")}}class T{render(){return C('<li class="divider"></li>')}}class j{constructor(e){this.items=e}render(){const e=C("<div></div>");for(const t of this.items)if(t.label){const a=C("<li></li>"),n=C("<a></a>").attr("href",t.href||"#").attr("title",t.label);for(const[e,a]of Object.entries(t.attrs||{}))n.attr(e,a);t.icon&&C('<i class="fa-lg fa-fw mr-1"></i>').addClass(t.icon).appendTo(n),C('<span class="menu-item-parent"></span>').text(t.label).appendTo(n),t.badge&&C('<span class="badge ml-1 mr-3 float-right"></span>').addClass(`bg-${t.badge.status}`).text(t.badge.value).appendTo(n),n.appendTo(a),t.items&&C("<ul></ul>").append(new j(t.items).render()).appendTo(a),a.appendTo(e)}else(new T).render().appendTo(e);return e.children()}}class N{constructor(e,t,a){this.menus=e,this.parent=t,this.settings=a}getMenus(){const e=C("<ul></ul>");for(const t of this.menus)void 0!==t.header&&e.append(new k(t).render()),e.append(new j(t.items).render());return e}render(){const e=this.getMenus();this.init(e),this.parent.append(e)}init(e){const t=this.settings;e.find("li").each(((e,a)=>{const n=C(a);if(n.find("ul").length>0){const e=n.find("a:first"),a=C(`<b class="collapse-sign">${t.closedSign}</b>`);a.on("click",(e=>{e.preventDefault()})),e.append(a),"#"===e.attr("href")&&e.click((()=>!1))}})),e.find("li.open").each(((e,a)=>{const n=C(a);C("> ul",n).slideDown(t.speed),n.find(">a b.collapse-sign").html(t.openedSign)})),e.find("li.active").each(((e,a)=>{const n=C(a).parents("ul"),s=n.parent("li");n.slideDown(t.speed),s.find("b:first").html(t.openedSign),s.addClass("open")})),e.find("li a").on("click",(a=>{const n=C(a.currentTarget);if(n.hasClass("active"))return;n.parents("li").removeClass("active");const s=n.attr("href").replace(/^#/,""),o=n.parent().find("ul");if(t.accordion){const a=n.parent().parents("ul");e.find("ul:visible").each(((e,n)=>{let r=!0;if(a.each(((e,t)=>{if(t===n)return r=!1,!1})),r&&o!==n){const e=C(n);!s&&e.hasClass("active")||e.slideUp(t.speed,(()=>{e.parent("li").removeClass("open").find("b:first").delay(t.speed).html(t.closedSign)}))}}))}const r=n.parent().find("ul:first");s||!r.is(":visible")||r.hasClass("active")?r.slideDown(t.speed,(()=>{n.parent("li").addClass("open").find("b:first").delay(t.speed).html(t.openedSign)})):r.slideUp(t.speed,(()=>{n.parent("li").removeClass("open").find("b:first").delay(t.speed).html(t.closedSign)}))}))}}let _=!1,R=null;function P(e){location&&e.startsWith("#")?e!==location.hash&&(location.hash=e):location.toString()===e?location.reload():window.location=e}const F={init:()=>{_||(_=!0,C.fn.extend({navigationMenu:function(e){if(0===this.length)return;const t=this.data(),a={accordion:!1!==t.amsMenuAccordion,speed:200};if(MyAMS.config.useSVGIcons){const e=FontAwesome.findIconDefinition({iconName:"angle-down"}),t=FontAwesome.findIconDefinition({iconName:"angle-up"});C.extend(a,{closedSign:`<em data-fa-i2svg>${FontAwesome.icon(e).html}</em>`,openedSign:`<em data-fa-i2svg>${FontAwesome.icon(t).html}</em>`})}else C.extend(a,{closedSign:'<em class="fa fa-angle-down"></em>',openedSign:'<em class="fa fa-angle-up"></em>'});const n=C.extend({},a,e),s=MyAMS.core.getObject(t.amsMenuFactory)||N;if(t.amsMenuConfig)MyAMS.require("ajax","skin").then((()=>{MyAMS.ajax.get(t.amsMenuConfig).then((e=>{new s(e,C(this),n).render(),MyAMS.skin.checkURL()}))}));else{const e=C("ul",this);new s(null,C(this),n).init(e)}}}),MyAMS.config.ajaxNav&&(C(document).on("click",'a[href="#"]',(e=>{e.preventDefault(),e.stopPropagation()})),C(document).on("click",'a[href!="#"]:not([data-toggle]), [data-ams-url]:not([data-toggle])',(e=>{if(!C(e.currentTarget).data("is-dragging")&&!C(e).data("ams-click-handler")){if("TD"===e.target.tagName){const t=C(e.target);if(t.hasClass("dtr-control")&&t.parents("table.datatable").hasClass("collapsed"))return}return function(e){return new Promise(((t,a)=>{const n=C(e.currentTarget),s=n.data("ams-disabled-handlers");if(!0===s||"click"===s||"all"===s)return;let o,r,i,c=n.attr("href")||n.data("ams-url");if(!c||c.startsWith("javascript:")||n.attr("target")||!0===n.data("ams-context-menu"))return;e.preventDefault(),e.stopPropagation(),c.indexOf("?")>=0?(o=c.split("?"),r=o[0],i=o[1].unserialize()):(r=c,i=void 0);const l=MyAMS.core.getFunctionByName(r);if("function"==typeof l&&(c=l(n,i)),c)if("function"==typeof c)t(c(n,i));else if(c=c.replace(/%23/,"#"),e.ctrlKey)window.open&&window.open(c),t();else{const e=n.data("ams-target")||n.attr("target");e?"_blank"===e?(window.open&&window.open(c),t()):"_top"===e?(window.location=c,t()):MyAMS.form?MyAMS.form.confirmChangedForm().then((s=>{"success"===s&&MyAMS.skin&&MyAMS.skin.loadURL(c,e,n.data("ams-link-options"),n.data("ams-link-callback")).then(t,a)})):MyAMS.skin&&MyAMS.skin.loadURL(c,e,n.data("ams-link-options"),n.data("ams-link-callback")).then(t,a):MyAMS.form?MyAMS.form.confirmChangedForm().then((e=>{"success"===e&&P(c)})).then(t):(P(c),t())}else t(null)}))}(e)}})),C(document).on("click",'a[target="_blank"]',(e=>{e.preventDefault(),e.stopPropagation();const t=C(e.currentTarget);window.open&&window.open(t.attr("href")),MyAMS.stats&&MyAMS.stats.logEvent(t.data("ams-stats-category")||"Navigation",t.data("ams-stats-action")||"External",t.data("ams-stats-label")||t.attr("href"))})),C(document).on("click",'a[target="_top"]',(e=>{e.preventDefault(),MyAMS.form&&MyAMS.form.confirmChangedForm().then((t=>{"success"===t&&(window.location=C(e.currentTarget).attr("href"))}))})),C(document).on("click",".nav-tabs a[data-toggle=tab]",(e=>{if(C(e.currentTarget).parent("li").hasClass("disabled"))return e.preventDefault(),e.stopPropagation(),!1})),C(document).on("show.bs.tab",(e=>{let t=C(e.target);t.exists()&&"A"!==t.get(0).tagName&&(t=C("a[href]",t));const a=t.data();if(a&&a.amsUrl){if(a.amsTabLoaded)return;t.append('<i class="fa fa-spin fa-cog ml-1"></i>'),MyAMS.require("skin").then((()=>{MyAMS.skin.loadURL(a.amsUrl,t.attr("href")).then((()=>{a.amsTabLoadOnce&&(a.amsTabLoaded=!0),C("i",t).remove()}),(()=>{C("i",t).remove()}))}))}})),MyAMS.config.isMobile?(MyAMS.dom.root.addClass("mobile-detected"),MyAMS.require("ajax").then((()=>{MyAMS.config.enableFastclick&&MyAMS.ajax.check(C.fn.noClickDelay,`${MyAMS.env.baseURL}../ext/js-smartclick${MyAMS.env.extext}.js`).then((()=>{C("a",MyAMS.dom.nav).noClickDelay(),C("a","#hide-menu").noClickDelay()})),MyAMS.dom.root.exists()&&MyAMS.ajax.check(window.Hammer,`${MyAMS.env.baseURL}../ext/hammer${MyAMS.env.extext}.js`).then((()=>{R=new Hammer.Manager(MyAMS.dom.root.get(0)),R.add(new Hammer.Pan({direction:Hammer.DIRECTION_HORIZONTAL,threshold:200})),R.on("panright",(()=>{MyAMS.dom.root.hasClass("hidden-menu")||MyAMS.nav.switchMenu()})),R.on("panleft",(()=>{MyAMS.dom.root.hasClass("hidden-menu")&&MyAMS.nav.switchMenu()}))}))}))):MyAMS.dom.root.addClass("desktop-detected")),F.restoreState())},initElement:e=>{C("nav",e).navigationMenu({speed:MyAMS.config.menuSpeed})},setActiveMenu:e=>{const t=MyAMS.dom.nav;if(C(".active",t).removeClass("active"),e.addClass("open").addClass("active"),e.parents("li").addClass("open active").children("ul").addClass("active").show(),e.parents("li:first").removeClass("open"),e.parents("ul").addClass(e.attr("href").replace(/^#/,"")?"active":"").show(),e.exists()){const a=t.scrollTop(),n=C(e).parents("li:last").position();(n.top<a||n.top>t.height()+a)&&t.scrollTop(n.top)}},drawBreadcrumbs:()=>{const e=C("ol.breadcrumb","#ribbon");if(C("li",e).not(".persistent").remove(),!C("li",e).exists()){const t=`<li class="breadcrumb-item">\n\t\t\t\t\t<a class="p-r-1" href="${C('a[href!="#"]:first',MyAMS.dom.nav).attr("href")}">\n\t\t\t\t\t\t${MyAMS.i18n.HOME}\n\t\t\t\t\t</a>\n\t\t\t\t</li>`;e.append(C(t))}C("li.active >a",MyAMS.dom.nav).each(((t,a)=>{const n=C(a),s=C.trim(n.clone().children(".badge").remove().end().text()),o=n.attr("href"),r=C('<li class="breadcrumb-item"></li>').append(o.replace(/^#/,"")?C("<a></a>").html(s).attr("href",o):s);e.append(r)}))},minifyMenu:e=>{e&&e.preventDefault(),MyAMS.dom.root.toggleClass("minified"),MyAMS.dom.root.hasClass("minified")?MyAMS.core.switchIcon(C("i",e.currentTarget),"arrow-circle-left","arrow-circle-right"):MyAMS.core.switchIcon(C("i",e.currentTarget),"arrow-circle-right","arrow-circle-left"),window.localStorage&&(MyAMS.dom.root.hasClass("minified")?localStorage.setItem("window-state","minified"):localStorage.setItem("window-state",""))},switchMenu:e=>{e&&e.preventDefault(),MyAMS.dom.root.toggleClass("hidden-menu"),window.localStorage&&(MyAMS.dom.root.hasClass("hidden-menu")?localStorage.setItem("window-state","hidden-menu"):localStorage.setItem("window-state",""))},restoreState:()=>{if(window.localStorage){const e=localStorage.getItem("window-state");"minified"===e?MyAMS.nav.minifyMenu({currentTarget:C("#minifyme"),preventDefault:()=>{}}):MyAMS.dom.root.addClass(e)}}};MyAMS.env.bundle?MyAMS.config.modules.push("nav"):(MyAMS.nav=F,console.debug("MyAMS: nav module loaded..."));const O=MyAMS.$;let B=!1;const I={init:()=>{B||(B=!0,MyAMS.config.enableTooltips&&MyAMS.dom.root.tooltip({selector:".hint",html:MyAMS.config.enableHtmlTooltips}),O(".hint").mousedown((e=>{O(e.currentTarget).tooltip("hide")})),O(document).on("clear.ams.content",(()=>{O(".tooltip").remove()})),I.checkURL(),O(window).on("hashchange",I.checkURL))},initElement:e=>{MyAMS.config.enableTooltips||O(".hint",e).tooltip({html:MyAMS.config.enableHtmlTooltips})},checkURL:()=>new Promise(((e,t)=>{const a=MyAMS.dom.nav;let n=location.hash,s=n.replace(/^#/,""),o=null;const r=s.indexOf("!");let i;if(r>0&&(n=n.substring(0,r+1),o=s.substring(r+1),s=s.substring(0,r)),s){let r=O("#content");r.exists()||(r=MyAMS.dom.root),i=O(`a[href="${n}"]`,a),MyAMS.skin.loadURL(s,r).then((()=>{const t=O("html head title").data("ams-title-prefix"),a=t?`${t} > `:"";if(document.title=`${a}${O("[data-ams-page-title]:first",r).data("ams-page-title")||i.attr("title")||i.text().trim()||document.title}`,o){const e=O(`#${o}`);e.exists()&&MyAMS.require("helpers").then((()=>{MyAMS.helpers.scrollTo("#main",e,{offset:-15})}))}i.exists()?MyAMS.require("nav").then((()=>{MyAMS.nav.setActiveMenu(i),MyAMS.nav.drawBreadcrumbs()})).then(e):e()}),t)}else{const n=O("[data-ams-active-menu]").data("ams-active-menu");i=n?O(`a[href="${n}"]`,a):O('ul li a[href!="#"]',a).first(),i.length>0?MyAMS.require("nav").then((()=>{MyAMS.nav.setActiveMenu(i),n?MyAMS.nav.drawBreadcrumbs():window.location.replace(window.location.href+i.attr("href"))})).then(e,t):e()}})),loadURL:(e,t,a={})=>new Promise(((n,s)=>{e.startsWith("#")&&(e=e.substr(1)),t=O(t),MyAMS.core.executeFunctionByName(MyAMS.config.clearContent,document,t).then((o=>{if(!o)return;const r={type:"GET",url:e,dataType:"html",cache:!1,beforeSend:()=>{t.html(`<h1 class="loading"><i class="fa fa-cog fa-spin"></i> ${MyAMS.i18n.LOADING}</h1>`),a&&a.preLoadCallback&&MyAMS.core.executeFunctionByName(a.preLoadCallback,void 0,a.preLoadCallbackOptions),"content"===t.attr("id")&&MyAMS.require("nav").then((()=>{const e=O("html head title").data("ams-title-prefix"),t=e?`${e} > `:"";document.title=`${t}${O(".breadcrumb li:last-child").text()}`,MyAMS.dom.root.animate({scrollTop:0},"fast")}))}},i=O.extend({},r,a),c={veto:!1};t.trigger("before-load.ams.content",[i,c]),c.veto||O.ajax(i).then(((e,o,r)=>{O.isArray(e)&&([e,o,r]=e),MyAMS.require("ajax").then((()=>{const e=MyAMS.ajax.getResponse(r);if(e){const i=e.contentType,c=e.data;switch(O(".loading",t).remove(),i){case"json":MyAMS.ajax.handleJSON(c,t),n(c,o,r);break;case"script":case"xml":n(c,o,r);break;default:t.parents(".hidden").removeClass("hidden"),MyAMS.core.executeFunctionByName(t.data("ams-clear-content")||MyAMS.config.clearContent,document,t).then((()=>{t.css({opacity:"0.0"}).html(c).removeClass("hidden").delay(30).animate({opacity:"1.0"},300),MyAMS.core.executeFunctionByName(t.data("ams-init-content")||MyAMS.config.initContent,window,t).then((()=>{MyAMS.form&&MyAMS.form.setFocus(t),a&&a.afterLoadCallback?MyAMS.core.executeFunctionByName(a.afterLoadCallback,void 0,a.afterLoadCallbackOptions).then((()=>{t.trigger("after-load.ams.content"),n(c,o,r)}),s):(t.trigger("after-load.ams.content"),n(c,o,r))}),s)}),s)}MyAMS.stats&&MyAMS.stats.logPageview()}}))}),((e,a,n)=>{t.html(`<h3 class="error"><i class="fa fa-exclamation-triangle text-danger"></i> \n\t\t\t\t\t\t\t\t${MyAMS.i18n.ERROR} ${n}</h3>${e.responseText}`),s(n)}))}))}))};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("skin"):(MyAMS.skin=I,console.debug("MyAMS: skin module loaded...")));const D=MyAMS.$;if(!D.templates){const e=a(495);D.templates=e.templates}const E=D.templates({markup:'\n\t<div class="alert alert-{{:status}}" role="alert">\n\t\t<button type="button" class="close" data-dismiss="alert" \n\t\t\t\taria-label="{{*: MyAMS.i18n.BTN_CLODE }}">\n\t\t\t<i class="fa fa-times" aria-hidden="true"></i>\t\n\t\t</button>\n\t\t{{if header}}\n\t\t<h5 class="alert-heading">{{:header}}</h5>\n\t\t{{/if}}\n\t\t{{* if (typeof message === \'string\') { }}\n\t\t<ul>\n\t\t\t<li>{{:message}}</li>\n\t\t</ul>\n\t\t{{* } else { }}\n\t\t<ul>\n\t\t{{for message}}\n\t\t\t<li>{{:}}</li>\n\t\t{{/for}}\n\t\t</ul>\n\t\t{{* } }}\n\t</div>',allowCode:!0}),L=D.templates({markup:'\n\t<div role="alert" class="toast toast-{{:status}} fade hide"\n\t\t data-autohide="{{*: Boolean(data.timeout !== 0).toString() }}"\n\t\t data-delay="{{: timeout || 5000}}">\n\t\t<div class="toast-header">\n\t\t{{if icon}}\n\t\t\t<i class="fa {{:icon}} mr-2"></i>\n\t\t{{/if}}\n\t\t\t<strong class="mr-auto">{{:title}}</strong>\n\t\t{{if !hideTimestamp}}\n\t\t\t<small>{{*: new Date().toLocaleTimeString() }}</small>\n\t\t{{/if}}\n\t\t\t<button type="button" class="ml-2 mb-1 close" data-dismiss="toast">\n\t\t\t\t<i class="fa fa-times text-white"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="toast-body">\n\t\t\t<div>\n\t\t\t{{if content}}\n\t\t\t\t{{:content}}\n\t\t\t{{else}}\n\t\t\t\t<p>{{:message}}</p>\n\t\t\t{{/if}}\n\t\t\t</div>\n\t\t</div>\n\t</div>',allowCode:!0}),U=D.templates({markup:'\n\t<div role="alert" class="toast toast-{{:status}} fade hide"\n\t\t data-autohide="true"\n\t\t data-delay="{{: timeout || 5000}}">\n\t\t<div class="toast-body">\n\t\t\t<div>\n\t\t\t{{if content}}\n\t\t\t\t{{:content}}\n\t\t\t{{else}}\n\t\t\t\t<span>\n\t\t\t\t\t{{if icon}}\n\t\t\t\t\t<i class="fa {{:icon}} mr-2"></i>\n\t\t\t\t\t{{/if}}\n\t\t\t\t\t{{:message}}\n\t\t\t\t</span>\n\t\t\t{{/if}}\n\t\t\t</div>\n\t\t</div>\n\t</div>',allowCode:!0}),H=D.templates({markup:'\n\t<div class="modal fade" data-backdrop="static" role="dialog">\n\t\t<div class="modal-dialog">\n\t\t\t<div class="modal-content">\n\t\t\t\t<div class="modal-header alert-{{:status}}">\n\t\t\t\t\t<h5 class="modal-title">\n\t\t\t\t\t{{if icon}}\n\t\t\t\t\t\t<i class="fa {{:icon}} mr-2"></i>\n\t\t\t\t\t{{/if}}\n\t\t\t\t\t{{:title}}\n\t\t\t\t\t</h5>\n\t\t\t\t\t<button type="button" class="close" \n\t\t\t\t\t\t\tdata-dismiss="modal" data-modal-dismiss-value="cancel">\n\t\t\t\t\t\t<i class="fa fa-times"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal-body">\n\t\t\t\t\t<p>{{:message}}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t<button type="button" class="btn btn-primary" \n\t\t\t\t\t\t\tdata-dismiss="modal" data-modal-dismiss-value="success">\n\t\t\t\t\t\t{{*: data.successLabel || MyAMS.i18n.BTN_OK }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type="button" class="btn btn-secondary" \n\t\t\t\t\t\t\tdata-dismiss="modal" data-modal-dismiss-value="cancel">\n\t\t\t\t\t\t{{*: data.cancelLabel || MyAMS.i18n.BTN_CANCEL }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>',allowCode:!0}),q={alert:(e={})=>{let t=e.status||"info";"error"===t&&(t="danger"),e.status=t,D(`.alert-${t}`,e.parent).not(".persistent").remove(),D(E.render(e)).prependTo(e.parent),MyAMS.require("helpers").then((()=>{MyAMS.helpers.scrollTo("#content",e.parent,{offset:-15})}))},messageBox:(e={})=>{let t=e.status||"info";"error"===t&&(t="danger"),e.status=t;let a=D(`.${MyAMS.config.alertsContainerClass}`);0===a.length&&(a=D("<div></div>").addClass(MyAMS.config.alertsContainerClass).appendTo(MyAMS.dom.root)),D(L.render(e)).appendTo(a).toast("show").on("hidden.bs.toast",(e=>{D(e.currentTarget).remove()}))},smallBox:(e={})=>{let t=e.status||"info";"error"===t&&(t="danger"),e.status=t;let a=D(`.${MyAMS.config.alertsContainerClass}`);0===a.length&&(a=D("<div></div>").addClass(MyAMS.config.alertsContainerClass).appendTo(MyAMS.dom.root)),D(U.render(e)).appendTo(a).toast("show").on("hidden.bs.toast",(e=>{D(e.currentTarget).remove()}))},bigBox:(e={})=>new Promise(((t,a)=>{let n=e.status||"info";"error"===n&&(n="danger"),e.status=n,MyAMS.require("modal").then((()=>{const a=D(H.render(e)).appendTo(MyAMS.dom.root);a.on("shown.bs.modal",(e=>{D(".btn-primary",e.target).focus()})),a.on("hidden.bs.modal",(()=>{t(a.data("modal-result")),a.remove()})),a.modal("show")}),(()=>{a("Missing 'modal' module!")}))}))};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("alert"):(MyAMS.alert=q,console.debug("MyAMS: alert module loaded...")));const W=MyAMS.$;let z=!1;function V(e){return new Promise(((t,a)=>{const n=W(e.currentTarget),s=n.data("ams-disabled-handlers");n.attr("disabled")||n.hasClass("disabled")||!0===s||"click"===s||"all"===s?t(!1):!0!==n.data("ams-context-menu")?(!0===n.data("ams-stop-propagation")&&e.stopPropagation(),e.preventDefault(),n.tooltip("hide"),MyAMS.modal.open(n).then((()=>{t(!0)}),a)):t(!1)}))}function G(e){const t=W(e.target),a=1100+100*W(".modal:visible").length;t.css("z-index",a),setTimeout((()=>{W(".modal-backdrop").not(".modal-stack").first().css("z-index",a-10).addClass("modal-stack").insertBefore(t)}),0),W(t).off("click",'[data-dismiss="modal"]').on("click",'[data-dismiss="modal"]',(e=>{const t=W(e.currentTarget).data("ams-dismiss-handler")||Y;return MyAMS.core.executeFunctionByName(t,document,e)}))}function J(e){const t=W(e.target);return MyAMS.core.executeFunctionByName(t.data("ams-init-content")||MyAMS.config.initContent,document,t)}function K(e){return new Promise(((t,a)=>{MyAMS.require("form").then((()=>{const a=W(e.target);MyAMS.form.setFocus(a),t(a)}),a)}))}function Y(e){return new Promise(((t,a)=>{const n=W(e.currentTarget).parents(".modal").first();n.data("modal-result",W(e.currentTarget).data("modal-dismiss-value")),MyAMS.form?MyAMS.form.confirmChangedForm(n).then((e=>{"success"===e&&n.modal("hide")})).then(t,a):(n.modal("hide"),t())}))}function X(){W(".modal:visible").length>0&&(W.fn.modal.Constructor.prototype._checkScrollbar(),W.fn.modal.Constructor.prototype._setScrollbar(),W("body").addClass("modal-open"))}function Q(e){const t=W(e.target);MyAMS.core.executeFunctionByName(t.data("ams-clear-content")||MyAMS.config.clearContent,document,t).then((()=>{!0===t.data("dynamic")&&(t.remove(),MyAMS.form&&MyAMS.form.setFocus(W(".modal-dialog").last()))}))}const Z={init:()=>{z||(z=!0,MyAMS.config.ajaxNav&&W(document).off("click",'[data-toggle="modal"]').on("click",'[data-toggle="modal"]',(e=>{if(W(e.currentTarget).data("is-dragging"))return;const t=W(e.target);if(t.hasClass("dtr-control")&&t.parents(".datatable").hasClass("collapsed"))return;e.stopPropagation();const a=W(e.currentTarget).data("ams-modal-handler")||V;MyAMS.core.executeFunctionByName(a,document,e)})),W(document).on("shown.bs.modal",".modal",(e=>{const t=W(e.currentTarget).data("ams-shown-handler")||G;MyAMS.core.executeFunctionByName(t,document,e)})),W(document).on("hidden.bs.modal",".modal",(e=>{const t=W(e.currentTarget).data("ams-hidden-handler")||X;MyAMS.core.executeFunctionByName(t,document,e)})))},open:(e,t)=>new Promise(((a,n)=>{let s={},o=e;"string"!=typeof e&&(s=e.data(),o=e.attr("href")||s.amsUrl);const r=MyAMS.core.getFunctionByName(o);"function"==typeof r&&(o=r(e)),o||n("No provided URL!"),o.startsWith("#")?(W(o).modal("show"),a()):W.ajax({type:"get",url:o,cache:void 0!==s.amsAllowCache&&s.amsAllowCache,data:t}).then(((t,n,r)=>{let i=null;MyAMS.require("ajax").then((()=>{const t=MyAMS.ajax.getResponse(r),a=t.contentType,n=t.data;let c,l,d,m,u;switch(a){case"json":MyAMS.ajax.handleJSON(n,W(W(e).data("ams-json-target")||"#content"));break;case"script":case"xml":break;default:c=W(n),l=W(".modal-dialog",c.wrap("<div></div>").parent()),d=l.data()||{},m={backdrop:void 0===d.backdrop?"static":d.backdrop,keyboard:void 0===d.keyboard||d.keyboard},u=W.extend({},m,d.amsOptions),u=MyAMS.core.executeFunctionByName(d.amsInit,l,u)||u,i=W("<div>").addClass("modal fade").attr("tabIndex","-1").data("dynamic",!0).append(c).on("show.bs.modal",J).on("shown.bs.modal",K).on("hidden.bs.modal",Q).modal(u),MyAMS.stats&&!1!==s.amsLogEvent&&!1!==d.amsLogEvent&&MyAMS.stats.logPageview(o)}})).then((()=>{a(i)}))}))})),fitWidthToImage:(e,t)=>{setTimeout((()=>{const a=e.currentTarget,n=t?W(t["resize-target"]):a;if(n.exists()){const e=n.parents(".modal-dialog"),t=e.width()-n.width();e.css("max-width",Math.min(W(window).width(),n.get(0).naturalWidth+t))}}),150)},close:e=>{"string"==typeof e?e=W(e):void 0===e&&(e=W(".modal-dialog:last"));const t=e.objectOrParentWithClass("modal");t.length>0&&t.modal("hide")}};MyAMS.env.bundle?MyAMS.config.modules.push("modal"):(MyAMS.modal=Z,console.debug("MyAMS: modal module loaded..."));const ee=MyAMS.$;if(!ee.templates){const e=a(495);ee.templates=e.templates}let te=!1;const ae={init:()=>{te||(te=!0,ee(document).on("click",'[type="submit"], .submit',(e=>{const t=ee(e.currentTarget);t.exists()&&ee(t).closest("form").data("ams-submit-button",t)})),ee(document).on("click",'input[type="checkbox"][readonly]',(()=>!1)),ee(document).on("reset",MyAMS.form.resetHandler),ee(document).on("reset","[data-ams-reset-handler]",MyAMS.form.customResetHandler),ee(document).on("keydown","textarea",(e=>{if((10===e.keyCode||13===e.keyCode)&&(e.ctrlKey||e.metaKey)){const t=ee(e.currentTarget).closest("form");ee('button[type="submit"]',t).first().click()}})),ee(document).on("focus","input[readonly]",(e=>{ee(e.currentTarget).blur()})),ee(document).on("focusin",(e=>{ee(e.target).closest(".mce-window").length>=0&&e.stopImmediatePropagation()})),ee(window).on("beforeunload",MyAMS.form.checkBeforeUnload))},initElement:e=>{let t;"string"==typeof e&&(e=ee(e)),t=MyAMS.config.warnOnFormChange?ee('form[data-ams-warn-on-change!="false"]',e):ee('form[data-ams-warn-on-change="true"]',e),t.each(((e,t)=>{const a=ee(t),n=a.data().amsChangedCallback||MyAMS.config.formChangeCallback;ee("input, select, textarea, [data-ams-changed-event]",a).each(((e,t)=>{const s=ee(t),o=s.data();if(!0!==o.amsIgnoreChange){const e=o.amsChangedEvent||"change";s.on(e,(()=>{MyAMS.form.setChanged(a),MyAMS.core.executeFunctionByName(o.amsChangedCallback||n,document,a,s)}))}}))})),MyAMS.form.setFocus(e)},setFocus:e=>new Promise(((t,a)=>{setTimeout((()=>{let a=ee("[data-ams-focus-target]",e).first();a.exists()||(a="test"===window?.process?.env?.NODE_ENV?ee("input, select, textarea",e).first():ee("input:enabled:visible, select:enabled:visible, textarea:enabled:visible",e).first()),a.exists()&&a.get(0).focus(),t(a)}),100)})),checkBeforeUnload:()=>{if(MyAMS.i18n&&ee('form[data-ams-form-changed="true"]').exists())return MyAMS.i18n.FORM_CHANGED_WARNING},confirmChangedForm:e=>new Promise(((t,a)=>{const n=ee('form[data-ams-form-changed="true"]',e);n.exists()?MyAMS.require("alert").then((()=>{MyAMS.alert.bigBox({status:"danger",title:MyAMS.i18n.WARNING,icon:"text-danger fa-bell",message:MyAMS.i18n.FORM_CHANGED_WARNING}).then((e=>{"success"===e&&MyAMS.form.resetChanged(n),t(e)}))}),(()=>{a("Missing 'alert' module!")})):(ae.resetChanged(n),t("success"))})),setChanged:e=>{e.attr("data-ams-form-changed",!0)},resetHandler:e=>{const t=ee(e.target);MyAMS.form.clearAlerts(t),MyAMS.form.handleDefaultReset(t)},clearAlerts:e=>{ee(".alert-danger, SPAN.state-error",e).not(".persistent").remove(),ee(".state-error",e).removeClassPrefix("state-"),ee(".invalid-feedback",e).remove(),ee(".is-invalid",e).removeClass("is-invalid")},handleDefaultReset:e=>{setTimeout((()=>{e.find(".select2").trigger("change"),ee("[data-ams-reset-callback]",e).each(((t,a)=>{const n=ee(a),s=n.data(),o=MyAMS.core.getFunctionByName(s.amsResetCallback);void 0!==o&&o.call(document,e,n,s.amsResetCallbackOptions)})),MyAMS.form.resetChanged(e)}),10)},resetChanged:e=>{void 0!==e&&ee(e).removeAttr("data-ams-form-changed")},customResetHandler:e=>{const t=ee(e.target),a=t.data();if(a.amsResetHandler){!0!==a.amsKeepDefault&&!0!==a.amsResetKeepDefault&&e.preventDefault();const n=MyAMS.core.getFunctionByName(a.amsResetHandler);void 0!==n&&n.call(document,e,t,a.amsResetHandlerOptions)}},setInvalid:(e,t,a)=>{if("string"==typeof t&&(t=ee(`[name="${t}"]`,e)),t.exists()){const e=t.closest(".form-widget");ee(".invalid-feedback",e).remove(),ee("<span>").text(a).addClass("is-invalid invalid-feedback").appendTo(e),t.removeClass("valid").addClass("is-invalid")}},getSettings:(e,t,a,n,s)=>{const o={submitWarning:ne,getValidators:se,checkValidators:oe,clearAlerts:MyAMS.form.clearAlerts,initSubmitButton:re,resetSubmitButton:ie,getData:ce,initData:le,initDataCallback:null,getTarget:de,initTarget:ue,getAction:pe,getAjaxSettings:ge,getProgressSettings:Me,getProgressState:fe,submit:he,datatype:null,submitOptions:null,submitHandler:(e.attr("action")||"").replace(/#/,""),submitTarget:e.attr("target")||null,submitMessage:null,submitCallback:ye,progressHandler:null,progressFieldName:"progressId",progressInterval:1e3,progressTarget:null,progressCallback:null,progressEndCallback:null,resetBeforeSubmit:!1,keepModalOpen:!1,resetAfterSubmit:Se,resetTimeout:1e3,resetAfterError:be,downloadTarget:null,getDownloadTarget:Ae,initDownloadTarget:ve,resetDownloadTarget:xe},r=ee.extend({},o);return ee.extendPrefix(r,"amsForm",(e=>MyAMS.core.getFunctionByName(e)||e),t,n),ee.extendOnly(r,(e=>MyAMS.core.getFunctionByName(e)||e),s),r},submit:(e,t,a={})=>{if(!(e=ee(e)).exists())return!1;"object"==typeof t&&(a=t,t=void 0);const n=e.data(),s=ee(n.amsSubmitButton),o=s.data()||{},r=MyAMS.form.getSettings(e,n,s,o,a);return n.submitted?(r.submitWarning(e,r),!1):(r.checkValidators(e,r).then((i=>{"success"===i&&MyAMS.require("ajax","i18n").then((()=>{MyAMS.ajax.check(ee.fn.ajaxSubmit,`${MyAMS.env.baseURL}../ext/jquery-form${MyAMS.env.extext}.js`).then((()=>{r.clearAlerts(e,r),r.initSubmitButton(e,r,s);const i=r.getData(e,r,n,s,o,a),c={veto:!1};if(r.initData(e,r,s,i,a,c),c.veto)return void r.resetSubmitButton(e,r,s);const l=r.getTarget(e,r,n,o);l&&l.exists()&&r.initTarget(e,r,l);const d=r.getAction(e,r,t),m=r.getAjaxSettings(e,r,s,i,d,l),u=r.getDownloadTarget(e,r);u&&r.initDownloadTarget(e,r,u,m),m.progress=r.getProgressSettings(e,r,s,i),r.submit(e,r,s,i,m,l),u&&r.resetDownloadTarget(e,r,s,u,m)}))}))})),!1)},submitForm:e=>{const t=ee(e.currentTarget),a=t.parents("form");a.data("ams-submit-button",t),a.submit()}};function ne(e){return new Promise(((t,a)=>{e.data("ams-form-hide-submitted")?t():MyAMS.require("i18n","alert").then((()=>{MyAMS.alert.messageBox({status:"warning",title:MyAMS.i18n.WAIT,message:MyAMS.i18n.FORM_SUBMITTED,icon:"fa-save",timeout:e.data("ams-form-alert-timeout")||5e3})})).then(t,a)}))}function se(e){const t=new Map,a=(e.data("ams-form-validator")||"").trim().split(/[\s,;]+/);let n=[];return ee(a).each(((e,t)=>{t&&n.push(t)})),n.length>0&&t.set(e,n),ee("[data-ams-form-validator]",e).each(((e,a)=>{const s=ee(a),o=(s.data("ams-form-validator")||"").trim().split(/[\s,;]+/);n=[],ee(o).each(((e,t)=>{t&&n.push(t)})),n.length>0&&t.set(s,n)})),t}function oe(e,t){return new Promise(((a,n)=>{const s=t.getValidators(e,t);if(!s.size)return void a("success");const o=[];for(const[t,a]of s.entries())for(const n of a)o.push(MyAMS.core.executeFunctionByName(n,document,e,t));ee.when.apply(ee,o).then(((...t)=>{let n="success",s=[];for(const e of t)!0!==e&&(n="error","string"==typeof e?s.push(e):ee.isArray(e)&&e.length>0&&(s=s.concat(e)));s.length>0?MyAMS.require("i18n","alert").then((()=>{const t=1===s.length?MyAMS.i18n.ERROR_OCCURED:MyAMS.i18n.ERRORS_OCCURED;MyAMS.alert.alert({parent:e,status:"danger",header:t,message:s}),a(n)})):a(n)}),(()=>{n("error")}))}))}function re(e,t,a){const n=a.data("ams-loading-text")||a.text().trim();n?(a.data("original-text",a.text()).prop("disabled",!0).text(`${n}...`),ee("<div>").addClass("progress").appendTo(a)):a.data("original-html",a.html()).prop("disabled",!0).html('<i class="fa fa-cog fa-spin"></i>')}function ie(e,t,a){ee(".progress",a).remove();const n=a.data("original-text");if(n)a.text(n);else{const e=a.data("original-html");e&&a.html(e)}a.prop("disabled",!1)}function ce(e,t,a,n,s,o){const r=ee.extend({},a.amsFormData,s.amsFormData,o.data),i=n.attr("name");return i&&(r[i]=n.val()),r}function le(e,t,a,n,s,o){const r=t.initDataCallback;r&&ee.extend(n,r(e,t,a,n,s,o)),e.trigger("init-data.ams.form",[n,o])}function de(e,t){return ee(t.submitTarget)}const me=ee.templates({markup:'\n\t<div class="row m-3">\n\t\t<div class="text-center w-100">\n\t\t\t<i class="fa fa-3x fa-cog fa-spin"></i>\n\t\t\t{{if message}}\n\t\t\t<strong>{{:message}}</strong>\n\t\t\t{{/if}}\n\t\t</div>\n\t</div>'});function ue(e,t,a){a.html(me.render({message:t.submitMessage})),a.parents(".hidden").removeClass("hidden")}function pe(e,t,a){let n;const s=a||t.submitHandler;return n=s.startsWith(window.location.protocol)?s:MyAMS.ajax.getAddr()+s,n}function ge(e,t,a,n,s,o){const r={url:s,type:"post",cache:!1,data:n,dataType:t.datatype,beforeSerialize:e=>{const t={veto:!1};if(e.trigger("before-serialize.ams.form",[t]),t.veto)return!1;void 0!==window.tinyMCE&&tinyMCE.triggerSave()},beforeSubmit:(e,n)=>{const s={veto:!1};if(n.trigger("before-submit.ams.form",[e,s]),s.veto)return!1;n.data("submitted",!0),t.resetBeforeSubmit&&setTimeout((()=>{t.resetSubmitButton(n,t,a)}),250)},uploadProgress:(e,t,n,s)=>{ee(".progress",a).css("background-image",`linear-gradient(to right, white -45%, green ${s}%, red ${s}%, red)`)},complete:t=>{e.trigger("complete.ams.form",[t])},success:(e,n,s,r)=>{const i={veto:!1};if(r.trigger("submit-success.ams.form",[e,n,s,i]),!i.veto){if(e&&"error"!==e.status&&!1!==e.closeForm){const e=r.closest(".modal-dialog");e.exists()&&!t.keepModalOpen&&MyAMS.modal&&MyAMS.modal.close(e)}try{t.submitCallback(r,t,o,e,n,s)}finally{t.resetAfterSubmit(r,t,a),MyAMS.form.resetChanged(r)}}},error:(e,n,s,r)=>{r.trigger("submit-error.ams.form",[e,n,s,o]),o&&t.resetAfterError(r,t,a,o),t.resetAfterSubmit(r,t,a)},iframe:!1};return ee.extend({},r,t.submitOptions)}function Me(e,t,a,n){const s=t.progressHandler;if(s){const e=t.progressFieldName;n[e]=MyAMS.core.generateUUID();let o=a;return t.progressTarget&&(o=ee(t.progressTarget)),{handler:s,interval:t.progressInterval,fieldname:e,target:o,callback:t.progressCallback,endCallback:t.progressEndCallback}}}function fe(e,t,a,n,s){let o=setTimeout((function e(){const t={};t[n.fieldname]=a[n.fieldname],MyAMS.ajax.post(n.handler,t).then(MyAMS.core.getFunctionByName(n.callback||function(t){if(ee.isArray(t)&&(t=t[0]),"running"===t.status){const a=ee(n.target);if(t.message)a.text(t.message);else{let e=t.progress||a.data("ams-progress-text")||MyAMS.i18n.PROGRESS;t.current?e+=`: ${t.current} / ${t.length||100}`:e+="...",a.text(e)}o=setTimeout(e,n.interval)}else"finished"===t.status&&r()}),r)}),n.interval);function r(){clearTimeout(o),t.resetSubmitButton(e,t,s),MyAMS.core.executeFunctionByName(n.endCallback,document,e,t,s),MyAMS.form.resetChanged(e)}}function he(e,t,a,n,s,o){s.progress&&t.getProgressState(e,t,n,s.progress,o),e.ajaxSubmit(s)}function ye(e,t,a,n,s,o){let r=t.datatype;if(!r){const e=MyAMS.ajax.getResponse(o);e&&(r=e.contentType,n=e.data)}switch(r){case"binary":case"script":case"xml":break;case"json":MyAMS.ajax.handleJSON(n,e,a);break;default:MyAMS.form.resetChanged(e),a.css({opacity:"0.0"}),a.removeClass("hidden").parents(".hidden").removeClass(".hidden"),a.html(n).delay(50).animate({opacity:"1.0"},250),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,a).then((()=>{MyAMS.require("helpers").then((()=>{MyAMS.helpers.scrollTo("#main",a,{offset:-15})}))}))}const i=o.getResponseHeader("X-AMS-Callback");if(i){const a=o.getResponseHeader("X-AMS-Callback-Options")||"{}";MyAMS.core.executeFunctionByName(i,document,e,t,a,n,s,o)}e.trigger("after-submit.ams.form",[n])}function Se(e,t,a){e.data("submitted")&&(t.resetSubmitButton(e,t,a),e.data("submitted",!1),e.removeData("ams-submit-button"),e.trigger("after-reset.ams.form"),e.data("ams-reset-after-submit")&&e.get(0).reset())}function be(e,t,a){ee("i",a).removeClass("fa-spin").removeClass("fa-cog").addClass("fa-ambulance")}function Ae(e,t){return t.downloadTarget}function ve(e,t,a,n){let s=ee(`iframe[name="${a}"]`);s.exists()||(s=ee("<iframe>").attr("name",a).hide().appendTo(MyAMS.dom.root)),ee.extend(n,{iframe:!0,iframeTarget:s})}function xe(e,t,a,n,s){const o=e.closest(".modal-dialog"),r=t.keepModalOpen;o.exists()&&!0!==r&&MyAMS.require("modal").then((()=>{MyAMS.modal.close(o)})),s.progress||setTimeout((()=>{t.resetAfterSubmit(e,t,a),MyAMS.ajax&&MyAMS.ajax.stop(),MyAMS.form.resetChanged(e)}),t.resetTimeout)}window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("form"):(MyAMS.form=ae,console.debug("MyAMS: form module loaded...")));const we=MyAMS.$;let Ce=!1;const ke={init:()=>{Ce||(Ce=!0,we(document).on("click","[data-ams-click-handler]",MyAMS.events.clickHandler),we(document).on("change","[data-ams-change-handler]",MyAMS.events.changeHandler),we(document).on("click","[data-ams-click-event]",MyAMS.events.triggerEvent))},initElement:e=>{we("[data-ams-events-handlers]",e).each(((e,t)=>{const a=we(t),n=a.data("ams-events-handlers");if(n){const e=a.data("ams-events-handlers-context"),t=e?a.parents(e):a;for(const[e,s]of Object.entries(n))t.on(e,((e,...t)=>{t.length>0?MyAMS.core.executeFunctionByName(s,document,e,...t):MyAMS.core.executeFunctionByName(s,document,e,a.data("ams-events-options")||{})}))}}))},getHandlers:(e,t)=>{const a=[],n=e.data("ams-events-handlers");return n&&n[t]&&a.push(e),we("[data-ams-events-handlers]",e).each(((e,n)=>{const s=we(n),o=s.data("ams-events-handlers");o&&o[t]&&a.push(s)})),a},clickHandler:e=>{const t=we(e.currentTarget),a=t.data("ams-disabled-handlers");if(!0===a||"click"===a||"all"===a)return;const n=t.data();if(n.amsClickHandler){!1!==n.amsPreventDefault&&!1!==n.amsClickPreventDefault&&e.preventDefault(),!1!==n.amsStopPropagation&&!1!==n.amsClickStopPropagation&&e.stopPropagation();for(const t of n.amsClickHandler.split(/[\s,;]+/)){const a=MyAMS.core.getFunctionByName(t);void 0!==a&&a.call(document,e,n.amsClickHandlerOptions)}}},changeHandler:e=>{const t=we(e.currentTarget);if(t.prop("readonly"))return;const a=t.data("ams-disabled-handlers");if(!0===a||"change"===a||"all"===a)return;const n=t.data();if(n.amsChangeHandler){!1!==n.amsKeepDefault&&!1!==n.amsChangeKeepDefault&&e.preventDefault(),!1!==n.amsStopPropagation&&!1!==n.amsChangeStopPropagation&&e.stopPropagation();for(const t of n.amsChangeHandler.split(/[\s,;]+/)){const a=MyAMS.core.getFunctionByName(t);void 0!==a&&a.call(document,e,n.amsChangeHandlerOptions)}}},triggerEvent:e=>{const t=we(e.currentTarget);we(e.target).trigger(t.data("ams-click-event"),t.data("ams-click-event-options"))}};MyAMS.env.bundle?MyAMS.config.modules.push("events"):(MyAMS.events=ke,console.debug("MyAMS: events module loaded..."));const Te=MyAMS.$;let $e=!1;const je={init:()=>{$e||($e=!0)},initElement:e=>new Promise(((t,a)=>{const n=[];Te("[data-ams-callback]",e).each(((e,t)=>{const a=Te(t).data();let s=a.amsCallback;if("string"==typeof s)try{s=JSON.parse(a.amsCallback)}catch(e){s=a.amsCallback.split(/[\s,;]+/)}Te.isArray(s)||(s=[s]);for(const e of s){let s,o,r,i;"string"==typeof e?(s=e,o=MyAMS.core.getFunctionByName(s),r=a.amsCallbackOptions,i=a.amsCallbackOptions,"string"==typeof i&&(i=i.unserialize())):(s=e.callback,o=MyAMS.core.getFunctionByName(s),r=e.source,i=e.options),void 0===o?r?n.push(MyAMS.core.getScript(r).then((()=>{o=MyAMS.core.getFunctionByName(s),void 0===o?console.warn(`Missing callback ${s}!`):o.call(document,t,i)}))):console.warn(`Missing source for undefined callback ${e}!`):n.push(Promise.resolve(o.call(document,t,i)))}})),Te.when.apply(Te,n).then(t,a)}))};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("callbacks"):(MyAMS.callbacks=je,console.debug("MyAMS: callbacks module loaded...")));const Ne=MyAMS.$;function _e(e){let t=!1;if(window.clipboardData&&window.clipboardData.setData)t=clipboardData.setData("Text",e);else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){const a=Ne("<textarea>");a.val(e).css("position","fixed").appendTo(MyAMS.dom.root),a.get(0).select();try{document.execCommand("copy"),t=!0}catch(e){console.warn("Clipboard copy failed!",e)}finally{a.remove()}}t?MyAMS.require("i18n","alert").then((()=>{MyAMS.alert.smallBox({status:"success",message:e.length>1?MyAMS.i18n.CLIPBOARD_TEXT_COPY_OK:MyAMS.i18n.CLIPBOARD_CHARACTER_COPY_OK,icon:"fa-info-circle",timeout:3e3})})):MyAMS.require("i18n").then((()=>{prompt(MyAMS.i18n.CLIPBOARD_COPY,e)}))}const Re={copy:e=>{if(void 0===e)return function(){const e=Ne(this),t=e.text();e.parents(".btn-group").removeClass("open"),_e(t)};_e(e)},copyText:e=>{const t=Ne(e.currentTarget),a=Ne(t.data("ams-clipboard-target"));_e(a.val()||a.text())}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("clipboard"):(MyAMS.clipboard=Re,console.debug("MyAMS: clipboard module loaded...")));const Pe=MyAMS.$,Fe={switchElementAttribute:e=>function(e,t){MyAMS.require("ajax","alert","i18n").then((()=>{const t=e.parents("td").first(),a=Pe("i",t),n=t.parents("tr"),s=n.parents("table"),o=Pe(`thead th:nth-child(${t.index()+1})`,s);let r=e.data("ams-location")||o.data("ams-location")||n.data("ams-location")||s.data("ams-location")||"";r&&(r+="/");const i=e.data("ams-update-target")||o.data("ams-update-target")||n.data("ams-update-target")||s.data("ams-update-target")||"switch-element-attribute.json",c=n.data("ams-element-name"),l=a.attr("data-original-title")||a.attr("title");a.tooltip("hide").replaceWith('<i class="fas fa-spinner fa-spin"></i>'),MyAMS.ajax.post(r+i,{object_name:c,attribute_name:o.data("ams-attribute-name")}).then(((e,a,n)=>{let s=Pe("i",t);"success"===e.status?(e.state?s.replaceWith(`<i class="${o.data("ams-icon-on")}"></i>`):s.replaceWith(`<i class="${o.data("ams-icon-off")}"></i>`),l&&(s=Pe("i",t),s.addClass("hint").attr("data-original-title",l)),e.handle_json&&MyAMS.ajax.handleJSON(e)):MyAMS.ajax.handleJSON(e)}))}))},moveToGrandParent:(e,t)=>new Promise(((a,n)=>{const s=Pe(t.draggable),o=Pe(e.target),r=Pe(e.target).parents("table"),i=r.data("ams-location");MyAMS.require("ajax","error").then((()=>{MyAMS.ajax.post(`${i}/${o.data("ams-drop-action")||r.data("ams-drop-action")}`,{source:s.data("ams-element-name")}).then((e=>{"success"===e.status?(s.remove(),r.hasClass("datatable")?r.DataTable().row(s).remove().draw():s.remove(),e.handle_json&&MyAMS.ajax.handleJSON(e)):MyAMS.ajax.handleJSON(e),a(e)}))}),n)})),moveToNewParent:(e,t)=>new Promise(((a,n)=>{const s=Pe(t.draggable),o=Pe(e.target),r=Pe(e.target).parents("table"),i=r.data("ams-location");MyAMS.require("ajax","error").then((()=>{MyAMS.ajax.post(`${i}/${o.data("ams-drop-action")||r.data("ams-drop-action")}`,{source:s.data("ams-element-name"),parent:o.data("ams-element-name")}).then((e=>{"success"===e.status?(s.remove(),r.hasClass("datatable")?r.DataTable().row(s).remove().draw():s.remove(),e.handle_json&&MyAMS.ajax.handleJSON(e)):MyAMS.ajax.handleJSON(e),a(e)}))}),n)})),selectElement:e=>{const t=Pe(e.currentTarget);setTimeout((function(){t.prop("checked",!t.prop("checked")).change()}),50),e.stopPropagation()},selectAllElements:e=>{const t=Pe(e.currentTarget),a=Pe(t).parents("table");Pe('input[type="checkbox"]',a).prop("checked",t.prop("checked"))},getSelectedElements:e=>{const t=Pe(e).data(),a=t.amsContainerSource,n=Pe(`input[name="${a}"]`).first().parents("table"),s=Pe("tbody",n),o=Pe(`input[name="${a}"]:checked`,s).listattr("value");Pe(`input[name="${t.amsContainerTarget}"]`).val(o.join(","))},removeSelectedElements:(e,t)=>{const a=t.source,n=Pe(`input[name="${a}"]`).first().parents("table"),s=Pe("tbody",n);Pe(`input[name="${a}"]:checked`,s).parents("tr").each(((e,t)=>{n.hasClass("datatable")?n.DataTable().row(t).remove().draw():Pe(t).remove()}))},deleteElement:e=>function(e,t){MyAMS.require("ajax","alert","i18n").then((()=>{MyAMS.alert.bigBox({status:"danger",icon:"fas fa-bell",title:MyAMS.i18n.WARNING,message:MyAMS.i18n.CONFIRM_REMOVE,successLabel:MyAMS.i18n.CONFIRM,cancelLabel:MyAMS.i18n.BTN_CANCEL}).then((t=>{if("success"!==t)return;const a=e.parents("td"),n=a.parents("tr"),s=n.parents("table"),o=Pe(`thead th:nth-child(${a.index()+1})`,s);let r=e.data("ams-location")||o.data("ams-location")||n.data("ams-location")||s.data("ams-location")||"";r&&(r+="/");const i=e.data("ams-delete-target")||o.data("ams-delete-target")||n.data("ams-delete-target")||s.data("ams-delete-target")||"delete-element.json",c=n.data("ams-element-name");MyAMS.ajax.post(r+i,{object_name:c}).then(((e,t,a)=>{"success"===e.status?(s.hasClass("datatable")?s.DataTable().row(n).remove().draw():n.remove(),e.handle_json&&MyAMS.ajax.handleJSON(e)):MyAMS.ajax.handleJSON(e)}))}))}))}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("container"):(MyAMS.container=Fe,console.debug("MyAMS: container module loaded..."))),MyAMS.$;const Oe={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("datatable"):(MyAMS.datatable=Oe,console.debug("MyAMS: datatable module loaded..."))),MyAMS.$;const Be={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("graph"):(MyAMS.graph=Be,console.debug("MyAMS: graph module loaded...")));const Ie=MyAMS.$,De={clearValue:e=>{const t=Ie(e.currentTarget).data("target");t&&Ie(t).val(null)},clearDatetimeValue:e=>{const t=Ie(e.currentTarget).data("target"),a=Ie(t).data("datetimepicker");a&&a.date(null)},scrollTo:(e="#content",t,{...a})=>{"string"==typeof t&&(t=Ie(t)),t.exists()&&MyAMS.require("ajax").then((()=>{MyAMS.ajax.check(Ie.fn.scrollTo,`${MyAMS.env.baseURL}../ext/jquery-scrollto${MyAMS.env.extext}.js`).then((()=>{Ie(e).scrollTo(t,a)}))}))},setLoginHash:()=>{const e=Ie("#login_form");Ie('input[name="login_form.widgets.hash"]',e).val(window.location.hash)},setSEOStatus:e=>{const t=Ie(e.target),a=t.siblings(".progress").children(".progress-bar"),n=Math.min(t.val().length,100);let s="success";n<20||n>80?s="danger":(n<40||n>66)&&(s="warning"),a.removeClassPrefix("bg-").addClass("bg-"+s).css("width",n+"%")},select2ChangeHelper:e=>new Promise(((t,a)=>{const n=Ie(e.currentTarget),s=n.data(),o=Ie(s.amsSelect2HelperTarget),r={};let i;"html"===s.amsSelect2HelperType?(o.html('<div class="text-center"><i class="fas fa-2x fa-spinner fa-spin"></i></div>'),r[s.amsSelect2HelperArgument||"value"]=n.val(),Ie.get(s.amsSelect2HelperUrl,r).then((e=>{i=MyAMS.core.getFunctionByName(s.amsSelect2HelperCallback)||(e=>{e?(o.html(e),MyAMS.core.initContent(o).then((()=>{t()}))):(o.empty(),t())}),i(e)})).catch((()=>{o.empty(),a()}))):(i=s.amsSelect2HelperCallback,i&&(MyAMS.core.executeFunctionByName(i,n,s),t()))})),refreshElement:(e,t)=>new Promise(((e,a)=>{let n=Ie(`[id="${t.object_id}"]`);MyAMS.core.executeFunctionByName(MyAMS.config.clearContent,document,n).then((()=>{n.replaceWith(Ie(t.content)),n=Ie(`[id="${t.object_id}"]`);const s=n.parents().first();MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,s).then((()=>{e(n)}),a)}),a)})),hideElement:(e,t)=>{Ie(t.selector,e).hide()},removeElement:(e,t)=>{Ie(t.selector,e).remove()},refreshWidget:(e,t)=>new Promise(((e,a)=>{let n=Ie(`[id="${t.widget_id}"]`),s=n.parents(".widget-group");MyAMS.core.executeFunctionByName(MyAMS.config.clearContent,document,s).then((()=>{s.replaceWith(Ie(t.content)),n=Ie(`[id="${t.widget_id}"]`),s=n.parents(".widget-group"),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,s).then((()=>{e(n)}),a)}),a)})),refreshTable:(e,t)=>new Promise(((e,a)=>{const n=`table[id="${t.table_id}"]`;let s=Ie(n);if(s.exists()){if(s.hasClass("datatable")){const e=s.DataTable();e&&e.destroy()}s.replaceWith(Ie(t.content)),s=Ie(n),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,s.parent()).then((()=>{e(s)}),a)}})),addTableRow:(e,t)=>new Promise(((e,a)=>{const n=`table[id="${t.table_id}"]`,s=Ie(n),o=s.DataTable();let r;t.data?(o.rows.add(t.data).draw(),r=Ie(`tr[id="${t.row_id}"]`,s),e(r)):(r=Ie(t.content),o.rows.add(r).draw(),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,r).then((()=>{e(r)}),a))})),refreshTableRow:(e,t)=>new Promise(((e,a)=>{const n=`tr[id="${t.row_id}"]`,s=Ie(n),o=s.parents("table").first();if(t.data)if(Ie.fn.DataTable){const a=o.DataTable();"string"==typeof t.data?(a.row(n).remove(),a.row.add(Ie(t.data)).draw()):a.row(n).data(t.data).draw(),e(s)}else a("No DataTable plug-in available!");else{const n=Ie(t.content);s.replaceWith(n),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,n).then((()=>{e(n)}),a)}})),deleteTableRow:(e,t)=>new Promise(((e,a)=>{const n=`tr[id="${t.row_id}"]`,s=Ie(n),o=s.parents("table").first();if(Ie.fn.DataTable){const e=o.DataTable();e.row(n).remove(),e.draw()}else s.remove()})),refreshImage:(e,t)=>{Ie(`[id="${t.image_id}"]`).attr("src",t.src)},moveElementToParentEnd:e=>{const t=e.parent();return e.detach().appendTo(t)},addElementToParent:(e,{element:t,parent:a,...n})=>{t=Ie(t),a=Ie(a);const s=t.appendTo(a);return n.scrollTo&&MyAMS.helpers.scrollTo(n.scrollParent,t),s},hideDropdown:e=>{Ie(e.target).closest(".dropdown-menu").dropdown("hide")}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("helpers"):(MyAMS.helpers=De,console.debug("MyAMS: helpers module loaded...")));const Ee=MyAMS.$;let Le=!1;const Ue={init:()=>{Le||(Le=!0,Ee.fn.extend({contextMenu:function(e){function t(t,a){const n=Ee(window)[a](),s=Ee(e.menuSelector)[a]();let o=t;return t+s>n&&s<t&&(o-=s),o}return this.each(((a,n)=>{const s=Ee(n),o=Ee(e.menuSelector);Ee("a",o).each(((e,t)=>{Ee(t).data("ams-context-menu",!0)})),s.on("contextmenu",(function(e){if(!e.ctrlKey)return o.data("contextmenu-event-source",s).dropdown("show").css({position:"fixed",left:t(e.clientX,"width")-10,top:t(e.clientY,"height")-10}).off("click").on("click",(e=>{e.stopPropagation(),e.preventDefault(),o.dropdown("hide"),function(e,t){"A"!==e.get(0).tagName&&(e=e.parents("a").first());const a=e.data();if("modal"===a.toggle)MyAMS.require("modal").then((()=>{MyAMS.modal.open(e)}));else{let n=e.attr("href")||a.amsUrl;if(!n||n.startsWith("javascript:")||e.attr("target"))return;const s=MyAMS.core.getFunctionByName(n);if("function"==typeof s&&(n=s(e,t)),void 0===n)return;"function"==typeof n?n(e):MyAMS.require("form","skin").then((()=>{n=n.replace(/%23/,"#");const t=e.data("ams-target");t?MyAMS.form.confirmChangedForm(t).then((a=>{"success"===a&&MyAMS.skin.loadURL(n,t,e.data("ams-link-options"),e.data("ams-link-callback"))})):MyAMS.form.confirmChangedForm().then((e=>{"success"===e&&(n.startsWith("#")?n!==location.hash&&(MyAMS.dom.root.hasClass("mobile-view-activated")?(MyAMS.dom.root.removeClass("hidden-menu"),setTimeout((()=>{window.location.hash=n}),50)):window.location.hash=n):window.location=n)}))}))}}(Ee(e.target),s)})),!1})),Ee(document).click((()=>{o.dropdown("hide")}))}))}}),Ee(document).on("show.bs.dropdown",".btn-group",(e=>{const t=Ee(e.currentTarget),a=t.children(".dropdown-menu"),n=t.get(0).getBoundingClientRect(),s=n.top,o=n.height,r=a.outerHeight();s>r&&Ee(window).height()-s<o+r&&t.addClass("dropup"),Ee("input, select, textarea",a).first().focus()})).on("hidden.bs.dropdown",".btn-group",(e=>{Ee(e.currentTarget).removeClass("dropup")})),Ee(document).on("hide.bs.dropdown",(e=>{if(e.clickEvent&&!1===Ee(e.clickEvent.target).parents(".dropdown-menu").data("ams-click-dismiss"))return e.preventDefault(),!1})))}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("menu"):(MyAMS.menu=Ue,console.debug("MyAMS: menu module loaded...")));const He=MyAMS.$;if(!He.templates){const e=a(495);He.templates=e.templates}const qe=He.templates({markup:'\n\t<li class="p-1 my-1{{if status}} alert-{{:status}}{{/if}}">\n\t\t<a class="d-flex flex-row"{{if url}} href="{{:url}}"{{/if}}{{if modal}} data-toggle="modal"{{/if}}>\n\t\t\t{{if source.avatar}}\n\t\t\t<img class="avatar mx-1 mt-1" src="{{:source.avatar}}"\n\t\t\t\t alt="{{:source.title}}" title="{{:source.title}}" />\n\t\t\t{{else}}\n\t\t\t<i class="avatar fa fa-fw fa-2x fa-user mx-1 mt-1"\n\t\t\t   title="{{:source.title}}"></i>\n\t\t\t{{/if}}\n\t\t\t<div class="flex-grow-1 ml-2">\n\t\t\t\t<small class="timestamp float-right text-muted">\n\t\t\t\t\t{{*: new Date(data.timestamp).toLocaleString()}}\n\t\t\t\t</small>\n\t\t\t\t<strong class="title d-block">\n\t\t\t\t\t{{:title}}\n\t\t\t\t</strong>\n\t\t\t\t<p class="text-muted mb-2">{{:message}}</p>\n\t\t\t</div>\n\t\t</a>\n\t</li>',allowCode:!0}),We=He.templates({markup:'\n\t<ul class="list-style-none flex-grow-1 overflow-auto m-0 p-0">\n\t\t{{for notifications tmpl=~itemTemplate /}}\n\t</ul>\n\t{{if !~options.hideTimestamp}}\n\t<div class="timestamp border-top pt-1">\n\t\t<span>{{*: MyAMS.i18n.LAST_UPDATE }}{{: ~timestamp.toLocaleString() }}</span>\n\t\t<i class="fa fa-fw fa-sync float-right"\n\t\t   data-ams-click-handler="MyAMS.notifications.getNotifications"\n\t\t   data-ams-click-handler-options=\'{"localTimestamp": "{{: ~useLocalTime }}"}\'></i>\n\t</div>\n\t{{/if}}',allowCode:!0});class ze{constructor(e,t={}){this.values=e,this.options=t}render(e){He(e).html(We.render(this.values,{itemTemplate:qe,timestamp:this.options.localTimestamp?new Date:new Date(this.values.timestamp),useLocalTime:this.options.localTimestamp?"true":"false",options:this.options}))}}const Ve={checkPermission:()=>new Promise(((e,t)=>{"Notification"in window?"denied"!==Notification.permission?"default"===Notification.permission?(()=>{try{Notification.requestPermission().then()}catch(e){return!1}return!0})()?Notification.requestPermission().then((t=>{e("granted"===t)})):Notification.requestPermission((t=>{e("granted"===t)})):e(!0):e(!1):(console.debug("Notifications are not supported by this browser!"),e(!1))})),checkUserPermission:()=>{MyAMS.notifications.checkPermission().then((()=>{}))},getNotifications:(e,t)=>{const a=He.extend({},t,e.data),n=He(e.target),s=He(e.currentTarget),o=s.data("ams-notifications-source")||s.parents("[data-ams-notifications-source]").data("ams-notifications-source");return new Promise(((e,t)=>{MyAMS.require("ajax").then((()=>{MyAMS.ajax.get(o,s.data("ams-notifications-params")||"",s.data("ams-notifications-options")||{}).then((t=>{const o=He(n.data("ams-notifications-target")||n.parents("[data-ams-notifications-target]").data("ams-notifications-target")||s.attr("href"));new ze(t,a).render(o),He("#notifications-count").text(""),Ve.checkUserPermission(),localStorage.setItem("notifications-timestamp",(new Date).toISOString()),e()}),t)}),t)}))},getNotificationsBadge:()=>{const e=He("#user-notifications").data("ams-notifications-source");return new Promise(((t,a)=>{const n=localStorage.getItem("notifications-timestamp");null===n?localStorage.setItem("notifications-timestamp",(new Date).toISOString()):MyAMS.require("ajax").then((()=>{MyAMS.ajax.get(e).then((e=>{const a=new Date(Date.parse(n)),s=(e.notifications||[]).filter((e=>new Date("number"==typeof e.timestamp?e.timestamp:Date.parse(e.timestamp))>a));He("#notifications-count").text(s.length||""),t()}),a)}),a)}))},addNotification:(e,t)=>{const a=He("ul","#notifications-pane"),n=He(qe.render(e)),s=He("#notifications-count"),o=parseInt(s.text())||0;a.prepend(n),s.text(o+1),t&&Ve.showDesktopNotification(e)},showDesktopNotification:e=>{Ve.checkPermission().then((t=>{if(!t)return;const a={title:e.title,body:e.message,icon:e.source.avatar},n=new Notification(a.title,a);e.url&&(n.onclick=()=>{window.open(e.url)})}))}};MyAMS.env.bundle?MyAMS.config.modules.push("notifications"):(MyAMS.notifications=Ve,console.debug("MyAMS: notifications module loaded..."));const Ge=MyAMS.$,Je={switchTreeNode:e=>{const t=e=>{Ge(`tr[data-ams-tree-node-parent-id="${e}"]`).each(((e,a)=>{const n=Ge(a);t(n.data("ams-tree-node-id")),r.row(n).remove().draw()}))},a=Ge(e.currentTarget),n=Ge(".switcher",a),s=a.parents("tr").first(),o=s.parents("table").first(),r=o.DataTable();if(a.tooltip("hide"),n.hasClass("expanded"))t(s.data("ams-tree-node-id")),n.html('<i class="far fa-plus-square"></i>').removeClass("expanded");else{const e=s.data("ams-location")||o.data("ams-location")||"",t=s.data("ams-tree-nodes-target")||o.data("ams-tree-nodes-target")||"get-tree-nodes.json",a=s.data("ams-element-name");n.html('<i class="fas fa-spinner fa-spin"></i>'),MyAMS.require("ajax").then((()=>{MyAMS.ajax.post(`${e}/${a}/${t}`,{can_sort:!Ge("td.sorter",s).is(":empty")}).then((e=>{if(e.length>0){let t;for(const a of e)t=Ge(a),r.row.add(t).draw(),MyAMS.core.initContent(t).then()}n.html('<i class="far fa-minus-square"></i>').addClass("expanded")}))}))}},switchTree:e=>{const t=Ge(e.currentTarget),a=Ge(".switcher",t),n=t.parents("th").parents("table").first(),s=n.data("ams-tree-node-id"),o=n.DataTable();if(t.tooltip("hide"),a.hasClass("expanded"))Ge("tr[data-ams-tree-node-parent-id]").filter(`tr[data-ams-tree-node-parent-id!="${s}"]`).each(((e,t)=>{o.row(t).remove().draw()})),Ge(".switcher",n).each(((e,t)=>{Ge(t).html('<i class="far fa-plus-square"></i>').removeClass("expanded")}));else{const e=n.data("ams-location")||"",t=n.data("ams-tree-nodes-target")||"get-tree.json",s=Ge("tbody tr",n.first());a.html('<i class="fas fa-spinner fa-spin"></i>'),MyAMS.require("ajax").then((()=>{MyAMS.ajax.post(`${e}/${t}`,{can_sort:!Ge("td.sorter",s).is(":empty")}).then((e=>{Ge("tr[data-ams-tree-node-id]",n).each(((e,t)=>{o.row(t).remove().draw()})),Ge(e).each(((e,t)=>{const a=Ge(t);o.row.add(a).draw()})),MyAMS.core.initContent(n).then(),a.html('<i class="far fa-minus-square"></i>').addClass("expanded")}))}))}},deleteElement:(e,t)=>{console.debug(t);const a=t.node_id;a&&Ge(`tr[data-ams-tree-node-parent-id="${a}"]`).each(((e,t)=>{Ge(t).parents("table").DataTable().row(t).remove().draw()}))},sortTree:(e,t)=>{const a=Ge(e.target),n=a.DataTable(),s=Ge(a).data();let o=s.amsReorderUrl;if(o){const e=Ge(s.amsReorderSource.node);e.data("ams-disabled-handlers","click");try{const t=e.parents("table").first().data("ams-tree-node-id"),r=e.data("ams-tree-node-id"),i=e.data("ams-tree-node-parent-id"),c=e.prev("tr");let l,d,m;c.exists()?(l=c.data("ams-tree-node-id"),d=Ge(`.${s.amsTreeSwitcherClass||"switcher"}`,c),d.hasClass(s.amsTreeSwitcherExpandedClass||"expanded")||(l=c.data("ams-tree-node-parent-id")),m=i===l?"reorder":"reparent"):(l=t,d=null,m=i===l?"reorder":"reparent");const u=MyAMS.core.getFunctionByName(o),p={action:m,child:r,parent:l,order:JSON.stringify(Ge("tr[data-ams-tree-node-id]",a).listattr("data-ams-tree-node-id")),can_sort:!Ge("td.sorter",e).is(":empty")};if("function"==typeof u)u.call(a,n,p);else{if(!o.startsWith(window.location.protocol)){const e=s.amsLocation;e&&(o=`${e}/${o}`)}MyAMS.require("ajax").then((()=>{MyAMS.ajax.post(o,p).then((t=>{const s=e=>{Ge(`tr[data-ams-tree-node-parent-id="${e}"]`,a).each(((e,t)=>{const a=Ge(t),o=a.attr("data-ams-tree-node-id");s(o),n.row(a).remove().draw()}))};if(t.status)MyAMS.ajax.handleJSON(t);else{let o,i;"reparent"===p.action&&(e=>{const t=Ge(`tr[data-ams-tree-node-id="${e}"]`,a);n.row(t).remove().draw()})(l),s(l),s(r),n.row(e).remove().draw();for(const e of t)o=Ge(e),i=Ge(`tr[id="${o.attr("id")}"]`),n.row(i).remove().draw(),n.row.add(o).draw(),MyAMS.core.initContent(o).then()}}))}))}}finally{setTimeout((function(){Ge(e).removeData("ams-disabled-handlers")}),50)}}return!1}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("tree"):(MyAMS.tree=Je,console.debug("MyAMS: tree module loaded..."))),MyAMS.$;const Ke={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("jsonrpc"):(MyAMS.jsonrpc=Ke,console.debug("MyAMS: jsonrpc module loaded..."))),MyAMS.$;const Ye={};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("xmlrpc"):(MyAMS.xmlrpc=Ye,console.debug("MyAMS: xmlrpc module loaded..."))),MyAMS.$;const Xe={logPageview:function(){},logEvent:function(){}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("stats"):(MyAMS.stats=Xe,console.debug("MyAMS: stats module loaded...")));const Qe=MyAMS.$;if(!Qe.templates){const e=a(495);Qe.templates=e.templates}const Ze=Qe.templates({markup:'\n\t<span class="custom-control custom-switch">\n\t\t<input type="checkbox"\n\t\t\t   id="{{: fieldId }}" name="{{: fieldName }}"\n\t\t\t   class="custom-control-input checker"\n\t\t\t   {{if checked}}checked{{/if}}\n\t\t\t   {{if readonly}}disabled{{/if}}\n\t\t\t   value="{{: value }}" />\n\t\t{{if prefix}}\n\t\t<input type="hidden" class="prefix"\n\t\t\t   id="{{: prefix}}{{: fieldName}}_prefix"\n\t\t\t   name="{{: prefix}}{{: fieldName}}"\n\t\t\t   value="{{if state===\'on\'}}{{: checkedValue}}{{else}}{{: uncheckedValue}}{{/if}}" />\n\t\t{{else marker}}\n\t\t<input type="hidden" class="marker"\n\t\t\t   name="{{: fieldName}}{{: marker}}"\n\t\t\t   value="1" />\n\t\t{{/if}}\n\t\t<label for="{{: fieldId }}"\n\t\t\t   class="custom-control-label">\n\t\t\t{{: legend }}\n\t\t</label>\n\t</span>\n'}),et={init:()=>{const e=Qe.fn.dataTable.ext.type;e.detect.unshift((e=>null!==e&&e.match(/^(0[1-9]|[1-2][0-9]|3[0-1])\/(0[1-9]|1[0-2])\/[0-3][0-9]{3}$/)?"date-euro":null)),e.detect.unshift((e=>null!==e&&e.match(/^(0[1-9]|[1-2][0-9]|3[0-1])\/(0[1-9]|1[0-2])\/[0-3][0-9]{3} - ([0-1][0-9]|2[0-3]):[0-5][0-9]$/)?"datetime-euro":null)),Qe.extend(e.order,{"numeric-comma-asc":(e,t)=>{let a=e.replace(/,/,".").replace(/ /g,""),n=t.replace(/,/,".").replace(/ /g,"");return a=parseFloat(a),n=parseFloat(n),a<n?-1:a>n?1:0},"numeric-comma-desc":(e,t)=>{let a=e.replace(/,/,".").replace(/ /g,""),n=t.replace(/,/,".").replace(/ /g,"");return a=parseFloat(a),n=parseFloat(n),a<n?1:a>n?-1:0},"date-euro-pre":e=>{const t=Qe.trim(e);let a;if(""!==t){const e=t.split("/");a=1*(e[2]+e[1]+e[0])}else a=1e7;return a},"date-euro-asc":(e,t)=>e-t,"date-euro-desc":(e,t)=>t-e,"datetime-euro-pre":e=>{const t=Qe.trim(e);let a;if(""!==t){const e=t.split(" - "),n=e[0].split("/"),s=e[1].split(":");a=1*(n[2]+n[1]+n[0]+s[0]+s[1])}else a=1e11;return a},"datetime-euro-asc":(e,t)=>e-t,"datetime-euro-desc":(e,t)=>t-e})},preReorder:function(e,t){Qe(e.target).data("ams-reorder-source",t)},reorderRows:function(e){return new Promise(((t,a)=>{const n=Qe(e.target),s=n.DataTable(),o=n.data();let r,i=o.amsReorderInputTarget,c=o.amsReorderUrl;i||c||t();const l=Qe(">tbody >tr",n),d=MyAMS.core.getFunctionByName(o.amsReorderData)||"data-ams-row-value";r="function"==typeof d?Qe.makeArray(l).map(d):l.listattr(d);const m=o.amsReorderSeparator||";";if(i?(i=Qe(i),i.exists()&&i.val(r.join(m))):r=r.join(m),c){if(c=MyAMS.core.executeFunctionByName(c,document,n)||c,!c.startsWith(window.location.protocol)&&!c.startsWith("/")){const e=n.data("ams-location");c=`${e||""}/${c}`}if(r.length>0){let e;if(o.amsReorderPostData)e=MyAMS.core.executeFunctionByName(o.amsReorderPostData,document,n,r);else{const t=o.amsReorderPostAttr||"order";e={},e[t]=r}MyAMS.require("ajax").then((()=>{MyAMS.ajax.post(c,e).then(((e,a,r)=>{Qe("td.sorter",n).each(((e,t)=>{Qe(t).removeData().attr("data-order",e),s.row(Qe(t).parents("tr").get(0)).invalidate().draw()}));const i=o.amsReorderCallback;i?MyAMS.core.executeFunctionByName(i,document,n,e,a,r).then(((...e)=>{t.apply(n,...e)})):MyAMS.ajax.handleJSON(e,n.parents(".dataTables_wrapper")).then((()=>{t(e)}))}),a)}))}}}))}},tt=e=>{const t=[];e.parent().find("ul.select2-selection__rendered").children("li[title]").each(((a,n)=>{t.push(e.children(`option[data-content="${n.title}"]`).attr("value"))})),e.data("select2-target").val(t.join(e.data("ams-select2-separator")||","))};window.MyAMS&&(MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe(".calendar",e);n.length>0?MyAMS.ajax.check(window.FullCalendar,`${MyAMS.env.baseURL}../ext/fullcalendar-global${MyAMS.env.extext}.js`).then((e=>{n.each(((e,t)=>{const a=Qe(t),n=a.data(),s={plugins:[],initialView:"dayGridMonth",themeSystem:"bootstrap",locale:Qe("html").attr("lang"),headerToolbar:{start:"title",center:"today",right:"prev,next"},bootstrapFontAwesome:{prev:"fa-chevron-left",next:"fa-chevron-right"},firstDay:1,weekNumberCalculation:"ISO"};let o=Qe.extend({},s,n.calendarOptions||n.options);o=MyAMS.core.executeFunctionByName(n.amsCalendarInitCallback||n.amsInit,document,a,o)||o;const r={veto:!1};if(a.trigger("before-init.ams.calendar",[a,o,r]),r.veto)return;const i=new FullCalendar.Calendar(t,o);a.trigger("after-init.ams.calendar",[a,i]),i.render()})),t(n)}),a):t(null)}))}),"calendar"),MyAMS.registry.register((function(e){return new Promise((t=>{const a=Qe("legend.checker",e);a.length>0?(a.each(((e,t)=>{const a=Qe(t),n=a.data();if(!n.amsChecker){const e=a.parent("fieldset"),t=n.amsCheckerState||n.amsState,s=e.hasClass("switched")||"on"===t,o=n.amsCheckerFieldname||n.amsFieldname||`checker_${MyAMS.core.generateId()}`,r=o.replace(/\./g,"_"),i=n.amsCheckerHiddenPrefix||n.amsHiddenPrefix,c=n.amsCheckerMarker||n.amsMarker||!1,l=n.amsCheckerMode||n.amsMode||"hide",d=n.amsCheckerValueOn||n.amsValueOn||"true",m=n.amsCheckerValueOff||n.amsValueOff||"false",u=n.amsCheckerValue||n.amsValue,p=n.amsCheckerReadonly||n.amsReadonly,g={legend:a.text(),fieldName:o,fieldId:r,value:u||!0,checked:s,readonly:p,prefix:i,state:t,checkedValue:d,uncheckedValue:m,marker:c},M={veto:!1};if(a.trigger("before-init.ams.checker",[a,g,M]),M.veto)return;a.html(Ze.render(g)),Qe("input",a).change((t=>{const s=Qe(t.target),o=s.is(":checked"),r={veto:!1};if(a.trigger("before-switch.ams.checker",[a,r]),r.veto)s.prop("checked",!o);else if(MyAMS.core.executeFunctionByName(n.amsCheckerChangeHandler||n.amsChangeHandler,document,a,o),!n.amsCheckerCancelDefault&&!n.amsCancelDefault){const t=s.siblings(".prefix");"hide"===l?o?(e.removeClass("switched"),t.val(d),a.trigger("opened.ams.checker",[a])):(e.addClass("switched"),t.val(m),a.trigger("closed.ams.checker",[a])):(e.prop("disabled",!o),t.val(o?d:m))}})),a.closest("form").on("reset",(()=>{const e=Qe(".checker",a);e.prop("checked")!==s&&e.click()})),s||("hide"===l?e.addClass("switched"):e.prop("disabled",!0)),a.trigger("after-init.ams.checker",[a]),a.data("ams-checker",!0)}})),t(a)):t(null)}))}),"checker"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe(".color",e);n.length>0?MyAMS.require("ajax").then((()=>{MyAMS.ajax.check(Qe.fn.colorpicker,`${MyAMS.env.baseURL}../ext/bootstrap-colorpicker${MyAMS.env.extext}.js`).then((e=>{const s=[];e&&s.push(MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/bootstrap-colorpicker${MyAMS.env.extext}.css`,"colorpicker")),Qe.when.apply(Qe,s).then((()=>{n.each(((e,t)=>{const a=Qe(t),n=a.data(),s={format:n.amsColorpickerFormat||n.amsFormat||"hex",useHashPrefix:!1!==(n.amsColorpickerUseHashPrefix||n.amsUseHashPrefix||!1),useAlpha:!1!==(n.amsColorpickerUseAlpha||n.amsUseAlpha||!1),change:MyAMS.core.getFunctionByName(n.amsColorpickerChange||n.amsChange),colorpickerChange:MyAMS.core.getFunctionByName(n.amsColorpickerPickerChange||n.amsPickerChange),colorpickerCreate:MyAMS.core.getFunctionByName(n.amsColorpickerPickerCreate||n.amsPickerCreate),colorpickerDestroy:MyAMS.core.getFunctionByName(n.amsColorpickerPickerDestroy||n.amsPickerDestroy),colorpickerEnable:MyAMS.core.getFunctionByName(n.amsColorpickerPickerEnable||n.amsPickerEnable),colorpickerDisable:MyAMS.core.getFunctionByName(n.amsColorpickerPickerDisable||n.amsPickerDisable),colorpickerHide:MyAMS.core.getFunctionByName(n.amsColorpickerPickerHide||n.amsPickerHide),colorpickerInvalid:MyAMS.core.getFunctionByName(n.amsColorpickerPickerInvalid||n.amsPickerInvalid),colorpickerShow:MyAMS.core.getFunctionByName(n.amsColorpickerPickerShow||n.amsPickerShow),colorpickerUpdate:MyAMS.core.getFunctionByName(n.amsColorpickerPickerUpdate||n.amsPickerUpdate),mousemove:MyAMS.core.getFunctionByName(n.amsColorpickerMousemove||n.amsMousemove)};let o=Qe.extend({},s,n.amsColorpickerOptions||n.amsOptions);o=MyAMS.core.executeFunctionByName(n.amsColorpickerInitCallback||n.amsInit,document,a,o)||o;const r={veto:!1};if(a.trigger("before-init.ams.colorpicker",[a,o,r]),r.veto)return;const i=a.colorpicker(o);MyAMS.core.executeFunctionByName(n.amsColorpickerAfterInitCallback||n.amsAfterInit,document,a,i,o),a.trigger("after-init.ams.colorpicker",[a,i])})),t(n)}),a)}),a)}),a):t(null)}))}),"colorPicker"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe(".context-menu",e);n.length>0?MyAMS.require("menu").then((()=>{n.each(((e,t)=>{const a=Qe(t),n=a.data(),s={menuSelector:n.amsContextmenuSelector||n.amsMenuSelector};let o=Qe.extend({},s,n.amsContextmenuOptions||n.amsOptions);o=MyAMS.core.executeFunctionByName(n.amsContextmenuInitCallback||n.amsInit,document,a,o)||o;const r={veto:!1};if(a.trigger("before-init.ams.contextmenu",[a,o,r]),r.veto)return;const i=a.contextMenu(o);MyAMS.core.executeFunctionByName(n.amsContextmenuAfterInitCallback||n.amsAfterInit,document,a,i,o),a.trigger("after-init.ams.contextmenu",[a,i])})),t(n)}),a):t(null)}))}),"contextMenu"),MyAMS.registry.register((function(e){const t=`${MyAMS.env.baseURL}../ext/datatables/`,a=`${MyAMS.env.baseURL}../../css/ext/datatables/`;return new Promise(((n,s)=>{const o=Qe(".datatable",e);o.length>0?MyAMS.ajax.check(Qe.fn.dataTable,`${MyAMS.env.baseURL}../ext/datatables/jquery.dataTables${MyAMS.env.extext}.js`).then((e=>{const r=[];e&&(r.push(MyAMS.core.getScript(`${t}dataTables.bootstrap4${MyAMS.env.extext}.js`)),r.push(MyAMS.core.getCSS(`${a}dataTables.bootstrap4${MyAMS.env.extext}.css`,"datatables-bs4"))),Qe.when.apply(Qe,r).then((()=>{const r={},i=[],c=[],l=[],d={};o.each(((e,n)=>{const s=Qe(n),o=s.data();if("default"===o.buttons?(s.attr("data-buttons",'["copy", "print"]'),s.removeData("buttons"),o.buttons=s.data("buttons")):"all"===o.buttons&&(s.attr("data-buttons",'["copy", "csv", "excel", "print", "pdf", "colvis"]'),s.removeData("buttons"),o.buttons=s.data("buttons")),!o.autoFill||d.autoFill||Qe.fn.dataTable.AutoFill||(i.push(`${t}dataTables.autoFill${MyAMS.env.extext}.js`),c.push(`${t}autoFill.bootstrap4${MyAMS.env.extext}.js`),r["dt-autofill-bs4"]=`${a}autoFill.bootstrap4${MyAMS.env.extext}.css`,d.autoFill=!0),o.buttons&&(d.buttons||Qe.fn.dataTable.Buttons||(i.push(`${t}dataTables.buttons${MyAMS.env.extext}.js`),c.push(`${t}buttons.bootstrap4${MyAMS.env.extext}.js`),c.push(`${t}buttons.html5${MyAMS.env.extext}.js`),r["dt-buttons-bs4"]=`${a}buttons.bootstrap4${MyAMS.env.extext}.css`,d.buttons=!0),Qe.isArray(o.buttons))){const e=[];for(const a of o.buttons)switch(a){case"copy":e.push({extend:"copyHtml5",exportOptions:{columns:":not(.no-export):visible"}});break;case"csv":e.push({extend:"csvHtml5",exportOptions:{columns:":not(.no-export):visible"}});break;case"excel":d.buttons_excel||Qe.fn.dataTable.ext.buttons.excelHtml5||(i.push(`${t}jszip${MyAMS.env.extext}.js`),d.buttons_excel=!0),e.push({extend:"excelHtml5",exportOptions:{columns:":not(.no-export):visible"}});break;case"pdf":d.buttons_pdf||window.pdfMake||(i.push(`${t}pdfmake${MyAMS.env.extext}.js`),c.push(`${t}vfs_fonts${MyAMS.env.extext}.js`),d.buttons_pdf=!0),e.push({extend:"pdfHtml5",exportOptions:{columns:":not(.no-export):visible"}});break;case"print":d.buttons_print||Qe.fn.dataTable.ext.buttons.print||(l.push(`${t}buttons.print${MyAMS.env.extext}.js`),d.buttons_print=!0),e.push({extend:"print",exportOptions:{columns:":not(.no-export):visible"}});break;case"colvis":d.buttons_colvis||Qe.fn.dataTable.ext.buttons.colvis||(l.push(`${t}buttons.colVis${MyAMS.env.extext}.js`),d.buttons_colvis=!0),e.push({extend:"colvis"})}o.buttons=e}!o.colReorder||d.colReorder||Qe.fn.dataTable.ColReorder||(i.push(`${t}dataTables.colReorder${MyAMS.env.extext}.js`),c.push(`${t}colReorder.bootstrap4${MyAMS.env.extext}.js`),r["dt-colreorder-bs4"]=`${a}colReorder.bootstrap4${MyAMS.env.extext}.css`,d.colReorder=!0),!o.fixedColumns||d.fixedColumns||Qe.fn.dataTable.FixedColumns||(i.push(`${t}dataTables.fixedColumns${MyAMS.env.extext}.js`),c.push(`${t}fixedColumns.bootstrap4${MyAMS.env.extext}.js`),r["dt-fixedcolumns-bs4"]=`${a}fixedColumns.bootstrap4${MyAMS.env.extext}.css`,d.fixedColumns=!0),!o.fixedHeader||d.fixedHeader||Qe.fn.dataTable.FixedHeader||(i.push(`${t}dataTables.fixedHeader${MyAMS.env.extext}.js`),c.push(`${t}fixedHeader.bootstrap4${MyAMS.env.extext}.js`),r["dt-fixedheader-bs4"]=`${a}fixedHeader.bootstrap4${MyAMS.env.extext}.css`,d.fixedHeader=!0),!o.keyTable||d.keyTable||Qe.fn.dataTable.KeyTable||(i.push(`${t}dataTables.keyTable${MyAMS.env.extext}.js`),c.push(`${t}keyTable.bootstrap4${MyAMS.env.extext}.js`),r["dt-keytable-bs4"]=`${a}keyTable.bootstrap4${MyAMS.env.extext}.css`,d.keyTable=!0),!1===o.responsive||d.responsive||Qe.fn.dataTable.Responsive||(i.push(`${t}dataTables.responsive${MyAMS.env.extext}.js`),c.push(`${t}responsive.bootstrap4${MyAMS.env.extext}.js`),r["dt-responsive-bs4"]=`${a}responsive.bootstrap4${MyAMS.env.extext}.css`,d.responsive=!0),!o.rowGroup||d.rowGroup||Qe.fn.dataTable.RowGroup||(i.push(`${t}dataTables.rowGroup${MyAMS.env.extext}.js`),c.push(`${t}rowGroup.bootstrap4${MyAMS.env.extext}.js`),r["dt-rowgroup-bs4"]=`${a}rowGroup.bootstrap4${MyAMS.env.extext}.css`,d.rowGroup=!0),!o.rowReorder||d.rowReorder||Qe.fn.dataTable.RowReorder||(i.push(`${t}dataTables.rowReorder${MyAMS.env.extext}.js`),c.push(`${t}rowReorder.bootstrap4${MyAMS.env.extext}.js`),r["dt-rowreorder-bs4"]=`${a}rowReorder.bootstrap4${MyAMS.env.extext}.css`,d.rowReorder=!0),!o.scroller||d.scroller||Qe.fn.dataTable.Scroller||(i.push(`${t}dataTables.scroller${MyAMS.env.extext}.js`),c.push(`${t}scroller.bootstrap4${MyAMS.env.extext}.js`),r["dt-scroller-bs4"]=`${a}scroller.bootstrap4${MyAMS.env.extext}.css`,d.scroller=!0),!o.searchBuilder||d.searchBuilder||Qe.fn.dataTable.SearchBuilder||(i.push(`${t}dataTables.searchBuilder${MyAMS.env.extext}.js`),c.push(`${t}searchBuilder.bootstrap4${MyAMS.env.extext}.js`),r["dt-searchbuilder-bs4"]=`${a}searchBuilder.bootstrap4${MyAMS.env.extext}.css`,d.searchBuilder=!0),!o.searchPanes||d.searchPanes||Qe.fn.dataTable.SearchPanes||(d.select||Qe.fn.dataTable.select||(i.push(`${t}dataTables.select${MyAMS.env.extext}.js`),c.push(`${t}select.bootstrap4${MyAMS.env.extext}.js`),r["dt-select-bs4"]=`${a}select.bootstrap4${MyAMS.env.extext}.css`,d.select=!0),c.push(`${t}dataTables.searchPanes${MyAMS.env.extext}.js`),l.push(`${t}searchPanes.bootstrap4${MyAMS.env.extext}.js`),r["dt-searchpanes-bs4"]=`${a}searchPanes.bootstrap4${MyAMS.env.extext}.css`,d.searchPanes=!0),!o.select||d.select||Qe.fn.dataTable.select||(i.push(`${t}dataTables.select${MyAMS.env.extext}.js`),c.push(`${t}select.bootstrap4${MyAMS.env.extext}.js`),r["dt-select-bs4"]=`${a}select.bootstrap4${MyAMS.env.extext}.css`,d.select=!0),!o.stateRestore||d.stateRestore||Qe.fn.dataTables.stateRestore||(i.push(`${t}dataTables.stateRestore${MyAMS.env.extext}.js`),c.push(`${t}stateRestore.bootstrap4${MyAMS.env.extext}.js`),r["dt-staterestore-bs4"]=`${a}stateRestore.bootstrap4${MyAMS.env.extext}.css`,d.stateRestore=!0)})),Qe.when.apply(Qe,i.map(MyAMS.core.getScript)).then((()=>Qe.when.apply(Qe,c.map(MyAMS.core.getScript)).then((()=>Qe.when.apply(Qe,l.map(MyAMS.core.getScript)).then((()=>{e&&et.init();for(const[e,t]of Object.entries(r))MyAMS.core.getCSS(t,e);o.each(((e,t)=>{const a=Qe(t);if(Qe.fn.dataTable.isDataTable(a))return;const n=a.data();let s=n.amsDatatableDom||n.amsDom||n.dom||"";s||(n.buttons&&(s+="<'row px-4 float-right'B>"),n.searchBuilder&&(s+="Q"),n.searchPanes&&(s+="P"),!1===n.searching&&!1===n.lengthChange||(s+="<'row px-2'",!1!==n.searching&&(s+="<'col-sm-6 col-md-8'f>"),!1!==n.lengthChange&&(s+="<'col-sm-6 col-md-4'l>"),s+=">"),s+="<'row'<'col-sm-12'tr>>",!1===n.info&&!1===n.paging||(s+="<'row px-2 py-1'",!1!==n.info&&(s+="<'col-sm-12 col-md-5'i>"),!1!==n.paging&&(s+="<'col-sm-12 col-md-7'p>"),s+=">")),(n.buttons||n.searchBuilder||n.searchPanes||!1!==n.searching)&&!1!==n.lengthChange||a.siblings("h3").addClass("mb-0");const o={language:n.amsDatatableLanguage||n.amsLanguage||MyAMS.i18n.plugins.datatables,responsive:!0,dom:s};let r=n.amsDatatableOrder||n.amsOrder;if("string"==typeof r){const e=r.split(";");r=[];for(const t of e){const e=t.split(",");e[0]=parseInt(e[0]),r.push(e)}}r&&(o.order=r);const i=Qe("thead th",a),c=[];i.each(((e,t)=>{c[e]=Qe(t).data("ams-column")||{}}));const l=i.listattr("data-ams-sortable");for(const e of l.entries()){const[t,a]=e;n.rowReorder?c[t].sortable=!1:void 0!==a&&(c[t].sortable="string"==typeof a?JSON.parse(a):a)}const d=i.listattr("data-ams-type");for(const e of d.entries()){const[t,a]=e;void 0!==a&&(c[t].type=a)}o.columns=c;let m=Qe.extend({},o,n.amsDatatableOptions||n.amsOptions);m=MyAMS.core.executeFunctionByName(n.amsDatatableInitCallback||n.amsInit,document,a,m)||m;const u={veto:!1};a.trigger("before-init.ams.datatable",[a,m,u]),u.veto||setTimeout((()=>{Qe.fn.dataTable.Buttons&&(Qe.fn.dataTable.Buttons.defaults.dom.button.className=n.amsDatatableButtonsClassname||n.amsButtonsClassname||"btn btn-sm btn-secondary");const e=a.DataTable(m);MyAMS.core.executeFunctionByName(n.amsDatatableAfterInitCallback||n.amsAfterInit,document,a,e,m),a.trigger("after-init.ams.datatable",[a,e]),m.rowReorder&&(e.on("pre-row-reorder",MyAMS.core.getFunctionByName(n.amsDatatablePreReorder||n.amsPreReorder)||et.preReorder),e.on("row-reorder",MyAMS.core.getFunctionByName(n.amsDatatableReordered||n.amsReordered)||et.reorderRows))}),100)})),n(o)}),s)),s)),s)}),s)}),s):n(null)}))}),"datatables"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe(".datetime",e);n.length>0?MyAMS.ajax.check(window.moment,`${MyAMS.env.baseURL}../ext/moment${MyAMS.env.extext}.js`).then((()=>{MyAMS.ajax.check(Qe.fn.datetimepicker,`${MyAMS.env.baseURL}../ext/tempusdominus-bootstrap4${MyAMS.env.extext}.js`).then((e=>{const a=[];e&&a.push(MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/tempusdominus-bootstrap4${MyAMS.env.extext}.css`,"tempusdominus")),Qe.when.apply(Qe,a).then((()=>{n.each(((e,t)=>{const a=Qe(t),n=a.data(),s={locale:n.amsDatetimeLanguage||n.amsLanguage||MyAMS.i18n.language,icons:{time:"far fa-clock",date:"far fa-calendar",up:"fas fa-arrow-up",down:"fas fa-arrow-down",previous:"fas fa-chevron-left",next:"fas fa-chevron-right",today:"far fa-calendar-check-o",clear:"far fa-trash",close:"far fa-times"},date:a.val(),format:n.amsDatetimeFormat||n.amsFormat};let o=Qe.extend({},s,n.datetimeOptions||n.options);o=MyAMS.core.executeFunctionByName(n.amsDatetimeInitCallback||n.amsInit,document,a,o)||o;const r={veto:!1};if(a.trigger("before-init.ams.datetime",[a,o,r]),r.veto)return;a.datetimepicker(o);const i=a.data("datetimepicker");(n.amsDatetimeIsoTarget||n.amsIsoTarget)&&a.on("change.datetimepicker",(e=>{const t=Qe(e.currentTarget).data();Qe(t.amsDatetimeIsoTarget||t.amsIsoTarget).val(e.date?e.date.toISOString(!0):null)})),a.trigger("after-init.ams.datetime",[a,i])})),t(n)}))}),a)}),a):t(null)}))}),"datetime"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe(".draggable, .droppable, .sortable, .resizable",e);n.length>0?MyAMS.ajax.check(Qe.fn.draggable,`${MyAMS.env.baseURL}../ext/jquery-ui${MyAMS.env.extext}.js`).then((()=>{MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/jquery-ui.structure${MyAMS.env.extext}.css`,"jquery-ui").then((()=>{n.each(((e,t)=>{const a=Qe(t),n=a.data();if(a.hasClass("draggable")){const e={axis:n.amsDraggableAxis||n.amsAxis,cursor:n.amsDraggableCursor||"move",containment:n.amsDraggableContainment||n.amsContainment,delay:n.amsDraggableDelay||n.amsDelay,handle:n.amsDraggableHandle||n.amsHandle,connectToSortable:n.amsDraggableConnectSortable||n.amsConnectSortable,revert:n.amsDraggableRevert||n.amsRevert,revertDuration:n.amsDraggableRevertDuration||n.amsRevertDuration,helper:MyAMS.core.getFunctionByName(n.amsDraggableHelper)||n.amsDraggableHelper,start:MyAMS.core.getFunctionByName(n.amsDraggableStart)||function(e,t){Qe(e.currentTarget).data("is-dragging",!0)},stop:MyAMS.core.getFunctionByName(n.amsDraggableStop)||function(e,t){setTimeout((()=>{Qe(e.currentTarget).data("is-dragging",!1)}),100)}};let t=Qe.extend({},e,n.amsDraggableOptions||n.amsOptions);t=MyAMS.core.executeFunctionByName(n.amsDraggableInitCallback||n.amsInit,document,a,t)||t;const s={veto:!1};if(a.trigger("before-init.ams.draggable",[a,t,s]),s.veto)return;const o=a.draggable(t);a.disableSelection(),MyAMS.core.executeFunctionByName(n.amsDraggableAfterInitCallback||n.amsAfterInit,document,a,o,t),a.trigger("after-init.ams.draggable",[a,o])}if(a.hasClass("droppable")){const e={accept:n.amsDroppableAccept||n.amsAccept,classes:n.amsDroppableClasses,drop:MyAMS.core.getFunctionByName(n.amsDroppableDrop)};let t=Qe.extend({},e,n.amsDroppableOptions||n.amsOptions);t=MyAMS.core.executeFunctionByName(n.amsDroppableInitCallback||n.amsInit,document,a,t)||t;const s={veto:!1};if(a.trigger("before-init.ams.droppable",[a,t,s]),s.veto)return;const o=a.droppable(t);MyAMS.core.executeFunctionByName(n.amsDroppableAfterInitCallback||n.amsAfterInit,document,a,o,t),a.trigger("after-init.ams.droppable",[a,o])}if(a.hasClass("sortable")){const e={items:n.amsSortableItems,handle:n.amsSortableHandle,helper:MyAMS.core.getFunctionByName(n.amsSortableHelper)||n.amsSortableHelper,connectWith:n.amsSortableConnectwith,containment:n.amsSortableContainment,placeholder:n.amsSortablePlaceholder,start:MyAMS.core.getFunctionByName(n.amsSortableStart),over:MyAMS.core.getFunctionByName(n.amsSortableOver),stop:MyAMS.core.getFunctionByName(n.amsSortableStop)};let t=Qe.extend({},e,n.amsSortableOptions||n.amsOptions);t=MyAMS.core.executeFunctionByName(n.amsSortableInitCallback||n.amsInit,document,a,t)||t;const s={veto:!1};if(a.trigger("before-init.ams.sortable",[a,t,s]),s.veto)return;const o=a.sortable(t);a.disableSelection(),MyAMS.core.executeFunctionByName(n.amsSortableAfterInitCallback||n.amsAfterInit,document,a,o,t),a.trigger("after-init.ams.sortable",[a,o])}if(a.hasClass("resizable")){const e={autoHide:!1===n.amsResizableAutohide||n.amsResizableAutohide,containment:n.amsResizableContainment,grid:n.amsResizableGrid,handles:n.amsResizableHandles,start:MyAMS.core.getFunctionByName(n.amsResizableStart),resize:MyAMS.core.getFunctionByName(n.amsResizableResize),stop:MyAMS.core.getFunctionByName(n.amsResizableStop)};let t=Qe.extend({},e,n.amsResizableOptions||n.amsOptions);t=MyAMS.core.executeFunctionByName(n.amsResizableInitCallback||n.amsInit,document,a,t)||t;const s={veto:!1};if(a.trigger("before-init.ams.resizable",[a,t,s]),s.veto)return;const o=a.resizable(t);a.disableSelection(),MyAMS.core.executeFunctionByName(n.amsResizableAfterInitCallback||n.amsAfterInit,document,a,o,t),a.trigger("after-init.ams.resizable",[a,o])}})),t(n)}))}),a):t(null)}))}),"dragdrop"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe(".dropzone",e);n.length>0?MyAMS.require("ajax").then((()=>{MyAMS.ajax.check(Qe.fn.dropzone,`${MyAMS.env.baseURL}../ext/dropzone.min.js`).then((e=>{const a=[];e&&a.push(MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/dropzone${MyAMS.env.extext}.css`,"dropzone")),Qe.when.apply(Qe,a).then((()=>{n.each(((e,t)=>{const a=Qe(t),n=a.data(),s={paramName:n.amsDropzoneParamName||n.amsParamName||"form.widgets.data",url:n.amsDropzoneUrl||n.amsUrl||"upload-file.json",uploadMultiple:!1!==n.amsDropzoneUploadMultiple&&!1!==n.amsUploadMultiple,parallelUploads:n.amsDropzoneParallelUploads||n.amsParallelUploads||10,maxFilesize:n.amsDropzoneMaxFilesize||n.amsMaxFilesize,thumbnailWidth:n.amsDropzoneThumbnailWidth||n.amsThumbnailWidth||128,thumbnailHeight:n.amsDropzoneThumbnailHeight||n.amsThumbnailHeight||128,thumbnailMethod:n.amsDropzoneThumbnailMethod||n.amsThumbnailMethod||"contain",clickable:0!=n.amsDropzoneClickable&&!1!==n.amsCLickable,acceptedFiles:n.amsDropzoneAcceptedFiles||n.amsAcceptedFiles,success:MyAMS.core.getFunctionByName(n.amsDropzoneSuccess||n.amsSuccess)||function(e,t,a){MyAMS.ajax.handleJSON(t)}};let o=Qe.extend({},s,n.amsDropzoneOptions||n.amsOptions);o=MyAMS.core.executeFunctionByName(n.amsDropzoneInitCallback||n.amsInit,document,a,o)||o;const r={veto:!1};if(a.trigger("before-init.ams.dropzone",[a,o,r]),r.veto)return;const i=a.dropzone(o);a.trigger("after-init.ams.dropzone",[a,i])})),t(n)}))}),a)}),a):t(null)}))}),"dropzone"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe(".editor textarea",e);n.length>0?MyAMS.require("ajax").then((()=>{MyAMS.ajax.check(window.ace,`${MyAMS.env.baseURL}../ext/ace/ace${MyAMS.env.extext}.js`).then((e=>{const a=window.ace,s=[];e&&(a.config.set("basePath",`${MyAMS.env.baseURL}../ext/ace`),s.push(MyAMS.core.getScript(`${MyAMS.env.baseURL}../ext/ace/ext-modelist${MyAMS.env.extext}.js`))),Qe.when.apply(Qe,s).then((()=>{n.each(((e,t)=>{const n=Qe(t),s=n.parents(".editor"),o=n.data(),r=a.require("ace/ext/modelist"),i=o.amsEditorMode||o.amsMode||r.getModeForPath(o.amsEditorFilename||o.amsFilename||"text.txt").mode;setTimeout((()=>{const e=Qe("<div>",{position:"absolute",width:n.width(),height:n.height(),class:n.attr("class")}).insertBefore(n);n.css("display","none");const t={mode:i,fontSize:"12px",tabSize:4,useSoftTabs:!1,showGutter:!0,showLineNumbers:!0,printMargin:132,showInvisibles:!0};let r=Qe.extend({},t,o.amsEditorOptions||o.amsOptions);r=MyAMS.core.executeFunctionByName(o.amsEditorInitCallback||o.amsInit,document,n,r)||r;const c={veto:!1};if(n.trigger("before-init.ams.editor",[n,r,c]),c.veto)return;const l=a.edit(e[0]);l.setOptions(r),"darkmode"===MyAMS.theme?l.setTheme("ace/theme/dracula"):l.setTheme("ace/theme/textmate"),l.session.setValue(n.val()),n.attr("disabled")&&l.setReadOnly(!0),l.session.on("change",(()=>{n.val(l.session.getValue())})),s.data("editor",l),MyAMS.core.executeFunctionByName(o.amsEditorAfterEditCallback||o.amsAfterInit,document,n,l,r),n.trigger("after-init.ams.editor",[n,l])}),200)})),t(n)}))}))}),a):t(null)}))}),"editor"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe(".custom-file-input",e);n.length>0?MyAMS.require("ajax").then((()=>{MyAMS.ajax.check(window.bsCustomFileInput,`${MyAMS.env.baseURL}../ext/bs-custom-file-input${MyAMS.env.extext}.js`).then((()=>{setTimeout((()=>{n.each(((e,t)=>{const a=Qe(t),n=a.attr("id"),s=n?`#${n}`:a.attr("name"),o=Qe(t.form),r=o.attr("id"),i=r?`#${r}`:o.attr("name"),c={veto:!1};a.trigger("before-init.ams.fileinput",[a,c]),c.veto||(bsCustomFileInput.init(s,i),a.trigger("after-init.ams.fileinput",[a]))})),t(n)}),250)}),a)}),a):t(null)}))}),"fileInput"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe(".imgareaselect",e);n.length>0?MyAMS.require("ajax").then((()=>{MyAMS.ajax.check(Qe.fn.imgAreaSelect,`${MyAMS.env.baseURL}../ext/jquery-imgareaselect${MyAMS.env.extext}.js`).then((e=>{const s=[];e&&s.push(MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/imgareaselect-animated${MyAMS.env.extext}.css`,"imgareaselect")),Qe.when.apply(Qe,s).then((()=>{n.each(((e,t)=>{const a=Qe(t);if(a.data("imgAreaSelect"))return;const n=a.data(),s=n.amsImgareaselectParent||n.amsParent,o=s?a.parents(s):"body",r={instance:!0,handles:!0,parent:o,x1:n.amsImgareaselectX1||n.amsX1||0,y1:n.amsImgareaselectY1||n.amsY1||0,x2:n.amsImgareaselectX2||n.amsX2||n.amsImgareaselectImageWidth||n.amsImageWidth,y2:n.amsImgareaselectY2||n.amsY2||n.amsImgareaselectImageHeight||n.amsImageHeight,imageWidth:n.amsImgareaselectImageWidth||n.amsImageWidth,imageHeight:n.amsImgareaselectImageHeight||n.amsImageHeight,imgWidth:n.amsImgareaselectThumbWidth||n.amsThumbWidth,imgHeight:n.amsImgareaselectThumbHeight||n.amsThumbHeight,minWidth:128,minHeight:128,aspectRatio:n.amsImgareaselectAspectRatio||n.amsAspectRatio,onSelectEnd:MyAMS.core.getFunctionByName(n.amsImgareaselectSelectEnd||n.amsSelectedEnd)||function(e,t){const a=n.amsImgareaselectTargetField||n.amsTargetField||"image_";Qe(`input[name="${a}x1"]`,o).val(t.x1),Qe(`input[name="${a}y1"]`,o).val(t.y1),Qe(`input[name="${a}x2"]`,o).val(t.x2),Qe(`input[name="${a}y2"]`,o).val(t.y2)}};let i=Qe.extend({},r,n.amsImgareaselectOptions||n.amsOptions);i=MyAMS.core.executeFunctionByName(n.amsImgareaselectInitCallback||n.amsInit,document,a,i)||i;const c={veto:!1};a.trigger("before-init.ams.imgareaselect",[a,i,c]),c.veto||setTimeout((()=>{const e=a.imgAreaSelect(i);a.trigger("after-init.ams.imgareaselect",[a,e])}),200)})),t(n)}),a)}),a)}),a):t(null)}))}),"imgAreaSelect"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe("input[data-input-mask]",e);n.length>0?MyAMS.require("ajax").then((()=>{MyAMS.ajax.check(Qe.fn.inputmask,`${MyAMS.env.baseURL}../ext/jquery-inputmask${MyAMS.env.extext}.js`).then((()=>{n.each(((e,t)=>{const a=Qe(t),n=a.data();let s;s="object"==typeof n.inputMask?n.inputMask:{mask:n.inputMask.toString()};let o=Qe.extend({},s,n.amsInputMaskOptions||n.amsOptions);o=MyAMS.core.executeFunctionByName(n.amsInputmaskInitCallback||n.amsInit,document,a,o)||o;const r={veto:!1};if(a.trigger("before-init.ams.inputmask",[a,o,r]),r.veto)return;const i=a.inputmask(o);MyAMS.core.executeFunctionByName(n.amsInputmaskAfterInitCallback||n.amsAfterInit,document,a,i,o),a.trigger("after-init.ams.inputmask",[a,i])})),t(n)}),a)}),a):t(null)}))}),"inputMask"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe(".select2",e);n.length>0?MyAMS.require("ajax","helpers").then((()=>{MyAMS.ajax.check(Qe.fn.select2,`${MyAMS.env.baseURL}../ext/select2/select2${MyAMS.env.extext}.js`).then((e=>{const s=[];e&&s.push(MyAMS.core.getScript(`${MyAMS.env.baseURL}../ext/select2/i18n/${MyAMS.i18n.language}.js`)),Qe.when.apply(Qe,s).then((()=>{n.each(((e,t)=>{const a=Qe(t),n=a.data();if(n.select2)return;const s={theme:n.amsSelect2Theme||n.amsTheme||"bootstrap4",language:n.amsSelect2Language||n.amsLanguage||MyAMS.i18n.language,escapeMarkup:MyAMS.core.getFunctionByName(n.amsSelect2EscapeMarkup||n.amsEscapeMarkup),matcher:MyAMS.core.getFunctionByName(n.amsSelect2Matcher||n.amsMatcher),sorter:MyAMS.core.getFunctionByName(n.amsSelect2Sorter||n.amsSorter),templateResult:MyAMS.core.getFunctionByName(n.amsSelect2TemplateResult||n.amsTemplateResult),templateSelection:MyAMS.core.getFunctionByName(n.amsSelect2TemplateSelection||n.amsTemplateSelection),tokenizer:MyAMS.core.getFunctionByName(n.amsSelect2Tokenizer||n.amsTokenizer)};if(n.amsSelect2AjaxUrl||n.amsAjaxUrl||n["ajax-Url"]){let e;const t=MyAMS.core.getFunctionByName(n.amsSelect2AjaxParams||n.amsAjaxParams||n["ajax-Params"])||n.amsSelect2AjaxParams||n.amsAjaxParams||n["ajax-Params"];"function"==typeof t?e=t:t&&(e=e=>((e,t)=>Object.assign({},e,t))(e,t)),s.ajax={url:MyAMS.core.getFunctionByName(n.amsSelect2AjaxUrl||n.amsAjaxUrl)||n.amsSelect2AjaxUrl||n.amsAjaxUrl,data:e||MyAMS.core.getFunctionByName(n.amsSelect2AjaxData||n.amsAjaxData)||n.amsSelect2AjaxData||n.amsAjaxData,processResults:MyAMS.core.getFunctionByName(n.amsSelect2AjaxProcessResults||n.amsAjaxProcessResults)||n.amsSelect2AjaxProcessResults||n.amsAjaxProcessResults,transport:MyAMS.core.getFunctionByName(n.amsSelect2AjaxTransport||n.amsAjaxTransport)||n.amsSelect2AjaxTransport||n.amsAjaxTransport},s.minimumInputLength=n.amsSelect2MinimumInputLength||n.amsMinimumInputLength||n.minimumInputLength,void 0===s.minimumInputLength&&(s.minimumInputLength=1)}if(a.hasClass("sortable")){const e=Qe(`<input type="hidden" name="${a.attr("name")}">`).insertAfter(a);e.val(Qe("option:selected",a).listattr("value").join(n.amsSelect2Separator||",")),a.data("select2-target",e).removeAttr("name"),s.templateSelection=e=>{const t=Qe(e.element);return t.attr("data-content",t.html()),e.text}}let o=Qe.extend({},s,n.amsSelect2Options||n.amsOptions);o=MyAMS.core.executeFunctionByName(n.amsSelect2InitCallback||n.amsInit,document,a,o)||o;const r={veto:!1};if(a.trigger("before-init.ams.select2",[a,o,r]),r.veto)return;const i=a.select2(o);a.on("select2:opening select2:selecting select2:unselecting select2:clearing",(e=>{if(Qe(e.target).is(":disabled"))return!1})),a.on("select2:opening",(e=>{const t=Qe(e.currentTarget).parents(".modal").first();if(t.exists()){const e=parseInt(t.css("z-index"));i.data("select2").$dropdown.css("z-index",e+1)}})),a.on("select2:open",(()=>{setTimeout((()=>{const e=Qe(".select2-search__field",i.data("select2").$dropdown);e.exists()&&e.get(0).focus()}),50)})),a.hasClass("sortable")&&MyAMS.ajax.check(Qe.fn.sortable,`${MyAMS.env.baseURL}../ext/jquery-ui${MyAMS.env.extext}.js`).then((()=>{a.parent().find("ul.select2-selection__rendered").sortable({containment:"parent",update:()=>{tt(a)}}),a.on("select2:select select2:unselect",(e=>{const t=e.params.data.id,a=Qe(e.currentTarget),n=a.children(`option[value="${t}"]`);MyAMS.helpers.moveElementToParentEnd(n),a.trigger("change"),tt(a)}))})),MyAMS.core.executeFunctionByName(n.amsSelect2AfterInitCallback||n.amsAfterInit,document,a,i,o),a.trigger("after-init.ams.select2",[a,i])})),t(n)}),a)}),a)}),a):t(null)}))}),"select2"),MyAMS.registry.register((function(e){return new Promise((t=>{const a=Qe(".svg-container",e);a.length>0?(a.each(((e,t)=>{const a=Qe(t),n=Qe("svg",a),s=n.attr("width"),o=n.attr("height");s&&o&&t.setAttribute("viewBox",`0 0 ${Math.round(parseFloat(s))} ${Math.round(parseFloat(o))}`),n.attr("width","100%").attr("height","auto")})),t(a)):t(null)}))}),"svg"),MyAMS.registry.register((function(e){return new Promise((t=>{const a=Qe("legend.switcher",e);a.length>0?(a.each(((e,t)=>{const a=Qe(t),n=a.parent("fieldset"),s=a.data(),o=s.amsSwitcherState||s.amsState,r=s.amsSwitcherMinusClass||s.amsMinusClass||"chevron-down",i=s.amsSwitcherPlusClass||s.amsPlusClass||"chevron-right";if(!s.amsSwitcher){const e={veto:!1};if(a.trigger("before-init.ams.switcher",[a,s,e]),e.veto)return;Qe(`<i class="fa fa-fw fa-${"open"===o?r:i} mr-2"></i>`).prependTo(a),a.on("click",(e=>{e.preventDefault();const t={};if(a.trigger("before-switch.ams.switcher",[a,t]),!t.veto)if(n.hasClass("switched")){n.removeClass("switched"),MyAMS.core.switchIcon(Qe("i",a),i,r),a.trigger("opened.ams.switcher",[a]);const e=a.attr("id");e&&Qe(`legend.switcher[data-ams-switcher-sync="${e}"]`,n).each(((e,t)=>{const a=Qe(t);a.parents("fieldset").hasClass("switched")&&a.click()}))}else n.addClass("switched"),MyAMS.core.switchIcon(Qe("i",a),r,i),a.trigger("closed.ams.switcher",[a])})),"open"!==o&&n.addClass("switched"),a.trigger("after-init.ams.switcher",[a]),a.data("ams-switcher",!0)}})),t(a)):t(null)}))}),"switcher"),MyAMS.registry.register((function e(t){return new Promise(((a,n)=>{const s=Qe(".tinymce",t);s.length>0?MyAMS.require("ajax","i18n").then((()=>{const t=`${MyAMS.env.baseURL}../ext/tinymce${MyAMS.env.devmode?"/dev":""}`;MyAMS.ajax.check(window.tinymce,`${t}/tinymce${MyAMS.env.extext}.js`).then((o=>{const r=[];o&&(e.baseURL=t,e.suffix=MyAMS.env.extext,r.push(MyAMS.core.getScript(`${t}/jquery.tinymce.min.js`)),r.push(MyAMS.core.getScript(`${t}/themes/silver/theme${MyAMS.env.extext}.js`)),Qe(document).on("focusin",(e=>{Qe(e.target).closest(".tox-tinymce, .tox-tinymce-aux, .moxman-window, .tam-assetmanager-root").length&&e.stopImmediatePropagation()})),Qe(document).on("clear.ams.content",((e,t,a)=>{Qe(".tinymce",a).each(((e,t)=>{const a=Qe(t).attr("id"),n=window.tinymce.get(a);null!==n&&n.remove()}))}))),Qe.when.apply(Qe,r).then((()=>{s.each(((e,a)=>{const n=Qe(a),s=n.data(),o={selector:`textarea#${n.attr("id")}`,base_url:t,theme:s.amsTinymceTheme||s.amsTheme||"silver",language:MyAMS.i18n.language,menubar:!1!==s.amsTinymceMenubar&&!1!==s.amsMenubar,statusbar:!1!==s.amsTinymceStatusbar&&!1!==s.amsStatusbar,plugins:s.amsTinymcePlugins||s.amsPlugins||["advlist autosave autolink lists link charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime nonbreaking save table contextmenu directionality","emoticons paste textcolor colorpicker textpattern autoresize"],toolbar:s.amsTinymceToolbar||s.amsToolbar,toolbar1:!1!==s.amsTinymceToolbar1&&!1!==s.amsToolbar1&&(s.amsTinymceToolbar1||s.amsToolbar1||"undo redo | pastetext | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent"),toolbar2:!1!==s.amsTinymceToolbar2&&!1!==s.amsToolbar2&&(s.amsTinymceToolbar2||s.amsToolbar2||"forecolor backcolor emoticons | charmap link image media | fullscreen preview print | code"),content_css:s.amsTinymceContentCss||s.amsContentCss,formats:s.amsTinymceFormats||s.amsFormats,style_formats:s.amsTinymceStyleFormats||s.amsStyleFormats,block_formats:s.amsTinymceBlockFormats||s.amsBlockFormats,valid_classes:s.amsTinymceValidClasses||s.amsValidClasses,relative_urls:!1,remove_script_host:!1,convert_urls:!1,image_advtab:!0,image_list:MyAMS.core.getFunctionByName(s.amsTinymceImageList||s.amsImageList)||s.amsTinymceImageList||s.amsImageList,image_class_list:s.amsTinymceImageClassList||s.amsImageClassList,link_list:MyAMS.core.getFunctionByName(s.amsTinymceLinkList||s.amsLinkList)||s.amsTinymceLinkList||s.amsLinkList,link_class_list:s.amsTinymceLinkClassList||s.amsLinkClassList,paste_as_text:void 0===s.amsTinymcePasteAsText&&void 0===s.amsPasteAsText||s.amsTinymcePasteAsText||s.amsPasteAsText,paste_auto_cleanup_on_paste:void 0===s.amsTinymcePasteAutoCleanup&&void 0===s.amsPasteAutoCleanup||s.amsTinymcePasteAutoCleanup||s.amsPasteAutoCleanup,paste_strip_class_attributes:s.amsTinymcePasteStripClassAttributes||s.amsPasteStripClassAttributes||"all",paste_remove_spans:void 0===s.amsTinymcePasteRemoveSpans&&void 0===s.amsPasteRemoveSpans||s.amsTinymcePasteRemoveSpans||s.amsPasteRemoveSpans,paste_remove_styles:void 0===s.amsTinymcePasteRemoveStyles||void 0===s.amsPasteRemoveStyles||s.amsTinymcePasteRemoveStyles||s.amsPasteRemoveStyles,height:s.amsTinymceHeight||s.amsHeight||50,min_height:50,resize:!0,autoresize_min_height:50,autoresize_max_height:500},r=s.amsTinymceExternalPlugins||s.amsExternalPlugins;if(r){const e=r.split(/\s+/);for(const t of e){const e=n.data(`ams-tinymce-plugin-${t}`)||n.data(`ams-plugin-${t}`);window.tinymce.PluginManager.load(t,MyAMS.core.getSource(e))}}let i=Qe.extend({},o,s.amsTinymceOptions||s.amsOptions);i=MyAMS.core.executeFunctionByName(s.amsTinymceInitCallback||s.amsInit,document,n,i)||i;const c={veto:!1};n.trigger("before-init.ams.tinymce",[n,i,c]),c.veto||setTimeout((()=>{const e=n.tinymce(i);MyAMS.core.executeFunctionByName(s.amsTinymceAfterInitCallback||s.amsAfterInit,document,n,e,i),n.trigger("after-init.ams.tinymce",[n,i])}),250)})),a(s)}),n)}),n)}),n):a(null)}))}),"tinymce"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe(".treeview",e);n.length>0?MyAMS.require("ajax").then((()=>{MyAMS.ajax.check(Qe.fn.treview,`${MyAMS.env.baseURL}../ext/bootstrap-treeview${MyAMS.env.extext}.js`).then((e=>{const s=[];e&&s.push(MyAMS.core.getCSS(`${MyAMS.env.baseURL}../../css/ext/bootstrap-treeview${MyAMS.env.extext}.css`,"treeview")),Qe.when.apply(Qe,s).then((()=>{n.each(((e,t)=>{const a=Qe(t),n=a.data(),s={data:n.amsTreeviewData,levels:n.amsTreeviewLevels,injectStyle:n.amsTreeviewInjectStyle,expandIcon:n.amsTreeviewExpandIcon||"far fa-fw fa-plus-square",collapseIcon:n.amsTreeviewCollaspeIcon||"far fa-fw fa-minus-square",emptyIcon:n.amsTreeviewEmptyIcon,nodeIcon:n.amsTreeviewNodeIcon,selectedIcon:n.amsTreeviewSelectedIcon,checkedIcon:n.amsTreeviewCheckedIcon||"far fa-fw fa-check-square",uncheckedIcon:n.amsTreeviewUncheckedIcon||"far fa-fw fa-square",color:n.amsTreeviewColor,backColor:n.amsTreeviewBackColor,borderColor:n.amsTreeviewBorderColor,onHoverColor:n.amsTreeviewHoverColor,selectedColor:n.amsTreeviewSelectedColor,selectedBackColor:n.amsTreeviewSelectedBackColor,unselectableColor:n.amsTreeviewUnselectableColor||"rgba(1,1,1,0.25)",unselectableBackColor:n.amsTreeviewUnselectableBackColor||"rgba(1,1,1,0.25)",enableLinks:n.amsTreeviewEnableLinks,highlightSelected:n.amsTreeviewHighlightSelected,highlightSearchResults:n.amsTreeviewhighlightSearchResults,showBorder:n.amsTreeviewShowBorder,showIcon:n.amsTreeviewShowIcon,showCheckbox:n.amsTreeviewShowCheckbox,showTags:n.amsTreeviewShowTags,toggleUnselectable:n.amsTreeviewToggleUnselectable,multiSelect:n.amsTreeviewMultiSelect,onNodeChecked:MyAMS.core.getFunctionByName(n.amsTreeviewNodeChecked),onNodeCollapsed:MyAMS.core.getFunctionByName(n.amsTreeviewNodeCollapsed),onNodeDisabled:MyAMS.core.getFunctionByName(n.amsTreeviewNodeDisabled),onNodeEnabled:MyAMS.core.getFunctionByName(n.amsTreeviewNodeEnabled),onNodeExpanded:MyAMS.core.getFunctionByName(n.amsTreeviewNodeExpanded),onNodeSelected:MyAMS.core.getFunctionByName(n.amsTreeviewNodeSelected),onNodeUnchecked:MyAMS.core.getFunctionByName(n.amsTreeviewNodeUnchecked),onNodeUnselected:MyAMS.core.getFunctionByName(n.amsTreeviewNodeUnselected),onSearchComplete:MyAMS.core.getFunctionByName(n.amsTreeviewSearchComplete),onSearchCleared:MyAMS.core.getFunctionByName(n.amsTreeviewSearchCleared)};let o=Qe.extend({},s,n.amsTreeviewOptions);o=MyAMS.core.executeFunctionByName(n.amsTreeviewInitCallback||n.amsInit,document,a,o)||o;const r={veto:!1};if(a.trigger("before-init.ams.treeview",[a,o,r]),r.veto)return;const i=a.treeview(o);MyAMS.core.executeFunctionByName(n.amsTreeviewAfterInitCallback||n.amsAfterInit,document,a,i,o),a.trigger("after-init.ams.treeview",[a,i])})),t(n)}),a)}),a)}),a):t(null)}))}),"treeview"),MyAMS.registry.register((function(e){return new Promise(((t,a)=>{const n=Qe("form:not([novalidate])",e);n.length>0&&MyAMS.require("ajax","i18n").then((()=>{MyAMS.ajax.check(Qe.fn.validate,`${MyAMS.env.baseURL}../ext/validate/jquery-validate${MyAMS.env.extext}.js`).then((e=>{e&&"en"!==MyAMS.i18n.language&&MyAMS.core.getScript(`${MyAMS.env.baseURL}../ext/validate/i18n/messages_${MyAMS.i18n.language}${MyAMS.env.extext}.js`).then((()=>{})),n.each(((e,t)=>{const a=Qe(t),n=a.data(),s={ignore:null,invalidHandler:MyAMS.core.getFunctionByName(n.amsValidateInvalidHandler)||((e,t)=>{Qe("span.is-invalid",a).remove(),Qe(".is-invalid",a).removeClass("is-invalid");for(const e of t.errorList){const t=Qe(e.element),a=t.parents(".tab-pane");t.parents("fieldset.switched").each(((e,t)=>{Qe("legend.switcher",t).click()})),a.each(((e,t)=>{const a=Qe(t),n=a.parents(".tab-content").siblings(".nav-tabs");Qe(`li:nth-child(${a.index()+1})`,n).addClass("is-invalid"),Qe("li.is-invalid:first a",n).click()}))}}),errorElement:n.amsValidateErrorElement||"span",errorClass:n.amsValidateErrorClass||"is-invalid",errorPlacement:MyAMS.core.getFunctionByName(n.amsValidateErrorPlacement)||((e,t)=>{e.addClass("invalid-feedback"),t.closest(".form-widget").append(e)}),submitHandler:MyAMS.core.getFunctionByName(n.amsValidateSubmitHandler)||(void 0!==a.attr("data-async")?()=>{MyAMS.require("form").then((()=>{MyAMS.form.submit(a)}))}:()=>{a.get(0).submit()})};Qe("[data-ams-validate-rules]",a).each(((e,t)=>{0===e&&(s.rules={}),s.rules[Qe(t).attr("name")]=Qe(t).data("ams-validate-rules")})),Qe("[data-ams-validate-messages]",a).each(((e,t)=>{0===e&&(s.messages={}),s.messages[Qe(t).attr("name")]=Qe(t).data("ams-validate-messages")}));let o=Qe.extend({},s,n.amsValidateOptions||n.amsOptions);o=MyAMS.core.executeFunctionByName(n.amsValidateInitCallback||n.amsInit,document,a,o)||o;const r={veto:!1};if(a.trigger("before-init.ams.validate",[a,o,r]),r.veto)return;const i=a.validate(o);MyAMS.core.executeFunctionByName(n.amsValidateAfterInitCallback||n.amsAfterInit,document,a,i,o),a.trigger("after-init.ams.validate",[a,i])})),t(n)}),a)}),a)}))}),"validate"),MyAMS.config.modules.push("plugins"),MyAMS.env.bundle||console.debug("MyAMS: plugins module loaded...")),p.$.extend(p,{require:function(...e){return new Promise(((t,a)=>{const n=[],s=[],o=MyAMS.config.modules;for(const t of e)if("string"==typeof t)o.indexOf(t)<0&&(n.push(t),s.extendWith(M(t)));else if(g.isArray(t))for(const e of t)o.indexOf(e)<0&&(n.push(e),s.extendWith(M(e)));else for(const[e,a]of Object.entries(t))o.indexOf(e)<0&&(n.push(e),s.extendWith(M(a,e)));g.when.apply(g,s).then((()=>{for(const e of n)o.indexOf(e)<0&&(o.push(e),MyAMS.core.executeFunctionByName(`MyAMS.${e}.init`));t()}),(()=>{a(`Can't load requested modules (${n})!`)}))}))},ajax:A,alert:q,callbacks:je,clipboard:Re,container:Fe,datatable:Oe,error:y,events:ke,form:ae,graph:Be,helpers:De,i18n:w,jsonrpc:Ke,menu:Ue,modal:Z,nav:F,notifications:Ve,skin:I,stats:Xe,tree:Je,xmlrpc:Ye}),!1!==p.$("html").data("ams-init")&&function(e){e.extend(String.prototype,{camelCase:function(){return this?this.replace(/-(.)/g,((e,t)=>t.toUpperCase())):this},deCase:function(){return this?this.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)):this},initLowerCase:function(){return this?this.charAt(0).toLowerCase()+this.slice(1):this},unserialize:function(){if(!this)return this;const e=decodeURIComponent(this).split("&"),t={};for(const a of e){const[e,n]=a.split("=",2);t[e]=n}return t}}),e.extend(Array.prototype,{extendWith:function(e){for(const t of e)this.push(t)}}),e.extend(e,{extendPrefix:function(e,t,a,...n){for(const s of n)for(const[n,o]of Object.entries(s))n.startsWith(t)&&(e[n.substring(t.length).initLowerCase()]=null===a?o:a(o));return e},extendOnly:function(e,t,...a){for(const n of a)for(const[a,s]of Object.entries(n))Object.prototype.hasOwnProperty.call(e,a)&&(e[a]=null===t?s:t(s));return e}}),e.fn.extend({exists:function(){return e(this).length>0},objectOrParentWithClass:function(e){return this.hasClass(e)?this:this.parents(`.${e}`)},listattr:function(t){const a=[];return this.each(((n,s)=>{a.push(e(s).attr(t))})),a},style:function(e,t,a){let n=this;return this.each(((s,o)=>{if(void 0===o)return!1;const r=o.style;return void 0===e?(n=r,!1):void 0===t?(n=r.getPropertyValue(e),!1):(a=void 0!==a?a:"",void r.setProperty(e,t,a))})),n},removeClassPrefix:function(t){return this.each((function(a,n){const s=n.className.split(/\s+/).map((e=>e.startsWith(t)?"":e));n.className=e.trim(s.join(" "))})),this}}),e.expr[":"].hasvalue=function(t,a,n){return""!==e(t).val()},e.expr[":"].econtains=function(t,a,n){return(t.textContent||t.innerText||e(t).text()||"").toLowerCase()===n[3].toLowerCase()},e.expr[":"].withtext=function(t,a,n){return(t.textContent||t.innerText||e(t).text()||"")===n[3]},e.expr[":"].parents=function(t,a,n){return e(t).parents(n[3]).length>0},e(document).ready((()=>{const t=e("html");t.removeClass("no-js").addClass("js"),u.core.executeFunctionByName(t.data("ams-init-page")||u.config.initPage)}))}(p.$)}()}();